{"version":3,"sources":["webpack:///status/media_gallery-b68c5fcb7e6aa7ef7fc5.js","webpack:///./app/javascript/mastodon/components/media_gallery.js"],"names":["webpackJsonp","180","module","__webpack_exports__","__webpack_require__","Object","defineProperty","value","d","MediaGallery","_class","_temp2","_class2","_class3","_temp4","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_jsx__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_jsx___default","n","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_possibleConstructorReturn__","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_possibleConstructorReturn___default","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_inherits__","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_inherits___default","__WEBPACK_IMPORTED_MODULE_4_react__","__WEBPACK_IMPORTED_MODULE_4_react___default","__WEBPACK_IMPORTED_MODULE_5_prop_types__","__WEBPACK_IMPORTED_MODULE_5_prop_types___default","__WEBPACK_IMPORTED_MODULE_6__icon_button__","__WEBPACK_IMPORTED_MODULE_7_react_intl__","__WEBPACK_IMPORTED_MODULE_8__is_mobile__","messages","toggle_visible","id","defaultMessage","Item","_React$PureComponent","_temp","_this","_ret","this","_len","arguments","length","args","Array","_key","call","apply","concat","handleMouseEnter","e","hoverToPlay","target","play","handleMouseLeave","pause","currentTime","handleClick","_this$props","props","index","onClick","context","router","button","preventDefault","stopPropagation","prototype","_props","attachment","autoPlayGif","get","render","_props2","size","width","height","top","left","bottom","right","thumbnail","previewUrl","previewWidth","getIn","originalUrl","originalWidth","hasSize","srcSet","sizes","className","href","src","alt","autoPlay","role","onMouseEnter","onMouseLeave","loop","muted","style","a","PureComponent","contextTypes","object","defaultProps","_React$PureComponent2","_temp3","_this2","_ret2","_len2","_key2","state","visible","sensitive","handleOpen","setState","onOpenMedia","media","componentWillReceiveProps","nextProps","_this3","_props3","intl","children","take","map","i","warning","title","formatMessage","icon","overlay"],"mappings":"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","file":"status/media_gallery-b68c5fcb7e6aa7ef7fc5.js","sourcesContent":["webpackJsonp([27],{\n\n/***/ 180:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return MediaGallery; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_jsx__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_jsx___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_jsx__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_inherits__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_prop_types__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_prop_types___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_prop_types__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__icon_button__ = __webpack_require__(25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_react_intl__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__is_mobile__ = __webpack_require__(41);\n\n\n\n\n\nvar _class, _temp2, _class2, _class3, _temp4;\n\n\n\n\n\n\n\n\nvar messages = Object(__WEBPACK_IMPORTED_MODULE_7_react_intl__[\"g\" /* defineMessages */])({\n  toggle_visible: {\n    'id': 'media_gallery.toggle_visible',\n    'defaultMessage': 'Toggle visibility'\n  }\n});\n\nvar Item = (_temp2 = _class = function (_React$PureComponent) {\n  __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_inherits___default()(Item, _React$PureComponent);\n\n  function Item() {\n    var _temp, _this, _ret;\n\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, Item);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_possibleConstructorReturn___default()(this, _React$PureComponent.call.apply(_React$PureComponent, [this].concat(args))), _this), _this.handleMouseEnter = function (e) {\n      if (_this.hoverToPlay()) {\n        e.target.play();\n      }\n    }, _this.handleMouseLeave = function (e) {\n      if (_this.hoverToPlay()) {\n        e.target.pause();\n        e.target.currentTime = 0;\n      }\n    }, _this.handleClick = function (e) {\n      var _this$props = _this.props,\n          index = _this$props.index,\n          onClick = _this$props.onClick;\n\n\n      if (_this.context.router && e.button === 0) {\n        e.preventDefault();\n        onClick(index);\n      }\n\n      e.stopPropagation();\n    }, _temp), __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_possibleConstructorReturn___default()(_this, _ret);\n  }\n\n  Item.prototype.hoverToPlay = function hoverToPlay() {\n    var _props = this.props,\n        attachment = _props.attachment,\n        autoPlayGif = _props.autoPlayGif;\n\n    return !autoPlayGif && attachment.get('type') === 'gifv';\n  };\n\n  Item.prototype.render = function render() {\n    var _props2 = this.props,\n        attachment = _props2.attachment,\n        index = _props2.index,\n        size = _props2.size;\n\n\n    var width = 50;\n    var height = 100;\n    var top = 'auto';\n    var left = 'auto';\n    var bottom = 'auto';\n    var right = 'auto';\n\n    if (size === 1) {\n      width = 100;\n    }\n\n    if (size === 4 || size === 3 && index > 0) {\n      height = 50;\n    }\n\n    if (size === 2) {\n      if (index === 0) {\n        right = '2px';\n      } else {\n        left = '2px';\n      }\n    } else if (size === 3) {\n      if (index === 0) {\n        right = '2px';\n      } else if (index > 0) {\n        left = '2px';\n      }\n\n      if (index === 1) {\n        bottom = '2px';\n      } else if (index > 1) {\n        top = '2px';\n      }\n    } else if (size === 4) {\n      if (index === 0 || index === 2) {\n        right = '2px';\n      }\n\n      if (index === 1 || index === 3) {\n        left = '2px';\n      }\n\n      if (index < 2) {\n        bottom = '2px';\n      } else {\n        top = '2px';\n      }\n    }\n\n    var thumbnail = '';\n\n    if (attachment.get('type') === 'image') {\n      var previewUrl = attachment.get('preview_url');\n      var previewWidth = attachment.getIn(['meta', 'small', 'width']);\n\n      var originalUrl = attachment.get('url');\n      var originalWidth = attachment.getIn(['meta', 'original', 'width']);\n\n      var hasSize = typeof originalWidth === 'number' && typeof previewWidth === 'number';\n\n      var srcSet = hasSize ? originalUrl + ' ' + originalWidth + 'w, ' + previewUrl + ' ' + previewWidth + 'w' : null;\n      var sizes = hasSize ? '(min-width: 1025px) ' + 320 * (width / 100) + 'px, ' + width + 'vw' : null;\n\n      thumbnail = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_jsx___default()('a', {\n        className: 'media-gallery__item-thumbnail',\n        href: attachment.get('remote_url') || originalUrl,\n        onClick: this.handleClick,\n        target: '_blank'\n      }, void 0, __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_jsx___default()('img', {\n        src: previewUrl,\n        srcSet: srcSet,\n        sizes: sizes,\n        alt: ''\n      }));\n    } else if (attachment.get('type') === 'gifv') {\n      var autoPlay = !Object(__WEBPACK_IMPORTED_MODULE_8__is_mobile__[\"a\" /* isIOS */])() && this.props.autoPlayGif;\n\n      thumbnail = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_jsx___default()('div', {\n        className: 'media-gallery__gifv ' + (autoPlay ? 'autoplay' : '')\n      }, void 0, __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_jsx___default()('video', {\n        className: 'media-gallery__item-gifv-thumbnail',\n        role: 'application',\n        src: attachment.get('url'),\n        onClick: this.handleClick,\n        onMouseEnter: this.handleMouseEnter,\n        onMouseLeave: this.handleMouseLeave,\n        autoPlay: autoPlay,\n        loop: true,\n        muted: true\n      }), __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_jsx___default()('span', {\n        className: 'media-gallery__gifv__label'\n      }, void 0, 'GIF'));\n    }\n\n    return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_jsx___default()('div', {\n      className: 'media-gallery__item',\n      style: { left: left, top: top, right: right, bottom: bottom, width: width + '%', height: height + '%' }\n    }, attachment.get('id'), thumbnail);\n  };\n\n  return Item;\n}(__WEBPACK_IMPORTED_MODULE_4_react___default.a.PureComponent), _class.contextTypes = {\n  router: __WEBPACK_IMPORTED_MODULE_5_prop_types___default.a.object\n}, _class.defaultProps = {\n  autoPlayGif: false\n}, _temp2);\n\nvar MediaGallery = Object(__WEBPACK_IMPORTED_MODULE_7_react_intl__[\"h\" /* injectIntl */])(_class2 = (_temp4 = _class3 = function (_React$PureComponent2) {\n  __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_inherits___default()(MediaGallery, _React$PureComponent2);\n\n  function MediaGallery() {\n    var _temp3, _this2, _ret2;\n\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, MediaGallery);\n\n    for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    return _ret2 = (_temp3 = (_this2 = __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_possibleConstructorReturn___default()(this, _React$PureComponent2.call.apply(_React$PureComponent2, [this].concat(args))), _this2), _this2.state = {\n      visible: !_this2.props.sensitive\n    }, _this2.handleOpen = function () {\n      _this2.setState({ visible: !_this2.state.visible });\n    }, _this2.handleClick = function (index) {\n      _this2.props.onOpenMedia(_this2.props.media, index);\n    }, _temp3), __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_possibleConstructorReturn___default()(_this2, _ret2);\n  }\n\n  MediaGallery.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n    if (nextProps.sensitive !== this.props.sensitive) {\n      this.setState({ visible: !nextProps.sensitive });\n    }\n  };\n\n  MediaGallery.prototype.render = function render() {\n    var _this3 = this;\n\n    var _props3 = this.props,\n        media = _props3.media,\n        intl = _props3.intl,\n        sensitive = _props3.sensitive;\n\n\n    var children = void 0;\n\n    if (!this.state.visible) {\n      var warning = void 0;\n\n      if (sensitive) {\n        warning = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_jsx___default()(__WEBPACK_IMPORTED_MODULE_7_react_intl__[\"b\" /* FormattedMessage */], {\n          id: 'status.sensitive_warning',\n          defaultMessage: 'Sensitive content'\n        });\n      } else {\n        warning = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_jsx___default()(__WEBPACK_IMPORTED_MODULE_7_react_intl__[\"b\" /* FormattedMessage */], {\n          id: 'status.media_hidden',\n          defaultMessage: 'Media hidden'\n        });\n      }\n\n      children = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_jsx___default()('button', {\n        className: 'media-spoiler',\n        onClick: this.handleOpen\n      }, void 0, __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_jsx___default()('span', {\n        className: 'media-spoiler__warning'\n      }, void 0, warning), __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_jsx___default()('span', {\n        className: 'media-spoiler__trigger'\n      }, void 0, __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_jsx___default()(__WEBPACK_IMPORTED_MODULE_7_react_intl__[\"b\" /* FormattedMessage */], {\n        id: 'status.sensitive_toggle',\n        defaultMessage: 'Click to view'\n      })));\n    } else {\n      var size = media.take(4).size;\n      children = media.take(4).map(function (attachment, i) {\n        return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_jsx___default()(Item, {\n          onClick: _this3.handleClick,\n          attachment: attachment,\n          autoPlayGif: _this3.props.autoPlayGif,\n          index: i,\n          size: size\n        }, attachment.get('id'));\n      });\n    }\n\n    return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_jsx___default()('div', {\n      className: 'media-gallery',\n      style: { height: this.props.height + 'px' }\n    }, void 0, __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_jsx___default()('div', {\n      className: 'spoiler-button ' + (this.state.visible ? 'spoiler-button--visible' : '')\n    }, void 0, __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_jsx___default()(__WEBPACK_IMPORTED_MODULE_6__icon_button__[\"a\" /* default */], {\n      title: intl.formatMessage(messages.toggle_visible),\n      icon: this.state.visible ? 'eye' : 'eye-slash',\n      overlay: true,\n      onClick: this.handleOpen\n    })), children);\n  };\n\n  return MediaGallery;\n}(__WEBPACK_IMPORTED_MODULE_4_react___default.a.PureComponent), _class3.defaultProps = {\n  autoPlayGif: false\n}, _temp4)) || _class2;\n\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// status/media_gallery-b68c5fcb7e6aa7ef7fc5.js","import React from 'react';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport PropTypes from 'prop-types';\nimport IconButton from './icon_button';\nimport { defineMessages, injectIntl, FormattedMessage } from 'react-intl';\nimport { isIOS } from '../is_mobile';\n\nconst messages = defineMessages({\n  toggle_visible: { id: 'media_gallery.toggle_visible', defaultMessage: 'Toggle visibility' },\n});\n\nclass Item extends React.PureComponent {\n\n  static contextTypes = {\n    router: PropTypes.object,\n  };\n\n  static propTypes = {\n    attachment: ImmutablePropTypes.map.isRequired,\n    index: PropTypes.number.isRequired,\n    size: PropTypes.number.isRequired,\n    onClick: PropTypes.func.isRequired,\n    autoPlayGif: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    autoPlayGif: false,\n  };\n\n  handleMouseEnter = (e) => {\n    if (this.hoverToPlay()) {\n      e.target.play();\n    }\n  }\n\n  handleMouseLeave = (e) => {\n    if (this.hoverToPlay()) {\n      e.target.pause();\n      e.target.currentTime = 0;\n    }\n  }\n\n  hoverToPlay () {\n    const { attachment, autoPlayGif } = this.props;\n    return !autoPlayGif && attachment.get('type') === 'gifv';\n  }\n\n  handleClick = (e) => {\n    const { index, onClick } = this.props;\n\n    if (this.context.router && e.button === 0) {\n      e.preventDefault();\n      onClick(index);\n    }\n\n    e.stopPropagation();\n  }\n\n  render () {\n    const { attachment, index, size } = this.props;\n\n    let width  = 50;\n    let height = 100;\n    let top    = 'auto';\n    let left   = 'auto';\n    let bottom = 'auto';\n    let right  = 'auto';\n\n    if (size === 1) {\n      width = 100;\n    }\n\n    if (size === 4 || (size === 3 && index > 0)) {\n      height = 50;\n    }\n\n    if (size === 2) {\n      if (index === 0) {\n        right = '2px';\n      } else {\n        left = '2px';\n      }\n    } else if (size === 3) {\n      if (index === 0) {\n        right = '2px';\n      } else if (index > 0) {\n        left = '2px';\n      }\n\n      if (index === 1) {\n        bottom = '2px';\n      } else if (index > 1) {\n        top = '2px';\n      }\n    } else if (size === 4) {\n      if (index === 0 || index === 2) {\n        right = '2px';\n      }\n\n      if (index === 1 || index === 3) {\n        left = '2px';\n      }\n\n      if (index < 2) {\n        bottom = '2px';\n      } else {\n        top = '2px';\n      }\n    }\n\n    let thumbnail = '';\n\n    if (attachment.get('type') === 'image') {\n      const previewUrl = attachment.get('preview_url');\n      const previewWidth = attachment.getIn(['meta', 'small', 'width']);\n\n      const originalUrl = attachment.get('url');\n      const originalWidth = attachment.getIn(['meta', 'original', 'width']);\n\n      const hasSize = typeof originalWidth === 'number' && typeof previewWidth === 'number';\n\n      const srcSet = hasSize ? `${originalUrl} ${originalWidth}w, ${previewUrl} ${previewWidth}w` : null;\n      const sizes = hasSize ? `(min-width: 1025px) ${320 * (width / 100)}px, ${width}vw` : null;\n\n      thumbnail = (\n        <a\n          className='media-gallery__item-thumbnail'\n          href={attachment.get('remote_url') || originalUrl}\n          onClick={this.handleClick}\n          target='_blank'\n        >\n          <img src={previewUrl} srcSet={srcSet} sizes={sizes} alt='' />\n        </a>\n      );\n    } else if (attachment.get('type') === 'gifv') {\n      const autoPlay = !isIOS() && this.props.autoPlayGif;\n\n      thumbnail = (\n        <div className={`media-gallery__gifv ${autoPlay ? 'autoplay' : ''}`}>\n          <video\n            className='media-gallery__item-gifv-thumbnail'\n            role='application'\n            src={attachment.get('url')}\n            onClick={this.handleClick}\n            onMouseEnter={this.handleMouseEnter}\n            onMouseLeave={this.handleMouseLeave}\n            autoPlay={autoPlay}\n            loop\n            muted\n          />\n\n          <span className='media-gallery__gifv__label'>GIF</span>\n        </div>\n      );\n    }\n\n    return (\n      <div className='media-gallery__item' key={attachment.get('id')} style={{ left: left, top: top, right: right, bottom: bottom, width: `${width}%`, height: `${height}%` }}>\n        {thumbnail}\n      </div>\n    );\n  }\n\n}\n\n@injectIntl\nexport default class MediaGallery extends React.PureComponent {\n\n  static propTypes = {\n    sensitive: PropTypes.bool,\n    media: ImmutablePropTypes.list.isRequired,\n    height: PropTypes.number.isRequired,\n    onOpenMedia: PropTypes.func.isRequired,\n    intl: PropTypes.object.isRequired,\n    autoPlayGif: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    autoPlayGif: false,\n  };\n\n  state = {\n    visible: !this.props.sensitive,\n  };\n\n  componentWillReceiveProps (nextProps) {\n    if (nextProps.sensitive !== this.props.sensitive) {\n      this.setState({ visible: !nextProps.sensitive });\n    }\n  }\n\n  handleOpen = () => {\n    this.setState({ visible: !this.state.visible });\n  }\n\n  handleClick = (index) => {\n    this.props.onOpenMedia(this.props.media, index);\n  }\n\n  render () {\n    const { media, intl, sensitive } = this.props;\n\n    let children;\n\n    if (!this.state.visible) {\n      let warning;\n\n      if (sensitive) {\n        warning = <FormattedMessage id='status.sensitive_warning' defaultMessage='Sensitive content' />;\n      } else {\n        warning = <FormattedMessage id='status.media_hidden' defaultMessage='Media hidden' />;\n      }\n\n      children = (\n        <button className='media-spoiler' onClick={this.handleOpen}>\n          <span className='media-spoiler__warning'>{warning}</span>\n          <span className='media-spoiler__trigger'><FormattedMessage id='status.sensitive_toggle' defaultMessage='Click to view' /></span>\n        </button>\n      );\n    } else {\n      const size = media.take(4).size;\n      children = media.take(4).map((attachment, i) => <Item key={attachment.get('id')} onClick={this.handleClick} attachment={attachment} autoPlayGif={this.props.autoPlayGif} index={i} size={size} />);\n    }\n\n    return (\n      <div className='media-gallery' style={{ height: `${this.props.height}px` }}>\n        <div className={`spoiler-button ${this.state.visible ? 'spoiler-button--visible' : ''}`}>\n          <IconButton title={intl.formatMessage(messages.toggle_visible)} icon={this.state.visible ? 'eye' : 'eye-slash'} overlay onClick={this.handleOpen} />\n        </div>\n\n        {children}\n      </div>\n    );\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/javascript/mastodon/components/media_gallery.js"],"sourceRoot":""}