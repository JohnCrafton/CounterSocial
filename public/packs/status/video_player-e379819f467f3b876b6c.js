webpackJsonp([26],{793:function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),t.d(i,"default",function(){return w});var a,s,o,d=t(1),n=t.n(d),l=t(2),r=t.n(l),v=t(3),p=t.n(v),h=t(4),u=t.n(h),c=t(0),g=t.n(c),m=t(5),_=t.n(m),y=t(25),f=t(7),b=t(41),x=Object(f.g)({toggle_sound:{id:"video_player.toggle_sound",defaultMessage:"Toggle sound"},toggle_visible:{id:"video_player.toggle_visible",defaultMessage:"Toggle visibility"},expand_video:{id:"video_player.expand",defaultMessage:"Expand video"}}),w=Object(f.h)((o=s=function(e){function i(){var t,a,s;r()(this,i);for(var o=arguments.length,d=Array(o),n=0;n<o;n++)d[n]=arguments[n];return t=a=p()(this,e.call.apply(e,[this].concat(d))),a.state={visible:!a.props.sensitive,preview:!0,muted:!0,hasAudio:!0,videoError:!1},a.handleClick=function(){a.setState({muted:!a.state.muted})},a.handleVideoClick=function(e){e.stopPropagation();var i=a.video;i.paused?i.play():i.pause()},a.handleOpen=function(){a.setState({preview:!a.state.preview})},a.handleVisibility=function(){a.setState({visible:!a.state.visible,preview:!0})},a.handleExpand=function(){a.video.pause(),a.props.onOpenVideo(a.props.media,a.video.currentTime)},a.setRef=function(e){a.video=e},a.handleLoadedData=function(){("WebkitAppearance"in document.documentElement.style&&0===a.video.audioTracks.length||!1===a.video.mozHasAudio)&&a.setState({hasAudio:!1})},a.handleVideoError=function(){a.setState({videoError:!0})},s=t,p()(a,s)}return u()(i,e),i.prototype.componentDidMount=function(){this.video&&(this.video.addEventListener("loadeddata",this.handleLoadedData),this.video.addEventListener("error",this.handleVideoError))},i.prototype.componentDidUpdate=function(){this.video&&(this.video.addEventListener("loadeddata",this.handleLoadedData),this.video.addEventListener("error",this.handleVideoError))},i.prototype.componentWillUnmount=function(){this.video&&(this.video.removeEventListener("loadeddata",this.handleLoadedData),this.video.removeEventListener("error",this.handleVideoError))},i.prototype.render=function(){var e=this.props,i=e.media,t=e.intl,a=e.width,s=e.height,o=e.sensitive,d=e.autoplay,l=n()("div",{className:"status__video-player-spoiler "+(this.state.visible?"status__video-player-spoiler--visible":"")},void 0,n()(y.a,{overlay:!0,title:t.formatMessage(x.toggle_visible),icon:this.state.visible?"eye":"eye-slash",onClick:this.handleVisibility})),r="";this.context.router&&(r=n()("div",{className:"status__video-player-expand"},void 0,n()(y.a,{overlay:!0,title:t.formatMessage(x.expand_video),icon:"expand",onClick:this.handleExpand})));var v="";return this.state.hasAudio&&(v=n()("div",{className:"status__video-player-mute"},void 0,n()(y.a,{overlay:!0,title:t.formatMessage(x.toggle_sound),icon:this.state.muted?"volume-off":"volume-up",onClick:this.handleClick}))),this.state.visible?this.state.preview&&!d?n()("button",{className:"media-spoiler-video",style:{width:a+"px",height:s+"px",backgroundImage:"url("+i.get("preview_url")+")"},onClick:this.handleOpen},void 0,l,n()("div",{className:"media-spoiler-video-play-icon"},void 0,n()("i",{className:"fa fa-play"}))):this.state.videoError?n()("div",{style:{width:a+"px",height:s+"px"},className:"video-error-cover"},void 0,n()("span",{className:"media-spoiler__warning"},void 0,n()(f.b,{id:"video_player.video_error",defaultMessage:"Video could not be played"}))):n()("div",{className:"status__video-player",style:{width:a+"px",height:s+"px"}},void 0,l,v,r,g.a.createElement("video",{className:"status__video-player-video",role:"button",tabIndex:"0",ref:this.setRef,src:i.get("url"),autoPlay:!Object(b.a)(),loop:!0,muted:this.state.muted,onClick:this.handleVideoClick})):o?n()("button",{style:{width:a+"px",height:s+"px",marginTop:"8px"},className:"media-spoiler",onClick:this.handleVisibility},void 0,l,n()("span",{className:"media-spoiler__warning"},void 0,n()(f.b,{id:"status.sensitive_warning",defaultMessage:"Sensitive content"})),n()("span",{className:"media-spoiler__trigger"},void 0,n()(f.b,{id:"status.sensitive_toggle",defaultMessage:"Click to view"}))):n()("button",{style:{width:a+"px",height:s+"px",marginTop:"8px"},className:"media-spoiler",onClick:this.handleVisibility},void 0,l,n()("span",{className:"media-spoiler__warning"},void 0,n()(f.b,{id:"status.media_hidden",defaultMessage:"Media hidden"})),n()("span",{className:"media-spoiler__trigger"},void 0,n()(f.b,{id:"status.sensitive_toggle",defaultMessage:"Click to view"})))},i}(g.a.PureComponent),s.contextTypes={router:_.a.object},s.defaultProps={width:239,height:110},a=o))||a}});
//# sourceMappingURL=video_player-e379819f467f3b876b6c.js.map