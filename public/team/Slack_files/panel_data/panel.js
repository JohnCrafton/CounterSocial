/**
 * Blur Copyright (c) 2008-2015 by Abine, Inc. All Rights Reserved.
 *
 * This software is the confidential and proprietary information
 * of Abine, Inc. ("Confidential Information"), subject
 * to the Non-Disclosure Agreement and/or License Agreement you entered
 * into with Abine. You shall use such Confidential Information only
 * in accordance with the terms of said Agreement(s). Abine makes
 * no representations or warranties about the suitability of the
 * software. The software is provided with ABSOLUTELY NO WARRANTY
 * and Abine will NOT BE LIABLE for ANY DAMAGES resulting from
 * the use of the software.
 *
 * Contact license@getabine.com with any license-related questions.
 *
 * https://www.abine.com
 * @license
 *
 */
ABINE_DNTME.define("abine/views/panelBase",["documentcloud/underscore","jquery","duckbone/core","abine/timer","models","abine/window","abine/contentMessenger","abine/timer","abine/config","abine/proxies"],function(e,t,a,n,i,r,o,s,l,c){var d=300,u={},p=a.View.extend({opacity:"1.0",initialize:function(){e.extend(this.events,{"mousedown #disableLink":"disableLink","mousedown .autoFillWith":"autoFillWith"}),a.View.prototype.initialize.apply(this,arguments)},adjustHeader:function(){var e=this.$(".newheader .b-link");if(!e.data("adjusted")){e.data("adjusted","yes");var t=e.position();t&&t.top<30&&(this.$(".newheader").addClass("singleLine"),this.trigger("resize",{extraWidth:50}))}},render:function(){return this.model?(this.renderTemplate(),s.setTimeout(e.bind(function(){this.adjustHeader(),this.trigger("render");var a=t("input, textarea",this.el);a.placeholder&&a.placeholder(),s.setTimeout(e.bind(this.maskPasswords,this),100)},this),50),this):this},autoResize:function(t){s.setTimeout(e.bind(function(){this.trigger("resize",t)},this),50)},triggerRender:function(){s.setTimeout(e.bind(function(){this.trigger("render")},this),50)},disableLink:function(e){e.preventDefault(),e.stopPropagation(),this.options.contentManager.disablePanelOnThisSite(),this.closePanel(e)},autoFillWith:function(e){this.ignoreBlur(!0),e.preventDefault(),e.stopPropagation(),this.options.contentManager.showAutoFillWith(this.options),this.closePanel(e,!0),this.trigger("remove")},ignoreBlur:function(e){return"undefined"==typeof e?!!this._ignoreBlur:void(e===!1?(this._ignoreBlur=!1,this.options.contentManager.ignoreBlur(this.options.strategyId,this.options.fieldId,!1)):(this._ignoreBlur=!0,this.options.contentManager.ignoreBlur(this.options.strategyId,this.options.fieldId,!0)))},focusField:function(){this.options.contentManager.focusField(this.options.strategyId,this.options.fieldId)},focusFieldWithIntent:function(e){this.options.contentManager.focusFieldWithIntent(this.options.strategyId,this.options.fieldId,e)},addFieldBorder:function(e){this.options.contentManager.messenger.sendToCS("CS","addFieldBorder",{strategyId:this.options.strategyId,fieldId:e})},removeFieldBorder:function(e){this.options.contentManager.messenger.sendToCS("CS","removeFieldBorder",{strategyId:this.options.strategyId,fieldId:e})},bindHeaderClose:function(){t(this.el).bind("mousedown",e.bind(function(e){this.ignoreBlur(!0);var a=t(e.target),n=a.data("highlight")||a.parent().data("highlight"),r="settings";if(n&&(["email","phone","card"].indexOf(n)>-1&&(r="masking"),["account","password"].indexOf(n)>-1&&(r="accounts"),["address","real_card"].indexOf(n)>-1&&(r="wallet")),a.hasClass("close-link")||a.parent().hasClass("close-link"))this.dataTypePanel()&&(this.options.contentManager.showFieldIconsOnThisSite(),this.options.contentManager.showFieldIcon(this.options.strategyId,this.options.fieldId,!0)),this.closePanel();else if(a.hasClass("b-link")||a.parent().hasClass("b-link"))"login_helper_panel"==this.options.el.className?c.webapp.openPage("/#/accounts/"+this.options.domain):this.options.contentManager.showToolbarPanel({page:"dashboard",highlight:n}),this.closePanel();else if(a.hasClass("logo-link")||a.parent().hasClass("logo-link"))c.webapp.openDashboard(),this.closePanel();else if(a.hasClass("close-icon")||a.hasClass("close-dd"))this.closePanel();else if(a.hasClass("settings-link")||a.parent().hasClass("settings-link")){var o=a.data("add-setting")||a.parent().data("add-setting");if(o){var s=new i.Preference;s.save({key:o,value:"true"}),this.options.contentManager.messenger.trigger("broadcast:preference:reload")}this.options.contentManager.showToolbarPanel({page:r,highlight:n}),this.closePanel()}},this))},dataTypePanel:function(){return!this.ignoreExplicitClose},bindKeyEvents:function(){this.options.contentManager.bindKeyEvents(this.options.strategyId,this.options.fieldId,this.doNotCloseOnTyping,e.bind(this.handleKeyEvents,this))},handleKeyEvents:function(e){"enter"==e?(this.selectedField||0===this.selectedField)&&this.trigger("enter"+this.selectedField,{selectedField:this.selectedField,preventDefault:function(){}},this.selectedField):"down"==e?this.highlightOption(this.selectedField||0===this.selectedField?this.selectedField+1:0):"up"==e?this.highlightOption(this.selectedField||0===this.selectedField?this.selectedField-1:-1):"close"==e&&(this.closePanel(),delete this.selectedField)},bindPanelTextInput:function(a){t(a).unbind("focus.dntme").bind("focus.dntme",e.bind(function(){n.clearTimeout(this._blurTimer),this.ignoreBlur(!0),n.setTimeout(e.bind(function(){this.ignoreBlur(!1)},this),500)},this)),t(a).unbind("blur.dntme").bind("blur.dntme",e.bind(function(){this._blurTimer=n.setTimeout(e.bind(function(){this.ignoreBlur()?this.focusField():(this.cleanupPanel(),this.closingOnBlur(),this.closePanel()),n.setTimeout(e.bind(function(){this.ignoreBlur(!1)},this),500)},this),500)},this))},bindBaseEvents:function(){this.bindHeaderClose(),this.bindKeyEvents()},cleanupPanel:function(){},closingOnBlur:function(){},highlightOption:function(a){var n=e(t(this.el).find(".mmKeyOption")).filter(function(e){return t(e).hasClass("mmKeyOption")&&"none"!==t(e).css("display")&&t(e).is("a")&&!t(e).hasClass("disabled")});a=(a+n.length)%n.length,(this.selectedField||0===this.selectedField)&&t(n[this.selectedField].children[0]).removeClass("hover"),t(n[a].children[0]).addClass("hover"),this.selectedField=a},applyFadingStyle:function(){var e=d/1e3+"s",t="opacity ease "+e+", margin-top ease "+e;this.el.style.transition=this.el.style.WebkitTransition=this.el.style.MozTransition=this.el.style.OTransition=this.el.style.MsTransition=t},fadeIn:function(){this.el.style.opacity="0.0",this.el.style.marginTop="50px",n.setTimeout(e.bind(function(){this.el.style.opacity=this.opacity,this.el.style.marginTop="0px"},this),100)},fadeOut:function(){try{this.el.style.opacity="1.0",this.el.style.marginTop="0px"}catch(e){}n.setTimeout(e.bind(function(){try{this.el.style.opacity="0.0",this.el.style.marginTop="50px"}catch(e){}},this),100);try{delete this.contentManager._currentPanelField}catch(e){}n.setTimeout(e.bind(function(){this.trigger("remove")},this),100+d)},getContentMessenger:function(){return this.messenger=this.messenger||ABINE_DNTME.contentMessenger||this.options&&this.options.contentManager&&this.options.contentManager.messenger||new o.ContentMessenger,this.messenger},triggerPanelFillEvent:function(e){this.getContentMessenger(),e.field.origin=e.origin;var a={disposableGUID:e.field.disposableGUID,name:e.field.name,origin:e.field.origin,dataType:e.field.dataType,accountId:e.accountId,value:e.field.value};e.field.element.setAttribute("abineOrigin",e.field.origin),t(this.options.formEl).attr("maskMeFilled","yes"),this.options.contentManager.triggerPanelFillEvent(this.options.formEl,a)},isVisible:function(e){try{return t(e).is(":visible")&&"hidden"!=t(e).css("visibility")}catch(e){}return!0},fillFields:function(e,t,a){this.options.contentManager.fillFields(e,this.options.strategyId,this.options.fieldId,t,a)},sendFeedbackEmail:function(e){this.options.contentManager.sendFeedbackEmail(this.options.strategyId,this.options.fieldId,e)},hidePanel:function(){this.trigger("hide")},removePanel:function(){this.trigger("remove")},closePanel:function(t){t&&t.preventDefault(),this.fadeOut(),n.setTimeout(e.bind(function(){this.options.contentManager.removePanels(this.options.contentManager.frameId||ABINE_DNTME.context,this.options.strategyId,this.options.fieldId)},this),0)},clickedInsideOfTarget:function(e,t){for(;t.parentNode&&t.id!=e;)t=t.parentNode;return t.id==e},performActions:function(t){this.getContentMessenger(),e.each(this.panelSectionActionMap[t.currentTarget.id],e.bind(function(e){if(e.target_id&&""!=e.target_id&&this.clickedInsideOfTarget(e.target_id,t.target)||e.target_id&&""==e.target_id||!e.target_id)if("open_registration_page"==e.name)this.getStarted(t,{id:this.options.dynamicPanel.id,action:e.name});else if("open_page"==e.name)c.securityManager.openPage(e.extra);else if("trigger_click"==e.name)this.messenger.send("update:panelActivity:click",{panelId:this.options.dynamicPanel.id});else if("trigger_conversion"==e.name)this.messenger.send("update:panelActivity:conversion",{panelId:this.options.dynamicPanel.id});else if("dismiss_panel"==e.name)this.options.dynamicPanel.field_type.indexOf("new-feature-added")!=-1||this.closePanel();else if("change_show_rate"==e.name)c.panelsModule.changePanelShowRate({panelId:this.options.dynamicPanel.id,extra:e.extra});else if("change_preference"==e.name){var a=new i.Preference;a.save(JSON.parse(e.extra))}else"no_action"==e.name||("open_plans_page"==e.name?this.openPlansPage("panelID"+this.options.dynamicPanel.id,null,{id:this.options.dynamicPanel.id,action:e.name}):"open_activate_cards_page"==e.name?this.openActivateCardsPage(null,{id:this.options.dynamicPanel.id,action:e.name}):"open_snowman_page"==e.name?this.openSnowmanPage(null,{id:this.options.dynamicPanel.id,action:e.name}):"open_new_premium_feature_added_page"==e.name&&this.openNewFeatureAdded(null,{id:this.options.dynamicPanel.id,action:e.name}))},this))},maskPasswords:function(){"Firefox"==ABINE_DNTME.config.browser&&(this.$("input[type=text]").each(function(e,t){t.setAttribute("autocomplete","off")}),this.$("input[type=password]").each(function(e,t){function a(){clearTimeout(i),i=setTimeout(function(){for(var e=n.value,a=0,i=[],r=[],o=t.value,s=t.selectionStart,l=t.selectionEnd,c=0;c<o.length;c++)9679==o.charCodeAt(c)?i.push(e[a++]):i.push(o.charAt(c)),r.push(String.fromCharCode(9679));n.value=i.join(""),t.value=r.join(""),t.selectionStart=s,t.selectionEnd=l},10)}var n=t.ownerDocument.createElement("input");n.type="hidden",n.name=t.name,n.id=t.id,t.id=t.id+"X",t.name=t.name+"X",t.type="text",t.setAttribute("autocomplete","off"),t.parentNode.appendChild(n);var i;t.addEventListener("keypress",a),t.addEventListener("keyup",a)}))},setupDynamicPanel:function(){this.panelPositions=this.options.dynamicPanel.panel_positions,this.panelSections=[],this.panelSectionActionMap={},e.each(this.panelPositions,e.bind(function(t){var a=t.panel_section;a.has_action=t.panel_actions.length>0,this.panelSectionActionMap[a.id]=[],e.each(t.panel_actions,e.bind(function(e){this.panelSectionActionMap[a.id].push(e)},this)),this.panelSections.push(a)},this))},closeHeader:function(e){e&&e.preventDefault(),this.ignoreExplicitClose||this.options.contentManager.closePanelFromHeader(this.options.strategyId,this.options.fieldId),this.closePanel(e)},getStarted:function(e,t){c.webapp.openHome(t),this.closePanel()},openTour:function(){c.webapp.openTour(),this.closePanel()},openSetupEmailPage:function(){c.webapp.openEmails(),this.closePanel()},openSettings:function(e){return e&&e.preventDefault(),c.webapp.openSettings(),this.closePanel(),!1},openLoginPage:function(e){e&&"string"!=typeof e&&(e.preventDefault&&e.preventDefault(),e=null),c.webapp.openLogin(e),this.closePanel()},openDnt2UpgradePage:function(){c.webapp.openDnt2UpgradePage(),this.closePanel()},openPasswordSetupPage:function(e){c.webapp.openPasswordSetup(e),this.closePanel()},openActivateCardsPage:function(e,t){c.webapp.openCards(t),this.closePanel()},openPlansPage:function(e,t,a){c.webapp.openPremium(e,null,a)},openSnowmanPage:function(e,t){c.webapp.openSnowman(null,t)},openNewFeatureAdded:function(e,t){c.webapp.openNewFeatureAdded(null,t)},updatePanelActivity:function(e,t,a,n){if(this.options.contentManager&&this.options.contentManager.messenger&&this.options.contentManager.messenger.send("update:panelActivity:"+e,{panelId:t}),n){var i="aggregate:"+t;u[i]=u[i]||{},u[i][a]=u[i][a]||{};var r=u[i][a];if(r[e])return;if("closed"==e&&(r.masked||r.disclosed))return;for(var o in r)"impression"!=o&&(r[o]=0,this.options.contentManager.messenger.send("update:panelActivity:"+o,{panelId:i,revert:!0}));r[e]=1,this.options.contentManager.messenger.send("update:panelActivity:"+e,{panelId:i})}}});return p}),ABINE_DNTME.define("abine/password",[],function(){function e(e,t){return"undefined"==typeof t&&(t=e,e=0),Math.floor(Math.random()*(t-e)+e)}function t(t,a,n){for(var i=1;i<=n;i++){var r=e(0,t.length);t=[t.slice(0,r),a[e(a.length)],t.slice(r)].join("")}return t}var a=12,n=1,i=2,r=4,o=8,s="0123456789",l="`~!@#$%^&*()_-+={}|[]\\:\";'<>?,/",c=".-_",d="ABCDEFGHJKLMNOPQRSTUVWXYZ",u=d.toLowerCase(),p={generateRandomPassword:function(p,m,h){p=p||u,(!m||m<1)&&(m=a);var _="";return h=h||n|i|r,h&n&&(_=t(_,d,e(2,3))),h&r&&(_=t(_,l,e(1,3))),h&o&&(_=t(_,c,1)),h&i&&(_=t(_,s,e(1,3))),_.length<m&&(_=t(_,p,m-_.length)),_},generateSpecialCharsPassword:function(){return this.generateRandomPassword(null,null,n|i|o)},generateNoSpecialCharsPassword:function(){return this.generateRandomPassword(null,null,n|i)},generateNoDigitsPassword:function(){return this.generateRandomPassword(null,null,n)},generateNewOptionsPassword:function(e,t,a){var o=n;return t&&(o|=i),a&&(o|=r),this.generateRandomPassword(null,e,o)}};return p}),ABINE_DNTME.define("abine/proxyContentManager",["documentcloud/underscore","jquery","abine/core","abine/contentMessenger","abine/timer","models","abine/config","abine/intl","abine/proxies","abine/views/unlockPanel","abine/views/notificationPanel","abine/assets","abine/views/dntmePanel","abine/views/emailHelperPanel","abine/views/phoneHelperPanel","abine/views/changePasswordHelperPanel","abine/views/changePasswordLoginHelperPanel","abine/views/loginHelperPanel","abine/views/paymentHelperPanel","abine/views/passwordHelperPanel","abine/views/addressHelperPanel","abine/views/autoFillWithPanel","abine/views/mapFormPanel","abine/views/mapReviewPanel","abine/views/autoFillPanel","abine/views/identityHelperPanel"],function(e,t,a,n,i,r,o,s,l,c,d,u,p,m,h,_,f,g,y,b,v,w,k,E,A,T){var N=a.BaseClass.extend({initialize:function(t){this.href=t.href,this.host=this.href.replace(/http[s]?:\/\//i,"").replace(/\/.*/i,""),this.domain=t.domain||(this.href?abineUrl.getTLD(this.href):null),this.document=t.document||document,this.frameId=t.frameId||ABINE_DNTME.context,this.messenger=t.contentMessenger||ABINE_DNTME.contentMessenger,l.connect(this.messenger,e.bind(function(e){this.tabId=e},this)),this._locked=t.locked,ABINE_DNTME.contentuser={hasRegEmail:e.bind(function(){return!!this.preferences&&this.preferences.hasPref("regEmail")},this)},this.messenger.on("broadcast:preference:reload",e.bind(function(){this.loadUserPreferences()},this)),this.messenger.on("closePanel",e.bind(function(){this.closeCurrentPanel(),this.removePanels(this.frameId)},this))},reloadPreference:function(){this.loadUserPreferences(),this.messenger.sendToCS("CS","reloadPreference")},isLocked:function(){return this._locked},locked:function(){this._locked=!0,this.trigger("locked")},unlocked:function(){this._locked=!1,this.trigger("unlocked"),this.preferences&&this.preferences.fetchAll()},getValue:function(e,t,a,n){var i=e+":"+Math.random(),r=this;this.messenger.on(i,function e(t){r.messenger.off(i,e),n(t)}),this.messenger.sendToCS("CS","getValue",{name:e,responseKey:i,strategyId:t,fieldId:a,frameId:this.frameId})},show:function(t){this.closeCurrentPanel(),this.loadUserPreferences(e.bind(function(){this.closeCurrentPanel(),"blur"==t.name?this.showToolbarPanel(t.payload):"email"==t.name?this._currentPanelView=this.showEmailPanel(t.payload):"password"==t.name?this._currentPanelView=this.showPasswordPanel(t.payload):"change-password"==t.name?this._currentPanelView=this.showChangePasswordPanel(t.payload):"login"==t.name?this._currentPanelView=this.showLoginPanel(t.payload):"change-password-login"==t.name?this._currentPanelView=this.showChangePasswordLoginPanel(t.payload):"address"==t.name?this._currentPanelView=this.showAddressPanel(t.payload):"payment"==t.name?this._currentPanelView=this.showPaymentPanel(t.payload):"phone"==t.name?this._currentPanelView=this.showPhonePanel(t.payload):"identity"==t.name?this._currentPanelView=this.showIdentityPanel(t.payload):"unlock"==t.name?this._currentPanelView=this.showUnlockPanel(t.payload):"notification"==t.name?(this._notificationPanelShown=!0,this._showNotification(t.payload.notification,t.payload.timeout)):"autoFill"==t.name?this.showAutoFillPanel(t.payload):"autoFillWith"==t.name?this._currentPanelView=this._showAutoFillWith(t.payload):"mapForm"==t.name&&this._showMapForm(t.payload)},this))},loadUserPreferences:function(t){function a(){var e=this.preferences.getPref("userTag")||this.preferences.getPref("dynamicTag");e&&ABINE_DNTME.config.updateTag(e);var a=this.preferences.getPref("dnt_language");a?s.setupLocale(a,function(){t.call(this)}):t.call(this)}t=t||function(){},this.preferences=new r.PreferenceCollection({}),this.preferences.bind("sync:success",e.once(e.bind(function(){a.call(this)},this))),this.preferences.bind("sync:error",e.bind(function(){a.call(this)},this)),this.preferences.fetchAll()},disablePanelOnThisPage:function(){this.messenger.sendToCS("CS","disablePanelOnThisPage")},disablePanelOnThisSite:function(){this.messenger.sendToCS("CS","disablePanelOnThisSite")},showFieldIconsOnThisSite:function(){this.messenger.sendToCS("CS","showFieldIconsOnThisSite")},closeToolbarPanel:function(){if(this.lastDNTMePanel){try{this.lastDNTMePanel.remove()}catch(e){}this.lastDNTMePanel=null}},closeCurrentPanel:function(){if(this._currentPanelView){try{this.messenger.sendToCS("CS","cleanUpAfterPanelClosed",{strategyId:this._currentPanelView.options.strategyId,fieldId:this._currentPanelView.options.fieldId}),this._currentPanelView.remove()}catch(e){}this._currentPanelView=null}},closePanelFromHeader:function(e,t){this.messenger.sendToCS("CS","closePanelFromHeader",{strategyId:e,fieldId:t})},showToolbarPanel:function(a){return this._currentPanelView||this._notificationPanelShown?void this.messenger.sendToCS("CS","showToolbarPanel",a):(this.closeToolbarPanel(),void l.panelsModule.getDNTMePanel(a.tabId,e.bind(function(e){var n=this.lastDNTMePanel=new p({messenger:this.messenger,contentManager:this,domain:this.domain,dynamicPanel:e,compact:a.compact,cardAlertPanel:a.cardAlertPanel,showBlurGrowl:a.showBlurGrowl,page:a.page,subPage:a.subPage,highlight:a.highlight,timeout:a.timeout,switchTo:a.switchTo,notNow:this.preferences.getPref("notNowClicked"),intrusiveSplit:this.preferences.getSplitTest("intrusive01"),registered:this.preferences.getPref("hasRegistered"),premium:this.preferences.getPref("entitledToPhone"),footerCampaign:this.preferences.getPref("footerCampaign"),el:t("<div></div>",this.document).get(0)});n.messenger=this.messenger,n.bind("remove",function(){this.lastDNTMePanel=null;try{n.remove()}catch(e){}this.removePanels(this.frameId)},this),n.bind("render resize",function(){this.autoResizePanels("abineDNTMePanel",0,10)},this),n.bind("show-settings",function(e){delete a.compact,a.page="settings",e&&(a.highlight=e.highlight,a.subPage=e.subPage,a.switchTo=e.switchTo),this.showToolbarPanel(a)},this),n.bind("show-trackers",function(){delete a.compact,a.page="trackers",this.showToolbarPanel(a)},this),n.bind("show-dashboard",function(){delete a.compact,a.page="dashboard",this.showToolbarPanel(a)},this),n.bind("show-medals",function(){a.cardAlertPanel||(a.page="medals",this.showToolbarPanel(a))},this),n.bind("show-report",function(){a.cardAlertPanel||(a.page="weekly-report",this.showToolbarPanel(a))},this),n.bind("max-height",function(){this.autoResizePanels("abineDNTMePanel",0,1e3)},this),t("body",this.document).append(n.el)},this)))},hookPanelEvents:function(e){e.bind("remove",function(){try{e.remove()}catch(e){}this.removePanels(this.frameId)},this),e.bind("render resize",function(e){e=e||{className:null,extraWidth:null,extraHeight:null},this.autoResizePanels(e.className,e.extraWidth,e.extraHeight)},this)},showEmailPanel:function(e){var a=new m({fieldId:e.fieldId,strategyId:e.strategyId,category:e.category,fieldType:e.fieldType,formType:e.formType,contentManager:this,hasPassword:e.hasPassword,oldValue:e.oldValue,hasRegistered:this.preferences.isPrefTrue("hasRegistered"),domain:e.domain||this.domain,dynamicPanel:e.dynamicPanel,iconClick:e.iconClick,el:t("<div></div>",this.document).get(0)});return this.hookPanelEvents(a),t("body",this.document).append(a.el),a},showPasswordPanel:function(e){var a=new b({fieldId:e.fieldId,strategyId:e.strategyId,category:e.category,fieldType:e.fieldType,formType:e.formType,contentManager:this,hasRegistered:this.preferences.isPrefTrue("hasRegistered"),domain:e.domain||this.domain,dynamicPanel:e.dynamicPanel,dynamicPanelsJSON:e.dynamicPanelsJSON,iconClick:e.iconClick,el:t("<div></div>",this.document).get(0)});return this.hookPanelEvents(a),t("body",this.document).append(a.el),a},showChangePasswordPanel:function(e){var a=new _({fieldId:e.fieldId,strategyId:e.strategyId,fieldType:e.fieldType,formType:e.formType,category:e.category,contentManager:this,hasRegistered:this.preferences.isPrefTrue("hasRegistered"),domain:e.domain||this.domain,iconClick:e.iconClick,el:t("<div></div>",this.document).get(0)});return this.hookPanelEvents(a),t("body",this.document).append(a.el),a},showLoginPanel:function(e){var a=new g({fieldId:e.fieldId,strategyId:e.strategyId,fieldType:e.fieldType,formType:e.formType,category:e.category,contentManager:this,hasRegistered:this.preferences.isPrefTrue("hasRegistered"),domain:e.domain||this.domain,dynamicPanel:e.dynamicPanel,iconClick:e.iconClick,el:t("<div></div>",this.document).get(0)});return this.hookPanelEvents(a),t("body",this.document).append(a.el),a},showChangePasswordLoginPanel:function(e){var a=new f({fieldId:e.fieldId,strategyId:e.strategyId,fieldType:e.fieldType,formType:e.formType,category:e.category,contentManager:this,domain:e.domain||this.domain,iconClick:e.iconClick,el:t("<div></div>",this.document).get(0)});return this.hookPanelEvents(a),t("body",this.document).append(a.el),a},showAddressPanel:function(e){var a=new v({fieldId:e.fieldId,strategyId:e.strategyId,fieldType:e.fieldType,formType:e.formType,category:e.category,dynamicPanel:e.dynamicPanel,dynamicPanelsJSON:e.json,contentManager:this,hasRegistered:this.preferences.isPrefTrue("hasRegistered"),iconClick:e.iconClick,domain:e.domain||this.domain,el:t("<div></div>",this.document).get(0)});return this.hookPanelEvents(a),t("body",this.document).append(a.el),a},showIdentityPanel:function(e){var a=new T({fieldId:e.fieldId,strategyId:e.strategyId,fieldType:e.fieldType,formType:e.formType,category:e.category,dynamicPanel:e.dynamicPanel,dynamicPanelsJSON:e.json,contentManager:this,hasRegistered:this.preferences.isPrefTrue("hasRegistered"),iconClick:e.iconClick,allDataTypes:e.allDataTypes,domain:e.domain||this.domain,el:t("<div></div>",this.document).get(0)});return this.hookPanelEvents(a),t("body",this.document).append(a.el),a},showPhonePanel:function(e){var a=new h({fieldId:e.fieldId,strategyId:e.strategyId,fieldType:e.fieldType,formType:e.formType,category:e.category,dynamicPanel:e.dynamicPanel,contentManager:this,entitledToPhone:this.preferences.isPrefTrue("entitledToPhone"),hasRegistered:this.preferences.isPrefTrue("hasRegistered"),iconClick:e.iconClick,domain:e.domain||this.domain,el:t("<div></div>",this.document).get(0)});return this.hookPanelEvents(a),t("body",this.document).append(a.el),a},showPaymentPanel:function(e){var a=this.preferences,n=new y({fieldId:e.fieldId,strategyId:e.strategyId,fieldType:e.fieldType,formType:e.formType,category:e.category,contentManager:this,authToken:!this.isLocked(),amount:e.amount,beginnerMode:a.getPref("beginnerMode"),hasRegistered:a.isPrefTrue("hasRegistered"),entitledToPayments:a.isPrefTrue("entitledToPayments"),hasEnabledPayments:a.isPrefTrue("hasEnabledPayments"),hasAuthorizedCoinbase:a.isPrefTrue("hasAuthorizedCoinbase"),entitledToPhone:a.isPrefTrue("entitledToPhone"),cardDisabled:e.maskedCardsDisabled,realCardDisabled:e.autoFillCardsDisabled,dynamicPanel:e.dynamicPanel,fromContextMenu:e.fromContextMenu,domain:e.domain||this.domain,params:e.params,el:t("<div></div>",this.document).get(0),paymentsr2:e.paymentsr2,iconClick:e.iconClick});return this.hookPanelEvents(n),t("body",this.document).append(n.el),n},showUnlockPanel:function(e){var a=new c({fieldId:e.fieldId,strategyId:e.strategyId,fieldType:e.fieldType,formType:e.formType,category:e.category,contentManager:this,preferences:this.preferences,el:t("<div></div>",this.document).get(0)});return this.hookPanelEvents(a),t("body",this.document).append(a.el),a},showNotification:function(e){this.messenger.send("background:show:notification:forward",e)},_showNotification:function(a,n){var i=d.NotificationPanelView,r={notification:a,contentManager:this,amount:a.amount,domain:this.domain,messenger:this.messenger,el:t("<div></div>",this.document).get(0),timeout:n};if("card"==a.type){var o=1;this.preferences.hasPref("countCardNotifications")&&(o=parseInt(this.preferences.getPref("countCardNotifications"))+1),this.preferences.setPref("countCardNotifications",o),i=d.CardNotificationPanelView,o<=5&&(a.detailed=!0)}else if("checkout_growl"==a.type)i=d.CheckoutGrowlNotificationPanelView;else if("real_card"==a.type)i=d.RealCardNotificationPanelView;else if("save_card"==a.type)i=d.SaveCardNotificationPanelView;else if("email"==a.type||"post-register"==a.type){var s=1;this.preferences.hasPref("countEmailNotifications")&&(s=parseInt(this.preferences.getPref("countEmailNotifications"))+1),this.preferences.setPref("countEmailNotifications",s),s<=1&&(i=d.DetailedEmailNotificationPanelView,a.neverFade=!0)}else"login"==a.type?i=d.SaveLoginNotificationPanelView:"failed_login"==a.type?i=d.FailedLoginNotificationPanelView:"password_with_no_login"==a.type?i=d.PasswordWithNoLoginNotificationPanelView:"change_password"==a.type?i=d.ChangePasswordNotificationPanelView:"growl"==a.type?i=d.GrowlNotificationPanelView:"expire_warning"==a.type?i=d.ExpireWarningNotificationPanelView:"expire_notify"==a.type&&(i=d.ExpireNotifyNotificationPanelView);var l=new i(r),c=e.bind(function(){this.messenger.off("background:saveForm:notification:close",c);try{l.remove()}catch(e){}this.removePanels(this.frameId)},this);this.messenger.on("background:saveForm:notification:close",c),l.bind("remove",function(){this.messenger.off("background:saveForm:notification:close",c),l.remove(),this.messenger.sendToCS("CS","closeNotification",this.frameId)},this),l.bind("render resize",function(e){e=e||{extraWidth:null,extraHeight:null},this.autoResizePanels("abineNotificationPanel",e.extraWidth,e.extraHeight)},this),t("body",this.document).append(l.el)},fillFields:function(e,t,a,n,i){var r={type:e,strategyId:t,fieldId:a,values:n,origin:i};this.messenger.sendToCS("CS","fillFields",r)},sendFeedbackEmail:function(e,t,a){this.messenger.sendToCS("CS","sendFeedbackEmail",{strategyId:e,fieldId:t,data:a})},autoResizePanels:function(e,t,a){this.messenger.sendToCS("CS","autoResizePanels",{className:e,extraWidth:t,extraHeight:a,documentHeight:this.document.body.offsetHeight})},removePanels:function(t,a,n){this.messenger&&(n&&this.messenger.off("keyEvent-"+n),this.messenger.sendToCS("CS","removePanels",{id:t,strategyId:a,fieldId:n}),t.indexOf("doNotRemove")==-1&&i.setTimeout(e.bind(this.destroy,this),0))},bindKeyEvents:function(e,t,a,n){this.messenger.sendToCS("CS","bindKeyEvents",{frameId:this.frameId,strategyId:e,fieldId:t,doNotCloseOnTyping:a}),this.messenger.off("keyEvent-"+t),this.messenger.on("keyEvent-"+t,n)},ignoreBlur:function(e,t,a){this.messenger&&this.messenger.sendToCS("CS","ignoreBlur",{strategyId:e,fieldId:t,value:a})},showFieldIcon:function(e,t,a){this.messenger&&this.messenger.sendToCS("CS","showFieldIcon",{strategyId:e,fieldId:t,value:a})},focusField:function(e,t){this.messenger&&this.messenger.sendToCS("CS","focusField",{strategyId:e,fieldId:t})},focusFieldWithIntent:function(e,t,a){this.messenger&&this.messenger.sendToCS("CS","focusFieldWithIntent",{strategyId:e,fieldId:t,params:a,frameId:this.frameId})},showAutoFillWith:function(e){this.messenger&&this.messenger.sendToCS("CS","showAutoFillWith",{fieldId:e.fieldId,strategyId:e.strategyId,fieldType:e.fieldType,category:e.category})},_showAutoFillWith:function(e){var a=new w({fieldId:e.fieldId,strategyId:e.strategyId,category:e.category,fieldType:e.fieldType,formType:e.formType,panelDisabledHere:e.panelDisabledHere,contentManager:this,authToken:!this.isLocked(),domain:this.domain,el:t("<div></div>",this.document).get(0)});return a.bind("remove",function(){try{a.remove()}catch(e){}this.removePanels(this.frameId)},this),a.bind("render resize",function(e){e=e||{className:null,extraWidth:null,extraHeight:null},this.autoResizePanels(e.className,e.extraWidth,e.extraHeight)},this),t("body",this.document).append(a.el),a},showMapForm:function(e){this.messenger.sendToCS("CS","showMapForm",{fieldId:e.fieldId,strategyId:e.strategyId,fieldType:e.fieldType,mapFirstForm:e.mapFirstForm,forms:e.forms,formId:e.formId})},_showMapForm:function(e){var a=new(e.reviewMode?E:k)({fieldId:e.fieldId,strategyId:e.strategyId,category:e.category,fieldType:e.fieldType,formType:e.formType,fields:e.fields,forms:e.forms,formId:e.formId,mappings:e.mappings,formSignature:e.formSignature,reviewMode:e.reviewMode,contentManager:this,authToken:!this.isLocked(),domain:this.domain,el:t("<div></div>",this.document).get(0)});a.bind("remove",function(){try{a.remove()}catch(e){}this.removePanels(this.frameId)},this),a.bind("render resize",function(e){e=e||{className:null,extraWidth:null,extraHeight:null},this.autoResizePanels(e.className,e.extraWidth,e.extraHeight)},this),t("body",this.document).append(a.el)},showAutoFillPanel:function(e){var a=new A({fieldId:e.fieldId,strategyId:e.strategyId,category:e.category,fieldType:e.fieldType,formType:e.formType,fields:e.fields,mappings:e.mappings,formSignature:e.formSignature,reviewMode:e.reviewMode,contentManager:this,authToken:!this.isLocked(),domain:this.domain,href:this.href,el:t("<div></div>",this.document).get(0)});a.bind("remove",function(){try{a.remove()}catch(e){}this.removePanels(this.frameId)},this),a.bind("render resize",function(e){e=e||{className:null,extraWidth:null,extraHeight:null},this.autoResizePanels(e.className,e.extraWidth,e.extraHeight)},this),t("body",this.document).append(a.el)},destroy:function(){try{l.disconnect()}catch(e){}this.messenger&&(this.messenger.off(),this.messenger.destroy(),delete this.messenger)}});return{ContentManager:N}}),/* ===========================================================
 * bootstrap-tooltip.js v2.3.2
 * http://getbootstrap.com/2.3.2/javascript.html#tooltips
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ===========================================================
 * Copyright 2013 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
!function(e){"use strict";var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,a,n){var i,r,o,s,l;for(this.type=t,this.$element=e(a),this.options=this.getOptions(n),this.enabled=!0,o=this.options.trigger.split(" "),l=o.length;l--;)s=o[l],"click"==s?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):"manual"!=s&&(i="hover"==s?"mouseenter":"focus",r="hover"==s?"mouseleave":"blur",this.$element.on(i+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(r+"."+this.type,this.options.selector,e.proxy(this.leave,this)));this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var a,n=e.fn[this.type].defaults,i={};return this._options&&e.each(this._options,function(e,t){n[e]!=t&&(i[e]=t)},this),a=e(t.currentTarget)[this.type](i).data(this.type),a.options.delay&&a.options.delay.show?(clearTimeout(this.timeout),a.hoverState="in",void(this.timeout=setTimeout(function(){"in"==a.hoverState&&a.show()},a.options.delay.show))):a.show()},leave:function(t){var a=e(t.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),a.options.delay&&a.options.delay.hide?(a.hoverState="out",void(this.timeout=setTimeout(function(){"out"==a.hoverState&&a.hide()},a.options.delay.hide))):a.hide()},show:function(){var t,a,n,i,r,o,s=e.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(s),s.isDefaultPrevented())return;switch(t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),r="function"==typeof this.options.placement?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,t.detach().css({top:0,left:0,display:"block"}),this.options.container?t.appendTo(this.options.container):t.insertAfter(this.$element),a=this.getPosition(),n=t[0].offsetWidth,i=t[0].offsetHeight,r){case"bottom":o={top:a.top+a.height,left:a.left+a.width/2-n/2};break;case"top":o={top:a.top-i,left:a.left+a.width/2-n/2};break;case"left":o={top:a.top+a.height/2-i/2,left:a.left-n};break;case"right":o={top:a.top+a.height/2-i/2,left:a.left+a.width}}this.applyPlacement(o,r),this.$element.trigger("shown")}},applyPlacement:function(e,t){var a,n,i,r,o=this.tip(),s=o[0].offsetWidth,l=o[0].offsetHeight;o.offset(e).addClass(t).addClass("in"),a=o[0].offsetWidth,n=o[0].offsetHeight,"top"==t&&n!=l&&(e.top=e.top+l-n,r=!0),"bottom"==t||"top"==t?(i=0,e.left<0&&(i=e.left*-2,e.left=0,o.offset(e),a=o[0].offsetWidth,n=o[0].offsetHeight),this.replaceArrow(i-s+a,a,"left")):this.replaceArrow(n-l,n,"top"),r&&o.offset(e)},replaceArrow:function(e,t,a){this.arrow().css(a,e?50*(1-e/t)+"%":"")},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function t(){var t=setTimeout(function(){a.off(e.support.transition.end).detach()},500);a.one(e.support.transition.end,function(){clearTimeout(t),a.detach()})}var a=this.tip(),n=e.Event("hide");if(this.$element.trigger(n),!n.isDefaultPrevented())return a.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?t():a.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var t=this.$element[0];return e.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},getTitle:function(){var e,t=this.$element,a=this.options;return e=t.attr("data-original-title")||("function"==typeof a.title?a.title.call(t[0]):a.title)},tip:function(){return this.$tip=this.$tip||e(this.options.template,this.$element)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(t){var a=t?e(t.currentTarget)[this.type](this._options).data(this.type):this;a.tip().hasClass("in")?a.hide():a.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var a=e.fn.tooltip;e.fn.tooltip=function(a){return this.each(function(){var n=e(this),i=n.data("tooltip"),r="object"==typeof a&&a;i||n.data("tooltip",i=new t(this,r)),"string"==typeof a&&i[a]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.fn.tooltip.noConflict=function(){return e.fn.tooltip=a,this}}(window.jQuery),ABINE_DNTME.CompiledTemplates=ABINE_DNTME.CompiledTemplates||{},ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("common.auto_fill_with",e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+='\n<a href="#" class="mmKeyOption autoFillWith">\n  <div class="element" id="disclose">\n    <span class="panelLeft full" style="text-align:left;font-size: 9pt;color:#3497db;"> &nbsp;&nbsp;\n      ',d=a.mapper,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"mapper"),i=a["if"],u=p.program(2,o,t),u.hash={},u.fn=u,u.inverse=p.program(4,s,t),n=i.call(e,n,u),(n||0===n)&&(r+=n),r+="\n    </span>\n  </div>\n</a>\n"}function o(e){var t,n,i="";return i+="\n        ",t="mm_auto_fill_with_map_form",d=a.intl,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"intl",t,{hash:{}}):n,i+=f(t)+"\n      "}function s(e){var t,n,i="";return i+="\n        ",t="mm_dntme_correct_something",d=a.intl,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"intl",t,{hash:{}}):n,i+=f(t)+"\n      "}a=a||e.helpers;var l,c,d,u,p=this,m="function",h=a.helperMissing,_=void 0,f=this.escapeExpression;return d=a.showMapper,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"showMapper"),c=a["if"],u=p.program(1,r,i),u.hash={},u.fn=u,u.inverse=p.noop,l=c.call(t,l,u),l||0===l?l:""}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("common.disable_link",e.template(function(e,t,a){a=a||e.helpers;var n,i,r,o="",s="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return o+='<a href="#" id="disableLink" style="text-transform: none;margin-left: 10px;font-size: 9pt;text-decoration: underline;">',n="mm_dntme_disable_panel",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+"</a>"}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("common.field_types",e.template(function(e,t,a){a=a||e.helpers;return'<select class="fieldTypes" style="vertical-align:middle;">\n  <option value="">-- Please select --</option>\n  <option class="start" value="/unknown">Ignore</option>\n  <optgroup class="person-grp" label="Person">\n    <option value="/contact/email">Email</option>\n    <option value="/nameperson/friendly">Username or User ID</option>\n    <option value="/nameperson/full">Full Name</option>\n    <option value="/nameperson/prefix">Title (Mr/Mrs/Ms)</option>\n    <option value="/nameperson/first">First Name</option>\n    <option value="/nameperson/middle">Middle Name</option>\n    <option value="/nameperson/last">Last Name</option>\n    <option value="/nameperson/suffix">Suffix (Jr./Sr./II)</option>\n    <option value="/person/gender">Gender</option>\n  </optgroup>\n  <optgroup class="security-grp" label="Security">\n    <option value="/password">Password</option>\n    <option value="/password/differentSpecialChars">Limited Special Chars (.-_)</option>\n    <option value="/password/noSpecialChars">No Special Characters</option>\n    <option value="/password/noNumbers">No Numbers</option>\n    <option value="/passwordold">Old Password</option>\n  </optgroup>\n  <optgroup class="combined-grp" label="Combined Login/Register Form">\n    <option value="/contact/email/login">Username or Email</option>\n    <option value="/password/login">Password</option>\n  </optgroup>\n  <optgroup class="phone-grp" label="Phone Fields">\n    <option value="/contact/phone">Phone xxx-yyy-zzzz</option>\n    <option value="/contact/phone/areacode">Phone areacode (xxx)</option>\n    <option value="/contact/phone/exchange">Phone exchange yyy</option>\n    <option value="/contact/phone/local">Phone local zzzz</option>\n    <option value="/contact/phone/number">Phone last 7 yyy-zzzz</option>\n    <option value="/contact/phone/extension">Phone extension</option>\n    <option value="/contact/phone/countrycode">Phone country code</option>\n  </optgroup>\n  <optgroup class="phone-grp" label="Home Phone">\n    <option value="/contact/phone/home">Home Phone xxx-yyy-zzzz</option>\n    <option value="/contact/phone/areacode/home">Home Phone areacode (xxx)</option>\n    <option value="/contact/phone/exchange/home">Home Phone exchange yyy</option>\n    <option value="/contact/phone/local/home">Home Phone local zzzz</option>\n    <option value="/contact/phone/number/home">Home Phone last 7 yyy-zzzz</option>\n    <option value="/contact/phone/extension/home">Home Phone extension</option>\n    <option value="/contact/phone/countrycode/home">Home Phone country code</option>\n  </optgroup>\n  <optgroup class="phone-grp" label="Work Phone">\n    <option value="/contact/phone/work">Work Phone xxx-yyy-zzzz</option>\n    <option value="/contact/phone/areacode/work">Work Phone areacode (xxx)</option>\n    <option value="/contact/phone/exchange/work">Work Phone exchange yyy</option>\n    <option value="/contact/phone/local/work">Work Phone local zzzz</option>\n    <option value="/contact/phone/number/work">Work Phone last 7 yyy-zzzz</option>\n    <option value="/contact/phone/extension/work">Work Phone extension</option>\n    <option value="/contact/phone/countrycode/work">Work Phone country code</option>\n  </optgroup>\n  <optgroup class="phone-grp" label="Mobile Phone">\n    <option value="/contact/phone/mobile">Mobile Phone xxx-yyy-zzzz</option>\n    <option value="/contact/phone/areacode/mobile">Mobile Phone areacode (xxx)</option>\n    <option value="/contact/phone/exchange/mobile">Mobile Phone exchange yyy</option>\n    <option value="/contact/phone/local/mobile">Mobile Phone local zzzz</option>\n    <option value="/contact/phone/number/mobile">Mobile Phone last 7 yyy-zzzz</option>\n    <option value="/contact/phone/extension/mobile">Mobile Phone extension</option>\n    <option value="/contact/phone/countrycode/mobile">Mobile Phone country code</option>\n  </optgroup>\n  <optgroup class="phone-grp" label="Fax Phone">\n    <option value="/contact/phone/fax">Fax Phone xxx-yyy-zzzz</option>\n    <option value="/contact/phone/areacode/fax">Fax Phone areacode (xxx)</option>\n    <option value="/contact/phone/exchange/fax">Fax Phone exchange yyy</option>\n    <option value="/contact/phone/local/fax">Fax Phone local zzzz</option>\n    <option value="/contact/phone/number/fax">Fax Phone last 7 yyy-zzzz</option>\n    <option value="/contact/phone/extension/fax">Fax Phone extension</option>\n    <option value="/contact/phone/countrycode/fax">Fax Phone country code</option>\n  </optgroup>\n  <optgroup class="card-grp" label="Credit Card Fields">\n    <option value="/financial/creditcard/number">Full Card Number</option>\n    <option value="/financial/creditcard/type">Card Type</option>\n    <option value="/financial/creditcard/issuedto">Issued To Full</option>\n    <option value="/financial/creditcard/verification">CVV/CVC/CVV2</option>\n    <option value="/financial/creditcard/expiry">Expiration Date (mm/yyyy)</option>\n    <option value="/financial/creditcard/expiry2">Expiration Date (mm/yy)</option>\n    <option value="/financial/creditcard/expirymonth">Expiration Month</option>\n    <option value="/financial/creditcard/expiryyear">Expiration Year (4 digits)</option>\n    <option value="/financial/creditcard/expiryyear2">Expiration Year (2 digits)</option>\n    <option value="/financial/creditcard/number/part1">Card Number First 4</option>\n    <option value="/financial/creditcard/number/part2">Card Number Second 4</option>\n    <option value="/financial/creditcard/number/part3">Card Number Third 4</option>\n    <option value="/financial/creditcard/number/part4">Card Number Last 4</option>\n    <option value="/financial/creditcard/number/amex/part1">AmEx Number First 4</option>\n    <option value="/financial/creditcard/number/amex/part2">AmEx Number Second 6</option>\n    <option value="/financial/creditcard/number/amex/part3">AmEx Number Third 5</option>\n    <option value="/financial/creditcard/issuedto/first">Issued To First</option>\n    <option value="/financial/creditcard/issuedto/last">Issued To Last</option>\n  </optgroup>\n  <optgroup class="address-grp" label="Address">\n    <option value="/contact/postaladdress">Address Line 1</option>\n    <option value="/contact/postaladdressAdditional">Address Line 2</option>\n    <option value="/contact/postaladdress3">Address Line 3</option>\n    <option value="/contact/city">City</option>\n    <option value="/contact/state">State</option>\n    <option value="/contact/state/code">State Code</option>\n    <option value="/contact/postalcode">Zip/Postal Code</option>\n    <option value="/contact/country">Country</option>\n  </optgroup>\n  <optgroup class="address-grp" label="Billing Address">\n    <option value="/contact/postaladdress/billing">Billing Address Line 1</option>\n    <option value="/contact/postaladdressAdditional/billing">Billing Address Line 2</option>\n    <option value="/contact/postaladdress3/billing">Billing Address Line 3</option>\n    <option value="/contact/city/billing">Billing City</option>\n    <option value="/contact/state/billing">Billing State</option>\n    <option value="/contact/state/code/billing">Billing State Code</option>\n    <option value="/contact/postalcode/billing">Billing Zip/Postal Code</option>\n    <option value="/contact/country/billing">Billing Country</option>\n  </optgroup>\n  <optgroup class="address-grp" label="Shipping Address">\n    <option value="/contact/postaladdress/shipping">Shipping Address Line 1</option>\n    <option value="/contact/postaladdressAdditional/shipping">Shipping Address Line 2</option>\n    <option value="/contact/postaladdress3/shipping">Shipping Address Line 3</option>\n    <option value="/contact/city/shipping">Shipping City</option>\n    <option value="/contact/state/shipping">Shipping State</option>\n    <option value="/contact/state/code/shipping">Shipping State Code</option>\n    <option value="/contact/postalcode/shipping">Shipping Zip/Postal Code</option>\n    <option value="/contact/country/shipping">Shipping Country</option>\n  </optgroup>\n  <optgroup class="address-grp" label="Business Address">\n    <option value="/contact/postaladdress/business">Business Address Line 1</option>\n    <option value="/contact/postaladdressAdditional/business">Business Address Line 2</option>\n    <option value="/contact/postaladdress3/business">Business Address Line 3</option>\n    <option value="/contact/city/business">Business City</option>\n    <option value="/contact/state/business">Business State</option>\n    <option value="/contact/state/code/business">Business State Code</option>\n    <option value="/contact/postalcode/business">Business Zip/Postal Code</option>\n    <option value="/contact/country/business">Business Country</option>\n  </optgroup>\n  <optgroup class="address-grp" label="Home Address">\n    <option value="/contact/postaladdress/home">Home Address Line 1</option>\n    <option value="/contact/postaladdressAdditional/home">Home Address Line 2</option>\n    <option value="/contact/postaladdress3/home">Home Address Line 3</option>\n    <option value="/contact/city/home">Home City</option>\n    <option value="/contact/state/home">Home State</option>\n    <option value="/contact/state/code/home">Home State Code</option>\n    <option value="/contact/postalcode/home">Home Zip/Postal Code</option>\n    <option value="/contact/country/home">Home Country</option>\n  </optgroup>\n  <optgroup class="date-grp" label="Birth Date">\n    <option value="/birthdate/age">Age</option>\n    <option value="/birthdate/birthmonth">Birth Date (month)</option>\n    <option value="/birthdate/birthday">Birth Date (day)</option>\n    <option value="/birthdate/birthyear">Birth Date (year)</option>\n    <option value="/birthdate/MM-DD-YYYY">Birth Date (MM-DD-YYYY)</option>\n    <option value="/birthdate/MM/DD/YYYY">Birth Date (MM/DD/YYYY)</option>\n    <option value="/birthdate/DD-MM-YYYY">Birth Date (DD-MM-YYYY)</option>\n    <option value="/birthdate/DD/MM/YYYY">Birth Date (DD/MM/YYYY)</option>\n  </optgroup>\n  <option value="/captcha">Captcha</option>\n  <option value="/auth/otp">One Time Password</option>\n  <option value="/auth/hint">Password Hint</option>\n  <option value="/auth/question">Security Question</option>\n  <option value="/auth/answer">Security Answer</option>\n  <option value="/website">Website Url</option>\n  <option value="/company/name">Company Name</option>\n  <option value="/company/position">Company Position</option>\n  <option value="/socialSecurityNumber">SSN #</option>\n  <option value="/driverLicense">Driver License #</option>\n  <option value="/loyalty/flier">Frequent Flier #</option>\n  <option value="/loyalty/card">Loyalty Card #</option>\n  <option value="/rememberLogin">Remember Me</option>\n  <option value="/agreeTOS">Agree to TOS</option>\n  <option value="/comment">Comment</option>\n  <option value="/message">message</option>\n</select>'}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("common.form_types",e.template(function(e,t,a){a=a||e.helpers;return'<select id="formType">\n  <option value="">-- Please Select --</option>\n  <option value="loginForm">Login Form</option>\n  <option value="registrationForm">Registration Form</option>\n  <option value="checkoutForm">Checkout Form</option>\n  <option value="changePasswordForm">Change Password Form</option>\n  <option value="otherForm">Other Form</option>\n  <option value="ignoreForm">Ignore Form</option>\n</select>'}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("common.header",e.template(function(e,t,a,n,i){function r(e){var t,n="";return n+='data-highlight="',l=a.panelType,t=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"panelType"),typeof t===p?t=t.call(e,{hash:{}}):t===h&&(t=m.call(e,"panelType",{hash:{}})),n+=_(t)+'"'}a=a||e.helpers;var o,s,l,c,d="",u=this,p="function",m=a.helperMissing,h=void 0,_=this.escapeExpression;return d+='<div class="newheader">\n  <div class="newlinks close-link">\n    <img class="" src="',o="/pages/images/2015panels/panel_xclose.png",l=a.assetUrl,s=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof s===p?s.call(t,o,{hash:{}}):s===h?m.call(t,"assetUrl",o,{hash:{}}):s,d+=_(o)+'"/>\n  </div>\n  <div class="newlinks b-link" ',l=a.panelType,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"panelType"),s=a["if"],c=u.program(1,r,i),c.hash={},c.fn=c,c.inverse=u.noop,o=s.call(t,o,c),(o||0===o)&&(d+=o),d+='>\n    <img class="" src="',l=a.panelLogoSmall,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"panelLogoSmall"),typeof o===p?o=o.call(t,{hash:{}}):o===h&&(o=m.call(t,"panelLogoSmall",{hash:{}})),d+=_(o)+'"/>\n  </div>\n</div>'}))}),ABINE_DNTME.define("abine/views/commonhelpers",["wycats/handlebars","abine/config","abine/intl","abine/assets","abine/cobranding"],function(e,t,a,n,i){e.registerHelper("if_all",function(){for(var e=[].slice.apply(arguments),t=e.pop(),a=t.fn,n=0;n<e.length;++n)if(!e[n]){a=t.inverse;break}return a(this)}),e.registerHelper("configVar",function(a){return e.Utils.escapeExpression(t[a])}),e.registerHelper("ifContentUser",function(e,t){return"function"==typeof ABINE_DNTME.contentuser[e]&&ABINE_DNTME.contentuser[e]()?t.fn(this):t.inverse(this)}),e.registerHelper("ifBrowser",function(e,a){return t.browser==e?a.fn(this):a.inverse(this)}),e.registerHelper("unlessBrowser",function(e,a){return t.browser!=e?a.fn(this):a.inverse(this)}),e.registerHelper("intl",function(e,t){return arguments.length>1&&(t=Array.prototype.slice.call(arguments,1)),a.getText(e,t)}),e.registerHelper("nl2br",function(t){return e.Utils.escapeExpression(t).replace(/\n/g,"<br/>")}),e.registerHelper("plural",function(e,t){arguments.length>1&&(t=Array.prototype.slice.call(arguments,1));var n=a.getText(e,t);return 1!=t[t.length-2]?n.length>2&&n.substr(n.length-3).match(/y$/)?n.substr(0,n.length-1)+"ies":n+"s":n}),e.registerHelper("date",function(e){return new Date(e).toLocaleDateString()}),e.registerHelper("panelLogoSmall",function(){return n.assetUrl(i.get("panel.logo.small"))}),e.registerHelper("panelLogoBig",function(){return n.assetUrl(i.get("panel.logo.big"))}),e.registerHelper("settingsIcon",function(e,t){var n='<div class="links '+t+'" data-highlight="'+e+'" data-add-setting="'+e+'-settings-seen">';return n+=a.getText("mm_dntme_settings"),n+="</div>"})}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.loading_display_loading_display=e.template(function(e,t,a){a=a||e.helpers;var n,i,r,o="",s="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return o+='<div class="loading-display">\n  <div class="progress progress-striped active">\n    <div class="bar bar-info" style="width: 100%;"></div>\n  </div>\n  <div class="loading-message">\n    ',n="mm_loading_display_Loading",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+'\n  </div>\n</div>\n<div class="refreshing-display" style="display:none;">\n    <img src="',n="/pages/images/ajax_loader.gif",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,o+=d(n)+'" />\n</div>'}),ABINE_DNTME.CompiledTemplates.loading_display_loading_display}),ABINE_DNTME.define("abine/views/loading_display",["documentcloud/underscore","jquery","duckbone/core","abine/timer","abine/intl"],function(e,t,a,n,i){var r=a.View.extend({templateName:"loading_display_loading_display",afterInitialize:function(){this.options.customMessages||(this.options.customMessages=["mm_loading_display_LotOfAccounts","mm_loading_display_StillWorking","mm_loading_display_HangOn","mm_loading_display_Sorry"]);var a=0;this.changeMessage=n.setInterval(e.bind(function(){a>=this.options.customMessages.length?n.clearInterval(this.changeMessage):(t(this.el).find(".loading-message").html(i.getText(this.options.customMessages[a],["loading_"+this.options.pageName])),a++)},this),this.options.interval||5e3)},reset:function(){n.clearInterval(this.changeMessage),t(this.el).find(".loading-message").html(""),this.afterInitialize()},hide:function(){n.clearInterval(this.changeMessage),t(this.el).find(".loading-display").hide(),t(this.el).find(".refreshing-display").hide()},startRefreshing:function(){t(this.el).find(".refreshing-display").show()}});return r}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.unlock_panel=e.template(function(e,t,a,n,i){function r(e){var t,n,i="";return i+='\n    <div class="control-group" style="margin-left:50px;">\n      <span class="login-msg">',t="mm_unlock_panel_login_message",l=a.intl,n=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===p?n.call(e,t,{hash:{}}):n===h?m.call(e,"intl",t,{hash:{}}):n,i+=_(t)+'</span><span class="unlock-msg">',t="mm_unlock_panel_unlock_message",l=a.intl,n=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===p?n.call(e,t,{hash:{}}):n===h?m.call(e,"intl",t,{hash:{}}):n,i+=_(t)+'</span><br/>\n      <div id="error" style="display:none;color:black;text-transform:none;"></div>\n      <span class="fields">\n        <div id="login-section">\n          <div style="clear:both;display:block;width:0px;max-width:0px;height:0px;max-height:0px;overflow:hidden;opacity:0;"\n               class="autofill-grabber"><input type="text" autocomplete="off" id="login_email" tabindex="-1"><input type="password" autocomplete="off" id="login_password" tabindex="-1">\n          </div>\n          <input id="email" type="text" value="',l=a.email,t=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),typeof t===p?t=t.call(e,{hash:{}}):t===h&&(t=m.call(e,"email",{hash:{}})),i+=_(t)+'" style="width:140px;height:28px;margin:10px 5px;margin-left:0px;" placeholder="',t="mm_dntme_enter_email_simple",l=a.intl,n=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===p?n.call(e,t,{hash:{}}):n===h?m.call(e,"intl",t,{hash:{}}):n,i+=_(t)+'"/>\n          <input id="password" type="password" style="width:140px;height:28px;margin:10px 5px;margin-left:0px;" placeholder="',t="mm_dntme_enter_password_simple",l=a.intl,n=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===p?n.call(e,t,{hash:{}}):n===h?m.call(e,"intl",t,{hash:{}}):n,i+=_(t)+'"/>\n        </div>\n        <div id="mfa-section" style="display:none;">\n          <input type="text" id="mfa-code-field" style="width:140px;height:28px;margin:10px 5px" name="mfa_code" placeholder="Authentication Code" />\n        </div>\n         <input type="submit" id="unlockButton" class="btn btn-success login-msg" value=\'',t="mm_dntme_sign_in",l=a.intl,n=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===p?n.call(e,t,{hash:{}}):n===h?m.call(e,"intl",t,{hash:{}}):n,i+=_(t)+'\' style="padding:5px 35px;background:none;background-color:#4c90da;"/>\n         <input type="submit" id="unlockButton" class="btn btn-success unlock-msg" value=\'',t="mm_unlock_panel_unlock",l=a.intl,n=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===p?n.call(e,t,{hash:{}}):n===h?m.call(e,"intl",t,{hash:{}}):n,i+=_(t)+'\' style="padding:5px 35px;background:none;background-color:#4c90da;"/>\n         <a id="login-different-user" class="unlock-msg" style="cursor:pointer;margin-left:20px;">',t="mm_unlock_panel_different_user",l=a.intl,n=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===p?n.call(e,t,{hash:{}}):n===h?m.call(e,"intl",t,{hash:{}}):n,i+=_(t)+'</a>\n        <span class="retry" style="display: none;"><br/><a href="" id="forgotPassword">',t="mm_dntme_forgot_my_password",l=a.intl,n=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===p?n.call(e,t,{hash:{}}):n===h?m.call(e,"intl",t,{hash:{}}):n,i+=_(t)+'</a></span><br/>\n      </span>\n      <div id="progress-section" style="display:none;margin-top:10px;">\n        <div class="progress progress-striped active">\n          <div class="bar bar-info" style="width: 100%;"></div>\n        </div>\n        <div class="loading-message" style="text-transform:none;text-align: center">',t="mm_loading_display_login",l=a.intl,n=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===p?n.call(e,t,{hash:{}}):n===h?m.call(e,"intl",t,{hash:{}}):n,i+=_(t)+'</div>\n      </div>\n    </div>\n    <div style="height:8px;">&nbsp;</div>\n  '}a=a||e.helpers;var o,s,l,c,d="",u=this,p="function",m=a.helperMissing,h=void 0,_=this.escapeExpression,f=a.blockHelperMissing;return d+='<div class="panel">\n   <div style="float:left;">\n    <img style="margin-top:30px;margin-left:6px;" height="40px" width="40px" src="',l=a.panelLogoSmall,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"panelLogoSmall"),typeof o===p?o=o.call(t,{hash:{}}):o===h&&(o=m.call(t,"panelLogoSmall",{hash:{}})),d+=_(o)+'"/>\n   </div>\n  ',o="unlock",l=a.form,s=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"form"),c=u.program(1,r,i),c.hash={},c.fn=c,c.inverse=u.noop,o=l&&typeof s===p?s.call(t,o,c):f.call(t,s,o,c),(o||0===o)&&(d+=o),d+='\n\n  <div class="header">\n    <div class="logo-link" style="display:none;">\n      <img class="logo" height="24px" width="24px" src="',o="/pages/images/Icon-48.png",l=a.assetUrl,s=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof s===p?s.call(t,o,{hash:{}}):s===h?m.call(t,"assetUrl",o,{hash:{}}):s,d+=_(o)+'"/>\n      <span class="boldFont">Blur</span>\n    </div>\n    <div class="links-wrapper">\n      <div class="links close-link">\n        ',o="mm_dntme_hide_panel",l=a.intl,s=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof s===p?s.call(t,o,{hash:{}}):s===h?m.call(t,"intl",o,{hash:{}}):s,d+=_(o)+'\n      </div>\n      <div id="faqLink" class="links help-link">\n        ',o="mm_dntme_help",l=a.intl,s=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof s===p?s.call(t,o,{hash:{}}):s===h?m.call(t,"intl",o,{hash:{}}):s,d+=_(o)+"\n      </div>\n    </div>\n  </div>\n\n</div>"}),ABINE_DNTME.CompiledTemplates.unlock_panel}),ABINE_DNTME.define("abine/views/unlockPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/proxies","abine/timer","abine/intl","abine/responseCodes"],function(e,t,a,n,i,r,o,s,l){var c=i.extend({templateName:"unlock_panel",events:{"submit .unlock":"verifyPassword","click .help-link":"openFaq","click .settings-link":"openSettings","click #forgotPassword":"forgotPassword","click #login-different-user":"loginDifferentUser"},afterInitialize:function(){this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.applyFadingStyle(),this.fadeIn();var e=this.contentManager.preferences.getPref("oldEmail");this.model={panelType:"unlock",email:e||"",password:""},this.panelId=6000011,this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render(),e?(t(".login-msg",this.el).hide(),t(".unlock-msg",this.el).show(),t("#email",this.el).hide()):t(".unlock-msg",this.el).hide(),this.bindBlurClose()},loginDifferentUser:function(e){e.preventDefault(),this.contentManager.preferences.removePref("oldEmail"),this.contentManager.preferences.setPref("loginNotLock","true"),t("#email",this.el).val(""),t(".unlock-msg",this.el).hide(),t("#email",this.el).show(),t(".login-msg",this.el).show()},forgotPassword:function(e){e.preventDefault(),r.webapp.openForgotPassword(),this.trigger("close")},openFaq:function(){r.webapp.openHelp("/faq/faq-loginHelp"),this.closePanel()},openSettings:function(){this.options.contentManager.showToolbarPanel({page:"settings"}),this.closePanel()},bindBlurClose:function(){0==this.model.email.length?this.bindPanelTextInput(t(t("#password",this.el)).add(t("#email",this.el))):this.bindPanelTextInput(t(t("#email",this.el)).add(t("#password",this.el))),t(this.el).bind("mousedown",e.bind(function(t){var a=t.target.className.split(" ");e.contains(a,"close-link")&&(r.memoryStore.set("login-panel-ignored",0),r.memoryStore.set("login-panel-closed",null),this.contentManager.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.closeHeader()),this.ignoreBlur(!0)},this))},verifyPassword:function(a){this.ignoreBlur(!0),a.preventDefault(),t(this.el).find(".unlockButton").attr("disabled","disabled");var n=t("#email",this.el).val(),i=t("#password",this.el).val(),o=t("#mfa-code-field",this.el).val();this.$("#progress-section").show(),this.$(".fields").hide(),this.$(".retry").show(),this.autoResize();var s={email:n,password:i,mfa_code:o};r.licenseModule.login(s,e.bind(function(t){this.$("#progress-section").hide(),this.$(".fields").show(),this.processLogin(t,s,e.bind(this.unlocked,this))},this))},processLogin:function(t,a,n){if(t){this.contentManager.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId});var i=s.getText("mm_dntme_register_error"),o=t.responseJSON&&t.responseJSON.data?t.responseJSON.data.errors:null;"invalid email address"==t.responseJSON.error_code?i=s.getText("mm_dntme_invalid_email_server_error"):"wrong password"==t.responseJSON.error_code?i=s.getText("mm_dntme_wrong_password"):"mfa code required"==t.responseJSON.error_code?(i="You have enabled 2-factor authentication.  Please enter authentication code below:",this.$("#login-section").hide(),this.$("#mfa-section").show(),this.$("#error, #progress-section").hide(),this.$("#complete-setup-div, #form-div").show(),
this.trigger("render")):"no account found for email"==t.responseJSON.error_code?i=s.getText("mm_dntme_wrong_email"):"version not allowed"==t.responseJSON.error_code?i=s.getText("mm_dntme_version_not_allowed"):"account has been locked"==t.responseJSON.error_code?i=s.getText("mm_dntme_account_locked"):t.responseJSON.error_code==l.SCHEDULED_DOWNTIME?i=s.getText("mm_dntme_server_maintenance"):o&&o.email&&"was used for MaskMe Heavy"==o.email[0]&&(i=s.getText("mm_dntme_version_not_allowed")),this.$("#error").html(i).show(),t.responseJSON&&t.responseJSON.data&&1==t.responseJSON.data.generated_password&&this.$("#error #loginButton").click(e.bind(function(e){return r.webapp.openPasswordSetupPage(a.email),this.closePanel(),e.preventDefault(),!1},this)),this.$("#error #retryEmail, #error #loginButton").click(e.bind(function(e){return this.$(".fields, #error").toggle(),this.autoResize(),e.preventDefault(),!1},this)),this.$("#error #dnt2upgrade").click(e.bind(function(){r.webapp.openDnt2UpgradePage(),this.closePanel()},this)),this.autoResize(),n(i)}else this.contentManager.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),this.contentManager.preferences.fetchAll({success:function(){r.webapp.openDashboard(!0),n()}})},closingOnBlur:function(){r.memoryStore.get("login-panel-ignored",function(e){e?e++:e=1,e>=3?(r.memoryStore.set("login-panel-ignored",0),r.memoryStore.set("login-panel-closed",Date.now())):(r.memoryStore.set("login-panel-ignored",0),r.memoryStore.set("login-panel-closed",null))})},unlocked:function(t){t||(this.closePanel(),o.setTimeout(e.bind(this.focusField,this),100))}});return c}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.email_helper_panel=e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+='\n        <!--Mask My Email-->\n        <a href="#" class="mmKeyOption disposableEmail"><div class="element" id="mask">\n            <span class="panelLeft">\n                <img class="iconPos" src="',n="/pages/images/2015panels/email_green.png",g=a.assetUrl,i=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"assetUrl",n,{hash:{}}):i,r+=A(n)+'" style="width:44px;height:21px;"/>\n                ',n="mm_email_helper_maskMyEmail",g=a.intl,i=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"intl",n,{hash:{}}):i,r+=A(n)+'\n            </span>\n            <span class="panelRight">\n              ',g=a.tabData,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"tabData"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"hasFiveOrMoreTrackers"),i=a["if"],y=v.program(2,o,t),y.hash={},y.fn=y,y.inverse=v.noop,n=i.call(e,n,y),(n||0===n)&&(r+=n),r+='\n              <img class="loading" style="display:none;" src="',n="/pages/images/ajax_loader.gif",g=a.assetUrl,i=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"assetUrl",n,{hash:{}}):i,r+=A(n)+'"/>\n            </span>\n        </div></a>\n\n        <!--Server Down Error Handling-->\n        <span class="errorBtn disabled errorReportLink" style="display:none;cursor:pointer;"><div class="element">\n            <span class="panelLeft">\n                <a>',n="mm_email_helper_serverIsDown",g=a.intl,i=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"intl",n,{hash:{}}):i,r+=A(n)+'</a>\n            </span>\n            <span class="panelRight">\n                <a>',n="mm_email_helper_tryAgainLater",g=a.intl,i=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"intl",n,{hash:{}}):i,r+=A(n)+'</a>\n            </span>\n        </div></span>\n\n        <!--Account disabled Error Handling-->\n        <div class="accountDisabledBtn element" style="display:none">\n            <span class="message">',n="mm_email_helper_accountDisabled",g=a.intl,i=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"intl",n,{hash:{}}):i,r+=A(n)+'</span>\n            <a href=# class="enableAccount">',n="mm_email_helper_accountEnableLink",g=a.intl,i=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"intl",n,{hash:{}}):i,r+=A(n)+"</a>\n        </div>\n\n        <!--Disclose My Email-->\n        ",n="hasRegEmail",g=a.ifContentUser,i=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"ifContentUser"),y=v.program(4,s,t),y.hash={},y.fn=y,y.inverse=v.program(6,l,t),n=g&&typeof i===w?i.call(e,n,y):T.call(e,i,n,y),(n||0===n)&&(r+=n),r+="\n\n      ",g=a.accounts,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"accounts"),i=a.each,y=v.program(9,d,t),y.hash={},y.fn=y,y.inverse=v.noop,n=i.call(e,n,y),(n||0===n)&&(r+=n),r+="\n\n      <!-- If Masked Emails already exist for this domain -->\n         ",g=a.disposableEmails,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"disposableEmails"),i=a.each,y=v.program(14,m,t),y.hash={},y.fn=y,y.inverse=v.noop,n=i.call(e,n,y),(n||0===n)&&(r+=n),r+="\n    "}function o(e){var t,n,i,r="";return r+="\n                <span class=\"whatIsThisLink recommended largeOverflowText\"><span class='num-trackers'>",g=a.tabData,t=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"tabData"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"trackers"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"length"),n="mm_email_helper_recommended",g=a.intl,i=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===w?i.call(e,n,t,{hash:{}}):i===E?k.call(e,"intl",n,t,{hash:{}}):i,r+=A(t)+"</span>.</span>\n              "}function s(e){var t,n,i="";return i+='\n            <a href="#" class="mmKeyOption primaryEmail"><div class="element" id="disclose">\n                <span class="panelLeft">\n                    <img class="iconPos" src="',t="/pages/images/2015panels/email_red.png",g=a.assetUrl,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"assetUrl",t,{hash:{}}):n,i+=A(t)+'" style="width:44px;height:21px;"/>\n                    ',t="mm_email_helper_discloseEmail",g=a.intl,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"intl",t,{hash:{}}):n,i+=A(t)+"\n                </span>\n            </div></a>\n        "}function l(e,t){var n,i,r="";return r+='\n            <a href="#" class="mmKeyOption primaryEmail"><div class="element" id="disclose">\n                <span class="panelLeft">\n                    <img class="iconPos" src="',n="/pages/images/2015panels/email_red.png",g=a.assetUrl,i=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"assetUrl",n,{hash:{}}):i,r+=A(n)+'" style="width:44px;height:21px;"/>\n                    ',g=a.primaryEmail,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"primaryEmail"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"email"),typeof n===w?n=n.call(e,{hash:{}}):n===E&&(n=k.call(e,"primaryEmail.email",{hash:{}})),r+=A(n)+"\n                </span>\n            </div></a>\n            ",g=a.primaryEmail,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"primaryEmail"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"altEmails"),i=a.each,y=v.program(7,c,t),y.hash={},y.fn=y,y.inverse=v.noop,n=i.call(e,n,y),(n||0===n)&&(r+=n),r+="\n        "}function c(e){var t,n,i="";return i+='\n            <a href="#" class="mmKeyOption altEmail" data-value="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),typeof t===w?t=t.call(e,{hash:{}}):t===E&&(t=k.call(e,"this.email",{hash:{}})),i+=A(t)+'"><div class="element" id="disclose">\n                <span class="panelLeft">\n                    <img class="iconPos" src="',t="/pages/images/2015panels/email_red.png",g=a.assetUrl,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"assetUrl",t,{hash:{}}):n,i+=A(t)+'" style="width:44px;height:21px;"/>\n                    ',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),typeof t===w?t=t.call(e,{hash:{}}):t===E&&(t=k.call(e,"this.email",{hash:{}})),i+=A(t)+"\n                </span>\n            </div></a>\n            "}function d(e,t){var n,i,r="";return r+='\n        <!-- Login Emails -->\n        <a href="#" class="mmKeyOption account" data-account="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof n===w?n=n.call(e,{hash:{}}):n===E&&(n=k.call(e,"this.id",{hash:{}})),r+=A(n)+'"><div class="element otherblue" >\n        <span class="panelLeft" title="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress"),typeof n===w?n=n.call(e,{hash:{}}):n===E&&(n=k.call(e,"this.getAddress",{hash:{}})),r+=A(n)+'">\n          ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"isCompanyAccount"),i=a["if"],y=v.program(10,u,t),y.hash={},y.fn=y,y.inverse=v.program(12,p,t),n=i.call(e,n,y),(n||0===n)&&(r+=n),r+="\n          ",n="mm_login_helper_use",g=a.intl,i=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"intl",n,{hash:{}}):i,r+=A(n)+" ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress"),typeof n===w?n=n.call(e,{hash:{}}):n===E&&(n=k.call(e,"this.getAddress",{hash:{}})),r+=A(n)+'\n        </span>\n        <span class="panelRight">\n            <span class="overflowText">(',n="createdAt",g=a.live_timestamp,i=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"live_timestamp"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"live_timestamp",n,{hash:{}}):i,r+=A(n)+")</span>\n        </span>\n        </div></a>\n      "}function u(e){var t,n,i="";return i+='\n            <img class="" src="',t="/pages/images/2015panels/login_red.png",g=a.assetUrl,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"assetUrl",t,{hash:{}}):n,i+=A(t)+'" style="width:40px;height:21px;"/>\n          '}function p(e){var t,n,i="";return i+='\n            <img class="" src="',t="/pages/images/2015panels/login_blue.png",g=a.assetUrl,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"assetUrl",t,{hash:{}}):n,i+=A(t)+'" style="width:40px;height:21px;"/>\n          '}function m(e){var t,n,i="";return i+='\n            <a href="#" data-aliasaddress="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress"),typeof t===w?t=t.call(e,{hash:{}}):t===E&&(t=k.call(e,"this.getAddress",{hash:{}})),i+=A(t)+'" class="mmKeyOption usedEmail"><div class="element otherblue">\n                <span class="panelLeft disposable">\n                    <img class="iconPos" src="',t="/pages/images/2015panels/email_blue.png",g=a.assetUrl,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"assetUrl",t,{hash:{}}):n,i+=A(t)+'" style="width:44px;height:21px;"/>\n                    ',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress"),typeof t===w?t=t.call(e,{hash:{}}):t===E&&(t=k.call(e,"this.getAddress",{hash:{}})),i+=A(t)+'\n                </span>\n                <span class="panelRight disposable">\n                    <span class="overflowText">(',t="createdAt",g=a.live_timestamp,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"live_timestamp"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"live_timestamp",t,{hash:{}}):n,i+=A(t)+")</span>\n                </span>\n            </div></a>\n         "}function h(e){var t,n,i="";return i+='\n        <!-- new email register flow -->\n        <div class="progress-section" style="display:none">\n            <div class="progress progress-striped active">\n                <div class="bar bar-info" style="width: 100%;"></div>\n            </div>\n            <div class="loading-message"></div>\n        </div>\n\n        <div class="info" style="font-weight: bold;">',t="mm_dntme_enter_email",g=a.intl,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"intl",t,{hash:{}}):n,i+=A(t)+'</div>\n        <a href="#" class="mmKeyOption registerEmail"><div class="element" id="mask">\n          <span class="panelLeft">\n              <img class="iconPos" src="',t="/pages/images/2015panels/email_green.png",g=a.assetUrl,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"assetUrl",t,{hash:{}}):n,i+=A(t)+'" style="width:44px;height:21px;"/>\n            ',t="mm_email_helper_maskMyEmail",g=a.intl,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"intl",t,{hash:{}}):n,i+=A(t)+'\n          </span>\n          <span class="panelRight whatIsThisLink">\n            ',t="mm_email_helper_whatIsThis",g=a.intl,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"intl",t,{hash:{}}):n,i+=A(t)+'\n          </span>\n        </div></a>\n        <a href="#" class="mmKeyOption noPrimaryEmail"><div class="element" id="disclose">\n            <span class="panelLeft">\n                <img class="iconPos" src="',t="/pages/images/2015panels/email_red.png",g=a.assetUrl,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"assetUrl",t,{hash:{}}):n,i+=A(t)+'" style="width:44px;height:21px;"/>\n              ',t="mm_email_helper_discloseEmail",g=a.intl,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"intl",t,{hash:{}}):n,i+=A(t)+"\n            </span>\n        </div></a>\n    "}a=a||e.helpers,n=n||e.partials;var _,f,g,y,b="",v=this,w="function",k=a.helperMissing,E=void 0,A=this.escapeExpression,T=a.blockHelperMissing;return b+='<div class="newpanel">\n    <div class="left-panel">\n    <div id="error" style="display:none;"></div>\n    ',g=a.hasRegistered,_=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasRegistered"),f=a["if"],y=v.program(1,r,i),y.hash={},y.fn=y,y.inverse=v.program(16,h,i),_=f.call(t,_,y),(_||0===_)&&(b+=_),b+="\n    ",_=t,_=v.invokePartial(n["common.auto_fill_with"],"common.auto_fill_with",_,a,n),(_||0===_)&&(b+=_),b+="\n    </div>\n    ",_=t,_=v.invokePartial(n["common.header"],"common.header",_,a,n),(_||0===_)&&(b+=_),b+="\n\n</div>"}),ABINE_DNTME.CompiledTemplates.email_helper_panel}),ABINE_DNTME.define("abine/views/emailHelperPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/contentMessenger","abine/proxies","abine/intl","abine/responseCodes"],function(e,t,a,n,i,r,o,s,l,c){function d(e,t){t=t||"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!-$#%^@";for(var a="",n=0;n<e;n++)a+=t.charAt(Math.floor(Math.random()*t.length));return a}var u=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i,p=(a.View.extend({tagName:"span",templateName:"email_helper_tracker_count",afterInitialize:function(){this.doc=this.el.ownerDocument}}),i.extend({templateName:"email_helper_panel",events:{"click .recommended span":"showDNTMe","click a.registerEmail":"setupUser","click a.noPrimaryEmail":"noPrimaryEmail","click a.primaryEmail":"fillWithPrimaryEmail","click a.altEmail":"fillWithAlternateEmail","click a.disposableEmail":"fillWithDisposableEmail","click a.usedEmail":"fillWithUsedEmail","click a.account":"fillWithAccount","click a.disabled":"closePanel","click .panelSection":"performActions","click a.enableAccount":"enableAccount","click .errorReportLink":"makeErrorReport","click .help-link":"openHelp","click .logo-link":"openHelp","click .turn-off":"turnOffEmailPanels","click .turn-on":"turnOnEmailPanels","click .close-link":"logClose"},logClose:function(){this.updatePanelActivity("closed",this.panelId,this.fieldId,!0)},turnOffEmailPanels:function(e){e.preventDefault(),this.contentManager.preferences.setPref("suggestProtectedEmail","false"),this.closeHeader()},turnOnEmailPanels:function(e){e.preventDefault(),this.contentManager.preferences.setPref("suggestProtectedEmail","true"),this.closePanel()},openMaskedEmailsIn30:function(e){return e.preventDefault(),!t(e.target).hasClass("num-trackers")&&(s.webapp.openMaskedEmailsIn30(),this.closePanel(),!1)},openHelp:function(e){return!t(e.target).hasClass("num-trackers")&&"disableLink"!=e.target.id&&(s.webapp.openHelp("/email"),void this.closePanel())},showDNTMe:function(e){e.preventDefault(),this.contentManager.showToolbarPanel({page:"trackers"}),this.closePanel()},makeErrorReport:function(){s.webapp.openHelp(""),this.closePanel()},afterInitialize:function(){this.fieldId=this.options.fieldId,this.strategyId=this.options.strategyId,this.numMenuOptions=3,this.applyFadingStyle(),this.fadeIn(),this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.model={panelType:"email",primaryEmail:!1,panelsDisabled:!this.contentManager.preferences.getPref("suggestProtectedEmail"),iconClick:!!this.options.iconClick,hasRegistered:this.options.hasRegistered,disposableEmails:new n.DisposableEmailCollection,mapper:!!this.contentManager.preferences.getPref("mapping:mapper"),showMapper:this.contentManager.preferences.isMapper(),show_settings:!this.contentManager.preferences.getPref("email-settings-seen")},this.model.tabData=new n.TabData({messenger:this.options.messenger}),this.model.tabData.fetchTrackers({success:e.bind(function(){this.model.tabData.hasFiveOrMoreTrackers()&&(this.model.show_settings=!1),this.model.shieldedEmails=new n.ShieldedEmailCollection,this.model.shieldedEmails.fetchAll({success:e.bind(function(){this.model.shieldedEmails.length>0&&(this.model.primaryEmail=this.model.shieldedEmails.at(0)),this.model.primaryEmail?(this.panelId=1000001,this.updatePanelActivity("impression",this.panelId,this.fieldId,!0),this.model.accounts=new n.AccountCollection,this.model.accounts.fetchLoginsByDomain(this.options.domain,e.bind(function(){this.options.hasPassword||(this.model.accounts=new n.AccountCollection),this.model.disposableEmails=new n.DisposableEmailCollection,this.model.disposableEmails.fetchAllByDomain(this.options.domain,e.bind(function(){this.numMenuOptions=2,this.bind("enter0",function(e){this.fillWithDisposableEmail(e)}),this.bind("enter1",function(e){this.fillWithPrimaryEmail(e)}),this.numMenuOptions+=this.model.accounts.length;for(var e=2;e<this.numMenuOptions;e++)this.bind("enter"+e,function(e,t){this.fillWithLoginAccount(e,t)});this.numMenuOptions+=this.model.disposableEmails.length;for(var e=2+this.model.accounts.length;e<this.numMenuOptions;e++)this.bind("enter"+e,function(e,t){this.fillWithUsedEmail(e,t)});this.render()},this))},this))):(this.model.hasRegistered=!1,this.model.dynamicPanel?(this.panelId=this.model.dynamicPanel.id,this.updatePanelActivity("impression",this.panelId,this.fieldId,!0)):(this.doNotCloseOnTyping=!0,this.panelId=5000001,this.updatePanelActivity("impression",this.panelId,this.fieldId,!0),this.bind("enter0",this.setupUser,this),this.bind("enter1",this.noPrimaryEmail,this)),this.render()),this.bindBaseEvents()},this)})},this)})},noPrimaryEmail:function(e){e&&e.preventDefault(),this.setupUser(e,!0)},retryEmail:function(e){e&&e.preventDefault(),this.$("#error, .progress-section").hide(),this.$(".info, .registerEmail, .noPrimaryEmail").show(),this.$(".mmKeyOption .hover").removeClass("hover"),this.triggerRender(),delete this.selectedField},setupUser:function(a,n){return a&&(a.preventDefault(),this.$(a.target).hasClass("whatIsThisLink"))?void window.open("https://dnt.abine.com/#help/faq/masking-whataremaskedemails2","_blank"):(n=n||!1,void this.contentManager.getValue("current.field.value",this.strategyId,this.fieldId,e.bind(function(i){function o(e,a){try{h.get(0).ownerDocument&&(n?t(".loading-message",h).text(l.getText("mm_loading_display_register_use"+Math.floor(e/5))):t(".loading-message",h).text(l.getText("mm_loading_display_register"+Math.floor(e/5))),e<a&&(_=r.setTimeout(function(){o(e+1,a)},500)))}catch(e){}}this.$(".info").hide();var c=this.$("#error");if(c.hide(),!i.match(u))return c.text(l.getText("mm_dntme_invalid_email")).show(),void this.autoResize();var p=d(6),m={email:i,password:p,password_hint:l.getText("mm_pwhint_default"),generated_password:!0,register_type:"dnt_email_panel"},h=this.$(".progress-section"),_=null;o(0,20),h.show(),this.$(".registerEmail, .noPrimaryEmail").hide(),s.licenseModule.register(m,e.bind(function(t,i){this.processRegistration(t,i,m,e.bind(function(e){e?(r.clearTimeout(_),h.hide()):n?this.fillWithPrimaryEmail(a,!0):this.fillWithDisposableEmail(a,!0)},this))},this)),this.autoResize()},this)))},processRegistration:function(t,a,n,i){if(t){var r=l.getText("mm_dntme_register_error"),o=t.responseJSON&&t.responseJSON.data?t.responseJSON.data.errors:null;"invalid email address"==t.responseJSON.error_code?r=l.getText("mm_dntme_invalid_email_server_error"):t.responseJSON.error_code==c.SCHEDULED_DOWNTIME?r=l.getText("mm_dntme_server_maintenance"):o&&o.email&&("has already been taken"==o.email[0]?r=l.getText("mm_dntme_duplicate_email",[n.email]):"was used for MaskMe Heavy"==o.email[0]&&(r=l.getText("mm_dntme_version_not_allowed"))),this.$("#error").html(r).show(),t.responseJSON&&t.responseJSON.data&&1==t.responseJSON.data.generated_password?this.$("#error #loginButton").click(e.bind(function(e){return this.openPasswordSetupPage(n.email),e.preventDefault(),!1},this)):this.$("#error #loginButton").click(e.bind(this.openLoginPage,this)),this.$("#error #retryEmail").click(e.bind(this.retryEmail,this)),this.$("#error #dnt2upgrade").click(e.bind(this.openDnt2UpgradePage,this)),this.autoResize(),i(r)}else this.contentManager.preferences.fetchAll(),this.model.shieldedEmails.fetchAll({success:e.bind(function(){this.model.shieldedEmails.length>0&&(this.model.primaryEmail=this.model.shieldedEmails.at(0)),i()},this)})},fillWithPrimaryEmail:function(e,t){if(e&&e.preventDefault(),t=t||!1,this.updatePanelActivity("disclosed",this.panelId,this.fieldId,!0),t){this.fieldId&&this.fillFields("email",this.model.primaryEmail.getAddress(),"primary");var a={msg:l.getText("mm_email_helper_nextDisclose"),targetUrl:ABINE_DNTME.config.protocol+ABINE_DNTME.config.webAppHost+"/#/emailsin30"};a.neverFade=!0,this.options.contentManager.showNotification(a)}else if(this.fieldId&&this.model.primaryEmail&&!ABINE_DNTME.contentuser.hasRegEmail())""==this.model.primaryEmail.get("email")?this.openLoginPage("primaryemail"):this.fillFields("email",this.model.primaryEmail.getAddress(),"primary");else if(ABINE_DNTME.contentuser.hasRegEmail())return void this.openSetupEmailPage();this.closePanel()},fillWithDisposableEmail:function(t,a){if(t&&t.preventDefault(),this.updatePanelActivity("masked",this.panelId,this.fieldId,!0),this.field&&this.model.primaryEmail&&""==this.model.primaryEmail.get("email"))return void this.openLoginPage("maskedemail");if(!this.generatingDisposable){var n=this.options.oldValue;n.match(u)&&this.model.primaryEmail.get("email")!=n?n.indexOf("@"+ABINE_DNTME.config.disposableDomain)!=-1&&(n=null):n=null,n&&(this.ignoreBlur(!0),this.doNotCloseOnTyping=!0),this.generatingDisposable=!0,this.$(".loading").show(),this.$(".recommended").hide();var i=this.model.primaryEmail.generateDisposable(this.options.domain,a?"dnt-autoreg-panel":"dnt-panel");i.save({},{success:e.bind(function(){this.fillFields("email",i.getAddress(),{origin:"disposable",disposableGUID:i.get("guid")}),n?(this.$("#error").html(l.getText("mm_dntme_change_email_message",[this.model.primaryEmail.get("email"),n])).show(),this.$("#error #changeSetting").click(e.bind(this.openSettings,this)),this.$(".mmKeyOption, .sep, .errorBtn").hide(),this.focusField(),delete this.doNotCloseOnTyping,this.autoResize()):this.closePanel(),this.generatingDisposable=!1},this),error:e.bind(function(){this.$(".disposableEmail").hide(),this.$(".errorBtn").show()},this)})}},fillWithAccount:function(a,n){a&&a.preventDefault();var i;if(n||0==n){var r=e(this.el.children[0].children).filter(function(e){return t(e).is("a")&&!t(e).hasClass("disabled")});i=t(r[n]).data("account")}else i=t(a.target).closest("a").data("account");var o=e.find(this.model.accounts.models,function(e){return e.get("id")==i}),s=o.get("login_url");(!s||0==s.length||s!=this.contentManager.href&&this.contentManager.href.indexOf(s)==-1)&&o.set("login_url",this.contentManager.href);var l=o.get("times_used")||0;o.set("times_used",l+1),o.set("pushed",0),o.save(),this.contentManager.messenger.send("update:panelActivity:masked",{panelId:7000004});var c=o.get("email"),d=o.get("username"),u=o.get("password");d&&0!=d.length||(d=c),c&&0!=c.length||(c=d),this.fillFields("login-no-submit",{email:c,username:d,password:u},"login"),this.closePanel()},enableAccount:function(e){this.getContentMessenger(),this.messenger.send("window:createTab",{localUrl:"pages/index.html#emailDisabled"}),this.closePanel(e)},fillWithUsedEmail:function(a,n){a&&a.preventDefault(),this.updatePanelActivity("masked",this.panelId,this.fieldId,!0);var i;if(n||0==n){var r=e(this.el.children[0].children).filter(function(e){return t(e).is("a")&&!t(e).hasClass("disabled")});i=t(r[n]).data("aliasaddress")}else i=t(a.target).closest("a").data("aliasaddress");this.fillFields("email",i,"disposable"),this.closePanel()},fillWithAlternateEmail:function(a,n){a&&a.preventDefault(),this.updatePanelActivity("disclosed",this.panelId,this.fieldId,!0);var i;if(n||0==n){var r=e(this.el.children[0].children).filter(function(e){return t(e).is("a")&&!t(e).hasClass("disabled")});i=t(r[n]).data("value")}else i=t(a.target).closest("a").data("value");this.fillFields("email",i,"primary"),this.closePanel()}}));return p}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.login_helper_panel=e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+='\n        <div class="element otherblue" >\n            <span class="panelLeft" title="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress"),typeof n===y?n=n.call(e,{hash:{}}):n===v&&(n=b.call(e,"this.getAddress",{hash:{}})),r+=w(n)+'">\n                ',h=a.loggingAccount,n=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"loggingAccount"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"isCompanyAccount"),i=a["if"],_=g.program(2,o,t),_.hash={},_.fn=_,_.inverse=g.program(4,s,t),n=i.call(e,n,_),(n||0===n)&&(r+=n),r+="\n                Logging in as ",h=a.loggingAccount,n=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"loggingAccount"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"getAddress"),typeof n===y?n=n.call(e,{hash:{}}):n===v&&(n=b.call(e,"loggingAccount.getAddress",{hash:{}})),r+=w(n)+"...\n            </span>\n        </div>\n    "}function o(e){var t,n,i="";return i+='\n                    <img class="" src="',t="/pages/images/2015panels/login_red.png",h=a.assetUrl,n=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===y?n.call(e,t,{hash:{}}):n===v?b.call(e,"assetUrl",t,{hash:{}}):n,i+=w(t)+'" style="width:40px;height:21px;"/>\n                '}function s(e){var t,n,i="";return i+='\n                    <img class="" src="',t="/pages/images/2015panels/login_blue.png",h=a.assetUrl,n=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===y?n.call(e,t,{hash:{}}):n===v?b.call(e,"assetUrl",t,{hash:{}}):n,i+=w(t)+'" style="width:40px;height:21px;"/>\n                '}function l(e,t){var n,i,r="";return r+="\n        ",h=a.accounts,n=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"accounts"),i=a.each,_=g.program(7,c,t),_.hash={},_.fn=_,_.inverse=g.noop,n=i.call(e,n,_),(n||0===n)&&(r+=n),r+="\n    "}function c(e,t){var n,i,r="";return r+='\n            <!-- Login Emails -->\n            <a href="#" class="mmKeyOption account" data-account="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof n===y?n=n.call(e,{hash:{}}):n===v&&(n=b.call(e,"this.id",{hash:{}})),r+=w(n)+'"><div class="element otherblue" >\n        <span class="panelLeft" title="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress"),typeof n===y?n=n.call(e,{hash:{}}):n===v&&(n=b.call(e,"this.getAddress",{hash:{}})),r+=w(n)+'">\n          ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"isCompanyAccount"),i=a["if"],_=g.program(8,d,t),_.hash={},_.fn=_,_.inverse=g.program(10,u,t),n=i.call(e,n,_),(n||0===n)&&(r+=n),r+="\n            ",n="mm_login_helper_use",h=a.intl,i=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===y?i.call(e,n,{hash:{}}):i===v?b.call(e,"intl",n,{hash:{}}):i,r+=w(n)+" ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress"),typeof n===y?n=n.call(e,{hash:{}}):n===v&&(n=b.call(e,"this.getAddress",{hash:{}})),r+=w(n)+'\n        </span>\n        <span class="panelRight">\n            <span class="edit" style="cursor: pointer;text-decoration: underline;" title="Click to edit account">(',n="createdAt",h=a.live_timestamp,i=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"live_timestamp"),n=typeof i===y?i.call(e,n,{hash:{}}):i===v?b.call(e,"live_timestamp",n,{hash:{}}):i,r+=w(n)+")</span>\n        </span>\n            </div></a>\n        "}function d(e){var t,n,i="";return i+='\n              <img class="" src="',t="/pages/images/2015panels/login_red.png",h=a.assetUrl,n=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===y?n.call(e,t,{hash:{}}):n===v?b.call(e,"assetUrl",t,{hash:{}}):n,i+=w(t)+'" style="width:40px;height:21px;"/>\n          '}function u(e){var t,n,i="";return i+='\n              <img class="" src="',t="/pages/images/2015panels/login_blue.png",h=a.assetUrl,n=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===y?n.call(e,t,{hash:{}}):n===v?b.call(e,"assetUrl",t,{hash:{}}):n,i+=w(t)+'" style="width:40px;height:21px;"/>\n          '}a=a||e.helpers,n=n||e.partials;var p,m,h,_,f="",g=this,y="function",b=a.helperMissing,v=void 0,w=this.escapeExpression;return f+='<div class="newpanel">\n    <div class="left-panel">\n    ',h=a.loggingAccount,p=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"loggingAccount"),m=a["if"],_=g.program(1,r,i),_.hash={},_.fn=_,_.inverse=g.program(6,l,i),p=m.call(t,p,_),(p||0===p)&&(f+=p),f+="\n    ",p=t,p=g.invokePartial(n["common.auto_fill_with"],"common.auto_fill_with",p,a,n),(p||0===p)&&(f+=p),f+="\n    </div>\n    ",p=t,p=g.invokePartial(n["common.header"],"common.header",p,a,n),(p||0===p)&&(f+=p),f+="\n\n</div>"}),ABINE_DNTME.CompiledTemplates.login_helper_panel}),ABINE_DNTME.define("abine/views/loginHelperPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/proxies","abine/timer"],function(e,t,a,n,i,r){var o=i.extend({templateName:"login_helper_panel",events:{"click a.account":"fillWithAccount","click .help-link":"openHelp","click .edit":"openEdit"},openHelp:function(){r.webapp.openHelp("/faq/guides-blurPasswordManager"),this.closePanel()},afterInitialize:function(){this.fieldId=this.options.fieldId,this.strategyId=this.options.strategyId,this.bindBaseEvents(),this.applyFadingStyle(),this.fadeIn(),this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.model={panelType:"account",accounts:new n.AccountCollection,mapper:!!this.contentManager.preferences.getPref("mapping:mapper"),showMapper:this.contentManager.preferences.isMapper(),show_settings:!this.contentManager.preferences.getPref("account-settings-seen")},this.model.accounts.fetchLoginsByDomain(this.options.domain,e.bind(function(e){if(e||0==this.model.accounts.length)this.closePanel();else{this.numMenuOptions=this.model.accounts.length;for(var t=0;t<this.numMenuOptions;t++)this.bind("enter"+t,function(e,t){this.fillWithAccount(e,t)},this);this.render()}},this))},openEdit:function(e){e&&e.preventDefault();var a=t(e.target).closest("a").data("account");return r.webapp.openPage("/#/client/accounts/edit/"+a),this.closePanel(),!1},fillWithAccount:function(a,n){a&&a.preventDefault();var i;if(n||0==n){var r=e(this.el.children[0].children).filter(function(e){return t(e).is("a")&&!t(e).hasClass("disabled")});i=t(r[n]).data("account")}else i=t(a.target).closest("a").data("account");var o=e.find(this.model.accounts.models,function(e){return e.get("id")==i}),s=o.get("login_url");(!s||0==s.length||s!=this.contentManager.href&&this.contentManager.href.indexOf(s)==-1)&&o.set("login_url",this.contentManager.href),o.get("page_host")||o.set("page_host",this.contentManager.host);
var l=o.get("times_used")||0;o.set("times_used",l+1),o.set("pushed",0),o.save(),this.contentManager.messenger.send("update:panelActivity:masked",{panelId:7000004});var c=o.get("email"),d=o.get("username"),u=o.get("password");d&&0!=d.length||(d=c),c&&0!=c.length||(c=d),this.fillFields("login",{email:c,username:d,password:u},"login"),this.closePanel()}});return o}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.address_helper_panel=e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+='\n    <a href="#" class="mmKeyOption address" data-address="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof n===_?n=n.call(e,{hash:{}}):n===g&&(n=f.call(e,"this.id",{hash:{}})),r+=y(n)+'"><div class="element" id="mask">\n        <span class="panelLeft full" title="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"label"),typeof n===_?n=n.call(e,{hash:{}}):n===g&&(n=f.call(e,"this.label",{hash:{}})),r+=y(n)+'">\n            <img class="iconPos" src="',n="/pages/images/2015panels/address_green.png",u=a.assetUrl,i=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),n=typeof i===_?i.call(e,n,{hash:{}}):i===g?f.call(e,"assetUrl",n,{hash:{}}):i,r+=y(n)+'" style="width:42px;height:21px;"/>\n            ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"fullLabel"),i=a["if"],p=h.program(2,o,t),p.hash={},p.fn=p,p.inverse=h.program(4,s,t),n=i.call(e,n,p),(n||0===n)&&(r+=n),r+="\n        </span>\n    </div></a>\n    "}function o(e){var t;return t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"fullLabel"),typeof t===_?t=t.call(e,{hash:{}}):t===g&&(t=f.call(e,"this.fullLabel",{hash:{}})),y(t)}function s(e){var t,n,i;return t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"label"),n="mm_address_helper_use",u=a.intl,i=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===_?i.call(e,n,t,{hash:{}}):i===g?f.call(e,"intl",n,t,{hash:{}}):i,y(t)}function l(e){var t,n,i="";return i+='\n      <a href="#" class="mmKeyOption addNew"><div class="element" id="mask">\n        <span class="panelLeft full">\n            <img class="iconPos" src="',t="/pages/images/2015panels/address_red.png",u=a.assetUrl,n=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===_?n.call(e,t,{hash:{}}):n===g?f.call(e,"assetUrl",t,{hash:{}}):n,i+=y(t)+'" style="width:42px;height:21px;"/>\n            ',t="mm_address_helper_add_new",u=a.intl,n=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===_?n.call(e,t,{hash:{}}):n===g?f.call(e,"intl",t,{hash:{}}):n,i+=y(t)+"\n        </span>\n      </div></a>\n    "}a=a||e.helpers,n=n||e.partials;var c,d,u,p,m="",h=this,_="function",f=a.helperMissing,g=void 0,y=this.escapeExpression;return m+='<div class="newpanel">\n    <div class="left-panel">\n    ',u=a.addresses,c=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"addresses"),d=a.each,p=h.program(1,r,i),p.hash={},p.fn=p,p.inverse=h.noop,c=d.call(t,c,p),(c||0===c)&&(m+=c),m+="\n    ",u=a.showAddNew,c=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"showAddNew"),d=a["if"],p=h.program(6,l,i),p.hash={},p.fn=p,p.inverse=h.noop,c=d.call(t,c,p),(c||0===c)&&(m+=c),m+="\n    ",c=t,c=h.invokePartial(n["common.auto_fill_with"],"common.auto_fill_with",c,a,n),(c||0===c)&&(m+=c),m+="\n    </div>\n    ",c=t,c=h.invokePartial(n["common.header"],"common.header",c,a,n),(c||0===c)&&(m+=c),m+="\n</div>"}),ABINE_DNTME.CompiledTemplates.address_helper_panel}),ABINE_DNTME.define("abine/views/addressHelperPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/intl","abine/proxies"],function(e,t,a,n,i,r,o){var s=i.extend({templateName:"address_helper_panel",events:{"click a.address":"fillWithAddress","click .help-link":"openHelp","click a.addNew":"addNewAddress"},openHelp:function(){o.webapp.openHelp("/faq/guides-autofillAddresses"),this.closePanel()},addNewAddress:function(){this.updatePanelActivity("closed",this.panelId,this.fieldId,!1),o.webapp.openPage("/#/client/address/add"),this.closePanel()},afterInitialize:function(){this.fieldId=this.options.fieldId,this.panelId=7000056,this.updatePanelActivity("impression",this.panelId,this.fieldId,!1),this.bindBaseEvents(),this.applyFadingStyle(),this.fadeIn(),this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.model={panelType:"address",addresses:new n.AddressCollection,mapper:!!this.contentManager.preferences.getPref("mapping:mapper"),showMapper:this.contentManager.preferences.isMapper(),show_settings:!this.contentManager.preferences.getPref("address-settings-seen")},this.model.addresses.fetchAll({success:e.bind(function(){if(0==this.model.addresses.length)this.closePanel();else{this.model.showAddNew=this.model.addresses.length<=1,this.numMenuOptions=this.model.addresses.length;for(var e=0;e<this.numMenuOptions;e++)"Masked Card"==this.model.addresses.models[e].get("label")&&(this.model.addresses.models[e].attributes.fullLabel=r.getText("mm_address_helper_abine_address")),this.bind("enter"+e,function(e,t){this.fillWithAddress(e,t)},this);this.render()}},this)})},fillWithAddress:function(a,n){a&&a.preventDefault();var i;if(n||0==n){var r=e(this.el.children[0].children).filter(function(e){return t(e).is("a")&&!t(e).hasClass("disabled")});i=t(r[n]).data("address")}else i=t(a.target).closest("a").data("address");var o=e.find(this.model.addresses.models,function(e){return e.get("id")==i});this.fillFields("address",o.toJSON(),"address"),"Masked Card"==o.get("label")?this.updatePanelActivity("masked",this.panelId,this.fieldId,!1):this.updatePanelActivity("discloses",this.panelId,this.fieldId,!1),this.closePanel()}});return s}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.autofillwith_helper_panel=e.template(function(e,t,a,n,i){function r(e){var t;return m=a.title,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"title"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"title",{hash:{}})),t||0===t?t:""}function o(e){var t,n;return t="mm_auto_fill_with_header",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===g?n.call(e,t,{hash:{}}):n===b?y.call(e,"intl",t,{hash:{}}):n,v(t)}function s(e,t){var n,i,r="";return r+='\n      <a href="#" class="mapField" data-idx="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"idx"),typeof n===g?n=n.call(e,{hash:{}}):n===b&&(n=y.call(e,"this.idx",{hash:{}})),r+=v(n)+'">\n        <div class="element clearfix" id="mask">\n          <span class="panelLeft" style="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"bolder"),i=a["if"],h=f.program(6,l,t),h.hash={},h.fn=h,h.inverse=f.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+='">\n            ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"label"),typeof n===g?n=n.call(e,{hash:{}}):n===b&&(n=y.call(e,"this.label",{hash:{}})),(n||0===n)&&(r+=n),r+="\n          </span>\n          ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"hasChildren"),i=a["if"],h=f.program(8,c,t),h.hash={},h.fn=h,h.inverse=f.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="\n        </div>\n      </a>\n    "}function l(){return"font-weight: bold;"}function c(){return'\n          <span class="panelRight" style="font-weight: bold;font-size:11pt;">&gt;</span>\n          '}function d(){return"display:none;"}a=a||e.helpers,n=n||e.partials;var u,p,m,h,_="",f=this,g="function",y=a.helperMissing,b=void 0,v=this.escapeExpression;return _+='<div class="panel">\n\n  <div class="step1">\n    <div class="info panelTitle" style="font-weight: bold;">\n      ',m=a.title,u=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"title"),p=a["if"],h=f.program(1,r,i),h.hash={},h.fn=h,h.inverse=f.program(3,o,i),u=p.call(t,u,h),(u||0===u)&&(_+=u),_+="\n    </div>\n    ",m=a.menu,u=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"menu"),p=a.each,h=f.program(5,s,i),h.hash={},h.fn=h,h.inverse=f.noop,u=p.call(t,u,h),(u||0===u)&&(_+=u),_+='\n  </div>\n  <div class="loading" style="text-align: center;padding:10px;',m=a.loading,u=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"loading"),p=a.unless,h=f.program(10,d,i),h.hash={},h.fn=h,h.inverse=f.noop,u=p.call(t,u,h),(u||0===u)&&(_+=u),_+='"><img src="',u="/pages/images/ajax_loader.gif",m=a.assetUrl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"assetUrl",u,{hash:{}}):p,_+=v(u)+'"/></div>\n  <a href="#" class="mapFieldFooter">\n    <div class="element">\n      <span class="panelLeft advanced">\n        ',u="mm_auto_fill_with_advanced",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+' &rarr;\n      </span>\n      <span class="panelRight back" style="font-size: 10pt;">\n        &larr; ',u="mm_auto_fill_with_go_back",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'\n      </span>\n    </div>\n  </a>\n  <div class="show-here" style="display: none;padding: 40px 5px;text-align: center">\n    Done!<br/>\n    You will see panels here.<br/><br/>\n    If you would like to turn on all auto-fill panels here,<br/>\n    <a href=# class="change-all">click here</a>\n  </div>\n  <div class="dont-show-here" style="display: none;padding: 40px 5px;text-align: center">\n    Done!<br/>\n    You won\'t see this panel here again.<br/><br/>\n    If you would like to turn off all auto-fill panels here,<br/>\n    <a href=# class="change-all">click here</a>\n  </div>\n  <div class="confirm" style="display: none;padding: 30px 5px;text-align: center">\n    Thanks!<br/>\n    <a href="#" class="done">Click here</a> to see your changes.<br/>\n    (if not, email blur-support@getabine.com)<br/><br/>\n    You have also helped improve Blur for the community.<br/>\n    <a href=# class="disable-feedback">Turn off this auto-fill feedback?</a>\n  </div>\n\n  <div class="report" style="display: none;text-align: center;padding-top:20px;">\n    <div class="report-form">\n    <div style="padding: 10px 0;">',u="mm_auto_fill_report_problem",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'</div>\n    <form id="reportProblem">\n      <input id="name" type="text" placeholder="',u="mm_auto_fill_report_name",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'" style="width: 90%;" required/>\n      <input id="email" type="text" placeholder="',u="mm_auto_fill_report_email",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'" style="width: 90%;"/>\n      <textarea id="message" placeholder="',u="mm_auto_fill_report_message",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'" style="width: 90%;height:100px;" required></textarea>\n      <input id="report" type="submit" value="',u="mm_auto_fill_report_submit",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'"/>\n    </form>\n    </div>\n    <div class="report-success" style="display: none;padding: 30px 5px;text-align: center">\n      Thanks!<br/><br/>\n      You have also helped improve Blur for the community.<br/><br/><br/>\n    </div>\n  </div>\n\n  ',u=t,u=f.invokePartial(n["common.header"],"common.header",u,a,n),(u||0===u)&&(_+=u),_+="\n\n</div>"}),ABINE_DNTME.CompiledTemplates.autofillwith_helper_panel}),ABINE_DNTME.define("abine/views/autoFillWithPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/contentMessenger","abine/proxies","abine/intl","abine/responseCodes","abine/password"],function(e,t,a,n,i,r,o,s,l,c,d){var u=i.extend({templateName:"autofillwith_helper_panel",events:{"click .map":"map","click .mapField":"mapField","click .advanced":"advanced","click .panelTitle .formType":"changeFormType","click .back":"back","click .help-link":"openHelp","click .logo-link":"openHelp","click .change-all":"changeAll","click .done":"done","submit #reportProblem":"reportProblem","click .disable-feedback":"disableFeedback","click .close-link":"logClose"},logClose:function(){this.updatePanelActivity("closed",this.panelId,this.fieldId,!0)},openHelp:function(e){return!t(e.target).hasClass("num-trackers")&&(s.webapp.openHelp("/email"),void this.closePanel())},dataTypePanel:function(){return!1},disableFeedback:function(e){this.contentManager.preferences.setPref("disableMapFeedback","true"),this.done(e)},changeFormType:function(t){if(t.preventDefault(),this.showingFormTypes)return void this.back(t);this.showingFormTypes=!0;var a=this.options.formType;this.model.menu=new n.MappingMenuCollection;var i=[{label:"Change to Login Form",formType:"loginForm"},{label:"Change to Registraton Form",formType:"registrationForm"},{label:"Change to Checkout Form",formType:"checkoutForm"},{label:"Change to Address Form",formType:"addressForm"},{label:"Change to Other Form",formType:"otherForm"}],r=0;e.each(i,e.bind(function(e){a!=e.formType&&this.model.menu.add(new n.MappingMenu({label:e.label,action:"change_form_type",formType:e.formType,idx:r++}))},this)),this.render()},done:function(e){e.preventDefault();var t=this;r.setTimeout(function(){t.focusField(),t.closePanel()},500)},changeAll:function(e){e.preventDefault(),this.contentManager.showToolbarPanel({page:"accounts"}),this.closePanel()},reportProblem:function(e){e.preventDefault();var t={name:this.$("#name").val(),email:this.$("#email").val(),message:"Reported using mapping panel:\n\n"+this.$("#message").val(),addLookupMetaData:!0};this.$(".report-form, .report-success").toggle(),this.sendFeedbackEmail(t),this.autoResize();var a=this;r.setTimeout(function(){a.closePanel()},8e3)},map:function(e){e.preventDefault();for(var a=e.target;!t(a).data("type");)a=a.parentNode;var n=t(a).data("type");t(".step1",this.el).hide(),t(".step2",this.el).show(),t(".step2 ."+n+"Details",this.el).show(),this.trigger("resize")},back:function(e){if(e.preventDefault(),this.showingFormTypes)return delete this.showingFormTypes,this.setupModel(),void this.render();if("root"!=this.currentRoot){if(this.currentRoot.match(/.*\.[0-9]+$/)){var a=this.currentRoot.lastIndexOf("."),n=this.currentRoot.substring(a+1);this.currentRoot=this.currentRoot.substring(0,a),a=this.currentRoot.lastIndexOf("."),a!=-1&&(this.currentRoot=this.currentRoot.substring(0,a)+"."+n),this.currentRoot.match(/^root\.[0-9]+$/)&&(this.currentRoot="root")}else this.currentRoot=this.currentRoot.substring(0,this.currentRoot.lastIndexOf("."));return this.setupModel(),void this.render()}this.$(".step1").is(":visible")?(this.ignoreBlur(!1),this.focusField(),this.closePanel()):(t(".step2 .details",this.el).hide(),t(".step2",this.el).hide(),t(".step1",this.el).show(),this.trigger("resize"))},advanced:function(e){this.ignoreBlur(!0),e.preventDefault(),e.stopPropagation(),this.ignoreBlur(!1),this.options.contentManager.showMapForm(this.options),this.closePanel(e,!0),this.trigger("remove")},blacklist:function(t){var a=this,i=new n.Blacklist({domain:this.contentManager.domain});i.fetchByDomain(!0,e.bind(function(){i.set(this.options.category,t),i.set("changed",this.options.category),i.save({},{success:function(){"card"==a.options.category&&(i.set("real_card",t),i.set("changed","real_card"),i.save()),a.contentManager.reloadPreference()}})},this))},mapField:function(e){e.preventDefault();for(var a=e.target;!t(a).hasClass("mapField");)a=a.parentNode;var n=t(a),i=n.data("idx"),r=this.model.menu.models[i];if(r.get("hasChildren"))return this.currentRoot=r.get("path"),this.setupModel(),void this.render();var o=r.get("action"),l=r.get("type"),c=r.get("formType"),d=!this.contentManager.preferences.getPref("disableMapFeedback"),u=null;if(this.$(".step1, .mapFieldFooter").hide(),"show_here"==o)return this.$(".show-here").show(),this.autoResize(),this.blacklist(!1),this.ignoreBlur(!0),void this.focusField();if("dont_show_here"==o)return this.$(".dont-show-here").show(),this.autoResize(),this.blacklist(!0),this.ignoreBlur(!0),void this.focusField();if("mask_email"==o)return this.fillFields("mapField",{dataType:"/contact/email",formType:null,noFocus:!0,right_click:!0}),void this.maskEmail();if("real_email"==o)this.fillFields("mapField",{dataType:"/contact/email",formType:null,noFocus:!0,right_click:!0}),u=this.allData.email;else if("strong_password"==o)this.fillFields("mapField",{dataType:l,formType:null,noFocus:!0,right_click:!0}),u=this.createPassword(l);else if("fill"==o)this.fillFields("mapField",{dataType:l,formType:c,noFocus:!0,right_click:!0}),u=r.get("value");else if("mask_card"==o);else if("show_list_accounts"==o)s.webapp.openPage("/#/accounts"),d=!1;else if("show_list_cards"==o)s.webapp.openPage("/#/real_cards"),d=!1;else if("show_list_addresses"==o)s.webapp.openPage("/#/address"),d=!1;else if("show_list_identities"==o)s.webapp.openPage("/#/identities"),d=!1;else{if("report_problem"==o)return void this.showReportProblem();if("change_form_type"==o)return delete this.showingFormTypes,this.ignoreBlur(!0),this.options.formType=c,this.fillFields("mapField",{dataType:this.options.fieldType,formType:c,noFocus:d,right_click:!0}),this.setupModel(),void this.render();"form_type"==o?this.fillFields("mapField",{dataType:this.options.fieldType,formType:c,noFocus:d,right_click:!0}):this.fillFields("mapField",{dataType:l,formType:this.options.formType,noFocus:d,right_click:!0})}return u?(this.fillFields("current",u),void this.closePanel()):void(d?(this.$(".confirm").show(),this.ignoreBlur(!0),this.focusField(),this.autoResize()):this.closePanel())},setupModel:function(){var e=this.options.fieldType,t=this.options.formType,a=new n.MappingMenuCollection,i=this.previousTitle||null;try{a.loadMenu(this.currentRoot,e,t,this.options.panelDisabledHere,this.allData),a.length>0&&null!=a.models[0].get("panelTitle")&&(this.previousTitle=i=a.models[0].get("panelTitle"))}catch(e){}this.model={iconClick:!!this.options.iconClick,menu:a,title:i}},maskEmail:function(){if(t(".step1").hide(),t(".loading").show(),this.primaryEmail){var a=this.primaryEmail.generateDisposable(this.options.domain,"dnt-panel");a.save({},{success:e.bind(function(){this.fillFields("current",a.getAddress(),{origin:"disposable",disposableGUID:a.get("guid")}),this.closePanel()},this),error:e.bind(function(){this.closePanel()},this)})}},showReportProblem:function(){t(".step1").hide(),t(".report").show(),this.autoResize()},createPassword:function(e){var t,a={"/password":"generateNoSpecialCharsPassword","/password/differentSpecialChars":"generateSpecialCharsPassword","/password/noSpecialChars":"generateNoSpecialCharsPassword","/password/noNumbers":"generateNoDigitsPassword"};return t=e in a?d[a[e]]():d.generateNoSpecialCharsPassword()},afterInitialize:function(){this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.numMenuOptions=3,this.currentRoot="root",this.bindBaseEvents(),this.applyFadingStyle(),this.fadeIn(),this.allData={account:new n.AccountCollection,address:new n.AddressCollection,card:new n.RealCardCollection,identity:new n.IdentityCollection,phone:new n.DisposablePhoneCollection,email:null};var t=new n.ShieldedPhoneCollection,a=this;r.setTimeout(function(){var i=new n.ShieldedEmailCollection;i.fetchAll({success:function(){i.length>0&&(a.allData.email=i.at(0).get("email"),a.primaryEmail=i.at(0)),a.allData.account.fetchLoginsByDomain(a.options.domain,function(){a.allData.address.fetchAll({success:function(){a.allData.address.remove(a.allData.address.at(a.allData.address.length-1)),a.allData.card.fetchAll({success:function(){a.allData.identity.fetchAll({success:function(){t.fetchAll({success:function(){a.allData.phone.fetchAll({success:function(){if(t.length>0){var i=t.models[0];i.set("type","real"),a.allData.phone.add(new n.DisposablePhone(i.toJSON()))}e.each(a.allData.identity.models,function(e){if(e.get("phone")&&e.get("phone").match(/^[0-9\+\s]+$/)){var t=e.get("phone").split(" ");a.allData.phone.add(new n.DisposablePhone({country_code:t[0].replace(/[^0-9]+/g,""),number:t[1].replace(/[^0-9]+/g,""),type:"real"}))}}),a.setupModel(),a.render()}})}})}})}})}})})}})},10),this.model={iconClick:!!this.options.iconClick,loading:!0,menu:[]},this.panelId=8000011,this.updatePanelActivity("impression",this.panelId),this.render()}});return u}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.autofill_helper_panel=e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+='\n    <div style="padding-left: 10px;">\n      <b>',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"label"),typeof n===g?n=n.call(e,{hash:{}}):n===b&&(n=y.call(e,"this.label",{hash:{}})),r+=v(n)+"</b> ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"hasVisible"),i=a.unless,h=f.program(2,o,t),h.hash={},h.fn=h,h.inverse=f.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+='\n      <div style="padding-left: 10px;">',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"text"),m=a.nl2br,i=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"nl2br"),n=typeof i===g?i.call(e,n,{hash:{}}):i===b?y.call(e,"nl2br",n,{hash:{}}):i,(n||0===n)&&(r+=n),r+="</div>\n    </div>\n  "}function o(){return'<span style="color:orange;">(ensure these fields are visible)</span>'}function s(e,t){var n,i,r="";return r+='\n        <tr class="field ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"canFill"),i=a["if"],h=f.program(5,l,t),h.hash={},h.fn=h,h.inverse=f.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+='" data-signature="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"signature"),typeof n===g?n=n.call(e,{hash:{}}):n===b&&(n=y.call(e,"this.signature",{hash:{}})),r+=v(n)+'" data-type="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"dataType"),typeof n===g?n=n.call(e,{hash:{}}):n===b&&(n=y.call(e,"this.dataType",{hash:{}})),r+=v(n)+'" ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"canFill"),i=a.unless,h=f.program(7,c,t),h.hash={},h.fn=h,h.inverse=f.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+='>\n          <td>\n              <span class="lbl"></span><br/>\n              <span class="sign" title="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"label"),typeof n===g?n=n.call(e,{hash:{}}):n===b&&(n=y.call(e,"this.label",{hash:{}})),r+=v(n)+'" style="font-size:8pt;color:Grey;">',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"shortLabel"),typeof n===g?n=n.call(e,{hash:{}}):n===b&&(n=y.call(e,"this.shortLabel",{hash:{}})),r+=v(n)+'</span>\n          </td>\n          <td><select class="fill-status">\n            <option value="">-- Please Select --</option>\n            <option value="ok">Filled Correctly</option>\n            <option value="empty" ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"canFill"),i=a.unless,h=f.program(9,d,t),h.hash={},h.fn=h,h.inverse=f.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+='>Not Filled</option>\n            <option value="bad">Wrong Value</option>\n            <!--option value="isvisible">Field Invisible</option-->\n            <!--option value="mapping">Incorrect Mapping</option-->\n          </select></td>\n        </tr>\n      '}function l(){return"canFill"}function c(){return'style="display:none;"'}function d(){return"selected"}a=a||e.helpers,n=n||e.partials;var u,p,m,h,_="",f=this,g="function",y=a.helperMissing,b=void 0,v=this.escapeExpression;return _+='<div class="clearfix panel">\n\n  <div class="info" style="font-weight: bold;">Auto Fill Form</div>\n  <div style="display: none;">\n    ',u=t,u=f.invokePartial(n["common.form_types"],"common.form_types",u,a,n),(u||0===u)&&(_+=u),_+="\n    ",u=t,u=f.invokePartial(n["common.field_types"],"common.field_types",u,a,n),(u||0===u)&&(_+=u),_+='\n  </div>\n\n  <div class="fieldSet" style="margin-top: 5px;">',u="mm_map_form_type",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+': <span class="form-type"></span></div>\n\n  <div class="step1" style="">\n    <div style="text-decoration: underline">Sample data to fill:</div>\n  ',m=a.dummyData,u=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"dummyData"),p=a.each,h=f.program(1,r,i),h.hash={},h.fn=h,h.inverse=f.noop,u=p.call(t,u,h),(u||0===u)&&(_+=u),_+='\n  </table>\n  </div>\n  <div class="step2" style="display: none;border-top: 1px solid black;">\n    <div style="margin: 5px 0;font-weight: bold;">Please review all fields and give your feedback: <span class="allOk" style="font-weight: normal;color:blue;cursor:pointer;">[All OK]</span></div>\n    <div class="clearfix" style="max-height: 200px;overflow: scroll;padding-left: 10px;margin-right: 5px;border: 1px solid #fafafa">\n      <table>\n      ',m=a.fields,u=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"fields"),p=a.each,h=f.program(4,s,i),h.hash={},h.fn=h,h.inverse=f.noop,u=p.call(t,u,h),(u||0===u)&&(_+=u),_+='\n      </table>\n    </div>\n  </div>\n  <div class="fieldSet clearfix error" style="margin: 5px;text-align: center;color: red;display: none;"></div>\n  <div class="fieldSet clearfix progress-msg" style="margin: 5px;text-align: center;color: green;display: none;">\n    <img class="loading" src="',u="/pages/images/ajax_loader.gif",m=a.assetUrl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"assetUrl",u,{hash:{}}):p,_+=v(u)+'"/>\n    Please wait...  Filling form with sample data.\n  </div>\n  <div class="fieldSet clearfix" style="margin: 5px;text-align: right;">\n    <div class="btn btn-primary fillBtn" style="margin-right:5px;">',u="mm_auto_fill_fill",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'</div>\n    <div class="btn btn-info allFieldsBtn" style="margin-right:5px;display: none;">Show All Fields</div>\n    <div class="btn btn-primary saveBtn" style="margin-right:5px;display: none;">',u="mm_auto_fill_save",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'</div>\n    <div class="btn cancel">',u="mm_map_form_cancel",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'</div>\n  </div>\n\n  <div class="header" style="clear:both;">\n    <div class="logo-link">\n      <img class="logo" height="16px" width="17px" src="',u="/pages/images/dnt-ui-header-logo.png",m=a.assetUrl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"assetUrl",u,{hash:{}}):p,_+=v(u)+'"/>\n      <span class="boldFont">Blur</span>\n    </div>\n    <div class="links-wrapper">\n      <div class="links close-link">\n        <img id="close" class="header-icon" src="',u="/pages/images/dnt-ui-header-close.png",m=a.assetUrl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"assetUrl",u,{hash:{}}):p,_+=v(u)+'">\n      </div>\n      <div class="links help-link">\n        <img class="header-icon" src="',u="/pages/images/dnt-ui-header-help.png",m=a.assetUrl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"assetUrl",u,{hash:{}}):p,_+=v(u)+'">\n      </div>\n    </div>\n  </div>\n\n</div>'}),ABINE_DNTME.CompiledTemplates.autofill_helper_panel}),ABINE_DNTME.define("abine/views/autoFillPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/contentMessenger","abine/proxies"],function(e,t,a,n,i,r,o,s){function l(e,t){var a="",n="";return e.match(/postal|city|state|country/)?(a="Address",n="address"):e.match(/financial/)?(a="Credit Card",n="payment"):e.match(/phone/)?(a="Phone",n="phone"):e.match(/email|username|password/)&&"loginForm"==t?(a="Login",n="login-no-submit"):e.match(/email/)?(a="Email",n="email"):e.match(/password/)&&(a="Password",n="password"),e.match(/home/)&&(a="Home "+a),e.match(/shipping/)&&(a="Shipping "+a),e.match(/billing/)&&(a="Billing "+a),e.match(/business/)&&(a="Business "+a),c[a]?"string"!=typeof c[a]&&e in c[a]?{group:a,value:c[a][e],type:n}:{group:a,value:c[a],type:n}:null}var c={Email:"email-reg@abine.com",Password:{"/password/login":"#password123#","/password":"#password123#","/password/differentSpecialChars":"password-123","/password/noSpecialChars":"password123","/password/noNumbers":"passwordNoNumber","/passwordold":"loginPassword"},Login:new n.Account({username:"JohnDoe11",email:"email-login@abine.com",password:"loginPassword"}),Phone:new n.DisposablePhone({country_code:"1",number:"6162223333"}),"Home Phone":new n.DisposablePhone({country_code:"1",number:"7173334444"}),"Work Phone":new n.DisposablePhone({country_code:"1",number:"5154445555"}),"Mobile Phone":new n.DisposablePhone({country_code:"1",number:"4145556666"}),"Fax Phone":new n.DisposablePhone({country_code:"1",number:"3136667777"}),"Credit Card":new n.RealCard({number:"4539443037367905",cvc:"432",expiry_month:"10",expiry_year:"2019",first_name:"Tom",last_name:"Jerry",type:"visa"}),Address:new n.Address({address1:"280 summer st",address2:"#123",city:"boston",state:"MA",zip:"02210",country:"US"}),"Billing Address":new n.Address({address1:"933 E. 56th St.",address2:"#234",city:"Chicago",state:"IL",zip:"60637",country:"US"}),"Shipping Address":new n.Address({address1:"174 W. 18th Ave.",address2:"#345",city:"Columbus",state:"OH",zip:"43210",country:"US"}),"Business Address":new n.Address({address1:"373 W. Geneva St.",address2:"#456",city:"Wms. Bay",state:"WI",zip:"53191",country:"US"}),"Home Address":new n.Address({address1:"JILA CB 440",address2:"#567",city:"Boulder",state:"CO",zip:"80309",country:"US"})},d=i.extend({templateName:"autofill_helper_panel",events:{"click .help-link":"openHelp","click .logo-link":"openHelp","click .close-link":"logClose","click .saveBtn":"save","click .allFieldsBtn":"showAllFields","click .allOk":"allOk","click .fillBtn":"fill","click .cancel":"cancel"},logClose:function(){this.closePanel()},cancel:function(){this.closePanel()},openHelp:function(e){return!t(e.target).hasClass("num-trackers")&&(s.webapp.openHelp("/email"),void this.closePanel())},showAllFields:function(){this.$(".field").show(),this.$(".allFieldsBtn").hide()},allOk:function(){this.$(".canFill .fill-status").val("ok")},fill:function(){var t=this;this.$(".progress-msg").show(),this.$(".fillBtn").hide(),t.autoResize(),e.async.forEachSeries(this.model.dummyData,function(a,n){var i=e.find(a.fields,function(e){return"select"!=e.type});t.options.contentManager.focusField(t.options.strategyId,i.signature),t.options.contentManager.fillFields(a.type,t.options.strategyId,i.signature,a.value),setTimeout(n,2e3)},function(){t.$(".progress-msg").hide(),t.$(".step2, .saveBtn, .allFieldsBtn").show(),t.autoResize()})},save:function(a){a.preventDefault(),this.$(".error").hide();var i={},r=!1;if(e.each(this.options.fields,function(e){i[e.signature]={signature:e.signature,label:e.label,data_type:e.dataType,can_fill:e.canFill,group:e.group}}),this.$(".field").each(e.bind(function(e,a){if(!r){var n=t(a).data("signature"),o=t("select",a).val();return""==o&&(o=null),o?void(i[n].status=o):(this.$(".error").text("Please set status for all fields.").show(),r=!0,this.$("select",a)[0].scrollIntoView(),void this.trigger("resize"))}},this)),!r){this.$(".saveBtn").hide(),this.$(".error").text("Please wait. Sending your feedback...").show(),this.autoResize();var o=this.contentManager;o.getValue("autofill.data",this.strategyId,this.fieldId,e.bind(function(t){var a=[],r={signature:this.model.signature,form_type:this.model.formType,domain:o.domain,url:o.href,mapper:o.preferences.getPref("autofill:mapper"),batch:o.preferences.getPref("autofill:batch"),external_id:o.preferences.getPref("autofill:form:id"),fields:a,status:"ok"};e.each(i,e.bind(function(e){t[e.signature]&&(e.value=t[e.signature].value,e.fill_type=t[e.signature].fillType),"ok"!=e.status&&e.can_fill&&(r.status="review"),a.push(e)},this));var s=new n.AutofillFeedback;s.save(r,{success:e.bind(function(){this.closePanel()},this)})},this))}},setupModel:function(){this.model={iconClick:!!this.options.iconClick,formType:this.options.formType,signature:this.options.formSignature,fields:this.options.fields}},afterInitialize:function(){
var a=this;this.fieldId=this.options.fieldId,this.strategyId=this.options.strategyId,this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.applyFadingStyle(),this.fadeIn(),this.setupModel();var n=(this.contentManager.preferences.getPref("autofill:mapper"),this.options.fields),i={},r=[];this.model.dummyData=r,e.each(n,function(e){if(!e.dataType)return void(e.canFill=!1);var t=l(e.dataType,a.model.formType);if(!t)return void(e.canFill=!1);if(e.canFill=!0,e.group=t.group,t.group in i)i[t.group].fields.push(e),e.visible&&(i[t.group].hasVisible=!0);else{var n={label:t.group,type:t.type,text:"string"==typeof t.value?t.value:t.value.getFormattedText(),value:"string"==typeof t.value?t.value:t.value.attributes,fields:[e],hasVisible:e.visible};r.push(n),i[t.group]=n}}),this.on("render",e.bind(function(){var e=this.model.formType;this.$("#formType").val(e);var a=this;this.$(".field").hover(function(){var e=t(this).data("signature");a.addFieldBorder(e)},function(){var e=t(this).data("signature");a.removeFieldBorder(e)});var n={};this.$("select.fieldTypes option").each(function(e,t){n[t.value]=t.text}),this.$("#formType option").each(function(a,n){n.value==e&&t(".form-type").text(n.text)}),this.$(".field").each(function(e,a){var i=t(a).data("type");t("td span.lbl",a).text(n[i])})},this)),this.render()}});return d}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.mapform_helper_panel=e.template(function(e,t,a,n,i){function r(e){var t,i="";return i+='\n      <div class="field" style="margin-bottom: 5px;" data-signature="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"signature"),typeof t===h?t=t.call(e,{hash:{}}):t===f&&(t=_.call(e,"this.signature",{hash:{}})),i+=g(t)+'"\n           data-type="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"dataType"),typeof t===h?t=t.call(e,{hash:{}}):t===f&&(t=_.call(e,"this.dataType",{hash:{}})),i+=g(t)+'">\n        <span title="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"label"),typeof t===h?t=t.call(e,{hash:{}}):t===f&&(t=_.call(e,"this.label",{hash:{}})),i+=g(t)+'">',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"shortLabel"),typeof t===h?t=t.call(e,{hash:{}}):t===f&&(t=_.call(e,"this.shortLabel",{hash:{}})),i+=g(t)+"</span>\n        <br/>\n        ",t=e,t=m.invokePartial(n["common.field_types"],"common.field_types",t,a,n),(t||0===t)&&(i+=t),i+="\n      </div>\n    "}function o(){return'<a href="#" id="prev" title="Previous form"><<</a> &nbsp;&nbsp;&nbsp;'}function s(){return'<a href="#" id="next" title="Next form">>></a>'}a=a||e.helpers,n=n||e.partials;var l,c,d,u,p="",m=this,h="function",_=a.helperMissing,f=void 0,g=this.escapeExpression;return p+='<div class="clearfix panel">\n\n  <div class="info" style="font-weight: bold;">\n    ',l="mm_map_form_title",d=a.intl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"intl",l,{hash:{}}):c,p+=g(l)+'\n    <a href="https://dnt.abine.com/#/help/mapform" target="newtab">',l="mm_map_form_title_more_info",d=a.intl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"intl",l,{hash:{}}):c,p+=g(l)+'</a>\n  </div>\n\n  <div class="fieldSet" style="margin-top: 5px;">',l="mm_map_form_type",d=a.intl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"intl",l,{hash:{}}):c,p+=g(l)+"<br/>\n    ",l=t,l=m.invokePartial(n["common.form_types"],"common.form_types",l,a,n),(l||0===l)&&(p+=l),p+='\n  </div>\n\n  <div style="margin: 5px 0;font-weight: bold;">',l="mm_map_form_fields",d=a.intl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"intl",l,{hash:{}}):c,p+=g(l)+"</div>\n  <div>",l="mm_map_field_instructions",d=a.intl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"intl",l,{hash:{}}):c,p+=g(l)+'</div>\n  <div class="clearfix" style="max-height: 300px;overflow: scroll;padding-left: 10px;margin-right: 5px;border: 1px solid #fafafa">\n    ',d=a.fields,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"fields"),c=a.each,u=m.program(1,r,i),u.hash={},u.fn=u,u.inverse=m.noop,l=c.call(t,l,u),(l||0===l)&&(p+=l),p+='\n    <br/><br/><br/><br/><br/><br/><br/>\n  </div>\n  <div class="fieldSet clearfix error" style="margin: 5px;text-align: center;color: red;display: none;"></div>\n  <div class="fieldSet clearfix" style="margin: 5px;">\n    <div style="float:left">\n      ',d=a.prev,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"prev"),c=a["if"],u=m.program(3,o,i),u.hash={},u.fn=u,u.inverse=m.noop,l=c.call(t,l,u),(l||0===l)&&(p+=l),p+="\n      ",d=a.next,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"next"),c=a["if"],u=m.program(5,s,i),u.hash={},u.fn=u,u.inverse=m.noop,l=c.call(t,l,u),(l||0===l)&&(p+=l),p+='\n    </div>\n    <div style="float:right;">\n      <div class="btn btn-primary save" style="margin-right:5px;">',l="mm_map_form_save",d=a.intl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"intl",l,{hash:{}}):c,p+=g(l)+'</div>\n      <div class="btn cancel">',l="mm_map_form_cancel",d=a.intl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"intl",l,{hash:{}}):c,p+=g(l)+'</div>\n    </div>\n  </div>\n\n\n  <div class="header" style="clear:both;">\n    <div class="logo-link">\n      <img class="logo" height="16px" width="17px" src="',l="/pages/images/dnt-ui-header-logo.png",d=a.assetUrl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"assetUrl",l,{hash:{}}):c,p+=g(l)+'"/>\n      <span class="boldFont">Blur</span>\n    </div>\n    <div class="links-wrapper">\n      <div class="links close-link">\n        <img id="close" class="header-icon" src="',l="/pages/images/dnt-ui-header-close.png",d=a.assetUrl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"assetUrl",l,{hash:{}}):c,p+=g(l)+'">\n      </div>\n      <div class="links help-link">\n        <img class="header-icon" src="',l="/pages/images/dnt-ui-header-help.png",d=a.assetUrl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"assetUrl",l,{hash:{}}):c,p+=g(l)+'">\n      </div>\n    </div>\n  </div>\n\n</div>'}),ABINE_DNTME.CompiledTemplates.mapform_helper_panel}),ABINE_DNTME.define("abine/views/mapFormPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/contentMessenger","abine/proxies"],function(e,t,a,n,i,r,o,s){var l=i.extend({templateName:"mapform_helper_panel",events:{"click .help-link":"openHelp","click .logo-link":"openHelp","click .close-link":"logClose","change #formType":"formTypeChanged","click #prev":"previousForm","click #next":"nextForm","click .save":"save","click .cancel":"cancel"},formTypeChanged:function(){var a=this.$("#formType").val(),n={loginForm:["person-grp","security-grp","combined-grp","phone-grp","card-grp","address-grp","date-grp"],registrationForm:["person-grp","security-grp","combined-grp","date-grp","phone-grp","address-grp","card-grp"],checkoutForm:["card-grp","address-grp","phone-grp","person-grp","security-grp","combined-grp","date-grp"],changePasswordForm:["security-grp","person-grp","combined-grp","date-grp","phone-grp","address-grp","card-grp"],"default":["person-grp","security-grp","combined-grp","phone-grp","card-grp","address-grp","date-grp"]},i=this.$(".fieldTypes");e.each(i,function(i){var r=t(i).val(),o=t(".start",i),s=n["default"];a in n&&(s=n[a]),e.each(s,function(a){var n=t("."+a,i);e.each(n,function(e){t(e).insertAfter(o),o=e})}),t(i).val(r)}),this.$("select.fieldTypes").chosen("destroy").chosen()},logClose:function(){this.updatePanelActivity("closed",this.panelId),this.closePanel()},cancel:function(){this.updatePanelActivity("closed",this.panelId),this.closePanel()},openHelp:function(e){return!t(e.target).hasClass("num-trackers")&&(s.webapp.openHelp("/email"),void this.closePanel())},save:function(a){a.preventDefault(),this.$(".error").hide();var n=this.$("#formType").val();if(""==n)return this.$("#formType")[0].scrollIntoView(),void this.$(".error").show();var i={},r=!1,o=0,s=0;if(this.$(".field").each(e.bind(function(e,a){if(!r){var n=t(a).data("signature"),l=t("select",a).val();if(""==l&&(l=null),!l)return this.$(".error").text("Please set type for all fields.").show(),r=!0,this.$("select",a)[0].scrollIntoView(),void this.trigger("resize");l.match(/financial/)&&s++,l.match(/postal|city|state|country/i)&&o++,i[n]=l}},this)),!r){if("checkoutForm"==n&&o<3&&s<3)return this.$(".error").text("Checkout forms should have address and/or credit card fields.").show(),void this.trigger("resize");this.fillFields("mapForm",{formType:n,fieldTypes:i,mappingChanged:!0}),this.updatePanelActivity("masked",this.panelId),this.closePanel()}},setupModel:function(){var e=this.options.forms||[];this.forms=e,this.curIdx=e.indexOf(this.options.formId),this.model={iconClick:!!this.options.iconClick,formType:this.options.formType,fields:this.options.fields,prev:this.curIdx>0,next:this.curIdx+1<e.length}},previousForm:function(e){e.preventDefault(),this.options.contentManager.showMapForm({formId:this.forms[this.curIdx-1],forms:this.forms}),this.closePanel()},nextForm:function(e){e.preventDefault(),this.options.contentManager.showMapForm({formId:this.forms[this.curIdx+1],forms:this.forms}),this.closePanel()},afterInitialize:function(){this.fieldId=this.options.fieldId,this.strategyId=this.options.strategyId,this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.numMenuOptions=3,this.applyFadingStyle(),this.fadeIn(),this.panelId=9000011,this.updatePanelActivity("impression",this.panelId),this.setupModel();var a=this.contentManager.preferences.getPref("mapping:mapper");this.options.fields;this.on("render",e.bind(function(){var i=new n.MappedFormCollection({messenger:this.contentManager.messenger});i.fetchLocalAllByDomain(this.options.domain,e.bind(function(){var n=this.model.formType,r=this.options.formSignature;if(a){var o=e.find(i.models,function(e){return e.get("signature")==r});o||(this.$(".field").each(function(e,a){t(a).data("type","")}),n="")}this.$("#formType").val(n);var s=this;this.$(".field").hover(function(){var e=t(this).data("signature");s.addFieldBorder(e)},function(){var e=t(this).data("signature");s.removeFieldBorder(e)}),this.$(".field").each(function(e,a){var n=t(a).data("type");t("select",a).val(n)}),this.formTypeChanged()},this))},this)),this.render()}});return l}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.mapreview_helper_panel=e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+="\n        <option ",h=a.verified,n=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"verified"),i=a["if"],_=g.program(2,o,t),_.hash={},_.fn=_,_.inverse=g.noop,n=i.call(e,n,_),(n||0===n)&&(r+=n),r+=' value="',h=a.mapping_signature,n=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"mapping_signature"),typeof n===y?n=n.call(e,{hash:{}}):n===v&&(n=b.call(e,"mapping_signature",{hash:{}})),r+=w(n)+'">\n          ',h=a.created_at,n=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"created_at"),typeof n===y?n=n.call(e,{hash:{}}):n===v&&(n=b.call(e,"created_at",{hash:{}})),r+=w(n)+" - ",h=a.num_mappers,n=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"num_mappers"),typeof n===y?n=n.call(e,{hash:{}}):n===v&&(n=b.call(e,"num_mappers",{hash:{}})),r+=w(n)+" mapper(s) ",h=a.verified,n=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"verified"),i=a["if"],_=g.program(4,s,t),_.hash={},_.fn=_,_.inverse=g.noop,n=i.call(e,n,_),(n||0===n)&&(r+=n),r+="\n          ",h=a.self,n=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"self"),i=a["if"],_=g.program(6,l,t),_.hash={},_.fn=_,_.inverse=g.noop,n=i.call(e,n,_),(n||0===n)&&(r+=n),r+="\n        </option>\n      "}function o(){return'style="color:green !important;font-weight: bold !important;"'}function s(){return" - approved"}function l(){return" - (you) "}function c(e){var t,i="";return i+='\n      <div class="field" style="margin-bottom: 5px;" data-signature="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"signature"),typeof t===y?t=t.call(e,{hash:{}}):t===v&&(t=b.call(e,"this.signature",{hash:{}})),i+=w(t)+'"\n           data-type="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"dataType"),typeof t===y?t=t.call(e,{hash:{}}):t===v&&(t=b.call(e,"this.dataType",{hash:{}})),i+=w(t)+'">\n        <span title="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"label"),typeof t===y?t=t.call(e,{hash:{}}):t===v&&(t=b.call(e,"this.label",{hash:{}})),i+=w(t)+'">',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"shortLabel"),typeof t===y?t=t.call(e,{hash:{}}):t===v&&(t=b.call(e,"this.shortLabel",{hash:{}})),i+=w(t)+"</span>\n        <br/>\n        ",t=e,t=g.invokePartial(n["common.field_types"],"common.field_types",t,a,n),(t||0===t)&&(i+=t),i+="\n      </div>\n    "}function d(){return'<a href="#" id="prev" title="Previous form"><<</a> &nbsp;&nbsp;&nbsp;'}function u(){return'<a href="#" id="next" title="Next form">>></a>'}a=a||e.helpers,n=n||e.partials;var p,m,h,_,f="",g=this,y="function",b=a.helperMissing,v=void 0,w=this.escapeExpression;return f+='<div class="clearfix panel">\n\n  <div class="info" style="font-weight: bold;">Review Form Mapping</div>\n\n  <div class="fieldSet" style="margin-top: 5px;">Select Mapping:<br/>\n    <select id="mapping">\n      <option value="">- create new -</option>\n      ',h=a.mappings,p=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"mappings"),m=a.each,_=g.program(1,r,i),_.hash={},_.fn=_,_.inverse=g.noop,p=m.call(t,p,_),(p||0===p)&&(f+=p),f+='\n    </select></div>\n\n  <div class="fieldSet" style="margin-top: 5px;">',p="mm_map_form_type",h=a.intl,m=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),p=typeof m===y?m.call(t,p,{hash:{}}):m===v?b.call(t,"intl",p,{hash:{}}):m,f+=w(p)+"<br/>\n    ",p=t,p=g.invokePartial(n["common.form_types"],"common.form_types",p,a,n),(p||0===p)&&(f+=p),f+='\n  </div>\n\n  <div style="margin: 5px 0;font-weight: bold;">',p="mm_map_form_fields",h=a.intl,m=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),p=typeof m===y?m.call(t,p,{hash:{}}):m===v?b.call(t,"intl",p,{hash:{}}):m,f+=w(p)+'</div>\n  <div class="clearfix" style="max-height: 300px;overflow: scroll;padding-left: 10px;">\n    ',h=a.fields,p=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"fields"),m=a.each,_=g.program(8,c,i),_.hash={},_.fn=_,_.inverse=g.noop,p=m.call(t,p,_),(p||0===p)&&(f+=p),f+='\n    <br/><br/><br/><br/><br/><br/><br/>\n  </div>\n  <div class="fieldSet clearfix" style="margin: 5px;">\n    <div style="float:left">\n      ',h=a.prev,p=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"prev"),m=a["if"],_=g.program(10,d,i),_.hash={},_.fn=_,_.inverse=g.noop,p=m.call(t,p,_),(p||0===p)&&(f+=p),f+="\n      ",h=a.next,p=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"next"),m=a["if"],_=g.program(12,u,i),_.hash={},_.fn=_,_.inverse=g.noop,p=m.call(t,p,_),(p||0===p)&&(f+=p),f+='\n    </div>\n    <div style="float:right;">\n      <div class="btn btn-primary save" style="margin-right:5px;">Save and Approve</div>\n      <div class="btn cancel">',p="mm_map_form_cancel",h=a.intl,m=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),p=typeof m===y?m.call(t,p,{hash:{}}):m===v?b.call(t,"intl",p,{hash:{}}):m,f+=w(p)+'</div>\n    </div>\n  </div>\n\n  <div class="header" style="clear:both;">\n    <div class="logo-link">\n      <img class="logo" height="16px" width="17px" src="',p="/pages/images/dnt-ui-header-logo.png",h=a.assetUrl,m=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),p=typeof m===y?m.call(t,p,{hash:{}}):m===v?b.call(t,"assetUrl",p,{hash:{}}):m,f+=w(p)+'"/>\n      <span class="boldFont">Blur</span>\n    </div>\n    <div class="links-wrapper">\n      <div class="links close-link">\n        <img id="close" class="header-icon" src="',p="/pages/images/dnt-ui-header-close.png",h=a.assetUrl,m=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),p=typeof m===y?m.call(t,p,{hash:{}}):m===v?b.call(t,"assetUrl",p,{hash:{}}):m,f+=w(p)+'">\n      </div>\n      <div class="links help-link">\n        <img class="header-icon" src="',p="/pages/images/dnt-ui-header-help.png",h=a.assetUrl,m=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),p=typeof m===y?m.call(t,p,{hash:{}}):m===v?b.call(t,"assetUrl",p,{hash:{}}):m,f+=w(p)+'">\n      </div>\n    </div>\n  </div>\n\n</div>'}),ABINE_DNTME.CompiledTemplates.mapreview_helper_panel}),ABINE_DNTME.define("abine/views/mapReviewPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/contentMessenger","abine/proxies","abine/views/mapFormPanel"],function(e,t,a,n,i,r,o,s,l){var c=i.extend({templateName:"mapreview_helper_panel",events:{"click .help-link":"openHelp","click .logo-link":"openHelp","click .close-link":"logClose","click .save":"save","click #prev":"previousForm","click #next":"nextForm","click .cancel":"cancel","change #formType":"formTypeChanged","change #mapping":"mappingChanged"},logClose:function(){this.updatePanelActivity("closed",this.panelId),this.closePanel()},cancel:function(){this.updatePanelActivity("closed",this.panelId),this.closePanel()},openHelp:function(e){return!t(e.target).hasClass("num-trackers")&&(s.webapp.openHelp("/email"),void this.closePanel())},save:function(a){a.preventDefault();var n=(this.options.contentManager,this.fields,this.$("#formType").val()),i={};this.$(".field").each(e.bind(function(e,a){var n=t(a).data("signature"),r=t("select",a).val();""==r&&(r=null),i[n]=r},this)),this.fillFields("mapForm",{formType:n,fieldTypes:i,mappingChanged:!0,verified:!0}),this.updatePanelActivity("masked",this.panelId),this.closePanel()},setupModel:function(){var e=this.options.forms||[];this.forms=e,this.curIdx=e.indexOf(this.options.formId),this.model={iconClick:!!this.options.iconClick,formType:this.options.formType,fields:this.options.fields,prev:this.curIdx>0,next:this.curIdx+1<e.length,mappings:this.mappings}},previousForm:function(e){e.preventDefault(),this.options.contentManager.showMapForm({formId:this.forms[this.curIdx-1],forms:this.forms}),this.closePanel()},nextForm:function(e){e.preventDefault(),this.options.contentManager.showMapForm({formId:this.forms[this.curIdx+1],forms:this.forms}),this.closePanel()},mappingChanged:function(){var a=this.$("#mapping")[0].selectedIndex;if(a--,a>=0){var n=this.model.mappings[a];this.$("#formType").val(n.formType),this.$(".field").each(function(a,i){var r=t(i).data("signature"),o=e.find(n.fields,function(e){return e.signature==r});t("select",i)[0].selectedIndex=0,o&&t("select",i).val(o.dataType)})}else{this.fields;this.$("#formType").val(this.model.formType),this.$(".field").each(function(e,a){var n=t(a).data("type");t("select",a).val(n)})}this.formTypeChanged()},afterInitialize:function(){this.fieldId=this.options.fieldId,this.strategyId=this.options.strategyId,this.mappings=this.options.mappings,this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.numMenuOptions=3,this.applyFadingStyle(),this.fadeIn(),this.setupModel(),this.panelId=9000011,this.updatePanelActivity("impression",this.panelId);var a=this;this.on("render",e.bind(function(){this.$(".field").hover(function(){var e=t(this).data("signature");a.addFieldBorder(e)},function(){var e=t(this).data("signature");a.removeFieldBorder(e)}),this.model.mappings.length>0&&(this.$("#mapping")[0].selectedIndex=1),this.mappingChanged()},this)),this.render()}});return c.prototype.formTypeChanged=l.prototype.formTypeChanged,c}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.identity_helper_panel=e.template(function(e,t,a,n,i){function r(e){var t,n,i,r="";return r+='\n      <a href="#" class="mmKeyOption identity" data-id="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"this.id",{hash:{}})),r+=v(t)+'">\n        <div class="element" id="mask">\n        <span class="panelLeft" title="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"label"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"this.label",{hash:{}})),r+=v(t)+'">\n            <img class="iconPos" src="',t="/pages/images/2015panels/identity_green.png",m=a.assetUrl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===g?n.call(e,t,{hash:{}}):n===b?y.call(e,"assetUrl",t,{hash:{}}):n,r+=v(t)+'"\n                 style="width:42px;height:21px;"/>\n          ',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"label"),n="mm_identity_helper_use",m=a.intl,i=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===g?i.call(e,n,t,{hash:{}}):i===b?y.call(e,"intl",n,t,{hash:{}}):i,r+=v(t)+'\n        </span>\n        <span class="panelRight">\n          <img class="loading" style="display:none;" src="',t="/pages/images/ajax_loader.gif",m=a.assetUrl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===g?n.call(e,t,{hash:{}}):n===b?y.call(e,"assetUrl",t,{hash:{}}):n,r+=v(t)+'"/>\n        </span>\n        </div>\n      </a>\n    '}function o(e){var t,n,i="";return i+="\n          ",t="mm_identity_helper_customize",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===g?n.call(e,t,{hash:{}}):n===b?y.call(e,"intl",t,{hash:{}}):n,i+=v(t)+"\n        "}function s(e){var t,n,i="";return i+="\n          <b>",t="mm_identity_helper_customize_pre_setup_1",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===g?n.call(e,t,{hash:{}}):n===b?y.call(e,"intl",t,{hash:{}}):n,i+=v(t)+"</b> ",t="mm_identity_helper_customize_pre_setup_2",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===g?n.call(e,t,{hash:{}}):n===b?y.call(e,"intl",t,{hash:{}}):n,i+=v(t)+"\n        "}function l(e,t){var n,i,r="";return r+="\n              ",m=a.masked,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"masked"),i=a.unless,h=f.program(8,c,t),h.hash={},h.fn=h,h.inverse=f.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="\n            "}function c(e){var t,n="";return n+='\n              <option value="',m=a.id,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"id",{hash:{}})),n+=v(t)+'">',m=a.label,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"label"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"label",{hash:{}})),n+=v(t)+"</option>\n              "}function d(e){var t,n="";return n+='\n              <option value="',m=a.email,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"email",{hash:{}})),n+=v(t)+'">',m=a.email,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"email",{hash:{}})),n+=v(t)+"</option>\n            "}a=a||e.helpers,n=n||e.partials;var u,p,m,h,_="",f=this,g="function",y=a.helperMissing,b=void 0,v=this.escapeExpression;return _+='<div class="newpanel">\n  <div class="left-panel">\n      <span class="errorBtn disabled errorReportLink" style="display:none;cursor:pointer;"><div class="element">\n          <span class="panelLeft">\n              <a>',u="mm_email_helper_serverIsDown",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'</a>\n          </span>\n          <span class="panelRight">\n              <a>',u="mm_email_helper_tryAgainLater",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+"</a>\n          </span>\n      </div></span>\n    ",m=a.identities,u=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"identities"),p=a.each,h=f.program(1,r,i),h.hash={},h.fn=h,h.inverse=f.noop,u=p.call(t,u,h),(u||0===u)&&(_+=u),_+='\n    <a href="#" class="mmKeyOption customize">\n      <div class="element" id="mask">\n      <span class="panelLeft">\n          <img class="iconPos" src="',u="/pages/images/2015panels/identity_green.png",m=a.assetUrl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"assetUrl",u,{hash:{}}):p,_+=v(u)+'"\n               style="width:42px;height:21px;"/>\n        ',m=a.hasIdentities,u=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasIdentities"),p=a["if"],h=f.program(3,o,i),h.hash={},h.fn=h,h.inverse=f.program(5,s,i),u=p.call(t,u,h),(u||0===u)&&(_+=u),_+='\n      </span>\n      </div>\n    </a>\n\n    <div class="customizeDiv" style="display: none;">\n      <div class="identity-header">',u="mm_identity_helper_customize_title",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'</div>\n      <div style="display:inline-block;vertical-align:top;padding-left: 15px;">\n        <div class="fieldset">\n          <label class="small"><input type="checkbox" id="has_address" value="1" checked/> <span>',u="mm_identity_helper_address",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'</span></label>\n          <select id="address_id">\n            ',m=a.addresses,u=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"addresses"),p=a.each,h=f.program(7,l,i),h.hash={},h.fn=h,h.inverse=f.noop,u=p.call(t,u,h),(u||0===u)&&(_+=u),_+='\n          </select>\n        </div>\n        <div class="fieldset">\n          <label class="small"><input type="checkbox" id="has_email" value="1" checked/> <span>',u="mm_identity_helper_email",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'</span></label>\n          <select id="email">\n            <option value="mask">',u="mm_identity_helper_email_mask",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+"</option>\n            ",m=a.email,u=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"email"),p=a["if"],h=f.program(10,d,i),h.hash={},h.fn=h,h.inverse=f.noop,u=p.call(t,u,h),(u||0===u)&&(_+=u),_+='\n          </select>\n        </div>\n        <div class="fieldset">\n          <label class="small"><input type="checkbox" id="has_phone" value="1" checked/> <span>',u="mm_identity_helper_phone",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'</span></label>\n          <select id="phone">\n            <option value="mask">',u="mm_identity_helper_phone_mask",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'</option>\n            <option value="real">',u="mm_identity_helper_phone_real",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'</option>\n          </select>\n        </div>\n        <div class="fieldset">\n          <label class="full"><input type="checkbox" id="password" value="1" checked/> ',u="mm_identity_helper_password",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'</label>\n        </div>\n        <div class="fieldset">\n          <label class="full"><input type="checkbox" id="card" value="1" checked/> ',u="mm_identity_helper_card",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'</label>\n        </div>\n        <div class="fieldset">\n          <label class="small"><input type="checkbox" id="save" value="1" checked /> ',u="mm_identity_helper_save_identity",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'</label>\n          <input type="text" id="idName" value="',m=a.uniqueName,u=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"uniqueName"),typeof u===g?u=u.call(t,{hash:{}}):u===b&&(u=y.call(t,"uniqueName",{hash:{}})),_+=v(u)+'" placeholder="',m=a.uniqueName,u=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"uniqueName"),typeof u===g?u=u.call(t,{hash:{}}):u===b&&(u=y.call(t,"uniqueName",{hash:{}})),_+=v(u)+'"/>\n        </div>\n      </div>\n      <div class="alert-error" style="display: none">',u="mm_identity_helper_save_identity_error",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'</div>\n      <br/>\n      <input type="button" class="btn btn-primary fillCustomize" value="',u="mm_identity_helper_autofill_form",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'"/>\n      <img class="loading" style="display:none;" src="',u="/pages/images/ajax_loader.gif",m=a.assetUrl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"assetUrl",u,{hash:{}}):p,_+=v(u)+'"/>\n      <a href="#" id="more">',u="mm_identity_helper_more_options",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+"</a>\n    </div>\n    ",u=t,u=f.invokePartial(n["common.auto_fill_with"],"common.auto_fill_with",u,a,n),(u||0===u)&&(_+=u),_+="\n  </div>\n  ",u=t,u=f.invokePartial(n["common.header"],"common.header",u,a,n),(u||0===u)&&(_+=u),_+="\n</div>"}),ABINE_DNTME.CompiledTemplates.identity_helper_panel}),ABINE_DNTME.define("abine/views/identityHelperPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/intl","abine/proxies","abine/password"],function(e,t,a,n,i,r,o,s){function l(){for(var e=[],t="0123456789ABCDEF",a=0;a<32;a++)e[a]=t.substr(Math.floor(16*Math.random()),1);e[12]="4",e[16]=t.substr(3&e[16]|8,1);var n=e.join("");return n}var c=i.extend({templateName:"identity_helper_panel",events:{"click a.identity":"fillWithIdentity","click .help-link":"openHelp","click a.customize":"customize","change select":"valueChanged","click .errorReportLink":"makeErrorReport","change #idName":"valueChanged","click #more":"moreOptions","click .fillCustomize":"fillCustomize"},makeErrorReport:function(){o.webapp.openHelp(""),this.closePanel()},openHelp:function(){o.webapp.openHelp("/faq/guides-autofillIdentities"),this.closePanel()},moreOptions:function(){o.webapp.openPage("#/client/identities/add"),this.closePanel()},valueChanged:function(e){t("input[type=checkbox]",t(e.target).parent()).prop("checked",!0)},afterInitialize:function(){this.fieldId=this.options.fieldId,this.panelId=7000061,this.updatePanelActivity("impression",this.panelId,this.fieldId,!1),this.bindBaseEvents(),this.applyFadingStyle(),this.fadeIn(),this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.model={panelType:"identity",identities:new n.IdentityCollection,addresses:new n.AddressCollection,emails:[],phones:[],mapper:!!this.contentManager.preferences.getPref("mapping:mapper"),showMapper:this.contentManager.preferences.isMapper(),show_settings:!this.contentManager.preferences.getPref("identity-settings-seen")};var t=new n.ShieldedEmailCollection;t.fetchAll({success:e.bind(function(){t.length>0&&(this.primaryEmail=t.at(0),this.model.email=this.primaryEmail.get("email")),this.model.addresses.fetchAll({success:e.bind(function(){this.model.addresses.each(function(e){"Masked Card"==e.get("label")&&e.set("masked",!0)}),this.model.identities.fetchAll({success:e.bind(function(){this.numMenuOptions=this.model.identities.length,this.model.hasIdentities=this.numMenuOptions>0;for(var t=0;t<this.numMenuOptions;t++)this.bind("enter"+t,function(e,t){this.fillWithIdentity(e,t)},this);for(var a=r.getText("mm_identity_helper_save_identity_placeholder")+" ",n=1;;){var i=e.find(this.model.identities.models,function(e){return e.get("label").toLowerCase()==(a+n).toLowerCase()});if(!i)break;n++}this.model.uniqueName=a+n,this.render()},this)
})},this)})},this)})},customize:function(){this.ignoreExplicitClose=!0,this.ignoreBlur(!0),this.$(".customizeDiv").show(),this.$(".mmKeyOption").hide(),this.autoResize()},fillCustomize:function(){function t(){var e=this.$("a.customize");e.data("id",a.id),i.fillWithIdentity({target:e[0]},null,a)}var a={};this.$("#has_address")[0].checked&&(a.address_id=this.$("#address_id").val(),a.address=e.find(this.model.addresses.models,function(e){return e.id==a.address_id}).toJSON()),this.$("#has_email")[0].checked?a.email=this.$("#email").val():a.email="none",this.$("#has_phone")[0].checked?a.phone=this.$("#phone").val():a.phone="none",this.$("#password")[0].checked&&(a.password="strong"),this.$("#card")[0].checked&&(a.card="mask"),a=new n.Identity(a);var i=this;if(this.$(".alert-error").hide(),this.$("#save")[0].checked){if(""==this.$("#idName").val())return this.$(".alert-error").show(),void this.autoResize();this.$(".customizeDiv .loading").show(),a.set("label",this.$("#idName").val()),a.save({},{success:t})}else a.id=l(),t()},fillWithIdentity:function(a,i,r){a&&a.preventDefault&&a.preventDefault();var o;if(i||0==i){var l=e(this.el.children[0].children).filter(function(e){return t(e).is("a")&&!t(e).hasClass("disabled")});o=t(l[i]).data("id")}else o=t(a.target).closest("a").data("id");r=r||e.find(this.model.identities.models,function(e){return e.get("id")==o}),t("a.mmKeyOption",this.el).each(function(e,a){t(a).data("id")==r.id&&t("img.loading",a).show()}),r=r.toJSON();var c=this;e.async.series([function(t){if("mask"==r.email){var a=e.find(c.options.allDataTypes,function(e){return e.match(/email/i)});if(a&&c.primaryEmail){delete r.email;var n=c.primaryEmail.generateDisposable(c.options.domain,"identity-panel");return void n.save({},{success:function(){r.masked_email=n.getAddress(),t()},error:function(){c.$(".errorBtn").show(),c.$(".loading").hide(),c.autoResize()}})}delete r.email}else r.email&&"none"!=r.email||delete r.email;t()},function(e){if("mask"==r.phone){var t=new n.ShieldedPhoneCollection;return void t.fetchAll({success:function(){if(t.length>0){var a=t.at(0),n=a.generateDisposable();n.save({filling:!0},{success:function(){r.phone=n.toJSON(),e()},error:function(){e()}})}else delete r.phone,e()}})}if("real"==r.phone){var t=new n.ShieldedPhoneCollection;return void t.fetchAll({success:function(){t.length>0?r.phone=t.at(0).toJSON():delete r.phone,e()}})}if(r.phone&&"none"!=r.phone){var a=r.phone.split(" ");r.phone={country_code:a[0].substr(1),number:a[1]}}else delete r.phone;e()},function(e){"strong"==r.password?r.password=s.generateNoSpecialCharsPassword():delete r.password,e()}],function(){r.address?r.address&&(r.first_name||r.last_name||(r.address.first_name&&(r.first_name=r.address.first_name),r.address.last_name&&(r.last_name=r.address.last_name)),delete r.address.first_name,delete r.address.last_name):delete r.address,r.card&&"none"!=r.card||delete r.card,c.fillFields("identity",r,"identity"),c.updatePanelActivity("masked",c.panelId,c.fieldId,!1),c.closePanel()})}});return c}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("notification_helper.card",e.template(function(e,t,a){a=a||e.helpers;var n,i,r,o="",s="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return o+='<div class="body-notification outerCard opaque" data-id="',r=a.id,n=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"id"),typeof n===s?n=n.call(t,{hash:{}}):n===c&&(n=l.call(t,"id",{hash:{}})),o+=d(n)+'" data-pos="',r=a.card_position,n=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"card_position"),typeof n===s?n=n.call(t,{hash:{}}):n===c&&(n=l.call(t,"card_position",{hash:{}})),o+=d(n)+'">\n  <div class="creditcardfont" style="color:rgb(80,80,80);width:336px;margin:auto;">\n    <div class="innerCard set-brand ',r=a.brand,n=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"brand"),typeof n===s?n=n.call(t,{hash:{}}):n===c&&(n=l.call(t,"brand",{hash:{}})),o+=d(n)+'"\n         style="background-image: url(pages/images/credit_cards/',r=a.brand,n=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"brand"),typeof n===s?n=n.call(t,{hash:{}}):n===c&&(n=l.call(t,"brand",{hash:{}})),o+=d(n)+'.png);">\n\n      <div class="cardNumber">',r=a.getSeparatedCardNumber,n=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getSeparatedCardNumber"),typeof n===s?n=n.call(t,{hash:{}}):n===c&&(n=l.call(t,"getSeparatedCardNumber",{hash:{}})),o+=d(n)+'</div>\n      <div class="cardExpiration">',n="mm_payment_helper_expDate",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+' <span class="expiration">',r=a.getExpiry,n=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getExpiry"),typeof n===s?n=n.call(t,{hash:{}}):n===c&&(n=l.call(t,"getExpiry",{hash:{}})),o+=d(n)+'</span>\n      </div>\n      <div class="cardCVC">',n="mm_payment_helper_cvc",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+' <span class="cvc">',r=a.getCVC,n=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getCVC"),typeof n===s?n=n.call(t,{hash:{}}):n===c&&(n=l.call(t,"getCVC",{hash:{}})),o+=d(n)+'</span></div>\n      <div class="cardName">',r=a.first_name,n=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"first_name"),typeof n===s?n=n.call(t,{hash:{}}):n===c&&(n=l.call(t,"first_name",{hash:{}})),o+=d(n)+" ",r=a.last_name,n=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"last_name"),typeof n===s?n=n.call(t,{hash:{}}):n===c&&(n=l.call(t,"last_name",{hash:{}})),o+=d(n)+"</div>\n    </div>\n  </div>\n</div>"}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("notification_helper.card_actions",e.template(function(e,t,a){a=a||e.helpers;var n,i,r,o="",s="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return o+='<div style="height:60px;font-size:12px;" class="actions-short">\n  <div style="float:left;">\n    <div style="text-align:center;">Made a mistake?</div>\n    <div style="text-align:center;padding-bottom:5px;">\n      <input type="button" id="getRefund" class="btn btn-primary" style="text-align:center;font-size:12px"\n             value="Close Card and Get Refund"/>\n    </div>\n  </div>\n  <div style="float:right;">\n    <div style="text-align:center;">Need some help?</div>\n    <div style="text-align:center;padding-bottom:5px;">\n      <input type="button" id="chatNow" class="btn btn-primary" style="text-align:center;font-size:12px"\n             value="Contact Blur Support Team"/>\n    </div>\n  </div>\n</div>\n<div style="font-size:12px;display: none;" class="actions-tall">\n  <div style="clear:both;text-align: center;">\n    <div style="text-align:center;" class="refund-status"><img class="loading" src="',n="/pages/images/ajax_loader.gif",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,o+=d(n)+'"/> Closing card.  Please wait...</div>\n  </div>\n  <div style="clear:both;margin-top:20px;">\n    <div style="text-align:center;">Need some help?</div>\n    <div style="text-align:center;padding-bottom:5px;">\n      <input type="button" id="chatNow" class="btn btn-primary" style="text-align:center;font-size:12px"\n             value="Contact Blur Support Team"/>\n    </div>\n  </div>\n</div>'}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("notification_helper.card_address",e.template(function(e,t,a){a=a||e.helpers;var n,i,r,o="",s="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return o+='<div style="margin: 10px 25px;text-align:center;">\n  <div style="margin:10px 0px 5px 0px;font-size:15;color:#921111;">\n    ',n="mm_payment_helper_help_1_1",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+" <b>",n="mm_payment_helper_help_1_2",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+'</b>:\n  </div>\n</div>\n<div id="addressAndArrows" style="height:90px;">\n  <div style="float:left;margin-left:20px;margin-top:20px;">\n    <img src="',n="/pages/images/2015panels/arrow_pointing_right.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,o+=d(n)+'"/>\n  </div>\n  <div style="float:left;text-align:center;font-weight:bold;font-size:13pt;line-height:130%;width:250px;">\n    <span style="font-size:12pt;">(',n="mm_notification_helper_anyName",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+')</span><br/>\n    280 SUMMER STREET<br/>\n    BOSTON MA 02210\n  </div>\n  <div style="float:left;margin-top:20px;">\n    <img src="',n="/pages/images/2015panels/arrow_pointing_left.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,o+=d(n)+'"/>\n  </div>\n</div>'}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("notification_helper.login_register_form",e.template(function(e,t,a){a=a||e.helpers;var n,i,r,o="",s="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return o+='<span id="register-dialog" style="display:none;">\n <div class="body-notification"><img src="',n="/images/Icon.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,o+=d(n)+'"/>\n   <span class="signin-content" style="display:none;">',n="mm_notification_helper_login_to_blur",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+'</span>\n   <span class="register-content" style="display:none;">',n="mm_notification_helper_finish_blur_setup",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+'</span>\n </div>\n  <div class="login_form">\n    <div id="welcome-message" style="margin:0px 35px;">\n      <span class="signin-content"  style="display:none;">',r=a.login_content,n=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"login_content"),r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+'</span>\n      <span class="register-content" style="display:none;">',r=a.register_content,n=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"register_content"),r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+'</span>\n    </div>\n\n    <div id="error" style="display:none;color:red;text-transform:none;"></div>\n    <div id="progress-section" style="display:none;margin-top:10px;">\n      <div class="progress progress-striped active">\n        <div class="bar bar-info" style="width: 100%;"></div>\n      </div>\n      <div class="loading-message" style="text-transform:none;"></div>\n    </div>\n\n    <div id="form-div">\n      <div id="register-form" style="display:none;">\n        <div style="clear:both;display:block;width:0px;max-width:0px;height:0px;max-height:0px;overflow:hidden;opacity:0;"\n             class="autofill-grabber"><input type="text" autocomplete="off" id="login_email" tabindex="-1"><input type="password" autocomplete="off" id="login_password" tabindex="-1">\n        </div>\n        <input id="register-protect-email" type="text" value="',r=a.email,n=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"email"),typeof n===s?n=n.call(t,{hash:{}}):n===c&&(n=l.call(t,"email",{hash:{}})),o+=d(n)+'" style="width:230px;height:25;margin:10px 10px 5px 10px;" placeholder="',n="mm_dntme_enter_email_simple",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+'"/><br/>\n        <input id="register-password-field" type="password" style="width:230px;height:25;margin:5px 10px 10px 10px;" placeholder="',n="mm_dntme_enter_password_simple",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+'"/>\n        <input id="register-confirm-password-field" type="password" style="width:230px;height:25;margin:5px 10px 10px 10px;" placeholder="Confirm password"/>\n        <div style="margin:10px 0px;">\n          <input type="button" id="register" class="btn btn-primary" value=\'',n="mm_dntme_create_account",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+'\' style="margin-right: 10px;"/>or<a href="" id="signin-link" style="margin-left: 10px;">',n="mm_dntme_sign_in",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+'</a>\n        </div>\n      </div>\n\n      <div id="signin-form" style="display:none;">\n        <div id="login-section">\n          <div style="clear:both;display:block;width:0px;max-width:0px;height:0px;max-height:0px;overflow:hidden;opacity:0;"\n               class="autofill-grabber"><input type="text" autocomplete="off" id="login_email" tabindex="-1"><input type="password" autocomplete="off" id="login_password" tabindex="-1">\n          </div>\n          <input id="signin-protect-email" type="text" value="',r=a.oldEmail,n=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"oldEmail"),typeof n===s?n=n.call(t,{hash:{}}):n===c&&(n=l.call(t,"oldEmail",{hash:{}})),o+=d(n)+'" style="width:230px;height:25;margin:10px 10px 5px 10px;" placeholder="',n="mm_dntme_enter_email_simple",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+'"/><br/>\n          <input id="signin-password-field" type="password" style="width:230px;height:25;margin:5px 10px 10px 10px;" placeholder="',n="mm_dntme_enter_password_simple",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+'"/>\n        </div>\n        <div id="mfa-section" style="display:none;">\n          <input type="text" id="mfa-code-field" style="width:140px;height:28px;margin:10px 5px" name="mfa_code" placeholder="Authentication Code" />\n        </div>\n        <div style="margin-top:5px;">\n          <input type="button" id="login" class="btn btn-success" value=\'',n="mm_dntme_sign_in",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+'\' style="margin-right: 10px;"/>or<a href="" id="register-link" style="margin-left: 10px;">',n="mm_dntme_create_an_account",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+'</a>\n        </div>\n        <div style="margin:10px 0px;">\n          <a href="" id="forgotPassword">',n="mm_dntme_forgot_my_password",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+"</a><br/>\n        </div>\n      </div>\n\n    </div>\n\n  </div>\n</span>"}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("notification_helper.masked_card",e.template(function(e,t,a){a=a||e.helpers;var n,i,r,o="",s="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return o+='<div class="body-notification outerCard" style="margin-top: 0px;">\n  <div id="maskedCard" class="creditcardfont">\n    <div style="background-repeat:no-repeat;background-size:100%;height:181px;background-image:url(\'',n="/pages/images/2015panels/masked_card_blank.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,o+=d(n)+'\');">\n      <br style="clear:both;"/>\n      <div style="text-align:right;margin-right:20px;color:white;">\n        <span style="font-family:\'Open Sans\', \'Helvetica Neue\', Arial, sans-serif !important;font-weight:bold;font-size:24pt;" id="originalValue">',r=a.getOriginalValue,n=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getOriginalValue"),typeof n===s?n=n.call(t,{hash:{}}):n===c&&(n=l.call(t,"getOriginalValue",{hash:{}})),o+=d(n)+"</span>\n        <br/>\n        <span style=\"font-family:'Open Sans', 'Helvetica Neue', Arial, sans-serif !important;font-size:11pt;\">",n="mm_notification_helper_at",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+"&nbsp;</span><span id=\"domain\" style=\"font-family:'Open Sans', 'Helvetica Neue', Arial, sans-serif !important;font-weight:bold;font-size:11pt;\">",r=a.getDomain,n=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getDomain"),typeof n===s?n=n.call(t,{hash:{}}):n===c&&(n=l.call(t,"getDomain",{hash:{}})),o+=d(n)+'</span>\n      </div>\n      <div style="text-align:center;margin-top:5px;color:white;">\n        <h3 id="cardNumber" style="font-family:\'Open Sans\', \'Helvetica Neue\', Arial, sans-serif !important;font-weight:lighter;">',r=a.getSeparatedCardNumber,n=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getSeparatedCardNumber"),typeof n===s?n=n.call(t,{hash:{}}):n===c&&(n=l.call(t,"getSeparatedCardNumber",{hash:{}})),o+=d(n)+"</h3>\n      </div>\n      <div style=\"font-size:15px;color:white;margin-left:25px;font-family:'Open Sans', 'Helvetica Neue', Arial, sans-serif !important;font-weight:bold;\">\n        <span style=\"float:left;\">",n="mm_payment_helper_expDate",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+' <span id="expiration">',r=a.getExpiry,n=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getExpiry"),typeof n===s?n=n.call(t,{hash:{}}):n===c&&(n=l.call(t,"getExpiry",{hash:{}})),o+=d(n)+'</span></span> <span style="float:right;margin-right:115px;"> ',n="mm_payment_helper_cvc",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+' <span id="cvc">',r=a.getCVC,n=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getCVC"),typeof n===s?n=n.call(t,{hash:{}}):n===c&&(n=l.call(t,"getCVC",{hash:{}})),o+=d(n)+"</span></span>\n      </div>\n    </div>\n  </div>\n</div>"}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_card_declined_notification=e.template(function(e,t,a,n,i){function r(e){var t,n="";return n+="\n      ",c=a.declined,t=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"declined"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"description"),typeof t===m?t=t.call(e,{hash:{}}):t===_&&(t=h.call(e,"declined.description",{hash:{}})),n+=f(t)+"\n    "}function o(){return"\n      Looks like this merchant can't or won't process this card.\n      <ul>\n        <li>Make sure you used \"Abine address\".</li>\n        <li>Make sure the expiry dates and CVV was filled correctly.</li>\n        <li>Masked cards work only with US merchants.</li>\n      </ul>\n      If that does not help, close it, and use an alternative. Sorry!\n    "}a=a||e.helpers,n=n||e.partials;var s,l,c,d,u="",p=this,m="function",h=a.helperMissing,_=void 0,f=this.escapeExpression;return u+='<div class="panel">\n  <!-- Default header (actually footer) for the panels -->\n  <div class="header" id="default-header" style="border-top: 0px solid;">\n    <div class="logo-link">\n      <img style="width:63px;height:16px;" src="',s="/pages/images/blur_logo_ext_window.png",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"assetUrl",s,{hash:{}}):l,u+=f(s)+'"/>\n    </div>\n    <div class="links-wrapper">\n      <div class="newlinks close-link">\n        <img id="close" class="close-notification" src="',s="/pages/images/2015panels/panel_xclose.png",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"assetUrl",s,{hash:{}}):l,u+=f(s)+'"/>\n      </div>\n    </div>\n  </div>\n\n  <div style="margin:10px -5px 10px -10px;padding:5px 20px;" class="alert-error">\n    <div style="font-size: 14pt;font-weight: bold;margin-bottom:5px;">',c=a.declined,s=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"declined"),s=null===s||void 0===s||s===!1?s:ABINE_DNTME.Duckbone.Handlebars.getAttr(s,"title"),typeof s===m?s=s.call(t,{hash:{}}):s===_&&(s=h.call(t,"declined.title",{hash:{}})),u+=f(s)+"</div>\n    ",c=a.declined,s=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"declined"),s=null===s||void 0===s||s===!1?s:ABINE_DNTME.Duckbone.Handlebars.getAttr(s,"description"),l=a["if"],d=p.program(1,r,i),d.hash={},d.fn=d,d.inverse=p.program(3,o,i),s=l.call(t,s,d),(s||0===s)&&(u+=s),u+="\n  </div>\n\n  ",s=t,s=p.invokePartial(n["notification_helper.masked_card"],"notification_helper.masked_card",s,a,n),(s||0===s)&&(u+=s),u+="\n  ",s=t,s=p.invokePartial(n["notification_helper.card_address"],"notification_helper.card_address",s,a,n),(s||0===s)&&(u+=s),u+="\n  ",s=t,s=p.invokePartial(n["notification_helper.card_actions"],"notification_helper.card_actions",s,a,n),(s||0===s)&&(u+=s),u+="\n\n</div>"}),ABINE_DNTME.CompiledTemplates.notification_helper_card_declined_notification}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_change_password=e.template(function(e,t,a){a=a||e.helpers;var n,i,r,o="",s="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return o+='<div class="panel">\n  <div class="close-notification">\n      <span class="notf-close-icon" id="paneHover"><img class="close-image" src="',n="/pages/images/manage/dd_close_icon.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,o+=d(n)+'"/></span>\n  </div>\n  <div class="body-notification"><img src="',n="/images/Icon.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,o+=d(n)+'"/>',n="mm_notification_helper_change_password_msg",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+'</div>\n  <input type="button" class="btn done" id="ignore" style="width:40%;text-align:center;" value="',n="mm_notification_helper_ignore",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+'" />\n  <input type="button" class="btn btn-success done" id="save" style="width:35%;text-align:center;" value="',n="mm_notification_helper_save_login",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+'" />\n  <div class="links settings-link" data-highlight="rememberaccounts" title="',n="mm_notification_helper_settings",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+'">\n      <img class="header-icon" src="',n="/pages/images/dnt-ui-header-settings.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,o+=d(n)+'">\n  </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.notification_helper_change_password}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_checkout_growl_notification=e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+="\n      ",m=a.isOfferCard,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"isOfferCard"),i=a["if"],h=f.program(2,o,t),h.hash={},h.fn=h,h.inverse=f.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="\n\n      ",m=a.isRealCard,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"isRealCard"),i=a["if"],h=f.program(4,s,t),h.hash={},h.fn=h,h.inverse=f.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="\n\n      ",m=a.isOldMaskedCard,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"isOldMaskedCard"),i=a["if"],h=f.program(6,l,t),h.hash={},h.fn=h,h.inverse=f.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="\n\n      ",m=a.isNewMaskedCard,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"isNewMaskedCard"),i=a["if"],h=f.program(8,c,t),h.hash={},h.fn=h,h.inverse=f.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="\n\n      ",m=a.isNewRealCard,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"isNewRealCard"),i=a["if"],h=f.program(10,d,t),h.hash={},h.fn=h,h.inverse=f.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="\n\n    "}function o(e){var t,n="";return n+='\n        <div class="body-notification outerCard opaque" data-id="',m=a.id,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"id",{hash:{}})),n+=v(t)+'" data-pos="',m=a.card_position,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"card_position"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"card_position",{hash:{}})),n+=v(t)+'">\n          <div class="creditcardfont" style="color:rgb(80,80,80);width:336px;margin:auto;">\n            <div class="innerCard ',m=a.brand,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"brand"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"brand",{hash:{}})),n+=v(t)+'_offer"\n                 style="background-image: url(pages/images/credit_cards/',m=a.brand,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"brand"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"brand",{hash:{}})),n+=v(t)+'_offer.png);">\n            </div>\n          </div>\n        </div>\n      '}function s(e){var t,n,i="";return i+='\n        <div class="body-notification outerCard opaque" data-id="',m=a.id,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"id",{hash:{}})),i+=v(t)+'" data-pos="',m=a.card_position,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"card_position"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"card_position",{hash:{}})),i+=v(t)+'">\n          <div class="creditcardfont" style="color:rgb(80,80,80);width:336px;margin:auto;">\n            <div class="innerCard set-brand ',m=a.brand,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"brand"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"brand",{hash:{}})),i+=v(t)+'"\n                 style="background-image: url(pages/images/credit_cards/',m=a.brand,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"brand"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"brand",{hash:{}})),i+=v(t)+'.png);">\n\n              <div class="cardNumber">',m=a.getSeparatedMaskedCardNumber,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getSeparatedMaskedCardNumber"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"getSeparatedMaskedCardNumber",{hash:{}})),i+=v(t)+'</div>\n              <div class="cardExpiration">',t="mm_payment_helper_expDate",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===g?n.call(e,t,{hash:{}}):n===b?y.call(e,"intl",t,{hash:{}}):n,i+=v(t)+' <span class="expiration">',m=a.getMaskedExpiry,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getMaskedExpiry"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"getMaskedExpiry",{hash:{}})),i+=v(t)+'</span>\n              </div>\n              <div class="cardCVC">',t="mm_payment_helper_cvc",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===g?n.call(e,t,{hash:{}}):n===b?y.call(e,"intl",t,{hash:{}}):n,i+=v(t)+' <span class="cvc">',m=a.getMaskedVerification,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getMaskedVerification"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"getMaskedVerification",{hash:{}})),i+=v(t)+'</span></div>\n              <div class="cardName">',m=a.first_name,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"first_name"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"first_name",{hash:{}})),i+=v(t)+" ",m=a.last_name,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"last_name"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"last_name",{hash:{}})),i+=v(t)+"</div>\n            </div>\n          </div>\n        </div>\n      "}function l(e){var t,n="";return n+='\n          <div class="body-notification outerCard opaque" data-id="',m=a.id,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"id",{hash:{}})),n+=v(t)+'" data-pos="',m=a.card_position,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"card_position"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"card_position",{hash:{}})),n+=v(t)+'">\n              <div class="creditcardfont" style="color:rgb(80,80,80);width:336px;margin:auto;">\n                  <div class="innerCard set-brand ',m=a.brand,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"brand"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"brand",{hash:{}})),n+=v(t)+'"\n                       style="background-image: url(pages/images/masked_card_existing_blank.png);">\n                      <div class="dateCreatedText" style="color:white;font-family:\'Open-sans\',sans-serif;font-size:14px;left:172px;position:relative;top:60px;">Date Created:</div>\n                      <div class="dateCreated" style="top:70px;position:relative;color:white;font-family:\'Open-Sans\',sans-serif;font-size:15px;font-weight:600;left:172px;">',m=a.getCreatedDate,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getCreatedDate"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"getCreatedDate",{hash:{}})),n+=v(t)+'</div>\n                      <div class="amountRemainingText" style="top:80px;position:relative;color:white;font-family:\'Open-Sans\',sans-serif;font-size:14px;left:172px;">Amount Remaining:</div>\n                      <div class="amountRemaining" style="top:90px;position:relative;color:white;font-family:\'Open-Sans\',sans-serif;font-size:15px;font-weight:600;left:172px;">',m=a.getOriginalValue,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getOriginalValue"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"getOriginalValue",{hash:{}})),n+=v(t)+"</div>\n                  </div>\n              </div>\n          </div>\n      "}function c(e){var t,n="";return n+='\n        <div class="body-notification outerCard opaque" data-id="',m=a.id,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"id",{hash:{}})),n+=v(t)+'" data-pos="',m=a.card_position,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"card_position"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"card_position",{hash:{}})),n+=v(t)+'">\n          <div class="creditcardfont" style="color:rgb(80,80,80);width:336px;margin:auto;">\n            <div class="innerCard ',m=a.brand,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"brand"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"brand",{hash:{}})),n+=v(t)+'"\n                 style="background-image: url(pages/images/credit_cards/masked_card.png);">\n            </div>\n          </div>\n        </div>\n      '}function d(e){var t,n="";return n+='\n        <div class="body-notification outerCard opaque" data-id="',m=a.id,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"id",{hash:{}})),n+=v(t)+'" data-pos="',m=a.card_position,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"card_position"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"card_position",{hash:{}})),n+=v(t)+'">\n          <div class="creditcardfont" style="color:rgb(80,80,80);width:336px;margin:auto;">\n            <div class="innerCard ',m=a.brand,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"brand"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"brand",{hash:{}})),n+=v(t)+'"\n                 style="background-image: url(pages/images/credit_cards/add_card.png);">\n            </div>\n          </div>\n        </div>\n      ';
}a=a||e.helpers;var u,p,m,h,_="",f=this,g="function",y=a.helperMissing,b=void 0,v=this.escapeExpression;return _+='<div class="wallet">\n  <div class="newlinks settings-link">\n    <img id="settings" class="settings-notification" src="',u="/pages/images/settings_gear_stroke.png",m=a.assetUrl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"assetUrl",u,{hash:{}}):p,_+=v(u)+'">\n  </div>\n  <div class="newlinks close-link">\n    <img id="close" class="close-notification" src="',u="/pages/images/x_close_stroke.png",m=a.assetUrl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"assetUrl",u,{hash:{}}):p,_+=v(u)+'">\n  </div>\n  <div id="card-container" style="min-height:230px;position:relative;">\n    ',m=a.allCards,u=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"allCards"),p=a.each,h=f.program(1,r,i),h.hash={},h.fn=h,h.inverse=f.noop,u=p.call(t,u,h),(u||0===u)&&(_+=u),_+="\n\n  </div>\n</div>"}),ABINE_DNTME.CompiledTemplates.notification_helper_checkout_growl_notification}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_detailed_email=e.template(function(e,t,a){a=a||e.helpers;var n,i,r,o="",s="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return o+='<div class="panel">\n    <div class="close-notification">\n        <span class="notf-close-icon"><img class="close-image" src="',n="/pages/images/manage/dd_close_icon.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,o+=d(n)+'"/></span>\n    </div>\n    <div class="body-notification"><img src="',n="/images/Icon.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,o+=d(n)+'"/>\n        <span class="boldFont">Blur</span>\n    </div>\n    <div class="title">\n        ',n="mm_notification_helper_what_happened_to_email_1",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+"<br/>",n="mm_notification_helper_what_happened_to_email_2",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+"\n    </div>\n    <ol>\n        <li>\n            <b>",r=a.domain,n=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"domain"),typeof n===s?n=n.call(t,{hash:{}}):n===c&&(n=l.call(t,"domain",{hash:{}})),o+=d(n)+"</b> ",n="mm_notification_helper_will_email_to",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+" <b>",r=a.disposable,n=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"disposable"),typeof n===s?n=n.call(t,{hash:{}}):n===c&&(n=l.call(t,"disposable",{hash:{}})),o+=d(n)+'</b>.\n            <a href="#" class="learn-more">',n="mm_notification_helper_learn_more",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+"</a>.\n        </li>\n        <li>\n            ",n="mm_notification_helper_email_forward_to",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+" <b>",r=a.real,n=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"real"),typeof n===s?n=n.call(t,{hash:{}}):n===c&&(n=l.call(t,"real",{hash:{}})),o+=d(n)+"</b>.\n        </li>\n        <li>\n            ",n="mm_notification_helper_block_them_1",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+" <b>",r=a.domain,n=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"domain"),typeof n===s?n=n.call(t,{hash:{}}):n===c&&(n=l.call(t,"domain",{hash:{}})),o+=d(n)+"</b> ",n="mm_notification_helper_block_them_2",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+" <span id='here'>",n="mm_notification_helper_block_them_3",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+'</span>.\n        </li>\n    </ol>\n        <input type="button" class="btn btn-success done" style="width:25%;text-align:center;" value="',n="mm_notification_helper_got_it",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+'" />\n        <a href="#" class="learn-more" style="width:25%;text-align:center;">',n="mm_notification_helper_learn_more",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+"</a>.\n    </div>\n</div>"}),ABINE_DNTME.CompiledTemplates.notification_helper_detailed_email}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_expire_notify=e.template(function(e,t,a){a=a||e.helpers;var n,i,r,o="",s="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return o+='<div class="panel">\n    <div style="border-bottom:2px solid #3d7dcb;">\n        <div class="close-notification">\n            <span class="notf-close-icon"><img class="close-image" src="',n="/pages/images/manage/dd_close_icon.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,o+=d(n)+'"/></span>\n        </div>\n        <div class="body-notification"><img src="',n="/images/Icon.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,o+=d(n)+'"/>\n            <div class="boldFont" style="margin-left:55px;">',n="mm_notification_helper_expire_notify_title_1",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+"<br/>",n="mm_notification_helper_expire_notify_title_2",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+'</div>\n        </div>\n    </div>\n    <div>\n        <p style="text-align:left;margin:10px;"><strong>',n="mm_notification_helper_expire_notify_body_1",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+"<br/><br/>",n="mm_notification_helper_expire_notify_body_2",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+'</strong></p>\n    </div>\n    <div>\n        <input type="button" id="learn" class="btn btn-success done" style="width:75%;text-align:center;background:green;" value="',n="mm_notification_helper_learn_more_premium",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+'" />\n    </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.notification_helper_expire_notify}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_expire_warning=e.template(function(e,t,a){a=a||e.helpers;var n,i,r,o="",s="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return o+='<div class="panel">\n    <div style="border-bottom:2px solid #3d7dcb;">\n        <div class="close-notification">\n            <span class="notf-close-icon"><img class="close-image" src="',n="/pages/images/manage/dd_close_icon.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,o+=d(n)+'"/></span>\n        </div>\n        <div class="body-notification"><img src="',n="/images/Icon.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,o+=d(n)+'"/>\n            <div class="boldFont" style="margin-left:55px;">',n="mm_notification_helper_expire_warning_title_1",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+"<br/>",n="mm_notification_helper_expire_warning_title_2",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+'</div>\n        </div>\n    </div>\n    <div>\n        <p style="text-align:left;margin:10px;"><strong>',n="mm_notification_helper_expire_warning_body",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+'</strong></p>\n    </div>\n    <div>\n        <input type="button" id="learn" class="btn btn-success done" style="width:75%;text-align:center;background:green;" value="',n="mm_notification_helper_learn_more_premium",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+'" />\n    </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.notification_helper_expire_warning}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_failed_login=e.template(function(e,t,a,n){a=a||e.helpers,n=n||e.partials;var i,r,o,s="",l=this,c="function",d=a.helperMissing,u=void 0,p=this.escapeExpression;return s+='<div class="panel">\n    <div class="body-notification">\n    <span id="save-password-dialog">\n      <div style="cursor:default;">\n          <div style="font-weight:bold;">',i="mm_notification_helper_failed_login_unsuccessful",o=a.intl,r=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof r===c?r.call(t,i,{hash:{}}):r===u?d.call(t,"intl",i,{hash:{}}):r,s+=p(i)+'</div>\n          <div style="font-weight:normal;">',i="mm_notification_helper_possible_saved",o=a.intl,r=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof r===c?r.call(t,i,{hash:{}}):r===u?d.call(t,"intl",i,{hash:{}}):r,s+=p(i)+'</div>\n          <div style="cursor:pointer;"><a id="update-account">',i="mm_notification_helper_failed_update_here",o=a.intl,r=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof r===c?r.call(t,i,{hash:{}}):r===u?d.call(t,"intl",i,{hash:{}}):r,s+=p(i)+'</a></div>\n      </div>\n    </span>\n    </div>\n\n    <!-- Default header (actually footer) for the panels -->\n    <div style="position:absolute;right:0;bottom:5px;top:0;">\n        ',i=t,i=l.invokePartial(n["common.header"],"common.header",i,a,n),(i||0===i)&&(s+=i),s+="\n    </div>\n</div>"}),ABINE_DNTME.CompiledTemplates.notification_helper_failed_login}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_growl=e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+='\n            <div id="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof n===_?n=n.call(e,{hash:{}}):n===g&&(n=f.call(e,"this.id",{hash:{}})),r+=y(n)+'" style="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"height"),i=a["if"],p=h.program(2,o,t),p.hash={},p.fn=p,p.inverse=h.noop,n=i.call(e,n,p),(n||0===n)&&(r+=n),n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"has_action"),i=a["if"],p=h.program(4,s,t),p.hash={},p.fn=p,p.inverse=h.program(6,l,t),n=i.call(e,n,p),(n||0===n)&&(r+=n),r+='" class="panelSection ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"class_name"),typeof n===_?n=n.call(e,{hash:{}}):n===g&&(n=f.call(e,"this.class_name",{hash:{}})),r+=y(n)+'">\n              ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"body"),typeof n===_?n=n.call(e,{hash:{}}):n===g&&(n=f.call(e,"this.body",{hash:{}})),(n||0===n)&&(r+=n),r+="\n            </div>\n        "}function o(e){var t,a="";return a+="height:",t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"height"),typeof t===_?t=t.call(e,{hash:{}}):t===g&&(t=f.call(e,"this.height",{hash:{}})),a+=y(t)+";"}function s(){return"cursor:pointer;"}function l(){return"cursor: default;"}a=a||e.helpers;var c,d,u,p,m="",h=this,_="function",f=a.helperMissing,g=void 0,y=this.escapeExpression;return m+='<div class="panel">\n    <div class="settings">\n      ',c="mm_dntme_settings",u=a.intl,d=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),c=typeof d===_?d.call(t,c,{hash:{}}):d===g?f.call(t,"intl",c,{hash:{}}):d,m+=y(c)+'\n    </div>\n    <div class="close-notification">\n        <span class="notf-close-icon"><img class="close-image" src="',c="/pages/images/manage/dd_close_icon.png",u=a.assetUrl,d=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),c=typeof d===_?d.call(t,c,{hash:{}}):d===g?f.call(t,"assetUrl",c,{hash:{}}):d,m+=y(c)+'"/></span>\n    </div>\n    <div class="body-notification"><img src="',c="/images/Icon.png",u=a.assetUrl,d=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),c=typeof d===_?d.call(t,c,{hash:{}}):d===g?f.call(t,"assetUrl",c,{hash:{}}):d,m+=y(c)+'"/>\n      ',c="mm_notification_helper_growl",u=a.intl,d=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),c=typeof d===_?d.call(t,c,{hash:{}}):d===g?f.call(t,"intl",c,{hash:{}}):d,m+=y(c)+'\n    </div>\n    <div style="text-align:left;padding-bottom:5px;">\n      <div class="dynamicPanels">\n        ',u=a.panelSections,c=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"panelSections"),d=a.each,p=h.program(1,r,i),p.hash={},p.fn=p,p.inverse=h.noop,c=d.call(t,c,p),(c||0===c)&&(m+=c),m+="\n      </div>\n    </div>\n</div>"}),ABINE_DNTME.CompiledTemplates.notification_helper_growl}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_panel=e.template(function(e,t,a){a=a||e.helpers;var n,i,r,o="",s="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return o+='<div class="panel">\n  <div class="close-notification">\n      <span class="notf-close-icon" id="paneHover"><img class="close-image" src="',n="/pages/images/manage/dd_close_icon.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,o+=d(n)+'"/></span>\n  </div>\n  <div class="body-notification"><img src="',n="/images/Icon.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,o+=d(n)+'"/>',r=a.msg,n=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"msg"),typeof n===s?n=n.call(t,{hash:{}}):n===c&&(n=l.call(t,"msg",{hash:{}})),(n||0===n)&&(o+=n),o+="</div>\n</div>"}),ABINE_DNTME.CompiledTemplates.notification_helper_panel}),ABINE_DNTME.define("abine/views/notificationPanel",["documentcloud/underscore","jquery","duckbone/core","abine/views/panelBase","abine/timer","abine/contentMessenger","abine/assets","abine/responseCodes","abine/intl","abine/proxies","models"],function(e,t,a,n,i,r,o,s,l,c,d){var u=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i,p=n.extend({templateName:"notification_helper_panel",events:{mouseover:"onHover",mouseout:"onHoverEnd",click:"clicked"},afterInitialize:function(){this.messenger=this.options.contentManager.messenger,this.targetId=this.options.notification.targetId?this.options.notification.targetId:"",this.targetUrl=this.options.notification.targetUrl,this.applyFadingStyle(),this.fadeIn(),this.model={get:e.bind(function(e){return this.options.notification[e]},this)},this.render(),this.startFadeOut()},openSettings:function(e){var a=t(e.target).data("highlight")||t(e.target).parent().data("highlight");this.options.contentManager.showToolbarPanel({page:"settings",highlight:a}),this.closePanel()},closeNotification:function(e){e&&e.preventDefault(),this.panelId&&this.options.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove")},clicked:function(e){return"close-notification"==e.target.className||"notf-close-icon"==e.target.className||"close-image"==e.target.className?(this.stopFadeOut(),void this.closePanel()):(this.getContentMessenger(),this.messenger.send("window:createTab",{url:this.targetUrl}),this.stopFadeOut(),void this.closePanel())},onHoverEnd:function(){this.startFadeOut()},onHover:function(){t(this.el).find("div.close-notification").show(),this.stopFadeOut()},openDashboard:function(){return c.webapp.openDashboard(),!1},applyCardStyles:function(){var e=this.model.get("styles");if(e&&e.base){var a=this.$("."+this.model.get("brand"));a.css(e.base),e.number&&t(".cardNumber",a).css(e.number),e.name&&t(".cardName",a).css(e.name),e.expiry&&t(".cardExpiration",a).css(e.expiry),e.cvc&&t(".cardCVC",a).css(e.cvc)}},startFadeOut:function(){this.options.notification.neverFade||(this.stopFadeOut(),this.fadeOutTimer=i.setTimeout(e.bind(function(){this.fadeOutTimer&&this.fadeOut()},this),this.options.timeout))},stopFadeOut:function(){this.fadeOutTimer&&(i.clearTimeout(this.fadeOutTimer),this.fadeOutTimer=null)},forgotPassword:function(e){e.preventDefault(),c.webapp.openForgotPassword(),this.trigger("close")},toggleSigninOrRegister:function(e){e.preventDefault(),this.$("#signin-form").is(":visible")?(this.$("#signin-form, .signin-content").hide(),this.$("#register-form, .register-content").show()):(this.$("#register-form, .register-content").hide(),this.$("#signin-form, .signin-content").show()),this.trigger("resize")},login:function(a){function n(e,a){try{p.get(0).ownerDocument&&(t(".loading-message",p).text(l.getText("mm_loading_display_login")),e<a&&(m=i.setTimeout(function(){n(e+1,a)},500)))}catch(e){}}a&&a.preventDefault();var r=this.$("#signin-protect-email").val(),o=this.$("#signin-password-field").val(),s=this.$("#error");if(s.hide(),!r.match(u))return this.$("#welcome-message").hide(),s.text(l.getText("mm_dntme_invalid_email")).show(),void this.trigger("resize");if(0==o.length)return this.$("#welcome-message").hide(),s.text(l.getText("mm_dntme_invalid_password")).show(),void this.trigger("resize");var d={email:r,password:o,mfa_code:this.$("#mfa-code-field").val()},p=this.$("#progress-section");p.height(this.$("#form-div").height()-10);var m=null;n(0,20),p.show(),this.$("#form-div").hide(),c.licenseModule.login(d,e.bind(function(t,a){this.processRegistration(t,a,d,e.bind(function(e){i.clearTimeout(m),p.hide(),e||(this.loginSuccess(),this.closePanel())},this))},this)),this.trigger("resize")},register:function(a){function n(e,a){try{m.get(0).ownerDocument&&(t(".loading-message",m).text(l.getText("mm_loading_display_register_use"+Math.floor(e/10))),e<a&&(h=i.setTimeout(function(){n(e+1,a)},500)))}catch(e){}}a&&a.preventDefault(),this.$("#welcome-message").show();var r=this.$("#register-protect-email").val(),o=this.$("#register-password-field").val(),s=this.$("#register-confirm-password-field").val(),d=this.$("#error");if(d.hide(),!r.match(u))return this.$("#welcome-message").hide(),d.text(l.getText("mm_dntme_invalid_email")).show(),void this.trigger("resize");if(0==o.length)return this.$("#welcome-message").hide(),d.text(l.getText("mm_dntme_invalid_password")).show(),void this.trigger("resize");if(s!=o)return this.$("#welcome-message").hide(),d.text(l.getText("mm_dntme_invalid_password_confirmation")).show(),void this.trigger("resize");var p={email:r,password:o,password_hint:l.getText("mm_pwhint_default"),register_type:"dnt_password_panel",send_password_email:!1},m=this.$("#progress-section");m.height(this.$("#form-div").height()-10);var h=null;n(0,40),m.show(),this.$("#form-div").hide(),c.licenseModule.register(p,e.bind(function(t,a){this.processRegistration(t,a,p,e.bind(function(e){i.clearTimeout(h),m.hide(),e||(this.$("#register-dialog").hide(),this.registerSuccess(),this.$("#post-signin-dialog").show())},this))},this)),this.trigger("resize")},postRegisterOk:function(e){e&&e.preventDefault(),this.trigger("remove")},processRegistration:function(t,a,n,i){if(t){var r=l.getText("mm_dntme_register_error"),o=t.responseJSON&&t.responseJSON.data?t.responseJSON.data.errors:null;"invalid email address"==t.responseJSON.error_code?r=l.getText("mm_dntme_invalid_email_server_error"):"wrong password"==t.responseJSON.error_code?r=l.getText("mm_dntme_wrong_password"):"no account found for email"==t.responseJSON.error_code?r=l.getText("mm_dntme_wrong_email"):"version not allowed"==t.responseJSON.error_code?r=l.getText("mm_dntme_version_not_allowed"):"account has been locked"==t.responseJSON.error_code?r=l.getText("mm_dntme_account_locked"):t.responseJSON.error_code==s.SCHEDULED_DOWNTIME?r=l.getText("mm_dntme_server_maintenance"):t.responseJSON.error_code==s.MFA_CODE_REQUIRED?(r="You have enabled 2-factor authentication.  Please enter authentication code below:",this.$("#login-section, #progress-section").hide(),this.$("#form-div, #mfa-section").show()):o&&o.email&&("has already been taken"==o.email[0]?r=l.getText("mm_dntme_duplicate_email",[n.email]):"was used for MaskMe Heavy"==o.email[0]&&(r=l.getText("mm_dntme_version_not_allowed"))),this.$("#error").html(r).show(),t.responseJSON&&t.responseJSON.data&&1==t.responseJSON.data.generated_password&&this.$("#error #loginButton").click(e.bind(function(e){return c.webapp.openPasswordSetupPage(n.email),e.preventDefault(),!1},this)),this.$("#error #retryEmail, #error #loginButton").click(e.bind(this.retryEmail,this)),this.$("#error #dnt2upgrade").click(c.webapp.openDnt2UpgradePage),this.trigger("resize"),i(r)}else this.trigger("refresh-preferences"),i()},retryEmail:function(e){e&&e.preventDefault(),this.$("#error, #progress-section").hide(),this.$("#register-dialog, #form-div").show(),this.trigger("render")}}),m=p.extend({templateName:"notification_helper_paymentsr2_card_notification",afterInitialize:function(){this.applyFadingStyle(),this.fadeIn();var e=this.options.notification;this.model=new d.DisposableCard(e.model.maskedCard),this.model.bitcoinFunded="bitcoin"==this.model.get("payment_source"),this.model.detailed=e.detailed,this.panelId=4000004,e.model.declined&&(this.templateName="notification_helper_card_declined_notification",this.model.declined=e.model.declined,this.panelId=4000009),this.options.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render()},clicked:function(t){return t&&t.preventDefault(),"faq"==t.target.id?(this.options.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId}),c.webapp.openFAQ("card")):"chatNow"==t.target.id?(this.options.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),c.securityManager.openWindow("https://a3.websitealive.com/623/rRouter.asp?infocapture_ids=259,260&infocapture_values=|&groupid=623&wsa_custom0=notification&wsa_custom1=&websiteid=0&departmentid=3140&dl=blur",400,400)):"close-notification"==t.target.className||"notf-close-icon"==t.target.className||"close-image"==t.target.className?(this.options.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove")):"cardDashboard"==t.target.id?c.webapp.openPage("/#/client/card/"+this.model.get("guid")):"getRefund"==t.target.id?(this.$(".actions-short").hide(),this.$(".actions-tall").show(),this.autoResize(),this.model.save({purpose:"deactivate"},{success:e.bind(function(){"success"==this.model.get("status")?this.$(".refund-status").text("This Masked Card has been closed. Open transactions on this card are being reviewed to determine your refund amount."):this.$(".refund-status").text("There was an error closing this Masked Card.  Please contact support."),this.autoResize()},this)})):"logo-link"!=t.target.className&&"logo-link"!=t.target.parentNode.className||c.webapp.openDashboard(),!1}}),h=p.extend({templateName:"notification_helper_real_card_notification",afterInitialize:function(){this.applyFadingStyle(),this.fadeIn(),this.model=new d.RealCard(this.options.notification.model.maskedCard),this.model.detailed=this.options.notification.detailed,this.panelId=4000007,this.options.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render(),this.applyCardStyles()},clicked:function(e){return e&&e.preventDefault(),"faq"==e.target.id?(this.options.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId}),c.webapp.openFAQ("card")):"chatNow"==e.target.id?(this.options.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),c.securityManager.openWindow("https://a3.websitealive.com/623/rRouter.asp?infocapture_ids=259,260&infocapture_values=|&groupid=623&wsa_custom0=notification&wsa_custom1=&websiteid=0&departmentid=3140&dl=blur",400,400)):"close-notification"==e.target.className||"notf-close-icon"==e.target.className||"close-image"==e.target.className?(this.options.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove")):"cardDashboard"==e.target.id?c.webapp.openPage("/#/client/cards"):"getRefund"==e.target.id?c.webapp.openPage("/#/client/cards"):"logo-link"!=e.target.className&&"logo-link"!=e.target.parentNode.className||c.webapp.openDashboard(),!1}}),_=p.extend({templateName:"notification_helper_checkout_growl_notification",events:{"click .outerCard":"cardClicked","click .settings-notification":"openSettings","click .close-link":"closeNotification"},resetCards:function(t){var a=t.collection,n=t.maskedCards,i=1,r=[];a.forEach(e.bind(function(e){e.card_position=i,r.push(new d.RealCard(e)),i++},this)),n&&n.forEach(e.bind(function(e){e.card_position=i,e.brand="old_masked_card",e.cardType="old_masked_card",r.push(new d.DisposableCard(e)),i++},this)),this.model.offerOnly||(r.push(new d.RealCard({id:"new_real_card",cardType:"new_real_card",brand:"new_real_card",card_position:i})),r.push(new d.RealCard({id:"new_masked_card",cardType:"new_masked_card",brand:"new_masked_card",card_position:i+1}))),this.collection.reset(r)},setBrandStyles:function(){e.each(this.collection.models,e.bind(function(e){var a=e.get("styles");if(a&&a.base){var n=this.$("."+e.get("brand"));n.css(a.base),a.number&&t(".cardNumber",n).css(a.number),a.name&&t(".cardName",n).css(a.name),a.expiry&&t(".cardExpiration",n).css(a.expiry),a.cvc&&t(".cardCVC",n).css(a.cvc)}},this))},afterInitialize:function(){this.applyFadingStyle(),this.fadeIn(),this.contentManager=this.options.contentManager;var a=this.options.notification.payload;this.options.strategyId=a.strategyId,this.options.fieldId=a.fieldId,this.options.fieldType=a.fieldType,this.model=new d.RealCard(this.options.notification.model.maskedCard),this.model.detailed=this.options.notification.detailed,this.collection=new d.RealCardCollection,this.model.attributes.allCards=this.collection,this.model.offerOnly=this.options.notification.offerOnly,this.resetCards(this.options.notification),this.panelId=4000008,this.options.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.model.offersOnly||(c.licenseModule.logCheckout({method:"growl",merchant:this.contentManager.domain,shown:1,amount:this.options.amount}),this.options.messenger.on("entity:changed:RealCard",e.debounce(e.bind(function(){var a=new d.RealCardCollection;a.fetchAllForDomain(this.options.notification.domain,e.bind(function(){this.options.notification.collection.length!=a.length&&(this.options.notification.collection=a,this.resetCards(a),this.render(),this.setBrandStyles(),this.$(".outerCard").each(e.bind(function(e,a){t(a).addClass("pos-"+(e+1))},this)))},this))},this),1e3)));var n=!!e.find(this.collection.models,function(e){return"offer"==e.get("cardType")});n&&c.licenseModule.logCheckout({method:"offer",merchant:this.contentManager.domain,shown:1,amount:this.options.amount}),this.render();var r=0;i.setTimeout(e.bind(function(){this.setBrandStyles(),this.$(".outerCard").each(e.bind(function(a,n){i.setTimeout(e.bind(function(){t(n).addClass("pos-"+(a+1))},this),r),r+=300},this));var a=t(this.el),n=this.collection.length;a.height(a.height()+15*n),a.width(a.width()+15*(n>=3?n-3:0)),this.autoResize({extraWidth:15*(n>=3?n-3:0)})},this),0),i.setTimeout(e.bind(function(){this.$(".outerCard").removeClass("opaque")},this),5e3),this.contentManager.messenger.on("panel:closed",e.bind(function(){t(".outerCard").removeClass("biometric")},this))},cardClicked:function(a){for(var n=t(a.target);!n.hasClass("outerCard");)n=t(n[0].parentNode);if(n.hasClass("pos-1"))return void this.fillRealCard(n.data("id"),n);for(var r=this.collection.length,o=parseInt(n.data("pos")),s=1;s<o;s++)i.setTimeout(e.bind(function(){t(".outerCard").each(function(e,a){var n=parseInt(t(a).data("pos"));t(a).removeClass("pos-"+n).removeClass("biometric"),n>1?n-=1:n=r,t(a).addClass("pos-"+n).data("pos",n)})},this),50*s)},fillRealCard:function(e,t){var a=null;this.model.attributes.allCards.each(function(t){t.get("id")==e&&(a=t)}),"new_real_card"==a.get("cardType")?c.webapp.openPage("/#/client/real_cards/add"):"new_masked_card"==a.get("cardType")?(c.licenseModule.logCheckout({method:"growl",merchant:this.contentManager.domain,clicked:1,amount:this.options.amount}),this.focusFieldWithIntent({step:"new_card"})):"offer"==a.get("cardType")?(c.licenseModule.logCheckout({method:"offer",merchant:this.contentManager.domain,clicked:1,amount:this.options.amount}),c.webapp.openPage(a.get("url"))):("biometric"==this.contentManager.preferences.getPref("masked_card_auth")&&t.addClass("biometric"),c.licenseModule.logCheckout({method:"growl",merchant:this.contentManager.domain,clicked:1,amount:this.options.amount}),this.focusFieldWithIntent({step:"fill_card",id:a.get("id")}))}}),f=p.extend({templateName:"notification_helper_expire_notify",afterInitialize:function(){this.applyFadingStyle(),this.fadeIn(),this.model={get:e.bind(function(e){return this.options.notification[e]},this)},this.panelId=5000008,this.options.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render()},clicked:function(e){e.preventDefault(),"learn"==e.target.id?(this.options.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),c.securityManager.openPage("#premium"),this.trigger("remove")):e.target.className.match(/close-notification|notf-close-icon|close-image|done/i)&&(this.options.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove"))}}),g=p.extend({templateName:"notification_helper_expire_warning",afterInitialize:function(){this.applyFadingStyle(),this.fadeIn(),this.model={get:e.bind(function(e){return this.options.notification[e]},this)},this.panelId=5000009,this.options.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render()},clicked:function(e){e.preventDefault(),"learn"==e.target.id?(this.options.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),c.securityManager.openPage("#premium"),this.trigger("remove")):e.target.className.match(/close-notification|notf-close-icon|close-image|done/i)&&(this.options.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove"))}}),y=p.extend({templateName:"notification_helper_detailed_email",afterInitialize:function(){this.applyFadingStyle(),this.fadeIn(),this.model={get:e.bind(function(e){return this.options.notification[e]},this)},this.panelId="email"==this.options.notification.type?1000002:5000002,this.options.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render()},clicked:function(e){e.preventDefault(),"here"==e.target.id?(this.options.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId}),c.securityManager.openPage("#emails/guide"),this.trigger("remove")):e.target.className.match(/close-notification|notf-close-icon|close-image|done/i)?(this.options.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove")):e.target.className.match(/learn-more/)&&(this.options.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),c.securityManager.openPage("#dashboard/guide"),this.trigger("remove"))}}),b=p.extend({templateName:"notification_helper_growl",events:{mouseover:"onHover",mouseout:"onHoverEnd",
"click .panelSection":"performActions","click .close-notification":"logClose","click .settings":"showSettings"},afterInitialize:function(){this.applyFadingStyle(),this.fadeIn(),this.contentManager=this.options.contentManager,this.options.dynamicPanel=this.options.notification.dynamicPanel,this.model={dynamicPanel:this.options.dynamicPanel},this.setupDynamicPanel(),this.model.panelSections=this.panelSections,this.render()},logClose:function(){this.contentManager.messenger.send("update:panelActivity:closed",{panelId:this.options.dynamicPanel.id}),this.trigger("remove")},showSettings:function(){this.contentManager.showToolbarPanel({page:"settings"})}}),v=p.extend({templateName:"notification_helper_save_login",events:{mouseover:"onHover",mouseout:"onHoverEnd","click .close-notification":"logClose","click .close-link":"logClose","click .settings-link":"openWebappSettings","click .dashboard":"openDashboard","click .b-link":"openDashboard","click .help-link":"openFaq","click #save, #save-unregistered":"save","click #always-save-accounts-checkbox":"alwaysSave","click #register":"register","click #login":"login","click #forgotPassword":"forgotPassword","click #register-link, #signin-link":"toggleSigninOrRegister","click #never, #never-unregistered":"never","click #ok-post-register":"postRegisterOk"},openDashboard:function(){c.webapp.openPage("/#dashboard"),this.trigger("remove")},openWebappSettings:function(){c.webapp.openPage("/#settings"),this.trigger("remove")},openFaq:function(){c.webapp.openPage("/#help/faq/faq-passwordManager"),this.trigger("remove")},afterInitialize:function(){i.setTimeout(e.bind(function(){this.contentManager.messenger.send("background:notification:clear")},this),5e3),this.contentManager=this.options.contentManager,this.model=this.options.notification.account,this.model.oldEmail=this.contentManager.preferences.getPref("oldEmail"),this.model.loginNotLock=this.contentManager.preferences.getPref("loginNotLock"),this.model.locked=this.contentManager.isLocked(),this.model.unregistered=(!this.model.oldEmail||this.model.loginNotLock)&&this.model.locked,this.model.login_content="mm_notification_helper_securely_save_login",this.model.register_content="mm_notification_helper_securely_save_create",this.panelId=this.model.locked?9000002:6000002,this.model.unregistered?this.contentManager.preferences.isPrefTrue("isBlurUpgrade")||(this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render()):(this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render())},logClose:function(){this.contentManager.messenger.send("background:notification:clear"),this.contentManager.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove")},alwaysSave:function(){this.model.alwaysSaveAccounts=!0,this.save()},save:function(){this.contentManager.messenger.send("background:notification:clear"),this.contentManager.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),this.contentManager.isLocked()?(this.on("refresh-preferences",e.bind(function(){this.contentManager.preferences.fetchAll()},this)),this.$("#save-password-dialog, #save-password-dialog-unregistered").hide(),this.$("#register-dialog").show(),this.model.oldEmail?(this.$("#signin-form").show(),this.$(".signin-content").show()):(this.$("#register-form").show(),this.$(".register-content").show()),this.contentManager.messenger.send("update:panelActivity:impression",{panelId:7000011}),this.trigger("resize")):(this.contentManager.messenger.send("background:save:account",this.model),this.trigger("remove"))},loginSuccess:function(){this.contentManager.messenger.send("update:panelActivity:masked",{panelId:7000011}),this.contentManager.messenger.send("background:save:or:update:account",this.model)},registerSuccess:function(){this.contentManager.messenger.send("update:panelActivity:disclosed",{panelId:7000011}),this.contentManager.messenger.send("background:save:account",this.model)},never:function(){this.contentManager.messenger.send("background:notification:clear"),this.contentManager.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId});var e=new d.Blacklist;e.save({domain:this.model.domain,changed:"save_account",save_account:!0}),this.trigger("remove")}}),w=p.extend({templateName:"notification_helper_save_card",events:{mouseover:"onHover",mouseout:"onHoverEnd","click .close-notification":"logClose","click .close-link":"logClose","click .close-image":"logClose","click .settings-link":"openWebappSettings","click .dashboard":"openDashboard","click .b-link":"openDashboard","click .help-link":"openFaq","click .editAndSave":"editAndSave","click #save, #save-unregistered":"save","click #always-save-cards-checkbox":"alwaysSave","click #register":"register","click #login":"login","click #forgotPassword":"forgotPassword","click #register-link, #signin-link":"toggleSigninOrRegister","click #never, #never-unregistered":"never","click #ok-post-register":"postRegisterOk"},openDashboard:function(){c.webapp.openPage("/#dashboard"),this.trigger("remove")},openWebappSettings:function(){c.webapp.openPage("/#settings"),this.trigger("remove")},openFaq:function(){c.webapp.openPage("/#help/faq/faq-passwordManager"),this.trigger("remove")},afterInitialize:function(){i.setTimeout(e.bind(function(){this.contentManager.messenger.send("background:notification:clear")},this),5e3),this.contentManager=this.options.contentManager,this.card=this.options.notification.card,this.model=new d.RealCard(this.options.notification.card),this.model.domain=this.contentManager.domain,this.model.oldEmail=this.contentManager.preferences.getPref("oldEmail"),this.model.loginNotLock=this.contentManager.preferences.getPref("loginNotLock"),this.model.locked=this.contentManager.isLocked(),this.model.unregistered=(!this.model.oldEmail||this.model.loginNotLock)&&this.model.locked,this.model.login_content="mm_notification_helper_securely_save_cards_login",this.model.register_content="mm_notification_helper_securely_save_cards_register",this.model.set("type",this.card.card_type);var t=this.card.issuedto;if(t){var a=t.split(" ");this.model.set("first_name",a[0]),a.length>0&&this.model.set("last_name",a[1])}this.panelId=this.model.locked?9000012:6000012,this.model.unregistered?this.contentManager.preferences.isPrefTrue("isBlurUpgrade")||(this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render()):(this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render()),this.applyCardStyles()},logClose:function(){this.contentManager.messenger.send("background:notification:clear"),this.contentManager.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove")},alwaysSave:function(){this.card.alwaysSaveCards=!0,this.save()},editAndSave:function(e){e.preventDefault();var t=btoa(JSON.stringify({first_name:this.model.get("first_name"),last_name:this.model.get("last_name"),number:this.model.get("number"),expiry_month:this.model.get("expiry_month"),expiry_year:this.model.get("expiry_year"),cvc:this.model.get("cvc"),type:this.model.get("type"),brand:this.model.get("brand")}));c.webapp.openPage("/#/real_cards/edit_save/"+t),this.contentManager.messenger.send("update:panelActivity:impression",{panelId:9000013}),this.trigger("remove")},save:function(){this.contentManager.messenger.send("background:notification:clear"),this.contentManager.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),this.$("#reg-info, #save, #never, #always-save-cards-checkbox").hide(),this.contentManager.isLocked()?(this.on("refresh-preferences",e.bind(function(){this.contentManager.preferences.fetchAll()},this)),this.$("#save-password-dialog, #save-password-dialog-unregistered").hide(),this.$("#register-dialog").show(),this.model.oldEmail?(this.$("#signin-form").show(),this.$(".signin-content").show()):(this.$("#register-form").show(),this.$(".register-content").show()),this.contentManager.messenger.send("update:panelActivity:impression",{panelId:7000011}),this.trigger("resize")):this.saveCard()},saveCard:function(){this.contentManager.messenger.send("background:save:card",this.card),this.$("#save-card-dialog-unregistered, #save-card-dialog").hide(),this.$("#post-save-dialog").show(),this.trigger("resize"),i.setTimeout(e.bind(function(){this.trigger("remove")},this),5e3)},loginSuccess:function(){this.contentManager.messenger.send("update:panelActivity:masked",{panelId:7000011}),this.contentManager.messenger.send("background:save:or:update:card",this.card)},registerSuccess:function(){this.contentManager.messenger.send("update:panelActivity:disclosed",{panelId:7000011}),this.contentManager.messenger.send("background:save:card",this.card)},never:function(){this.contentManager.messenger.send("background:notification:clear"),this.contentManager.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId});var e=new d.Blacklist;e.save({domain:this.model.domain,changed:"save_card",save_card:!0}),this.trigger("remove")}}),k=p.extend({templateName:"notification_helper_failed_login",events:{mouseover:"onHover",mouseout:"onHoverEnd","click .close-link":"logClose","click .b-link":"openDashboard","click #update-account":"openWebappAccounts"},afterInitialize:function(){i.setTimeout(e.bind(function(){this.contentManager.messenger.send("background:notification:clear")},this),3e3),this.panelId=6000005,this.contentManager=this.options.contentManager,this.model=this.options.notification.account,this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render()},logClose:function(){this.contentManager.messenger.send("background:notification:clear"),this.contentManager.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove")},openWebappAccounts:function(){this.contentManager.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),c.webapp.openAccounts(this.model.domain),this.trigger("remove")},ignore:function(){this.contentManager.messenger.send("background:notification:clear"),this.contentManager.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId}),this.trigger("remove")}}),E=p.extend({templateName:"notification_helper_password_with_no_login",afterInitialize:function(){i.setTimeout(e.bind(function(){this.contentManager.messenger.send("background:notification:clear")},this),3e3),this.panelId=6000004,this.contentManager=this.options.contentManager,this.model=this.options.notification.account,this.model.loginAccounts=new d.AccountCollection,this.model.loginAccounts.fetchAllByDomain(this.model.domain,e.bind(function(e){e||0==this.model.loginAccounts.length?this.closePanel():(this.model.userOrEmailOnlyAccounts=this.model.loginAccounts.filter(function(e){return e.get("username")||e.get("email")}),this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render())},this))},clicked:function(t){if(t&&t.preventDefault(),"saveLoginWithPassword"==t.target.id){this.options.messenger.send("update:panelActivity:masked",{panelId:this.panelId});var a,n="";this.$("#input-custom-login").is(":visible")?n=this.$("#custom-username").val():(n=this.$("#select-login option:selected").text(),a=this.$("#select-login option:selected").attr("accountId"));var i;try{if(a){i=this.model.loginAccounts.filter(function(e){return e.get("id")==a})[0];var r=this.model.loginAccounts.filter(e.bind(function(e){return e.get("password")==this.model.password},this))[0];i.set("password",this.model.password),this.contentManager.messenger.send("background:save:account",i.toJSON()),r.set("pushed",0),r.destroy()}else i=this.model.loginAccounts.filter(e.bind(function(e){return e.get("password")==this.model.password},this))[0],i.set("username",n),this.contentManager.messenger.send("background:save:account",i.toJSON())}catch(e){}this.contentManager.messenger.send("background:notification:clear"),this.trigger("remove")}else"close-notification"==t.target.className||"notf-close-icon"==t.target.className||"close-image"==t.target.className||"dismiss"==t.target.id?(this.options.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove")):"icon-edit"==t.target.className&&("show-dropdown-edit"==t.target.id?(this.$("#input-custom-login").hide(),this.$("#select-login").show()):(this.$("#input-custom-login").show(),this.$("#select-login").hide()));return!1}}),A=p.extend({templateName:"notification_helper_change_password",events:{mouseover:"onHover",mouseout:"onHoverEnd","click .close-notification":"logClose","click .settings-link":"openSettings","click #save":"save","click #ignore":"ignore"},afterInitialize:function(){this.applyFadingStyle(),this.fadeIn(),i.setTimeout(e.bind(function(){this.contentManager.messenger.send("background:notification:clear")},this),3e3),this.panelId=6000003,this.contentManager=this.options.contentManager,this.model=this.options.notification.account,this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render()},logClose:function(){this.contentManager.messenger.send("background:notification:clear"),this.contentManager.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove")},save:function(){this.contentManager.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),this.contentManager.messenger.send("background:save:account",this.model),this.contentManager.messenger.send("background:notification:clear"),this.trigger("remove")},ignore:function(){this.contentManager.messenger.send("background:notification:clear"),this.contentManager.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId}),this.trigger("remove")}});return{NotificationPanelView:p,CardNotificationPanelView:m,RealCardNotificationPanelView:h,SaveCardNotificationPanelView:w,CheckoutGrowlNotificationPanelView:_,DetailedEmailNotificationPanelView:y,ExpireWarningNotificationPanelView:g,ExpireNotifyNotificationPanelView:f,GrowlNotificationPanelView:b,SaveLoginNotificationPanelView:v,FailedLoginNotificationPanelView:k,PasswordWithNoLoginNotificationPanelView:E,ChangePasswordNotificationPanelView:A}}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_password_with_no_login=e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+='\n            <div id="select-login" style="margin-bottom:1em">\n                <span style="display:block;margin-bottom:.5em;color:#848484;font-weight:bold;font-size:1.2em;">',n="mm_notification_helper_email_address_username",m=a.intl,i=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===g?i.call(e,n,{hash:{}}):i===b?y.call(e,"intl",n,{hash:{}}):i,r+=v(n)+'</span>\n                    <select style="width:90%;">\n                      ',m=a.userOrEmailOnlyAccounts,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"userOrEmailOnlyAccounts"),i=a.each,h=f.program(2,o,t),h.hash={},h.fn=h,h.inverse=f.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+='\n                    </select>\n                    <i class="icon-edit" id="show-custom-edit" style="cursor:pointer;"></i>\n            </div>\n            '}function o(e,t){var n,i,r="";return r+='\n                          <option accountId="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof n===g?n=n.call(e,{hash:{}}):n===b&&(n=y.call(e,"this.id",{hash:{}})),r+=v(n)+'">',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"username"),i=a["if"],h=f.program(3,s,t),h.hash={},h.fn=h,h.inverse=f.program(5,l,t),n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="</option>\n                      "}function s(e){var t;return t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"username"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"this.username",{hash:{}})),v(t)}function l(e){var t;return t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"this.email",{hash:{}})),v(t)}function c(){return'"display:none;"'}function d(){return'<i class="icon-edit" id="show-dropdown-edit" style="cursor:pointer;"></i>'}a=a||e.helpers;var u,p,m,h,_="",f=this,g="function",y=a.helperMissing,b=void 0,v=this.escapeExpression;return _+='<div class="panel">\n    <div class="close-notification">\n        <span class="notf-close-icon" id="paneHover">\n            <img class="close-image" src="',u="/pages/images/manage/dd_close_icon.png",m=a.assetUrl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"assetUrl",u,{hash:{}}):p,_+=v(u)+'"/>\n        </span>\n    </div>\n\n    <div class="body-notification" style="color:#1e91da;">\n        <img src="',u="/images/Icon.png",m=a.assetUrl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"assetUrl",u,{hash:{}}):p,_+=v(u)+'" style="height: 4.5em;margin-top: .3em;"/>\n        <div style="position: relative;bottom: 3.7em;left: 5.5em;">\n            <span style="font-size:1.6em">',u="mm_notification_helper_new_password_created",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'</span>\n            </br>\n            <span style="font-size:1.2em">',u="mm_dntme_at",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+" ",m=a.domain,u=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"domain"),typeof u===g?u=u.call(t,{hash:{}}):u===b&&(u=y.call(t,"domain",{hash:{}})),_+=v(u)+'</span>\n        </div>\n    </div>\n\n    <hr style="position:relative;top:-4em;border-top: 2px solid #1e91da;width:104.5%;margin-left:-1em;"/>\n    \n    <div class="dropdown-section" style="text-align: left;margin-left: 2em;">\n        <div style="margin-top: -5em;margin-bottom:1em">\n           <span style="display:block;margin-bottom:.5em;color:#848484;font-weight:bold;font-size:1.2em;">',u="mm_notification_helper_password",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'</span>\n           <span style="font-weight:bold;font-size:1.6em;">',m=a.password,u=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"password"),typeof u===g?u=u.call(t,{hash:{}}):u===b&&(u=y.call(t,"password",{hash:{}})),_+=v(u)+"</span>\n        </div>\n        <div>\n            ",m=a.loginAccounts,u=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"loginAccounts"),p=a["if"],h=f.program(1,r,i),h.hash={},h.fn=h,h.inverse=f.noop,u=p.call(t,u,h),(u||0===u)&&(_+=u),_+='\n        </div>\n        <div id="input-custom-login" style=',m=a.loginAccounts,u=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"loginAccounts"),p=a["if"],h=f.program(7,c,i),h.hash={},h.fn=h,h.inverse=f.noop,u=p.call(t,u,h),(u||0===u)&&(_+=u),_+='>\n            <span style="display:block;margin-bottom:.5em;color:#848484;font-weight:bold;font-size:1.2em;">',u="mm_notification_helper_email_address_username",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'</span>\n            <input style="width:90%;" type="text" id="custom-username"/>\n                ',m=a.loginAccounts,u=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"loginAccounts"),p=a["if"],h=f.program(9,d,i),h.hash={},h.fn=h,h.inverse=f.noop,u=p.call(t,u,h),(u||0===u)&&(_+=u),_+='\n        </div>\n    </div>\n    <div class="button-section">\n        <input type="button" id="saveLoginWithPassword" class="btn btn-primary" style="text-align:center;width:95%;background:green;font-size:1.5em;line-height: 1.5em;" value="Save Login & Password" />\n        </br>\n        <input type="button" id="dismiss" class="btn btn-primary" style="text-align:center;margin:1em;width:25%;background:gray;font-size:1.5em;line-height: 1.5em;" value="Cancel" />\n    </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.notification_helper_password_with_no_login}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_paymentsr2_card_notification=e.template(function(e,t,a,n,i){function r(e){var t,n,i,r="";return r+="\n      ",m=a.getOriginalValue,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getOriginalValue"),n="mm_payment_helper_help_bitcoin",m=a.intl,i=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===g?i.call(e,n,t,{hash:{}}):i===b?y.call(e,"intl",n,t,{hash:{}}):i,r+=v(t)+"\n    "}function o(e,t){var n,i,r="";return r+="\n      ",m=a.company,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"company"),i=a["if"],h=f.program(4,s,t),h.hash={},h.fn=h,h.inverse=f.program(6,l,t),n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="\n    "}function s(e){var t,n,i,r="";return r+="\n        ",m=a.getOriginalValue,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getOriginalValue"),n="mm_payment_helper_help_company",m=a.intl,i=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===g?i.call(e,n,t,{hash:{}}):i===b?y.call(e,"intl",n,t,{hash:{}}):i,r+=v(t)+"\n      "}function l(e,t){var n,i,r="";return r+="\n        ",m=a.isAch,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"isAch"),i=a["if"],h=f.program(7,c,t),h.hash={},h.fn=h,h.inverse=f.program(9,d,t),n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="\n      "}function c(e){var t,n,i,r="";return r+="\n          ",t="mm_payment_helper_help_2_1",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===g?n.call(e,t,{hash:{}}):n===b?y.call(e,"intl",t,{hash:{}}):n,r+=v(t)+"\n          <b>",m=a.getTotalCharge,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getTotalCharge"),n="mm_payment_helper_help_2_2",m=a.intl,i=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===g?i.call(e,n,t,{hash:{}}):i===b?y.call(e,"intl",n,t,{hash:{}}):i,r+=v(t)+"</b> ",t="mm_payment_helper_help_2_3_ach",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===g?n.call(e,t,{hash:{}}):n===b?y.call(e,"intl",t,{hash:{}}):n,r+=v(t)+"\n        "}function d(e){var t,n,i,r="";return r+="\n          ",t="mm_payment_helper_help_2_1",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===g?n.call(e,t,{hash:{}}):n===b?y.call(e,"intl",t,{hash:{}}):n,r+=v(t)+"\n          <b>",m=a.getTotalCharge,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getTotalCharge"),n="mm_payment_helper_help_2_2",m=a.intl,i=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===g?i.call(e,n,t,{hash:{}}):i===b?y.call(e,"intl",n,t,{hash:{}}):i,r+=v(t)+"</b> ",t="mm_payment_helper_help_2_3",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===g?n.call(e,t,{hash:{}}):n===b?y.call(e,"intl",t,{hash:{}}):n,r+=v(t)+"\n        "}a=a||e.helpers,n=n||e.partials;var u,p,m,h,_="",f=this,g="function",y=a.helperMissing,b=void 0,v=this.escapeExpression;return _+='<div class="panel">\n  <!-- Default header (actually footer) for the panels -->\n  <div class="header" id="default-header" style="border-top: 0px solid;">\n    <div class="logo-link">\n      <img style="width:63px;height:16px;" src="',u="/pages/images/blur_logo_ext_window.png",m=a.assetUrl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"assetUrl",u,{hash:{}}):p,_+=v(u)+'"/>\n    </div>\n    <div class="links-wrapper">\n      <div class="newlinks close-link">\n        <img id="close" class="close-notification" src="',u="/pages/images/2015panels/panel_xclose.png",m=a.assetUrl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"assetUrl",u,{hash:{}}):p,_+=v(u)+'"/>\n      </div>\n    </div>\n  </div>\n\n  <div style="background-color:#3497db;color:white;padding-left:10px;margin-left:-10px;margin-right:-10px;padding-right:10px;">\n    <h3>New Masked Card Created</h3></div>\n  <div style="margin: 10px 15px;text-align:center;">\n    ',m=a.bitcoinFunded,u=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"bitcoinFunded"),p=a["if"],h=f.program(1,r,i),h.hash={},h.fn=h,h.inverse=f.program(3,o,i),u=p.call(t,u,h),(u||0===u)&&(_+=u),_+="\n\n  </div>\n\n  ",u=t,u=f.invokePartial(n["notification_helper.masked_card"],"notification_helper.masked_card",u,a,n),(u||0===u)&&(_+=u),_+="\n  ",u=t,u=f.invokePartial(n["notification_helper.card_address"],"notification_helper.card_address",u,a,n),(u||0===u)&&(_+=u),_+="\n  ",u=t,u=f.invokePartial(n["notification_helper.card_actions"],"notification_helper.card_actions",u,a,n),(u||0===u)&&(_+=u),_+="\n\n</div>"}),ABINE_DNTME.CompiledTemplates.notification_helper_paymentsr2_card_notification}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_real_card_notification=e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+='\n    <div class="card-address" style="text-align:center;">\n      <div style="color:#4594E1">\n        <span style="font-size:12pt;">Billing Address</span>\n      </div>\n      <div style="color:#353535">\n        <span style="font-size:11pt;">',c=a.getAddress1,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress1"),typeof n===m?n=n.call(e,{hash:{}}):n===_&&(n=h.call(e,"getAddress1",{hash:{}})),r+=f(n)+"</span>\n        <br/>\n          ",c=a.getAddress2,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress2"),i=a["if"],d=p.program(2,o,t),d.hash={},d.fn=d,d.inverse=p.noop,n=i.call(e,n,d),(n||0===n)&&(r+=n),r+='\n        <span style="font-size:11pt;">',c=a.getCityState,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getCityState"),typeof n===m?n=n.call(e,{hash:{}}):n===_&&(n=h.call(e,"getCityState",{hash:{}})),r+=f(n)+'</span>\n        <br/>\n        <span style="font-size:11pt;">',c=a.getPostal,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getPostal"),typeof n===m?n=n.call(e,{hash:{}}):n===_&&(n=h.call(e,"getPostal",{hash:{}})),r+=f(n)+"</span>\n        <br/>\n      </div>\n    </div>\n"}function o(e){var t,n="";return n+='\n            <span style="font-size:11pt;">',c=a.getAddress2,t=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress2"),typeof t===m?t=t.call(e,{hash:{}}):t===_&&(t=h.call(e,"getAddress2",{hash:{}})),n+=f(t)+"</span>\n            <br/>\n          "}a=a||e.helpers,n=n||e.partials;var s,l,c,d,u="",p=this,m="function",h=a.helperMissing,_=void 0,f=this.escapeExpression;return u+='<div class="panel">\n  <div>\n    <span style="float:left; color:#4594E1;font-size:17px;margin-top:3px;margin-left:3px;">Auto-Fill Credit Card</span>\n    <div class="newheader" style="float:right;">\n      <div class="newlinks close-link">\n        <img id="close" class="close-notification" src="',s="/pages/images/2015panels/panel_xclose.png",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"assetUrl",s,{hash:{}}):l,u+=f(s)+'">\n      </div>\n    </div>\n    <p style="height:20px;"></p>\n  </div>\n  ',s=t,s=p.invokePartial(n["notification_helper.card"],"notification_helper.card",s,a,n),(s||0===s)&&(u+=s),u+="\n  <p></p>\n",c=a.getAddress,s=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getAddress"),l=a["if"],d=p.program(1,r,i),d.hash={},d.fn=d,d.inverse=p.noop,s=l.call(t,s,d),(s||0===s)&&(u+=s),u+="\n  <!-- Default header (actually footer) for the panels -->\n</div>"}),ABINE_DNTME.CompiledTemplates.notification_helper_real_card_notification}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_save_card=e.template(function(e,t,a,n,i){function r(e){var t,i,r="";return r+='\n    <span id="save-card-dialog-unregistered">\n      <div style="margin-right:10px;">\n        ',t=e,t=p.invokePartial(n["notification_helper.card"],"notification_helper.card",t,a,n),(t||0===t)&&(r+=t),r+='\n        <div class="body-notification" style="font-size:12px;text-align:center;">',t="mm_notification_helper_save_card_blur_is_the_best",c=a.intl,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===m?i.call(e,t,{hash:{}}):i===_?h.call(e,"intl",t,{hash:{}}):i,r+=f(t)+'</div>\n        <div style="margin:10px 30px;font-size:12px;" id="reg-info">\n          ',t="mm_notification_helper_save_card_would_you_like",c=a.intl,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===m?i.call(e,t,{hash:{}}):i===_?h.call(e,"intl",t,{hash:{}}):i,r+=f(t)+'\n          <div style="margin-top:10px;">\n            <input type="button" class="btn done" id="never-unregistered" style="text-align:center;" value="',t="mm_notification_helper_never",c=a.intl,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===m?i.call(e,t,{hash:{}}):i===_?h.call(e,"intl",t,{hash:{}}):i,r+=f(t)+'" />\n            <input type="button" class="btn btn-success done" id="save-unregistered" style="text-align:center;" value="',t="mm_notification_helper_save_this_card",c=a.intl,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===m?i.call(e,t,{hash:{}}):i===_?h.call(e,"intl",t,{hash:{}}):i,r+=f(t)+'" />\n          </div>\n        </div>\n      </div>\n    </span>\n  '}function o(e){var t,i,r="";return r+='\n    <span id="save-card-dialog">\n      <div>\n        ',t=e,t=p.invokePartial(n["notification_helper.card"],"notification_helper.card",t,a,n),(t||0===t)&&(r+=t),r+='\n        <a class="editAndSave clearfix" href="#">',t="mm_notification_helper_save_card_edit_and_save",c=a.intl,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===m?i.call(e,t,{hash:{}}):i===_?h.call(e,"intl",t,{hash:{}}):i,r+=f(t)+'</a>\n          <div class="btn btn-primary done" id="save" style="padding:10px;font-size:25px;text-align:center;margin:5px;margin-top:10px;width: 80%;"><img src="',t="/pages/images/2015panels/save_account_check.png",c=a.assetUrl,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof i===m?i.call(e,t,{hash:{}}):i===_?h.call(e,"assetUrl",t,{hash:{}}):i,r+=f(t)+'">',t="mm_notification_helper_save_this_card",c=a.intl,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===m?i.call(e,t,{hash:{}}):i===_?h.call(e,"intl",t,{hash:{}}):i,r+=f(t)+'</div><br>\n          <a class="done" id="never" style="text-decoration:underline;text-align:center;margin:5px;color:darkgrey;">',t="mm_notification_helper_never_for_this_site",c=a.intl,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===m?i.call(e,t,{hash:{}}):i===_?h.call(e,"intl",t,{hash:{}}):i,r+=f(t)+'</a>\n          <strong><a class="done" id="always-save-cards-checkbox" style="text-decoration:underline;text-align:center;margin:5px;color:#3398db;">',t="mm_notification_helper_always_save_cards",c=a.intl,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===m?i.call(e,t,{hash:{}}):i===_?h.call(e,"intl",t,{hash:{}}):i,r+=f(t)+"</a></strong>\n      </div>\n    </span>\n  "}a=a||e.helpers,n=n||e.partials;var s,l,c,d,u="",p=this,m="function",h=a.helperMissing,_=void 0,f=this.escapeExpression;return u+='<div class="panel">\n  <div class="body-notification" style="cursor: default;">\n    <img src="',s="/images/Icon.png",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"assetUrl",s,{hash:{}}):l,u+=f(s)+'"/>\n    <span class="boldFont">',s="mm_notification_helper_save_card_title",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"intl",s,{hash:{}}):l,u+=f(s)+'</span>\n    <img class="close-image" src="',s="/pages/images/manage/dd_close_icon.png",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"assetUrl",s,{hash:{}}):l,u+=f(s)+'"/>\n  </div>\n\n  ',c=a.unregistered,s=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"unregistered"),l=a["if"],d=p.program(1,r,i),d.hash={},d.fn=d,d.inverse=p.program(3,o,i),s=l.call(t,s,d),(s||0===s)&&(u+=s),u+="\n\n  ",s=t,s=p.invokePartial(n["notification_helper.login_register_form"],"notification_helper.login_register_form",s,a,n),(s||0===s)&&(u+=s),u+='\n\n  <span id="post-signin-dialog" style="display:none;">\n    <div class="body-notification"><img src="',s="/images/Icon.png",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"assetUrl",s,{
hash:{}}):l,u+=f(s)+'"/>',s="mm_notification_helper_card_saved",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"intl",s,{hash:{}}):l,u+=f(s)+"</div>\n    <div>\n      ",s="mm_notification_helper_save_card_protect_now",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"intl",s,{hash:{}}):l,u+=f(s)+'\n    </div>\n    <div style="margin:10px 0px;">\n      <input type="button" id="ok-post-register" class="btn btn-success" style="margin-right:5px" value=\'',s="mm_dntme_ok",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"intl",s,{hash:{}}):l,u+=f(s)+'\'/>\n      <a href=\'https://link.abine.com/learnmore-cards\' target="_blank" id="learn-more-post-register" class="btn btn-primary">',s="mm_dntme_learn_more",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"intl",s,{hash:{}}):l,u+=f(s)+'</a>\n    </div>\n\n  </span>\n  <span id="post-save-dialog" style="display:none;">\n    <div class="body-notification"><img src="',s="/images/Icon.png",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"assetUrl",s,{hash:{}}):l,u+=f(s)+'"/>',s="mm_notification_helper_card_saved",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"intl",s,{hash:{}}):l,u+=f(s)+"</div>\n    <div>\n      ",s="mm_notification_helper_save_card_protect_now",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"intl",s,{hash:{}}):l,u+=f(s)+"\n    </div>\n  </span>\n</div>"}),ABINE_DNTME.CompiledTemplates.notification_helper_save_card}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_save_login=e.template(function(e,t,a,n,i){function r(e){var t,n,i="";return i+='\n    <span id="save-password-dialog-unregistered">\n      <div style="float:left;margin-top:20px;margin-right:5px;">\n        <img src="',t="pages/images/dnt_blur_growl_blur_logo2.png",c=a.assetUrl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"assetUrl",t,{hash:{}}):n,i+=f(t)+'"/>\n      </div>\n      <div style="margin-right:10px;">\n        <div class="body-notification" style="font-size:12px;">',t="mm_notification_helper_save_login_blur_is_the_best",c=a.intl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"intl",t,{hash:{}}):n,i+=f(t)+'</div>\n        <div style="margin:10px 30px;font-size:12px;">\n          ',t="mm_notification_helper_save_login_would_you_like",c=a.intl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"intl",t,{hash:{}}):n,i+=f(t)+'\n          <div style="margin-top:10px;">\n            <input type="button" class="btn done" id="never-unregistered" style="text-align:center;" value="',t="mm_notification_helper_never",c=a.intl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"intl",t,{hash:{}}):n,i+=f(t)+'" />\n            <input type="button" class="btn btn-success done" id="save-unregistered" style="text-align:center;" value="',t="mm_notification_helper_save_login",c=a.intl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"intl",t,{hash:{}}):n,i+=f(t)+'" />\n          </div>\n        </div>\n      </div>\n     <div class="links settings-link" data-highlight="rememberaccounts" title="',t="mm_notification_helper_settings",c=a.intl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"intl",t,{hash:{}}):n,i+=f(t)+'">\n          <img class="header-icon" src="',t="/pages/images/dnt-ui-header-settings.png",c=a.assetUrl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"assetUrl",t,{hash:{}}):n,i+=f(t)+'">\n      </div>\n    </span>\n  '}function o(e){var t,i,r="";return r+='\n    <span id="save-password-dialog">\n      <div>\n          <div class="btn btn-primary done" id="save" style="padding:10px;font-size:25px;text-align:center;margin:5px;margin-top:10px;width: 80%;"><img src="',t="/pages/images/2015panels/save_account_check.png",c=a.assetUrl,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof i===m?i.call(e,t,{hash:{}}):i===_?h.call(e,"assetUrl",t,{hash:{}}):i,r+=f(t)+'">',t="mm_notification_helper_save_this_password",c=a.intl,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===m?i.call(e,t,{hash:{}}):i===_?h.call(e,"intl",t,{hash:{}}):i,r+=f(t)+'</div><br>\n          <a class="done" id="never" style="text-decoration:underline;text-align:center;margin:5px;color:darkgrey;">',t="mm_notification_helper_never_for_this_site",c=a.intl,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===m?i.call(e,t,{hash:{}}):i===_?h.call(e,"intl",t,{hash:{}}):i,r+=f(t)+'</a>\n          <strong><a class="done" id="always-save-accounts-checkbox" style="text-decoration:underline;text-align:center;margin:5px;color:#3398db;">',t="mm_notification_helper_always_save_passwords",c=a.intl,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===m?i.call(e,t,{hash:{}}):i===_?h.call(e,"intl",t,{hash:{}}):i,r+=f(t)+'</a></strong>\n      </div>\n    </span>\n    <!-- Default header (actually footer) for the panels -->\n  <div style="position:absolute;right:0;bottom:5px;top:0;">\n      ',t=e,t=p.invokePartial(n["common.header"],"common.header",t,a,n),(t||0===t)&&(r+=t),r+="\n    </div>\n  "}a=a||e.helpers,n=n||e.partials;var s,l,c,d,u="",p=this,m="function",h=a.helperMissing,_=void 0,f=this.escapeExpression;return u+='<div class="panel">\n  <div class="close-notification">\n      <img style="margin-top:1.2em;" src="',s="/images/blur_xclose.png",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"assetUrl",s,{hash:{}}):l,u+=f(s)+'"/>\n  </div>\n\n  ',c=a.unregistered,s=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"unregistered"),l=a["if"],d=p.program(1,r,i),d.hash={},d.fn=d,d.inverse=p.program(3,o,i),s=l.call(t,s,d),(s||0===s)&&(u+=s),u+="\n\n  ",s=t,s=p.invokePartial(n["notification_helper.login_register_form"],"notification_helper.login_register_form",s,a,n),(s||0===s)&&(u+=s),u+='\n\n  <span id="post-signin-dialog" style="display:none;">\n    <div class="body-notification"><img src="',s="/images/Icon.png",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"assetUrl",s,{hash:{}}):l,u+=f(s)+'"/>',s="mm_notification_helper_password_saved",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"intl",s,{hash:{}}):l,u+=f(s)+"</div>\n    <div>\n      ",s="mm_notification_helper_blur_will_now_protect",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"intl",s,{hash:{}}):l,u+=f(s)+'\n    </div>\n    <div style="margin:10px 0px;">\n      <input type="button" id="ok-post-register" class="btn btn-success" style="margin-right:5px" value=\'',s="mm_dntme_ok",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"intl",s,{hash:{}}):l,u+=f(s)+'\'/>\n      <a href=\'https://link.abine.com/learnmore-passwords\' target="_blank" id="learn-more-post-register" class="btn btn-primary">',s="mm_dntme_learn_more",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"intl",s,{hash:{}}):l,u+=f(s)+"</a>\n    </div>\n\n  </span>\n\n\n</div>"}),ABINE_DNTME.CompiledTemplates.notification_helper_save_login}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("payment_helper.biometric_auth",e.template(function(e,t,a,n,i){function r(e){var t,n,i="";return i+='\n    <div class="control-group" style="margin-left:50px;">\n      <span >',t="mm_payment_helper_master_pass_auth_message",l=a.intl,n=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===p?n.call(e,t,{hash:{}}):n===h?m.call(e,"intl",t,{hash:{}}):n,i+=_(t)+'</span><br/>\n      <div id="masterPassErr" style="display:none;color:red;text-transform:none;"></div>\n      <span class="fields">\n        <div id="login-section">\n          <input id="password" type="password" style="width:140px;height:28px;margin:10px 5px;margin-left:0px;" placeholder="',t="mm_dntme_enter_password_simple",l=a.intl,n=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===p?n.call(e,t,{hash:{}}):n===h?m.call(e,"intl",t,{hash:{}}):n,i+=_(t)+'"/>\n        </div>\n         <input type="submit" id="unlockButton" class="btn btn-success unlock-msg" value=\'',t="mm_payment_helper_master_pass_auth_verify",l=a.intl,n=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===p?n.call(e,t,{hash:{}}):n===h?m.call(e,"intl",t,{hash:{}}):n,i+=_(t)+'\' style="padding:5px 35px;background:none;background-color:#4c90da;"/>\n      </span>\n    </div>\n  '}a=a||e.helpers;var o,s,l,c,d="",u=this,p="function",m=a.helperMissing,h=void 0,_=this.escapeExpression,f=a.blockHelperMissing;return d+='<!-- Step 3.1 Biometric auth -->\n<div class="payments-step clearfix" id="biometricAuth" style="display:none;">\n  <div style="float:left;width:80px;margin:10px;">\n    <img src="',o="/pages/images/fingerprint.png",l=a.assetUrl,s=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof s===p?s.call(t,o,{hash:{}}):s===h?m.call(t,"assetUrl",o,{hash:{}}):s,d+=_(o)+'"/>\n  </div>\n  <div style="float:left;margin: 10px;width:240px;margin-top:25px;">\n    <span id="biometricInfo">',o="mm_payment_helper_request_biometric_auth",l=a.intl,s=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof s===p?s.call(t,o,{hash:{}}):s===h?m.call(t,"intl",o,{hash:{}}):s,d+=_(o)+'</span>\n    <span id="biometricError" style="display:none;color:red;"></span>\n    <br/>\n    <a id="retryBiometricAuth" href="#">',o="mm_payment_helper_retry_biometric_auth",l=a.intl,s=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof s===p?s.call(t,o,{hash:{}}):s===h?m.call(t,"intl",o,{hash:{}}):s,d+=_(o)+'</a> |\n    <a id="masterPassAuth" href="#">',o="mm_payment_helper_master_pass_auth",l=a.intl,s=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof s===p?s.call(t,o,{hash:{}}):s===h?m.call(t,"intl",o,{hash:{}}):s,d+=_(o)+'</a>\n  </div>\n</div>\n<!-- End Step 3.1 Biometric auth -->\n\n<!-- Step 3.2 Master password auth -->\n<div class="payments-step clearfix" id="masterPassStep" style="display:none;padding-top:15px;">\n  <div style="float:left;">\n    <img style="margin-top:30px;margin-left:6px;" height="40px" width="40px" src="',o="/pages/images/NewIcon.png",l=a.assetUrl,s=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof s===p?s.call(t,o,{hash:{}}):s===h?m.call(t,"assetUrl",o,{hash:{}}):s,d+=_(o)+'"/>\n  </div>\n  ',o="unlock",l=a.form,s=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"form"),c=u.program(1,r,i),c.hash={},c.fn=c,c.inverse=u.noop,o=l&&typeof s===p?s.call(t,o,c):f.call(t,s,o,c),(o||0===o)&&(d+=o),d+="\n</div>\n<!-- End Step 3.2 Master password auth -->\n"}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("payment_helper.company_cards",e.template(function(e,t,a,n,i){function r(e){var t,n,i="";return i+='\n      <a href="#" class="mmKeyOption">\n        <div class="element otherred" id="createCompanyCard">\n          <span class="panelLeft">\n              <img class="iconPos" src="',t="/pages/images/2015panels/card_green.png",l=a.assetUrl,n=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===p?n.call(e,t,{hash:{}}):n===h?m.call(e,"assetUrl",t,{hash:{}}):n,i+=_(t)+'" style="width:43px;height:21px;"/>\n            ',t="mm_payment_helper_company_create",l=a.intl,n=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===p?n.call(e,t,{hash:{}}):n===h?m.call(e,"intl",t,{hash:{}}):n,i+=_(t)+"\n          </span>\n        </div>\n      </a>\n"}a=a||e.helpers;var o,s,l,c,d="",u=this,p="function",m=a.helperMissing,h=void 0,_=this.escapeExpression;return d+="\n<!-- If Company Cards available-->\n",l=a.hasCompanyCards,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasCompanyCards"),s=a["if"],c=u.program(1,r,i),c.hash={},c.fn=c,c.inverse=u.noop,o=s.call(t,o,c),(o||0===o)&&(d+=o),d}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("payment_helper.disposable_cards",e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+="\n  ",c=a.disposableCards,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"disposableCards"),i=a.each,d=p.program(2,o,t),d.hash={},d.fn=d,d.inverse=p.noop,n=i.call(e,n,d),(n||0===n)&&(r+=n),r+="\n"}function o(e){var t,n,i="";return i+='\n    <a href="#" data-cardid="',c=a.id,t=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof t===m?t=t.call(e,{hash:{}}):t===_&&(t=h.call(e,"id",{hash:{}})),i+=f(t)+'" class="mmKeyOption usedCard">\n      <div class="element othergreen" id="mask">\n        <span class="panelLeft">\n          <img class="iconPos" src="',t="/pages/images/2015panels/card_green.png",c=a.assetUrl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"assetUrl",t,{hash:{}}):n,i+=f(t)+'"\n               style="width:43px;height:21px;"/>\n          ',t="mm_payment_helper_useCardEnding",c=a.intl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"intl",t,{hash:{}}):n,i+=f(t)+" ",t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getLastFour"),typeof t===m?t=t.call(e,{hash:{}}):t===_&&(t=h.call(e,"this.getLastFour",{hash:{}})),i+=f(t)+'\n        </span>\n        <span class="panelRight">\n          <span class="overflowText">',c=a.getOriginalValue,t=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getOriginalValue"),typeof t===m?t=t.call(e,{hash:{}}):t===_&&(t=h.call(e,"getOriginalValue",{hash:{}})),i+=f(t)+" ",t="mm_payment_helper_card",c=a.intl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"intl",t,{hash:{}}):n,i+=f(t)+"</span>\n        </span>\n      </div>\n    </a>\n  "}a=a||e.helpers;var s,l,c,d,u="",p=this,m="function",h=a.helperMissing,_=void 0,f=this.escapeExpression;return u+="<!-- If Masked Cards already exist for this domain -->\n",c=a.disposableCards,s=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"disposableCards"),l=a["if"],d=p.program(1,r,i),d.hash={},d.fn=d,d.inverse=p.noop,s=l.call(t,s,d),(s||0===s)&&(u+=s),u}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("payment_helper.inline_faq",e.template(function(e,t,a){a=a||e.helpers;var n,i,r,o="",s="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return o+='<div id="inlineFaq" class="left-panel" style="display:none;margin-bottom:15px;">\n<div class=\'faqGotIt\' style="cursor:pointer;margin-left:10px;margin-top:5px;color:#555;font-weight:bold;"><img src="',n="/pages/images/2015panels/back_arrow.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,o+=d(n)+'"/>&nbsp;&nbsp;&nbsp;&nbsp;Go Back</div>\n<div class="payments-header" style="text-align:center;">\n  ',n="mm_payment_helper_safestWayTitle",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+"\n</div>\n<div style=\"margin: 0px 15px;\">\n  <div class='faq-question-header'>",n="mm_payment_helper_inlineFaqWhatAre",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+"</div>\n  <div class='faq-body'>\n    ",n="mm_payment_helper_inlineFaqMaskedCardsAre",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+"\n  </div>\n  <div class='faq-question-header'>",n="mm_payment_helper_inlineFaqAreThereAdditional",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+"</div>\n  <div class='faq-body'>\n    ",n="mm_payment_helper_inlineFaqAdditionalFees",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+"\n  </div>\n  <div class='faq-question-header'>",n="mm_payment_helper_inlineFaqWhatIfIDont",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+"</div>\n  <div class='faq-body'>\n    ",n="mm_payment_helper_inlineFaqClose_1",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+" <a href='#' id='viewCardsDashboard'>",n="mm_payment_helper_inlineFaqClose_2",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+"</a>\n  </div>\n  <div style=\"text-align: center;margin:5px 0px;\">\n    <input type=\"button\" id='faqCardLink' class='btn btn-primary' value='",n="mm_payment_helper_link",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+"'/>\n    <input type=\"button\" class='faqGotIt btn btn-success' value='",n="mm_payment_helper_inlineFaqGotIt",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+"'/>\n  </div>\n</div>\n</div>"}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("payment_helper.mask_my_card",e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+='\n        <a href="#" data-cardid="',d=a.id,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof n===h?n=n.call(e,{hash:{}}):n===f&&(n=_.call(e,"id",{hash:{}})),r+=g(n)+'" class="mmKeyOption">\n            <div class="element othergreen" id="protect-my-card-btn">\n                  <span class="panelLeft">\n                    <img class="iconPos" src="',n="/pages/images/2015panels/card_green.png",d=a.assetUrl,i=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),n=typeof i===h?i.call(e,n,{hash:{}}):i===f?_.call(e,"assetUrl",n,{hash:{}}):i,r+=g(n)+'" style="width:43px;height:21px;"/>\n                    ',n="mm_payment_helper_create_new_masked_card",d=a.intl,i=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===h?i.call(e,n,{hash:{}}):i===f?_.call(e,"intl",n,{hash:{}}):i,r+=g(n)+"\n                  </span>\n            </div>\n        </a>\n\n    ",d=a.entitledToPhone,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"entitledToPhone"),i=a["if"],u=m.program(2,o,t),u.hash={},u.fn=u,u.inverse=m.noop,n=i.call(e,n,u),(n||0===n)&&(r+=n),r+="\n    "}function o(e,t){var n,i,r="";return r+="\n        ",d=a.hasAuthorizedCoinbase,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"hasAuthorizedCoinbase"),i=a["if"],u=m.program(3,s,t),u.hash={},u.fn=u,u.inverse=m.noop,n=i.call(e,n,u),(n||0===n)&&(r+=n),r+="\n    "}function s(e){var t,n,i="";return i+='\n            <a href="#" data-cardid="',d=a.id,t=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof t===h?t=t.call(e,{hash:{}}):t===f&&(t=_.call(e,"id",{hash:{}})),i+=g(t)+'" class="mmKeyOption">\n                <div class="element othergreen" id="protect-my-card-bitcoin-btn">\n                <span class="panelLeft">\n                    <img class="iconPos" src="',t="/pages/images/maskcard-icon-bitcoin.png",d=a.assetUrl,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===h?n.call(e,t,{hash:{}}):n===f?_.call(e,"assetUrl",t,{hash:{}}):n,i+=g(t)+'"/>\n                    ',t="mm_payment_helper_create_new_masked_card",d=a.intl,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===h?n.call(e,t,{hash:{}}):n===f?_.call(e,"intl",t,{hash:{}}):n,i+=g(t)+'\n                </span>\n                 <span class="panelRight">\n                    <span class="overflowText">(bitcoin)</span>\n                </span>\n                </div>\n            </a>\n        '}a=a||e.helpers,n=n||e.partials;var l,c,d,u,p="",m=this,h="function",_=a.helperMissing,f=void 0,g=this.escapeExpression;return p+='<div class="payments-step" id="panelOptions">\n    ',d=a.cardDisabled,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"cardDisabled"),c=a.unless,u=m.program(1,r,i),u.hash={},u.fn=u,u.inverse=m.noop,l=c.call(t,l,u),(l||0===l)&&(p+=l),p+="\n\n    ",l=t,l=m.invokePartial(n["payment_helper.disposable_cards"],"payment_helper.disposable_cards",l,a,n),(l||0===l)&&(p+=l),p+="\n    ",l=t,l=m.invokePartial(n["payment_helper.company_cards"],"payment_helper.company_cards",l,a,n),(l||0===l)&&(p+=l),p+="\n    ",l=t,l=m.invokePartial(n["payment_helper.real_cards"],"payment_helper.real_cards",l,a,n),(l||0===l)&&(p+=l),p+="\n</div>"}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("payment_helper.no_card_on_file",e.template(function(e,t,a,n,i){function r(e){var t,n,i="";return i+='\n        <input id="autoEmail" type="text" placeholder="',t="mm_payment_helper_email",l=a.intl,n=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===p?n.call(e,t,{hash:{}}):n===h?m.call(e,"intl",t,{hash:{}}):n,i+=_(t)+'">\n      '}a=a||e.helpers;var o,s,l,c,d="",u=this,p="function",m=a.helperMissing,h=void 0,_=this.escapeExpression;return d+='<div id="register" class="payments-step" style="display: none;">\n  <div class="payments-header">',o="mm_payment_helper_card_complete_title",l=a.intl,s=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof s===p?s.call(t,o,{hash:{}}):s===h?m.call(t,"intl",o,{hash:{}}):s,d+=_(o)+'</div>\n\n  <div style="width:610px;" id="billingInfoForm">\n    <div style="width:49%;display:inline-block;vertical-align:top;">\n\n      <input id="autoFname" type="text" placeholder="',o="mm_payment_helper_first_name",l=a.intl,s=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof s===p?s.call(t,o,{hash:{}}):s===h?m.call(t,"intl",o,{hash:{}}):s,d+=_(o)+'">\n      <input id="autoLname" type="text" placeholder="',o="mm_payment_helper_last_name",l=a.intl,s=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof s===p?s.call(t,o,{hash:{}}):s===h?m.call(t,"intl",o,{hash:{}}):s,d+=_(o)+'">\n\n      <input id="autoAddress" type="text" placeholder="',o="mm_payment_helper_address",l=a.intl,s=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof s===p?s.call(t,o,{hash:{}}):s===h?m.call(t,"intl",o,{hash:{}}):s,d+=_(o)+'">\n      <input id="autoApt" data-optional="yes" type="text" placeholder="',o="mm_payment_helper_apt",l=a.intl,s=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof s===p?s.call(t,o,{hash:{}}):s===h?m.call(t,"intl",o,{hash:{}}):s,d+=_(o)+'">\n\n      <input id="autoCity" type="text" placeholder="',o="mm_payment_helper_city",l=a.intl,s=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof s===p?s.call(t,o,{hash:{}}):s===h?m.call(t,"intl",o,{hash:{}}):s,d+=_(o)+'">\n      <select id="autoStateUS"><option value="">Select State</option><option value="">------------</option><option value="AK">Alaska</option><option value="AL">Alabama</option><option value="AP">Armed Forces Pacific</option><option value="AR">Arkansas</option><option value="AS">American Samoa</option><option value="AZ">Arizona</option><option value="CA">California</option><option value="CO">Colorado</option><option value="CT">Connecticut</option><option value="DC">District of Columbia</option><option value="DE">Delaware</option><option value="FL">Florida</option><option value="FM">Federated States of Micronesia</option><option value="GA">Georgia</option><option value="GU">Guam</option><option value="HI">Hawaii</option><option value="IA">Iowa</option><option value="ID">Idaho</option><option value="IL">Illinois</option><option value="IN">Indiana</option><option value="KS">Kansas</option><option value="KY">Kentucky</option><option value="LA">Louisiana</option><option value="MA">Massachusetts</option><option value="MD">Maryland</option><option value="ME">Maine</option><option value="MH">Marshall Islands</option><option value="MI">Michigan</option><option value="MN">Minnesota</option><option value="MO">Missouri</option><option value="MP">Northern Mariana Islands</option><option value="MS">Mississippi</option><option value="MT">Montana</option><option value="NC">North Carolina</option><option value="ND">North Dakota</option><option value="NE">Nebraska</option><option value="NH">New Hampshire</option><option value="NJ">New Jersey</option><option value="NM">New Mexico</option><option value="NV">Nevada</option><option value="NY">New York</option><option value="OH">Ohio</option><option value="OK">Oklahoma</option><option value="OR">Oregon</option><option value="PA">Pennsylvania</option><option value="PR">Puerto Rico</option><option value="PW">Palau</option><option value="RI">Rhode Island</option><option value="SC">South Carolina</option><option value="SD">South Dakota</option><option value="TN">Tennessee</option><option value="TX">Texas</option><option value="UT">Utah</option><option value="VA">Virginia</option><option value="VI">Virgin Islands</option><option value="VT">Vermont</option><option value="WA">Washington</option><option value="WV">West Virginia</option><option value="WI">Wisconsin</option><option value="WY">Wyoming</option></select>\n      <input id="autoState" type="text" placeholder="',o="mm_payment_helper_state",l=a.intl,s=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof s===p?s.call(t,o,{hash:{}}):s===h?m.call(t,"intl",o,{hash:{}}):s,d+=_(o)+'" style="display:none;">\n      <input id="autoZip" type="text" placeholder="',o="mm_payment_helper_zip",l=a.intl,s=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof s===p?s.call(t,o,{hash:{}}):s===h?m.call(t,"intl",o,{hash:{}}):s,d+=_(o)+'">\n\n      <select id="autoCountry"><option value="">Select Country</option><option value="">--------------</option><option value="AF">Afghanistan</option><option value="AL">Albania</option><option value="DZ">Algeria</option><option value="AS">American Samoa</option><option value="AD">Andorra</option><option value="AO">Angola</option><option value="AI">Anguilla</option><option value="AQ">Antarctica</option><option value="AG">Antigua and Barbuda</option><option value="AR">Argentina</option><option value="AM">Armenia</option><option value="AW">Aruba</option><option value="AC">Ascension Island</option><option value="AU">Australia</option><option value="AT">Austria</option><option value="AZ">Azerbaijan</option><option value="BS">Bahamas</option><option value="BH">Bahrain</option><option value="BD">Bangladesh</option><option value="BB">Barbados</option><option value="BE">Belgium</option><option value="BZ">Belize</option><option value="BJ">Benin</option><option value="BM">Bermuda</option><option value="BT">Bhutan</option><option value="BO">Bolivia</option><option value="BA">Bosnia and Herzegovina</option><option value="BW">Botswana</option><option value="BV">Bouvet Island</option><option value="BR">Brazil</option><option value="BQ">British Antarctic Territory</option><option value="IO">British Indian Ocean Territory</option><option value="VG">British Virgin Islands</option><option value="BN">Brunei</option><option value="BG">Bulgaria</option><option value="BF">Burkina Faso</option><option value="BI">Burundi</option><option value="KH">Cambodia</option><option value="CM">Cameroon</option><option value="CA">Canada</option><option value="IC">Canary Islands</option><option value="CT">Canton and Enderbury Islands</option><option value="CV">Cape Verde</option><option value="KY">Cayman Islands</option><option value="CF">Central African Republic</option><option value="EA">Ceuta and Melilla</option><option value="TD">Chad</option><option value="CL">Chile</option><option value="CN">China</option><option value="CX">Christmas Island</option><option value="CP">Clipperton Island</option><option value="CC">Cocos [Keeling] Islands</option><option value="CO">Colombia</option><option value="KM">Comoros</option><option value="CD">Congo [DRC]</option><option value="CK">Cook Islands</option><option value="CR">Costa Rica</option><option value="HR">Croatia</option><option value="CU">Cuba</option><option value="CY">Cyprus</option><option value="CZ">Czech Republic</option><option value="DK">Denmark</option><option value="DG">Diego Garcia</option><option value="DJ">Djibouti</option><option value="DM">Dominica</option><option value="DO">Dominican Republic</option><option value="NQ">Dronning Maud Land</option><option value="TL">East Timor</option><option value="EC">Ecuador</option><option value="EG">Egypt</option><option value="SV">El Salvador</option><option value="EE">Estonia</option><option value="ET">Ethiopia</option><option value="FK">Falkland Islands [Islas Malvinas]</option><option value="FO">Faroe Islands</option><option value="FJ">Fiji</option><option value="FI">Finland</option><option value="FR">France</option><option value="GF">French Guiana</option><option value="PF">French Polynesia</option><option value="TF">French Southern Territories</option><option value="FQ">French Southern and Antarctic Territories</option><option value="GA">Gabon</option><option value="GM">Gambia</option><option value="GE">Georgia</option><option value="DE">Germany</option><option value="GH">Ghana</option><option value="GI">Gibraltar</option><option value="GR">Greece</option><option value="GL">Greenland</option><option value="GD">Grenada</option><option value="GP">Guadeloupe</option><option value="GU">Guam</option><option value="GT">Guatemala</option><option value="GG">Guernsey</option><option value="GW">Guinea-Bissau</option><option value="GY">Guyana</option><option value="HT">Haiti</option><option value="HM">Heard Island and McDonald Islands</option><option value="HN">Honduras</option><option value="HK">Hong Kong</option><option value="HU">Hungary</option><option value="IS">Iceland</option><option value="IN">India</option><option value="ID">Indonesia</option><option value="IE">Ireland</option><option value="IM">Isle of Man</option><option value="IL">Israel</option><option value="IT">Italy</option><option value="JM">Jamaica</option><option value="JP">Japan</option><option value="JE">Jersey</option><option value="JT">Johnston Island</option><option value="JO">Jordan</option><option value="KZ">Kazakhstan</option><option value="KE">Kenya</option><option value="KI">Kiribati</option><option value="KW">Kuwait</option><option value="KG">Kyrgyzstan</option><option value="LA">Laos</option><option value="LV">Latvia</option><option value="LS">Lesotho</option><option value="LY">Libya</option><option value="LI">Liechtenstein</option><option value="LT">Lithuania</option><option value="LU">Luxembourg</option><option value="MO">Macau</option><option value="MK">Macedonia [FYROM]</option><option value="MG">Madagascar</option><option value="MW">Malawi</option><option value="MY">Malaysia</option><option value="MV">Maldives</option><option value="ML">Mali</option><option value="MT">Malta</option><option value="MH">Marshall Islands</option><option value="MQ">Martinique</option><option value="MR">Mauritania</option><option value="MU">Mauritius</option><option value="YT">Mayotte</option><option value="FX">Metropolitan France</option><option value="MX">Mexico</option><option value="FM">Micronesia</option><option value="MI">Midway Islands</option><option value="MD">Moldova</option><option value="MC">Monaco</option><option value="MN">Mongolia</option><option value="ME">Montenegro</option><option value="MS">Montserrat</option><option value="MA">Morocco</option><option value="MZ">Mozambique</option><option value="NA">Namibia</option><option value="NR">Nauru</option><option value="NP">Nepal</option><option value="NL">Netherlands</option><option value="AN">Netherlands Antilles</option><option value="NT">Neutral Zone</option><option value="NC">New Caledonia</option><option value="NZ">New Zealand</option><option value="NI">Nicaragua</option><option value="NE">Niger</option><option value="NG">Nigeria</option><option value="NU">Niue</option><option value="NF">Norfolk Island</option><option value="VD">North Vietnam</option><option value="MP">Northern Mariana Islands</option><option value="NO">Norway</option><option value="OM">Oman</option><option value="QO">Outlying Oceania</option><option value="PC">Pacific Islands Trust Territory</option><option value="PK">Pakistan</option><option value="PW">Palau</option><option value="PS">Palestinian Territories</option><option value="PA">Panama</option><option value="PZ">Panama Canal Zone</option><option value="PY">Paraguay</option><option value="YD">People\'s Democratic Republic of Yemen</option><option value="PE">Peru</option><option value="PH">Philippines</option><option value="PN">Pitcairn Islands</option><option value="PL">Poland</option><option value="PT">Portugal</option><option value="PR">Puerto Rico</option><option value="QA">Qatar</option><option value="RO">Romania</option><option value="RU">Russia</option><option value="RW">Rwanda</option><option value="RE">R&eacute;union</option><option value="BL">Saint Barth&eacute;lemy</option><option value="SH">Saint Helena</option><option value="KN">Saint Kitts and Nevis</option><option value="LC">Saint Lucia</option><option value="MF">Saint Martin</option><option value="PM">Saint Pierre and Miquelon</option><option value="VC">Saint Vincent and the Grenadines</option><option value="WS">Samoa</option><option value="SM">San Marino</option><option value="SA">Saudi Arabia</option><option value="SN">Senegal</option><option value="RS">Serbia</option><option value="CS">Serbia and Montenegro</option><option value="SC">Seychelles</option><option value="SL">Sierra Leone</option><option value="SG">Singapore</option><option value="SK">Slovakia</option><option value="SI">Slovenia</option><option value="SB">Solomon Islands</option><option value="ZA">South Africa</option><option value="GS">South Georgia and the South Sandwich Islands</option><option value="KR">South Korea</option><option value="ES">Spain</option><option value="LK">Sri Lanka</option><option value="SR">Suriname</option><option value="SJ">Svalbard and Jan Mayen</option><option value="SZ">Swaziland</option><option value="SE">Sweden</option><option value="CH">Switzerland</option><option value="ST">S&atilde;o Tom&eacute; and Pr&iacute;ncipe</option><option value="TW">Taiwan</option><option value="TJ">Tajikistan</option><option value="TZ">Tanzania</option><option value="TH">Thailand</option><option value="TG">Togo</option><option value="TK">Tokelau</option><option value="TO">Tonga</option><option value="TT">Trinidad and Tobago</option><option value="TA">Tristan da Cunha</option><option value="TN">Tunisia</option><option value="TR">Turkey</option><option value="TM">Turkmenistan</option><option value="TC">Turks and Caicos Islands</option><option value="TV">Tuvalu</option><option value="UM">U.S. Minor Outlying Islands</option><option value="PU">U.S. Miscellaneous Pacific Islands</option><option value="VI">U.S. Virgin Islands</option><option value="UG">Uganda</option><option value="UA">Ukraine</option><option value="AE">United Arab Emirates</option><option value="GB">United Kingdom</option><option value="US" selected="selected">United States</option><option value="UY">Uruguay</option><option value="UZ">Uzbekistan</option><option value="VU">Vanuatu</option><option value="VA">Vatican City</option><option value="VE">Venezuela</option><option value="VN">Vietnam</option><option value="WK">Wake Island</option><option value="WF">Wallis and Futuna</option><option value="EH">Western Sahara</option><option value="YE">Yemen</option><option value="ZM">Zambia</option><option value="AX">&Aring;land Islands</option></select>\n    </div>\n\n    <div style="width:49%;display:inline-block;vertical-align:top;">\n\n      <input id="autoCardNumber" type="text" placeholder="',
o="mm_payment_helper_credit_card_number",l=a.intl,s=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof s===p?s.call(t,o,{hash:{}}):s===h?m.call(t,"intl",o,{hash:{}}):s,d+=_(o)+'">\n      <input id="autoCardCvv" type="text" placeholder="',o="mm_payment_helper_cvv",l=a.intl,s=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof s===p?s.call(t,o,{hash:{}}):s===h?m.call(t,"intl",o,{hash:{}}):s,d+=_(o)+'">\n\n\n      <select id="autoCardMonth"><option value="1">01 - January</option><option value="2">02 - February</option><option value="3">03 - March</option><option value="4">04 - April</option><option value="5">05 - May</option><option value="6">06 - June</option><option value="7">07 - July</option><option value="8">08 - August</option><option value="9">09 - September</option><option value="10">10 - October</option><option value="11">11 - November</option><option value="12">12 - December</option></select>\n      <select id="autoCardYear"><option name="2015" selected>2015</option><option name="2016">2016</option><option name="2017">2017</option><option name="2018">2018</option><option name="2019">2019</option><option name="2020">2020</option><option name="2021">2021</option><option name="2022">2022</option><option name="2023">2023</option><option name="2014">2024</option></select>\n\n      ',l=a.hasRegistered,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasRegistered"),s=a.unless,c=u.program(1,r,i),c.hash={},c.fn=c,c.inverse=u.noop,o=s.call(t,o,c),(o||0===o)&&(d+=o),d+='\n      <button class="btn btn-primary" id="registerAndMask" style="position:relative;bottom:-15;">\n        <div>Protect My Card</div>\n      </button>\n\n    </div>\n\n    <div class="alert-error submit-error" style="display: none"></div>\n    <div class="progress" style="display: none;text-align: center;margin-bottom:0px;">please wait...</div>\n  </div>\n</div>'}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("payment_helper.protect_my_card",e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+="\n      ",d=a.firstFiveCards,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"firstFiveCards"),i=a["if"],u=m.program(2,o,t),u.hash={},u.fn=u,u.inverse=m.program(4,s,t),n=i.call(e,n,u),(n||0===n)&&(r+=n),r+="\n    "}function o(e){var t,n,i="";return i+='\n      <div class="payments-header">\n        ',t="mm_payment_helper_safestWayTitle",d=a.intl,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===h?n.call(e,t,{hash:{}}):n===f?_.call(e,"intl",t,{hash:{}}):n,i+=g(t)+'\n      </div>\n\n      <div class="payments-protect-card-body">\n        ',t="mm_payment_helper_protectYourCardInFew",d=a.intl,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===h?n.call(e,t,{hash:{}}):n===f?_.call(e,"intl",t,{hash:{}}):n,i+=g(t)+'\n      </div>\n      <input type="button" id="protect-my-card-btn" class="btn btn-primary" value="Protect My Card" style="margin: -10px 0px 13px 0px;"/>\n      <div id="inlineFaqLink" class="links help-link" style="display:inline-block;padding-bottom:5px;cursor:pointer;">\n        <img id="help" class="header-icon" src="',t="/pages/images/dnt-ui-header-help.png",d=a.assetUrl,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===h?n.call(e,t,{hash:{}}):n===f?_.call(e,"assetUrl",t,{hash:{}}):n,i+=g(t)+'" style="width:19px;margin-left:8px;">\n      </div>\n      '}function s(e){var t,n,i="";return i+='\n      <a href="#" data-cardid="',d=a.id,t=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof t===h?t=t.call(e,{hash:{}}):t===f&&(t=_.call(e,"id",{hash:{}})),i+=g(t)+'" class="mmKeyOption">\n        <div class="element othergreen" id="protect-my-card-btn">\n          <span class="panelLeft">\n            <img class="iconPos" src="',t="/pages/images/2015panels/card_green.png",d=a.assetUrl,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===h?n.call(e,t,{hash:{}}):n===f?_.call(e,"assetUrl",t,{hash:{}}):n,i+=g(t)+'" style="width:43px;height:21px;"/>\n            ',t="mm_payment_helper_create_new_masked_card",d=a.intl,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===h?n.call(e,t,{hash:{}}):n===f?_.call(e,"intl",t,{hash:{}}):n,i+=g(t)+"\n          </span>\n        </div>\n      </a>\n      "}a=a||e.helpers,n=n||e.partials;var l,c,d,u,p="",m=this,h="function",_=a.helperMissing,f=void 0,g=this.escapeExpression;return p+='<div class="payments-step" id="panelOptions">\n    ',d=a.cardDisabled,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"cardDisabled"),c=a.unless,u=m.program(1,r,i),u.hash={},u.fn=u,u.inverse=m.noop,l=c.call(t,l,u),(l||0===l)&&(p+=l),p+="\n    ",l=t,l=m.invokePartial(n["payment_helper.disposable_cards"],"payment_helper.disposable_cards",l,a,n),(l||0===l)&&(p+=l),p+="\n    ",l=t,l=m.invokePartial(n["payment_helper.company_cards"],"payment_helper.company_cards",l,a,n),(l||0===l)&&(p+=l),p+="\n    ",l=t,l=m.invokePartial(n["payment_helper.real_cards"],"payment_helper.real_cards",l,a,n),(l||0===l)&&(p+=l),p+="\n</div>"}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("payment_helper.real_cards",e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+="\n  ",m=a.realCardDisabled,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"realCardDisabled"),i=a.unless,h=f.program(2,o,t),h.hash={},h.fn=h,h.inverse=f.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="\n"}function o(e,t){var n,i,r="";return r+="\n    ",m=a.realCards,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"realCards"),i=a.each,h=f.program(3,s,t),h.hash={},h.fn=h,h.inverse=f.program(6,c,t),n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="\n    ",m=a.realCards,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"realCards"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"length"),i=a["if"],h=f.program(8,d,t),h.hash={},h.fn=h,h.inverse=f.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="\n  "}function s(e,t){var n,i,r="";return r+='\n      <a href="#" data-cardid="',m=a.id,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof n===g?n=n.call(e,{hash:{}}):n===b&&(n=y.call(e,"id",{hash:{}})),r+=v(n)+'" class="mmKeyOption usedCard">\n        <div class="element" id="disclose">\n          <span class="panelLeft" style="width:80%;overflow:hidden;display: inline-block;height:30px;text-wrap:suppress;word-wrap:break-word;">\n              <img class="iconPos" src="',n="/pages/images/2015panels/card_red_arrow.png",m=a.assetUrl,i=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),n=typeof i===g?i.call(e,n,{hash:{}}):i===b?y.call(e,"assetUrl",n,{hash:{}}):i,r+=v(n)+'" style="width:15px;height:21px;margin-right:0;"/>\n              <img class="iconPos" src="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getTypeImage"),typeof n===g?n=n.call(e,{hash:{}}):n===b&&(n=y.call(e,"this.getTypeImage",{hash:{}})),r+=v(n)+'" style="width:32px;height:32px;margin-left: -4px;"/>\n            ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getLabelOrLastFour"),typeof n===g?n=n.call(e,{hash:{}}):n===b&&(n=y.call(e,"this.getLabelOrLastFour",{hash:{}})),r+=v(n)+"\n          </span>\n          ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"labelChangeRequired"),i=a["if"],h=f.program(4,l,t),h.hash={},h.fn=h,h.inverse=f.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="\n        </div>\n      </a>\n    "}function l(e){var t,n,i="";return i+='\n          <span class="panelRight edit_name" style="width:18%;">\n            <span class="overflowText" style="text-transform: none;">',t="mm_payment_helper_edit_name",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===g?n.call(e,t,{hash:{}}):n===b?y.call(e,"intl",t,{hash:{}}):n,i+=v(t)+"</span>\n          </span>\n          "}function c(e){var t,n,i="";return i+='\n      <a href="#" class="mmKeyOption useMyCard">\n        <div class="element" id="disclose">\n          <span class="panelLeft">\n              <img class="iconPos" src="',t="/pages/images/2015panels/card_red.png",m=a.assetUrl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===g?n.call(e,t,{hash:{}}):n===b?y.call(e,"assetUrl",t,{hash:{}}):n,i+=v(t)+'" style="width:43px;height:21px;"/>\n            ',t="mm_payment_helper_useMyCard",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===g?n.call(e,t,{hash:{}}):n===b?y.call(e,"intl",t,{hash:{}}):n,i+=v(t)+"\n          </span>\n        </div>\n      </a>\n    "}function d(e){var t,n,i="";return i+='\n          <a href="#" class="mmKeyOption useMyCard">\n            <div class="element" id="disclose">\n              <span class="panelLeft">\n                  <img class="iconPos" src="',t="/pages/images/2015panels/card_red.png",m=a.assetUrl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===g?n.call(e,t,{hash:{}}):n===b?y.call(e,"assetUrl",t,{hash:{}}):n,i+=v(t)+'" style="width:43px;height:21px;"/>\n                ',t="mm_payment_helper_addOrEdit",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===g?n.call(e,t,{hash:{}}):n===b?y.call(e,"intl",t,{hash:{}}):n,i+=v(t)+"\n              </span>\n            </div>\n          </a>\n    "}a=a||e.helpers,n=n||e.partials;var u,p,m,h,_="",f=this,g="function",y=a.helperMissing,b=void 0,v=this.escapeExpression;return _+="\n<!-- If Real Cards to fill-->\n",m=a.canShowRealCards,u=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"canShowRealCards"),p=a["if"],h=f.program(1,r,i),h.hash={},h.fn=h,h.inverse=f.noop,u=p.call(t,u,h),(u||0===u)&&(_+=u),_+="\n\n",u=t,u=f.invokePartial(n["common.auto_fill_with"],"common.auto_fill_with",u,a,n),(u||0===u)&&(_+=u),_}))}),ABINE_DNTME.define("abine/views/paymentHelperPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/views/loading_display","abine/contentMessenger","abine/intl","abine/responseCodes","abine/config","abine/proxies"],function(e,t,a,n,i,r,o,s,l,c,d,u){function p(e){for(var t=0,a=!1,n=e.length-1;n>=0;n--,a=!a){var i=parseInt(e.charAt(n));a&&(i*=2,i>9&&(i-=9)),t+=i}return t%10==0}function m(e,t){t=t||"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!-$#%^@";for(var a="",n=0;n<e;n++)a+=t.charAt(Math.floor(Math.random()*t.length));return a}var h=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i,_=/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|6(?:011|5[0-9]{2})[0-9]{12}|(?:2131|1800|35\d{3})\d{11})$/i,f=[{regex:/^4[0-9]{12}(?:[0-9]{3})?$/,spacing:[4,4,4]},{regex:/^5[1-5][0-9]{14}$/,spacing:[4,4,4]},{regex:/^3[47][0-9]{13}$/,spacing:[4,6]},{regex:/^3(?:0[0-5]|[68][0-9])[0-9]{11}$/,spacing:[4,6]},{regex:/^6(?:011|5[0-9]{2})[0-9]{12}$/,spacing:[4,4,4]},{regex:/^(?:2131|1800|35\d{3})\d{11}$/,spacing:[4,4,4]}],g={"/financial/creditcard/number/part1":"part1","/financial/creditcard/number/part2":"part2","/financial/creditcard/number/part3":"part3","/financial/creditcard/number/part4":"part4","/financial/creditcard/number":"number","/financial/creditcard/type":"type","/financial/creditcard/issuedto":"issuedto","/financial/creditcard/expirymonth":"expirymonth","/financial/creditcard/expiryyear":"expiryyear","/financial/creditcard/verification":"cvv","/contact/postaladdress/billing":"address1","/contact/postaladdressAdditional/billing":"address2","/contact/state/billing":"state","/contact/state/code/billing":"state","/contact/city/billing":"city","/contact/country/billing":"country","/contact/postalcode/billing":"zip","/contact/postaladdress":"address1","/contact/postaladdressAdditional":"address2","/contact/state":"state","/contact/state/code":"state","/contact/city":"city","/contact/country":"country","/contact/postalcode":"zip","/nameperson/last":"lname","/nameperson/first":"fname","/nameperson/full":"name"},y=i.extend({templateName:"payment_helper_paymentsr3_card_money",events:{"click .whatIsThisLink":"openMaskedCardsIn30","mousedown a.disposableCard":"verifyCardRequest","click #registerAndMask":"registerAndMask","mousedown a.usedCard":"fillWithUsedCard","click a.useMyCard":"openAddCard","click a.getStarted":"getStarted","click a.setupCard":"getStartedWithPayments","click .panelSection":"performActions","click #createCard":"createCard","click #cancelCardCreate":"cancelCardCreate","click #confirmCardCreate":"confirmCardCreate","click #useMaskedCard":"fillWithDisposableCard","click #linkToErrorReport":"makeErrorReport","click .maskedCardErrorSupport":"makeErrorReport","click #registerHelp span":"openCardFAQ","change #autoCountry":"countryChanged","mousedown .subscription-option":"subscriptionClicked","click .chatNow":"chatNow","click .close-link":"logClose","click .edit_name":"openEditCard","click .cash-for-cards-webapp-faq":"openCashForCardsFaq","click #createCompanyCard":"createCompanyCard","click #protect-my-card-btn":"verifyCardRequest","click #protect-my-card-bitcoin-btn":"verifyCardRequestBtc","click #inlineFaqLink":"openInlineFAQ","click #faqCardLink":"openCardFAQWebapp","click .faqGotIt":"faqGotIt","click #viewCardsDashboard":"openCardsDashboard","click #masterPassAuth":"masterPassAuth","click #retryBiometricAuth":"retryBiometricAuth","submit form.unlock":"verifyMasterPass","click #upgradeToPremiumCheckboxDiv":"upgradeToPremiumCheckboxClicked"},billingInfoViewExtraWidth:215,createCompanyCard:function(e){this.model.companyRequest=!0,this.verifyCardRequest(e)},upgradeToPremiumCheckboxClicked:function(){this.$("#upgradeToPremium").is(":checked")?this.model.upgradeToPremium=!0:this.model.upgradeToPremium=!1,this.ignoreBlur(!0)},openInlineFAQ:function(){this.ignoreBlur(!0);var e={extraWidth:this.$("#register").is(":visible")?this.billingInfoViewExtraWidth*-1:null,extraHeight:this.$("#register").is(":visible")?40:null};this.$(".normal-flow").hide(),this.$("#inlineFaq").show(),this.autoResize(e)},openCardFAQWebapp:function(){u.webapp.openPage("#help/faq/faq-maskedCards"),this.closePanel()},openAddCard:function(){this.updatePanelActivity("impression",this.clickedAutofillRealCardWhenNoCardExistsPanelId,this.fieldId,!1),this.model.realCards&&this.model.realCards.length>0?u.webapp.openPage("/#real_cards"):u.webapp.openPage("/#real_cards/add"),this.closePanel()},openEditCard:function(e){for(var a,n=e.currentTarget;!a&&n;)a=t(n).data("cardid"),n=n.parentNode;return a&&(u.webapp.openPage("/#real_cards/edit/"+a),this.closePanel()),e.preventDefault(),!1},faqGotIt:function(){this.ignoreBlur(!1),this.$("#inlineFaq").hide(),this.$(".normal-flow").show();var e={extraWidth:this.$("#register").is(":visible")?this.billingInfoViewExtraWidth:null};this.autoResize(e),this.$("#cardAmount").focus()},openCardsDashboard:function(e){e.preventDefault(),u.webapp.openPage("/#/client/cards")},logClose:function(){this.updatePanelActivity("closed",this.panelId,this.fieldId,!0)},chatNow:function(e){e.preventDefault(),u.securityManager.openWindow("https://a3.websitealive.com/623/rRouter.asp?infocapture_ids=259,260&infocapture_values=|&groupid=623&wsa_custom0=card-error&wsa_custom1=&websiteid=0&departmentid=3140&dl=blur",400,400)},openMaskedCardsIn30:function(e){return u.webapp.openFAQ("card"),this.closePanel(),e.preventDefault(),!1},openCardFAQ:function(e){return u.webapp.openFAQ("card","freefor30"),e.preventDefault(),!1},chatNow:function(e){e.preventDefault(),u.securityManager.openWindow("https://a3.websitealive.com/623/rRouter.asp?infocapture_ids=259,260&infocapture_values=|&groupid=623&wsa_custom0=card-error&wsa_custom1=&websiteid=0&departmentid=3140&dl=blur",400,400)},getStartedWithPayments:function(e){e&&e.preventDefault(),this.updatePanelActivity("masked",this.panelId,this.fieldId,!0),u.webapp.openCards(),this.closePanel(e)},subscriptionClicked:function(){this.$("#cardAmount").unbind("blur.dntme")},openCashForCardsFaq:function(e){return u.webapp.openCashForCardsFaq(),e.preventDefault(),!1},countryChanged:function(e){"US"==t(e.target).val()?(this.$("#autoStateUS").show(),this.$("#autoState").hide()):(this.$("#autoState").show(),this.$("#autoStateUS").hide())},cardNumberFocus:function(e){var a=t(e.target);a.val(a.val().replace(/[^0-9]+/g,""))},cardNumberBlur:function(a){var n=t(a.target),i=n.val().replace(/[^0-9]+/g,"");e.each(f,function(t){if(i.match(t.regex)){var a=0,n="";e.each(t.spacing,function(e){n+=i.substr(a,e)+" ",a+=e}),n+=i.substr(a),i=n}}),n.val(i)},makeErrorReport:function(e){return e&&e.preventDefault(),u.webapp.openHelp(),!1},refreshLastFourShieldedCardNumber:function(){u.licenseModule.refreshLastFourCardDigits({},e.bind(function(e,t){!e&&t&&t.last_four&&(this.model.primaryCard.set("last_four",t.last_four),this.$("#last4").text(t.last_four))},this))},convertCentsToString:function(e){return"$"+(e/100).toFixed(2)},processError:function(e){this.$("#loadingMaskedCard").hide();var a=this;"recurly disabled"==e.errorCode?(this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_recurly_disabled")),this.$("#maskedCardErrorMsg #recurly-disabled").click(function(e){return u.webapp.openPage("#premium/setup/stripe"),a.closePanel(e),!1})):e.errorCode==c.NO_BILLING_ACCOUNT_FOR_USER_ERROR_CODE||e.errorCode==c.BILLING_FAILED_ERROR_CODE?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_billing")):e.errorCode==c.BILLING_DECLINED_ERROR_CODE?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_declined")):e.errorCode==c.BILLING_COMPANY_FAILED_ERROR_CODE?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_company_declined")):e.errorCode==c.NO_CARDS_AVAILABLE_ERROR_CODE||e.errorCode==c.PROVIDER_READ_FAILED_ERROR_CODE||e.errorCode==c.PROVIDER_CARD_CREATION_FAILED_ERROR_CODE?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_provider")):e.errorCode==c.REQUESTED_AMOUNT_OVER_LIMIT_ERROR_CODE?"verified"==e.responseJSON.data.category?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_validation_verified",[this.convertCentsToString(e.responseJSON.data.min),this.convertCentsToString(e.responseJSON.data.max)])):this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_validation_max",[this.convertCentsToString(e.responseJSON.data.max),d.protocol+d.webAppHost+"/#/client/cards/verify"])):e.errorCode==c.REQUESTED_AMOUNT_BELOW_MINIMUM_ERROR_CODE?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_validation_min",[this.convertCentsToString(e.responseJSON.data.min)])):e.errorCode==c.REQUEST_ALREADY_EXISTS_ERROR_CODE||e.errorCode==c.NO_CARD_FOUND_ERROR_CODE||e.errorCode==c.NO_BILLING_TRANSACTION_FOUND_ERROR_CODE?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_abine")):e.errorCode==c.REFUND_FAILED_ERROR_CODE?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_refund")):e.errorCode==c.GLOBAL_SOFT_LIMIT_REACHED?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_global_limit")):e.errorCode==c.FRAUD_SOFT_LIMIT_REACHED?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_soft_limit",[d.protocol+d.webAppHost+"/#/client/cards/verify"])):e.errorCode==c.FRAUD_HARD_LIMIT_REACHED?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_hard_limit")):e.errorCode==c.FRAUD_VERIFIED_SOFT_LIMIT_REACHED?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_verified_soft_limit")):e.errorCode==c.FRAUD_HIGH_RISK_COUNTRY_ERROR_CODE?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_high_risk_country")):e.errorCode==c.GREY_LISTED_ERROR_CODE?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_grey_listed",[d.protocol+d.webAppHost+"/#/client/cards/verify"])):e.errorCode==c.BILLING_IN_NON_US_ERROR_CODE?t(this.el).find("#maskedCardErrorMsg").html(l.getText("mm_payment_helper_non_us1",[ABINE_DNTME.config.protocol+ABINE_DNTME.config.webAppHost+"/#/phones"])):e.errorCode==c.DUPLICATE_CARD_ERROR_CODE?t(this.el).find("#maskedCardErrorMsg").html(l.getText("mm_payment_error_duplicate_card_ban")):e.errorCode==c.BANNED_DOMAIN_ERROR_CODE?t(this.el).find("#maskedCardErrorMsg").html(l.getText("mm_payment_error_banned_domain",[this.options.domain])):e.errorCode==c.REJECTED_DOMAIN_ERROR_CODE?t(this.el).find("#maskedCardErrorMsg").html(l.getText("mm_payment_error_rejected_domain",[this.options.domain])):e.errorCode==c.SERVICE_UNAVAILABLE_ERROR?t(this.el).find("#maskedCardErrorMsg").html(l.getText("mm_dntme_service_unavailable")):e.errorCode==c.SCHEDULED_DOWNTIME?t(this.el).find("#maskedCardErrorMsg").html(l.getText("mm_dntme_server_maintenance")):e.errorCode==c.BIOMETRIC_AUTH_FAILED?t(this.el).find("#maskedCardErrorMsg").html(l.getText("mm_dntme_server_biometric_auth_failed")):this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error")),this.$("#maskedCardErrorMsg a[target=_blank]").click(function(e){return u.webapp.openPage(e.target.href.substr(e.target.href.indexOf("#"))),e.preventDefault(),!1}),this.$("#maskedCardView, #maskedCardError, #maskedCardErrorMsg").show()},masterPassAuth:function(e){e&&e.preventDefault(),r.clearTimeout(this.noResponseTimer),this.$("#biometricAuth").hide(),this.$("#masterPassStep").show(),this.autoResize()},verifyMasterPass:function(e){e&&e.preventDefault();var t=this;this.$("#masterPassErr").hide();var a=this.$("#password").val();if(0==a.length)return this.$("#masterPassErr").text(l.getText("mm_payment_helper_master_pass_invalid")).show(),void this.autoResize();var i="password:auth:response:"+Math.random(),r=this.options.contentManager.messenger;return r.on(i,function(e){t.$("#newMaskedCard, #confirmAmountView, #register, #biometricAuth").hide(),t.$("#masterPassStep").show(),e.success?(t.biometricToken=e.token,t.$("#masterPassStep").hide(),t._maskedCardAuth?t._confirmCardCreate():t._fillWithUsedCard(),r.off(i)):t.$("#masterPassErr").text(l.getText("mm_payment_helper_master_pass_invalid")).show(),r.off(i),t.autoResize()}),u.licenseModule.getGenericBiometricKey(null,function(e){e.success?(t.biometricKey=e.key,r.send("password:card:auth",{responseId:i,key:t.biometricKey,password:a,domain:t.options.domain,amount:n.DisposableCard.convertStringToCents(this.amount)})):t.$("#masterPassErr").text(l.getText("mm_payment_helper_master_pass_retry")).show()}),this.autoResize(),!1},confirmCardCreate:function(e,t){this.biometricKey?(t=t||{},this.$("#newMaskedCard, #confirmAmountView, #register").hide(),this._maskedCardAuth=!0,this.sendBiometricAuthRequest(e,t),this.autoResize()):this._confirmCardCreate(e,t)},retryBiometricAuth:function(e,t){var a=this;r.clearTimeout(this.noResponseTimer),u.licenseModule.getGenericBiometricKey(null,function(n){n.success&&(a.biometricKey=n.key,a.sendBiometricAuthRequest(e,t))})},sendBiometricAuthRequest:function(e,t){this.ignoreExplicitClose=!0;var a=this.biometricKey.split(":");if(a.length>2)return this.biometricKey=a[0]+":"+a[1],this.biometricToken=a[2],this.$("#biometricAuth").hide(),void(this._maskedCardAuth?this._confirmCardCreate(e,t):this._fillWithUsedCard());this.$("#biometricAuth").show();var i=this.options.contentManager.messenger,o=this;o.$("#biometricInfo, #biometricAuth").show(),o.$("#biometricInfo").text(l.getText("mm_payment_helper_request_biometric_auth")),o.$("#biometricError").hide(),this.biometricResponseId&&i.off(this.biometricResponseId);var s="biometric:auth:response:"+Math.random();r.clearTimeout(this.noResponseTimer),this.noResponseTimer=r.setTimeout(function(){o.$("#biometricInfo").text(l.getText("mm_payment_helper_biometric_no_response")),o.autoResize()},2e4),i.on(s,function(a){if(r.clearTimeout(o.noResponseTimer),!a.ack||!o.$("#masterPassStep").is(":visible")){if(o.$("#newMaskedCard, #confirmAmountView, #register, #masterPassStep").hide(),o.$("#biometricAuth").show(),a.ack)return o.$("#biometricInfo").show(),o.$("#biometricError").hide(),void o.$("#biometricInfo").text(l.getText("mm_payment_helper_request_biometric_auth_ack"));a.success?(o.biometricToken=a.token,o.$("#biometricAuth").hide(),o._maskedCardAuth?o._confirmCardCreate(e,t):o._fillWithUsedCard(),i.off(s),o.biometricResponseId=null):(o.$("#biometricInfo").hide(),o.$("#biometricError").text(a.error).show()),o.autoResize()}});var c={responseId:s,key:this.biometricKey,domain:this.options.domain};if(this._maskedCardAuth)c.amount=n.DisposableCard.convertStringToCents(this.amount);else{var d=this.getMatchingCard(this._selectedCardId);c.number=d.get("number").substr(-4)}i.send("biometric:card:auth",c),this.biometricResponseId=s,this.autoResize()},_confirmCardCreate:function(e,t){if(t=t||{},!this.cardBeingCreated){if(!this.model.entitledToPhone&&this.model.upgradeToPremium&&!t.upgraded&&!this.model.companyRequest)return void this.setupSubscription("annual");this.cardBeingCreated=!0,this.biometricKey&&this.biometricToken&&u.memoryStore.set("biometricKeyToken",this.biometricKey+":"+this.biometricToken),this.model.maskedCard=new n.DisposableCard({domain:this.options.domain,biometricKey:this.biometricKey,biometricToken:this.biometricToken,amount:n.DisposableCard.convertStringToCents(this.amount),shielded_card_id:this.model.companyRequest?null:this.model.primaryCard.id,company:this.model.companyRequest,payment_method:this.model.useBitcoin?"bitcoin":"creditcard"}),this.model.maskedCard.set("source","dnt-panel"),this.model.maskedCard.bind("sync:success",function(){this.updatePanelActivity("impression",this.createCardSuccessfullViewPanelId,this.fieldId,!1),this.trigger("render"),this.cardBeingCreated=!1,this.$("#loadingMaskedCard").hide(),this.$("#cardNumber").text(this.model.maskedCard.getPrettyNumber()),this.$("#expiration").text(this.model.maskedCard.getExpiry()),this.$("#cvc").text(this.model.maskedCard.getCVC()),this.$("#domain").text(this.model.maskedCard.getDomain()),this.$("#originalValue").text(this.model.maskedCard.getOriginalValue()),this.$("#maskedCardView").show(),this.$("#maskedCard").show(),this.trigger("render")},this),this.model.maskedCard.bind("sync:error",function(e){this.updatePanelActivity("impression",this.createCardFailedViewPanelId,this.fieldId,!1),this.processError(e),this.trigger("render")},this),this.$("#newMaskedCard, #confirmAmountView, #register").hide(),this.loadingDisplay=new o({customMessages:["mm_loading_display_Crunching","mm_loading_display_Clouds","mm_loading_display_Tubes","mm_loading_display_HangOn","mm_loading_display_Whoops_Panel"],interval:6e3,el:this.$("#loadingMaskedCard"),pageName:"card_create_panel"}),this.$("#loadingMaskedCard").show(),this.trigger("render"),this.ignoreExplicitClose=!0,this.model.maskedCard.save()}},cancelCardCreate:function(){this.$("#confirmAmountView").hide(),this.$("#newMaskedCard").show(),this.ignoreBlur(!1),this.$("#cardAmount").focus(),this.trigger("render")},createCard:function(t){t&&t.preventDefault();var a,i=/[^\d\.]/g;a=this.$("#cardAmount").val(),a=a.replace(i,""),a=parseFloat(parseFloat(a).toFixed(2)),isNaN(a)?(this.$("#amountError").html(l.getText("mm_payment_error_validation_input")),this.trigger("render")):(this.$("#amountError").html(""),this.amount=a,this.model.primaryCard||this.model.companyRequest?u.paymentsModule.retrieveCardFee({requested_amount:n.DisposableCard.convertStringToCents(a),card_use:this.model.companyRequest?"company":"personal"},e.bind(function(e,t){this.$("#processingRequestView").hide(),e?(this.processError(e),this.trigger("render")):(t&&t.fee&&t.fee.total_fee?(this.model.total_fee=t.fee.total_fee,this.model.billing_account_type=t.billing_account_type):this.model.total_fee=0,this.model.primaryCard||this.model.companyRequest?this.model.entitledToPhone||this.model.upgradeToPremium||this.model.hasFreeCards||this.model.isFreeTrial?this.showConfirmAmountView():this.model.hasFreeCards||(this.$("#amountError").html(l.getText("mm_payment_helper_outOfCardsCheck")),this.trigger("render")):this.showBillingInfoView())},this)):this.showBillingInfoView())},showConfirmAmountView:function(){this.updatePanelActivity("impression",this.showConfirmAmountViewPanelId,this.fieldId,!1);var e={extraWidth:this.$("#register").is(":visible")?this.billingInfoViewExtraWidth*-1:null,extraHeight:this.$("#register").is(":visible")?40:null};this.$(".payments-step").hide(),this.model.entitledToPhone||!this.model.upgradeToPremium||this.model.companyRequest?this.model.companyRequest?this.$("#confirmRegularMsg").html(l.getText("mm_payment_helper_company_willBeCharged")):this.model.useBitcoin?this.$("#confirmRegularMsg").html(l.getText("mm_payment_helper_paymentsr2_willBeChargedBitcoin")):"credit_card"==this.model.billing_account_type?this.$("#confirmRegularMsg").html(l.getText("mm_payment_helper_paymentsr2_willBeCharged_1",this.model.companyRequest?"XXXX":this.model.primaryCard.getLastFour())+" <span class='confirmAmount'></span> "+l.getText("mm_payment_helper_paymentsr2_willBeCharged_2")):this.$("#confirmRegularMsg").html(l.getText("mm_payment_helper_paymentsr2_willBeChargedAch",this.model.companyRequest?"XXXX":this.model.primaryCard.getLastFour())+" <span class='confirmAmount'></span> "+l.getText("mm_payment_helper_paymentsr2_willBeCharged_2")):this.$("#confirmRegularMsg").html(l.getText("mm_payment_helper_paymentsr2_willBeChargedUpgradePremium",this.model.companyRequest?"XXXX":this.model.primaryCard.getLastFour())),this.$(".confirmAmount").text(this.convertCentsToString(Number(n.DisposableCard.convertStringToCents(this.amount))+Number(this.model.total_fee))),this.$("#confirmAmountView").show(),this.ignoreBlur(!0),this.ignoreExplicitClose=!0,this.focusField(),this.autoResize(e)},verifyCardRequestBtc:function(e){this.model.useBitcoin=!0,this.verifyCardRequest(e)},verifyCardRequest:function(t){if(!this.model.useBitcoin&&!this.model.companyRequest&&!this.model.primaryCard&&"stripe"==this.model.billing_manager)return void u.webapp.openPage("#premium");this.ignoreBlur(!0);var a=new Date,n=a.getMonth()+1,i=a.getFullYear();this.$("#autoCardMonth").val(n),this.$("#autoCardYear").val(i),t&&t.preventDefault(),this.$("#processingRequestView").show(),this.$("#panelOptions").hide(),this.ignoreExplicitClose=!0;var r={domain:this.options.domain};this.model.companyRequest&&(r.company=!0),u.paymentsModule.verifyCardRequest(r,e.bind(function(t,a){t?(this.$("#processingRequestView").hide(),this.processError(t),this.trigger("render")):(a&&a.key&&(this.biometricKey=a.key),this.model.hasRegistered&&!this.model.entitledToPhone?u.paymentsModule.retrieveCardFee({requested_amount:0},e.bind(function(e,t){this.$("#processingRequestView").hide(),e?(this.processError(e),this.trigger("render")):(t.card_credit&&t.card_credit.free_cards&&t.card_credit.free_cards>0&&(this.model.hasFreeCards=!0),this.showNewMaskedCardView())},this)):(this.$("#processingRequestView").hide(),this.showNewMaskedCardView()))},this)),this.autoResize()},showNewMaskedCardView:function(a){a&&a.preventDefault(),this.model.companyRequest&&t("#upgradeToPremiumCheckboxDiv").hide(),this.updatePanelActivity("masked",this.panelId,this.fieldId,!0),this.$("#panelOptions").hide(),this.$("#newMaskedCard").show(),this.model.hasRegistered&&(this.model.hasFreeCards||(this.$("#upgradeToPremium").prop("checked",!0),this.model.upgradeToPremium=!0)),this.ignoreBlur(!0),this.ignoreExplicitClose=!0,this.updatePanelActivity("impression",this.showCollectMaskedCardAmountViewPanelId,this.fieldId,!1),this.trigger("render"),r.setTimeout(e.bind(function(){this.$("#cardAmount").focus(),this.bindPanelTextInput(this.$("#cardAmount")),r.setTimeout(e.bind(function(){this.ignoreBlur(!1)},this),50)},this),500)},cleanupPanel:function(){},canShowAutoPremiumPanel:function(){return this.fieldType.indexOf("/financial/creditcard/number")!=-1},refreshUserInput:function(){var a=this.model.userInput;if(e.each(this.options.fields,e.bind(function(e){var n=e.dataType;if(n){var i=t(e.element).val();if(i&&""!=i)for(var r=0;r<2;r++)n in g&&(!a[g[n]]||""==a[g[n]]||0==r)&&(a[g[n]]=i),n=n.substr(0,n.lastIndexOf("/"))}},this)),a.part1&&""!=a.part1&&(a.number=a.part1+a.part2+a.part3+a.part4),a.number&&(a.number=a.number.replace(/[^0-9]+/g,""),a.last4=a.number.substr(a.number.length-4)),a.name&&""!=a.name||(a.name=a.issuedto),a.name&&""!=a.name||(a.name=a.fname),!a.lname||""==a.lname){var n=a.name;if(n&&""!=n){var i=a.name.split(/\s+/);i.length>0&&(a.fname=i[0],a.lname=i[1])}}a.fname&&a.lname&&(a.fname=a.fname.replace(a.lname,"").replace(/^[\s]+]|[\s]+$/g,"")),a.country&&a.country.match(/USA|United[\s]*States/i)&&(a.country="US"),a.expirymonth&&(a.expirymonth=parseInt(a.expirymonth.replace(/[^0-9]+/g,"")))},afterInitialize:function(){this.options.entitledToPhone&&(this.templateName="payment_helper_paymentsr2_panel"),this.strategyId=this.options.strategyId,this.fieldId=this.options.fieldId,this.fieldType=this.options.fieldType,this.numMenuOptions=2,this.bindBaseEvents(),this.applyFadingStyle(),this.fadeIn(),this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.on("remove",e.bind(function(){this.biometricResponseId&&this.messenger.off(this.biometricResponseId);
},this)),this.model={panelType:"card",primaryCard:!1,authToken:this.options.authToken,hasRegistered:this.options.hasRegistered,isFreeTrial:this.options.entitledToPayments&&!this.options.entitledToPhone,entitledToPayments:this.options.entitledToPayments,cardNotSetup:this.contentManager.preferences.getPref("cardNotSetup"),hasEnabledPayments:this.options.hasEnabledPayments,hasAuthorizedCoinbase:this.options.hasAuthorizedCoinbase,entitledToPhone:this.options.entitledToPhone,canShowRealCards:this.contentManager.preferences.getSplitTest("wallet01")!=c.SPLIT_WALLET_OFF,cardDisabled:this.options.cardDisabled,realCardDisabled:this.options.realCardDisabled,mapper:!!this.contentManager.preferences.getPref("mapping:mapper"),showMapper:this.contentManager.preferences.isMapper(),show_settings:!this.contentManager.preferences.getPref("card-settings-seen"),hasCompanyCards:this.contentManager.preferences.getPref("hasCompanyCards"),firstFiveCards:parseInt(this.contentManager.preferences.getPref("countCardNotifications")||0)<5};var t=this;u.securityManager.getBillingManager(function(e){t.model.billing_manager=e});var a=this.contentManager.preferences.getPref("hasEnabledPayments");this.model.shieldedCard=new n.ShieldedCardCollection,this.panelId=8000006,this.maskedCardFirstStepPanelId=8000026,this.showCollectMaskedCardAmountViewPanelId=8000036,this.showConfirmAmountViewPanelId=8000046,this.createCardSuccessfullViewPanelId=8000056,this.createCardFailedViewPanelId=8000066,this.usedMaskedCardPanelId=8000076,this.usedAutofillMaskedCardViewPanelId=8000086,this.usedAutofillRealCardViewPanelId=8000096,this.showCollectBillingInfoViewPanelId=7000016,this.addingBillingInfoSuccessfullViewPanelId=7000026,this.addingBillingInfoFailedViewPanelId=7000036,this.clickedAutofillRealCardWhenNoCardExistsPanelId=7000046,this.updatePanelActivity("impression",this.maskedCardFirstStepPanelId,this.fieldId,!1),this.model.realCards=new n.RealCardCollection,this.model.realCards.fetchAll({success:e.bind(function(){this.model.hasRegistered?this.model.shieldedCard.fetchAll({success:e.bind(function(){this.model.shieldedCard.length>0&&(this.model.primaryCard=this.model.shieldedCard.at(0)),this.model.disposableCards=new n.DisposableCardCollection,this.model.disposableCards.fetchAllByDomain(this.options.domain,e.bind(function(){if(u.memoryStore.get("cardgrowl"+this.options.strategyId,e.bind(function(e){this.showCardGrowl(e)},this)),this.model.primaryCard){if(this.refreshLastFourShieldedCardNumber(),this.updatePanelActivity("impression",this.panelId,this.fieldId,!0),!a)return void this.closePanel();this.bind("enter0",this.verifyCardRequest,this),e.each(this.model.disposableCards.models,function(e,t){this.bind("enter"+(t+1),function(t){this.fillWithUsedCard(t,e.get("id"))},this)},this),this.render(),this.checkCallFromNotification()}else this.options.dynamicPanel?(this.model.dynamicPanel=this.options.dynamicPanel,this.setupDynamicPanel(),this.model.panelSections=this.panelSections,this.panelId=this.model.dynamicPanel.id,this.updatePanelActivity("impression",this.panelId,this.fieldId,!0),this.render()):(this.updatePanelActivity("impression",this.panelId,this.fieldId,!0),this.render(),this.checkCallFromNotification())},this))},this)}):(this.updatePanelActivity("impression",this.panelId,this.fieldId,!0),this.render(),this.checkCallFromNotification())},this)}),this.options.fromContextMenu&&(this.ignoreBlur(!0),r.setTimeout(e.bind(function(){this.verifyCardRequest()},this),100)),this.contentManager.closeToolbarPanel()},checkCallFromNotification:function(){this.options.params?(this.panelReason="growl","new_card"==this.options.params.step?this.verifyCardRequest():"fill_card"==this.options.params.step&&this.fillWithUsedCard(null,this.options.params.id)):(this.panelReason="panel",u.licenseModule.logCheckout({method:this.panelReason,merchant:this.contentManager.domain,shown:1,amount:this.options.amount}))},beforeRemove:function(){this.options.params&&this.contentManager.messenger.sendToCS(this.options.params.frameId,"panel:closed")},showCardGrowl:function(e){var t=this.getMatchingCard(e);if(t){var a="realCard"==t.storageEntity,n=t.toJSON();t.get("address")&&(n.address=t.get("address")),this.options.contentManager.showNotification({msg:"",targetUrl:ABINE_DNTME.config.protocol+ABINE_DNTME.config.webAppHost+"/#/cards",targetId:"",model:{maskedCard:n},height:260,neverFade:!0,type:a?"real_card":"card"})}},showBillingInfoView:function(){this.updatePanelActivity("impression",this.showCollectBillingInfoViewPanelId,this.fieldId,!1),this.$(".payments-step").hide(),this.$("#register").show(),this.ignoreBlur(!0),this.options.entitledToPhone?this.trigger("render"):this.trigger("render",{extraWidth:this.billingInfoViewExtraWidth})},registerAndMask:function(a){a&&a.preventDefault();var n=!1,i=this.$("#register input,#register select");e.each(i,function(e){var e=t(e);e.is(":visible")&&""==e.val()&&!e.data("optional")?(e.addClass("error"),n||e.focus(),n=!0):e.removeClass("error")});var r=this.$("#autoCardNumber").val().replace(/[^0-9]+/g,"");if(!r.match(_)||!p(r)||"552942"==r.substring(0,6))return this.$("#autoCardNumber").addClass("error").focus(),this.$(".alert-error").text(l.getText("mm_payment_helper_valid_card_number")).show(),void this.autoResize();if("US"!=this.$("#autoCountry").val())return this.$("#autoCountry").addClass("error").focus(),this.$(".alert-error").text(l.getText("mm_payment_helper_non_us3")).show(),void this.autoResize();if(n)return this.$(".alert-error").text(l.getText("mm_payment_helper_fill_all_required")).show(),void this.autoResize();if(this.model.hasRegistered)this.setupSubscription();else{if(!this.$("#autoEmail").val().match(h))return this.$(".alert-error").text(l.getText("mm_dntme_invalid_email")).show(),void this.autoResize();this.setupUser()}},setupUser:function(){var t=this.$("#autoEmail").val(),a=m(6),n={email:t,password:a,password_hint:l.getText("mm_pwhint_default"),generated_password:!0,register_type:"dnt_card_panel"};this.showProgress(),u.licenseModule.register(n,e.bind(function(t,a){this.processRegistration(t,a,n,e.bind(function(e){e||this.setupSubscription()},this))},this)),this.autoResize()},setupSubscription:function(t){t=t||"two_dollars",this.$("#autoEmail").hide();var a=this.$("#autoState").val();"US"==this.$("#autoCountry").val()&&(a=this.$("#autoStateUS").val());var n=this.$("#autoCardNumber").val().replace(/[^0-9]+/g,"");if("552942"==n.substring(0,6))return this.$(".alert-error").text(l.getText("mm_payment_helper_valid_card_number")).show(),void this.autoResize();this.$(".alert-error").hide(),this.showProgress();var i,r=!!this.model.primaryCard;i=r?{first_name:this.model.primaryCard.get("first_name"),last_name:this.model.primaryCard.get("last_name")}:{first_name:this.$("#autoFname").val(),last_name:this.$("#autoLname").val(),address1:this.$("#autoAddress").val(),state:a,city:this.$("#autoCity").val(),zip:this.$("#autoZip").val(),country:this.$("#autoCountry").val(),number:n,year:this.$("#autoCardYear").val(),month:this.$("#autoCardMonth").val(),verification_value:this.$("#autoCardCvv").val()},u.licenseModule.subscribe(i,t,"dntme_payment_helper",e.bind(function(a,n){this.processSubscription(a,n,i,e.bind(function(a){this.hideProgress(),a||(this.updatePanelActivity("disclosed",this.panelId,this.fieldId,!0),this.model.shieldedCard.fetchAll({success:e.bind(function(){this.model.shieldedCard.length>0&&(this.model.primaryCard=this.model.shieldedCard.at(0)),"two_dollars"==t?"total_fee"in this.model?this.showConfirmAmountView():this.createCard():this.confirmCardCreate(null,{upgraded:!0})},this)}))},this))},this))},showProgress:function(){this.$(".progress").show(),this.$("#register input, #register select, #register button, #confirmAmountView input").attr("disabled","disabled"),this.autoResize()},hideProgress:function(){this.$(".progress").hide(),this.$("#register input, #register select, #register button, #confirmAmountView input").removeAttr("disabled"),this.autoResize()},processRegistration:function(t,a,n,i){if(t){var r=l.getText("mm_payment_helper_register_error"),o=t.responseJSON&&t.responseJSON.data?t.responseJSON.data.errors:null;"invalid email address"==t.responseJSON.error_code?r=l.getText("mm_payment_helper_invalid_email_server_error"):o&&o.email&&("has already been taken"==o.email[0]?r=l.getText("mm_payment_helper_duplicate_email",[n.email]):"was used for MaskMe Heavy"==o.email[0]&&(r=l.getText("mm_payment_helper_version_not_allowed"))),this.$(".alert-error").html(r).show(),this.$(".alert-error #loginButton").click(e.bind(this.openLoginPage,this)),this.$(".alert-error #dnt2upgrade").click(e.bind(this.openDnt2UpgradePage,this)),this.autoResize(),i(r)}else this.contentManager.preferences.fetchAll(),this.model.hasRegistered=!0,i()},processSubscription:function(e,t,a,n){if(e){this.updatePanelActivity("impression",this.addingBillingInfoFailedViewPanelId,this.fieldId,!1);var i=t.errors.base;this.$(".alert-error").text(i[0]).show(),this.autoResize(),n(e)}else this.updatePanelActivity("impression",this.addingBillingInfoSuccessfullViewPanelId,this.fieldId,!1),this.contentManager.preferences.fetchAll(),n()},fillWithDisposableCard:function(e){e&&e.preventDefault(),this.updatePanelActivity("impression",this.usedMaskedCardPanelId,this.fieldId,!1);var t=this.model.maskedCard.toJSON();this.fillFields("payment",t,"payment"),this.options.contentManager.showNotification({msg:"<h4 style='display:inline;'>Masked Card</h4><div style='text-align:center;'><div>"+this.model.maskedCard.get("type")+"</div><div>"+this.model.maskedCard.get("number")+"</div><div>"+this.model.maskedCard.getExpiry()+"</div><div>"+this.model.maskedCard.getCVC()+"</div></div>",targetUrl:ABINE_DNTME.config.protocol+ABINE_DNTME.config.webAppHost+"/#/cards",targetId:"",model:{maskedCard:t},height:260,neverFade:!0,type:"card"}),this.closePanel()},setupCard:function(e){this.getContentMessenger(),this.messenger.send("window:createTab",{localUrl:"pages/index.html#payments"}),this.closePanel(e)},fillWithUsedCard:function(e,a){if(!e||(e.preventDefault(),!e.target.className.match(/overflow|right/i)))if("undefined"==typeof a?this._selectedCardId=t(e.currentTarget).data("cardid"):this._selectedCardId=a,"panel"==this.panelReason&&u.licenseModule.logCheckout({method:this.panelReason,merchant:this.contentManager.domain,clicked:1,amount:this.options.amount}),"biometric"==this.contentManager.preferences.getPref("masked_card_auth")){u.licenseModule.logCheckout({method:this.panelReason,merchant:this.contentManager.domain,biometric:1,amount:this.options.amount}),this.$("#panelOptions").hide(),this._maskedCardAuth=!1;var n=this;u.licenseModule.getGenericBiometricKey(null,function(t){t.success?(n.biometricKey=t.key,n.sendBiometricAuthRequest(e,options)):(n.$("#biometricAuth").show(),n.$("#biometricInfo").text(l.getText("mm_payment_helper_biometric_auth_disabled")),n.autoResize())})}else this._fillWithUsedCard()},getMatchingCard:function(t){var a;return this.model.disposableCards&&(a=e.find(this.model.disposableCards.models,function(e){if(e.id==t)return!0})),a||(a=e.find(this.model.realCards.models,function(e){if(e.id==t)return!0})),a},_fillWithUsedCard:function(){this.biometricKey&&this.biometricToken&&u.memoryStore.set("biometricKeyToken",this.biometricKey+":"+this.biometricToken),this.updatePanelActivity("masked",this.panelId,this.fieldId,!0);var e=this._selectedCardId,t=this.getMatchingCard(e),a="realCard"==t.storageEntity;if(a){var n=t.get("type");t.get("brand")&&t.get("brand").indexOf("generic")==-1&&(n=t.get("brand")),this.updatePanelActivity("impression",this.usedAutofillRealCardViewPanelId,this.fieldId,!1)}else{var n="masked";this.updatePanelActivity("impression",this.usedAutofillMaskedCardViewPanelId,this.fieldId,!1)}var i=t.toJSON();t.get("address")&&(i.address=t.get("address")),this.logged||(this.logged=!0,u.licenseModule.logCheckout({method:this.panelReason,merchant:this.contentManager.domain,success:1,filled:n,amount:this.options.amount})),this.fillFields("payment",i,"payment"),this.options.contentManager.showNotification({msg:"",targetUrl:ABINE_DNTME.config.protocol+ABINE_DNTME.config.webAppHost+"/#/cards",targetId:"",model:{maskedCard:i},height:260,neverFade:!0,type:a?"real_card":"card"}),this.closePanel()}});return y}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.payment_helper_paymentsr2_panel=e.template(function(e,t,a,n,i){function r(e){var t,i="";return i+="\n      ",t=e,t=m.invokePartial(n["payment_helper.mask_my_card"],"payment_helper.mask_my_card",t,a,n),(t||0===t)&&(i+=t),i+="\n    "}function o(e){var t,i="";return i+="\n      ",t=e,t=m.invokePartial(n["payment_helper.protect_my_card"],"payment_helper.protect_my_card",t,a,n),(t||0===t)&&(i+=t),i+="\n    "}a=a||e.helpers,n=n||e.partials;var s,l,c,d,u,p="",m=this,h="function",_=a.helperMissing,f=void 0,g=this.escapeExpression;return p+='<div class="newpanel">\n  <span class="normal-flow">\n  <div class="left-panel">\n\n  <!--Protect My Card Step 1-->\n    ',d=a.hasAuthorizedCoinbase,s=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasAuthorizedCoinbase"),l=a["if"],u=m.program(1,r,i),u.hash={},u.fn=u,u.inverse=m.program(3,o,i),s=l.call(t,s,u),(s||0===s)&&(p+=s),p+='\n  <!-- End Step 1 -->\n\n  <!--Protect My Card Step 2 Enter Card Amount -->\n  <div id="newMaskedCard" class="payments-step" style="display:none;">\n    <div class="payments-header">\n      ',s="mm_payment_helper_safestWayTitle",d=a.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof l===h?l.call(t,s,{hash:{}}):l===f?_.call(t,"intl",s,{hash:{}}):l,p+=g(s)+'\n    </div>\n    <div class="payments-how-much-text" style="margin-bottom: 5px;">\n      ',s="mm_payment_helper_howMuch",d=a.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof l===h?l.call(t,s,{hash:{}}):l===f?_.call(t,"intl",s,{hash:{}}):l,p+=g(s)+'\n    </div>\n\n    <div>\n      <span class="input-prepend" style="margin: 10px 10px 20px -20px;">\n        <span class="add-on" style="font-size:38px;line-height:40px;height:40px;">$</span>\n        <input maxlength="7" class="span2" id="cardAmount" type="text" placeholder="0.00"/>\n      </span>\n\n      <input type="button" id="createCard" style="font-size:16px;padding:10px 20px;margin-bottom:16px;" value="Finish Up" class="btn btn-primary" />\n      <span id="amountError" style="display:block;margin:-10px 0px 10px 0px;line-height:11px;font-size:10px;color:red;"></span>\n    </div>\n  </div>\n  <!-- End Step 2 Enter Card Amount -->\n\n  <div id="processingRequestView" style="display:none;height: 50px;margin: 20px;">\n    ',s="mm_payment_helper_please_wait",d=a.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof l===h?l.call(t,s,{hash:{}}):l===f?_.call(t,"intl",s,{hash:{}}):l,p+=g(s)+'\n  </div>\n\n  <div id="loadingMaskedCard" style="height:50px;display:none;text-align:center;padding:10px;">\n  </div>\n\n  <!-- No Card On File -->\n  <div id="register" class="payments-step" style="display: none;padding: 10px;">\n    ',s="mm_payment_error_card_not_setup",d=a.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof l===h?l.call(t,s,{hash:{}}):l===f?_.call(t,"intl",s,{hash:{}}):l,(s||0===s)&&(p+=s),p+='\n  </div>\n  <!-- End No Card On File -->\n\n  <!-- Step 3 Confirmation -->\n  <div class="payments-step" id="confirmAmountView" style="display:none;">\n    <div class="payments-header">\n      ',s="mm_payment_helper_finishUpTitle",d=a.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof l===h?l.call(t,s,{hash:{}}):l===f?_.call(t,"intl",s,{hash:{}}):l,p+=g(s)+'\n    </div>\n    <div class="payments-confirm-card-body" style="text-align:center;margin:5px 30px;">\n      <span>',s="mm_payment_helper_paymentsr2_ready",d=a.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof l===h?l.call(t,s,{hash:{}}):l===f?_.call(t,"intl",s,{hash:{}}):l,p+=g(s)+'</span>\n      <h5 id="confirmRegularMsg">\n        ',d=a.primaryCard,s=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"primaryCard"),s=null===s||void 0===s||s===!1?s:ABINE_DNTME.Duckbone.Handlebars.getAttr(s,"getLastFour"),l="mm_payment_helper_paymentsr2_willBeCharged_1",d=a.intl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof c===h?c.call(t,l,s,{hash:{}}):c===f?_.call(t,"intl",l,s,{hash:{}}):c,p+=g(s)+"<span class='confirmAmount'></span> ",s="mm_payment_helper_paymentsr2_willBeCharged_2",d=a.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof l===h?l.call(t,s,{hash:{}}):l===f?_.call(t,"intl",s,{hash:{}}):l,p+=g(s)+'\n      </h5>\n      <div style="text-align:center;margin-bottom:10px;">\n          <input type="button" value="Confirm" id="confirmCardCreate" class="btn btn-primary" style="margin-bottom:3px;padding:8px 40px;"/>\n      </div>\n    </div>\n  </div>\n  <!-- End Step 3 Confirmation -->\n\n  ',s=t,s=m.invokePartial(n["payment_helper.biometric_auth"],"payment_helper.biometric_auth",s,a,n),(s||0===s)&&(p+=s),p+='\n\n\n  <!-- Step 4 Use Card -->\n    <span id="maskedCardView" style="display:none;">\n        <div id="maskedCardError" style="display:none;text-align:center;padding:10px;">\n            <div id="maskedCardErrorMsg" class="alert alert-error">\n\n            </div>\n            <div style="text-align:center;padding:10px 0 5px 0;">\n                <input type="button" id="chatNow" class="btn btn-primary chatNow" style="width:90%;text-align:center;" value="',s="mm_notification_helper_chatNow",d=a.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof l===h?l.call(t,s,{hash:{}}):l===f?_.call(t,"intl",s,{hash:{}}):l,p+=g(s)+'" />\n            </div>            \n        </div>\n        <div id="maskedCard" class="creditcardfont" style="color:rgb(80,80,80);width:336px;margin:auto;padding:10px;display:none;">\n          <div style="background-repeat:no-repeat;background-size:100%;height:181px;background-image:url(\'',s="/pages/images/2015panels/masked_card_blank.png",d=a.assetUrl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),s=typeof l===h?l.call(t,s,{hash:{}}):l===f?_.call(t,"assetUrl",s,{hash:{}}):l,p+=g(s)+'\');">\n              <br style="clear:both;"/>\n              <div style="text-align:right;margin-right:20px;color:white;">\n                  <span style="font-family:\'Open Sans\', \'Helvetica Neue\', Arial, sans-serif !important;font-weight:bold;font-size:24pt;" id="originalValue">',d=a.getOriginalValue,s=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getOriginalValue"),typeof s===h?s=s.call(t,{hash:{}}):s===f&&(s=_.call(t,"getOriginalValue",{hash:{}})),p+=g(s)+"</span>\n                  <br/>\n                  <span style=\"font-family:'Open Sans', 'Helvetica Neue', Arial, sans-serif !important;font-size:11pt;\">",s="mm_notification_helper_at",d=a.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof l===h?l.call(t,s,{hash:{}}):l===f?_.call(t,"intl",s,{hash:{}}):l,p+=g(s)+"&nbsp;</span><span id=\"domain\" style=\"font-family:'Open Sans', 'Helvetica Neue', Arial, sans-serif !important;font-weight:bold;font-size:11pt;\">",d=a.getDomain,s=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getDomain"),typeof s===h?s=s.call(t,{hash:{}}):s===f&&(s=_.call(t,"getDomain",{hash:{}})),p+=g(s)+'</span>\n              </div>\n              <div style="text-align:center;margin-top:5px;color:white;">\n                  <h3 id="cardNumber" style="font-family:\'Open Sans\', \'Helvetica Neue\', Arial, sans-serif !important;font-weight:lighter;">',d=a.getSeparatedCardNumber,s=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getSeparatedCardNumber"),typeof s===h?s=s.call(t,{hash:{}}):s===f&&(s=_.call(t,"getSeparatedCardNumber",{hash:{}})),p+=g(s)+"</h3>\n              </div>\n              <div style=\"font-size:15px;color:white;margin-left:25px;font-family:'Open Sans', 'Helvetica Neue', Arial, sans-serif !important;font-weight:bold;\">\n                  <span style=\"float:left;\">",s="mm_payment_helper_expDate",d=a.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof l===h?l.call(t,s,{hash:{}}):l===f?_.call(t,"intl",s,{hash:{}}):l,p+=g(s)+' <span id="expiration">',d=a.getExpiry,s=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getExpiry"),typeof s===h?s=s.call(t,{hash:{}}):s===f&&(s=_.call(t,"getExpiry",{hash:{}})),p+=g(s)+'</span></span> <span style="float:right;margin-right:115px;"> ',s="mm_payment_helper_cvc",d=a.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof l===h?l.call(t,s,{hash:{}}):l===f?_.call(t,"intl",s,{hash:{}}):l,p+=g(s)+' <span id="cvc">',d=a.getCVC,s=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getCVC"),typeof s===h?s=s.call(t,{hash:{}}):s===f&&(s=_.call(t,"getCVC",{hash:{}})),p+=g(s)+'</span></span>\n              </div>\n          </div>\n          <div style="text-align:center;margin-top:5px;">\n            <input type="button" value="',s="mm_payment_helper_useMyMasked",d=a.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof l===h?l.call(t,s,{hash:{}}):l===f?_.call(t,"intl",s,{hash:{}}):l,p+=g(s)+'" class="btn btn-primary" id="useMaskedCard" />\n          </div>\n        </div>\n        <div id="dummyCard" class="creditcardfont" style="color:rgb(80,80,80);width:336px;margin:auto;padding:10px;display:none;">\n            <div id="dummyCardTitle" style="display: none;font-family: arial, sans-serif;">',s="mm_payment_helper_dummy_card_ready",d=a.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof l===h?l.call(t,s,{hash:{}}):l===f?_.call(t,"intl",s,{hash:{}}):l,p+=g(s)+'</div>\n            <img class="dummyCardImg" src="',s="/pages/images/masked_card_gold.png",d=a.assetUrl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),s=typeof l===h?l.call(t,s,{hash:{}}):l===f?_.call(t,"assetUrl",s,{hash:{}}):l,p+=g(s)+'"/>\n        </div>\n    </span>\n\n  <!-- End Step 4 -->\n  </div>\n\n  </span>\n  <!-- End Normal Flow -->\n\n  <!-- Default header (actually footer) for the panels -->\n  ',s=t,s=m.invokePartial(n["common.header"],"common.header",s,a,n),(s||0===s)&&(p+=s),p+="\n\n  <!-- end Default header (actually footer) -->\n\n  <!-- Inline FAQ Panel -->\n  ",s=t,s=m.invokePartial(n["payment_helper.inline_faq"],"payment_helper.inline_faq",s,a,n),(s||0===s)&&(p+=s),p+="\n  <!-- end Inline FAQ Panel -->\n\n</div>\n"}),ABINE_DNTME.CompiledTemplates.payment_helper_paymentsr2_panel}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.payment_helper_paymentsr3_card_money=e.template(function(e,t,a,n,i){function r(e){var t,i="";return i+="\n      ",t=e,t=p.invokePartial(n["payment_helper.mask_my_card"],"payment_helper.mask_my_card",t,a,n),(t||0===t)&&(i+=t),i+="\n    "}function o(e){var t,i="";return i+="\n      ",t=e,t=p.invokePartial(n["payment_helper.protect_my_card"],"payment_helper.protect_my_card",t,a,n),(t||0===t)&&(i+=t),i+="\n    "}a=a||e.helpers,n=n||e.partials;var s,l,c,d,u="",p=this,m="function",h=a.helperMissing,_=void 0,f=this.escapeExpression;return u+='<div class="newpanel">\n  <span class="normal-flow">\n  <div class="left-panel">\n  <div id="processingRequestView" style="display:none;height: 50px;margin: 20px;">\n    ',s="mm_payment_helper_please_wait",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"intl",s,{hash:{}}):l,u+=f(s)+'\n  </div>\n\n  <div id="loadingMaskedCard" style="display:none;height:50px;text-align:center;padding:10px;">\n  </div>\n\n  <!-- Card Money Step 1-->\n    ',c=a.hasAuthorizedCoinbase,s=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasAuthorizedCoinbase"),l=a["if"],d=p.program(1,r,i),d.hash={},d.fn=d,d.inverse=p.program(3,o,i),s=l.call(t,s,d),(s||0===s)&&(u+=s),u+='\n  <!-- End Step 1 -->\n\n  <!--Protect My Card Step 2 Enter Card Amount -->\n  <div id="newMaskedCard" class="payments-step" style="display:none;">\n    <div class="payments-header">\n      ',s="mm_payment_helper_safestWayTitle",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"intl",s,{hash:{}}):l,u+=f(s)+'\n    </div>\n    <div class="payments-how-much-text" style="margin-bottom: 5px;">\n      ',s="mm_payment_helper_howMuch",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"intl",s,{hash:{}}):l,u+=f(s)+'\n    </div>\n\n    <div>\n      <span class="input-prepend" style="margin: 10px 10px 20px -20px;">\n        <span class="add-on" style="font-size:38px;line-height:40px;height:40px;">$</span>\n        <input maxlength="7" class="span2" id="cardAmount" type="text" placeholder="0.00"/>\n      </span>\n\n      <input type="button" id="createCard" style="font-size:16px;padding:10px 20px;margin-bottom:16px;" value="Finish Up" class="btn btn-primary" />\n      <span id="amountError" style="display:block;margin:-10px 0px 10px 0px;line-height:11px;font-size:10px;color:red;"></span>\n    </div>\n    <div id="upgradeToPremiumCheckboxDiv" class="checkbox" style="width:300px;margin:0px 10px 10px 20px;">\n      <!-- default values and text changed in panel.js depending on card money/has free cards/if registered/premium states -->\n      <label id="upgradeToPremiumCheckboxLabel" class="alert-success" style="font-size:12px;"><input type="checkbox" id="upgradeToPremium"/>',s="mm_payment_helper_goPremiumCheckboxLabel",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"intl",s,{hash:{}}):l,u+=f(s)+"</label>\n    </div>\n  </div>\n  <!-- End Step 2 Enter Card Amount -->\n\n  <!-- Card Money Step No Card On File -->\n  ",s=t,s=p.invokePartial(n["payment_helper.no_card_on_file"],"payment_helper.no_card_on_file",s,a,n),(s||0===s)&&(u+=s),u+='\n  <!-- End Step Card Money No Card On File -->\n\n  <!-- Step 3 Confirmation -->\n  <div class="payments-step" id="confirmAmountView" style="display:none;">\n    <div class="payments-header">\n      ',s="mm_payment_helper_finishUpTitle",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"intl",s,{hash:{}}):l,u+=f(s)+'\n    </div>\n    <div class="payments-confirm-card-body" style="text-align:center;margin:5px 30px;">\n      <span>',s="mm_payment_helper_paymentsr2_ready",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"intl",s,{hash:{}}):l,u+=f(s)+'</span>\n      <h5 id="confirmRegularMsg"></h5>\n      <div style="text-align:center;margin-bottom:10px;">\n          <input type="button" value="Confirm" id="confirmCardCreate" class="btn btn-primary" style="margin-bottom:3px;padding:8px 40px;"/>\n      </div>\n    </div>\n    <div class="alert-error submit-error" style="display: none"></div>\n    <div class="progress" style="display: none;text-align: center;margin-bottom:0px;">please wait...</div>\n  </div>\n  <!-- End Step 3 Confirmation -->\n\n  ',s=t,s=p.invokePartial(n["payment_helper.biometric_auth"],"payment_helper.biometric_auth",s,a,n),(s||0===s)&&(u+=s),u+='\n\n  <!-- Step 4 Use Card -->\n  <span id="maskedCardView" style="display:none;">\n      <div id="maskedCardError" style="text-align:center;padding:10px;display:none;">\n        <div id="maskedCardErrorMsg" class="alert alert-error"></div>\n        <div style="text-align:center;padding:10px 0 5px 0;">\n          <input type="button" id="chatNow" class="btn btn-primary chatNow" style="width:90%;text-align:center;" value="',s="mm_notification_helper_chatNow",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"intl",s,{hash:{}}):l,u+=f(s)+'" />\n        </div>\n      </div>\n      <div id="maskedCard" class="creditcardfont" style="color:rgb(80,80,80);width:336px;margin:auto;padding:10px;display:none;">\n        <div style="background-repeat:no-repeat;background-size:100%;height:181px;background-image:url(\'',s="/pages/images/2015panels/masked_card_blank.png",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"assetUrl",s,{hash:{}}):l,u+=f(s)+'\');">\n            <br style="clear:both;"/>\n            <div style="text-align:right;margin-right:20px;color:white;">\n                <span style="font-family:\'Open Sans\', \'Helvetica Neue\', Arial, sans-serif !important;font-weight:bold;font-size:24pt;" id="originalValue">',c=a.getOriginalValue,s=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getOriginalValue"),typeof s===m?s=s.call(t,{hash:{}}):s===_&&(s=h.call(t,"getOriginalValue",{hash:{}})),u+=f(s)+"</span>\n                <br/>\n                <span style=\"font-family:'Open Sans', 'Helvetica Neue', Arial, sans-serif !important;font-size:11pt;\">",s="mm_notification_helper_at",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"intl",s,{hash:{}}):l,u+=f(s)+"&nbsp;</span><span id=\"domain\" style=\"font-family:'Open Sans', 'Helvetica Neue', Arial, sans-serif !important;font-weight:bold;font-size:11pt;\">",c=a.getDomain,s=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getDomain"),typeof s===m?s=s.call(t,{hash:{}}):s===_&&(s=h.call(t,"getDomain",{hash:{}})),u+=f(s)+'</span>\n            </div>\n            <div style="text-align:center;margin-top:5px;color:white;">\n                <h3 id="cardNumber" style="font-family:\'Open Sans\', \'Helvetica Neue\', Arial, sans-serif !important;font-weight:lighter;">',c=a.getSeparatedCardNumber,s=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getSeparatedCardNumber"),typeof s===m?s=s.call(t,{hash:{}}):s===_&&(s=h.call(t,"getSeparatedCardNumber",{hash:{}})),u+=f(s)+"</h3>\n            </div>\n            <div style=\"font-size:15px;color:white;margin-left:25px;font-family:'Open Sans', 'Helvetica Neue', Arial, sans-serif !important;font-weight:bold;\">\n                <span style=\"float:left;\">",s="mm_payment_helper_expDate",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"intl",s,{hash:{}}):l,u+=f(s)+' <span id="expiration">',c=a.getExpiry,s=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getExpiry"),typeof s===m?s=s.call(t,{hash:{}}):s===_&&(s=h.call(t,"getExpiry",{hash:{}})),u+=f(s)+'</span></span> <span style="float:right;margin-right:115px;"> ',s="mm_payment_helper_cvc",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"intl",s,{hash:{}}):l,u+=f(s)+' <span id="cvc">',c=a.getCVC,s=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getCVC"),typeof s===m?s=s.call(t,{hash:{}}):s===_&&(s=h.call(t,"getCVC",{hash:{}})),u+=f(s)+'</span></span>\n            </div>\n        </div>\n        <div style="text-align:center;margin-top:5px;">\n          <input type="button" value="',s="mm_payment_helper_useMyMasked",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"intl",s,{hash:{}}):l,u+=f(s)+'" class="btn btn-primary" id="useMaskedCard" />\n        </div>\n      </div>\n  </span>\n  <!-- End Step 4 -->\n\n   </div>\n  </span>\n  <!-- Default header (actually footer) for the panels -->\n   ',s=t,s=p.invokePartial(n["common.header"],"common.header",s,a,n),(s||0===s)&&(u+=s),u+="\n\n  <!-- end Default header (actually footer) -->\n  <!-- End Normal Flow -->\n\n  <!-- Inline FAQ Panel -->\n    ",s=t,s=p.invokePartial(n["payment_helper.inline_faq"],"payment_helper.inline_faq",s,a,n),(s||0===s)&&(u+=s),u+="\n  <!-- end Inline FAQ Panel -->\n\n</div>"}),ABINE_DNTME.CompiledTemplates.payment_helper_paymentsr3_card_money}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.password_helper_panel=e.template(function(e,t,a,n){a=a||e.helpers,n=n||e.partials;var i,r,o,s="",l=this,c="function",d=a.helperMissing,u=void 0,p=this.escapeExpression;return s+='<div class="newpanel">\n    <div class="left-panel">\n    <!-- Generate Password -->\n    <a href="#" class="mmKeyOption password strongPassword lessOptions"><div class="element mask" id="pass">\n      <span class="panelLeft">\n        <img class="iconPos" src="',i="/pages/images/2015panels/pass_green.png",o=a.assetUrl,r=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),i=typeof r===c?r.call(t,i,{hash:{}}):r===u?d.call(t,"assetUrl",i,{hash:{}}):r,s+=p(i)+'"/>\n        ',i="mm_password_helper_generateStrong",o=a.intl,r=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof r===c?r.call(t,i,{
hash:{}}):r===u?d.call(t,"intl",i,{hash:{}}):r,s+=p(i)+'\n      </span>\n    </div></a>\n    <a href="#" class="mmKeyOption password lessOptions"><div class="element otherblue" style="margin-bottom:5px;" id="options">\n      <span>\n        <img class="iconPos" src="',i="/pages/images/2015panels/pass_blue.png",o=a.assetUrl,r=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),i=typeof r===c?r.call(t,i,{hash:{}}):r===u?d.call(t,"assetUrl",i,{hash:{}}):r,s+=p(i)+'"/>\n        ',i="mm_new_password_helper_generate",o=a.intl,r=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof r===c?r.call(t,i,{hash:{}}):r===u?d.call(t,"intl",i,{hash:{}}):r,s+=p(i)+'\n      </span>\n    </div></a>\n    <!-- more options -->\n    <div class="password moreOptions" style="display:none;text-align:center;">\n        <div style="margin-top:10px;">\n            <input type="text" id="password-input" style="height:25px;"/>&nbsp;&nbsp;<img style="cursor:pointer;vertical-align:top;margin-top:4px;" id="refresh-password" src="',i="pages/images/pass_gen_refresh.png",o=a.assetUrl,r=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),i=typeof r===c?r.call(t,i,{hash:{}}):r===u?d.call(t,"assetUrl",i,{hash:{}}):r,s+=p(i)+'"/>\n        </div>\n        <div>\n            <label for="length">',i="mm_new_password_helper_length",o=a.intl,r=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof r===c?r.call(t,i,{hash:{}}):r===u?d.call(t,"intl",i,{hash:{}}):r,s+=p(i)+'&nbsp;&nbsp;<input id="length" type="range" min="6" max="25" value="10" step="1"/>&nbsp;&nbsp;<span id="pw-length-number" style="color:#168AD3;">10</span></label>\n        </div>\n        <div style="margin-top:10px;" class="clearfix">\n            <div style="width:40%;float:left;">\n                <label for="numbers"><input id="numbers" type="checkbox" checked/>&nbsp;&nbsp;',i="mm_new_password_helper_numbers",o=a.intl,r=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof r===c?r.call(t,i,{hash:{}}):r===u?d.call(t,"intl",i,{hash:{}}):r,s+=p(i)+'</label>\n            </div>\n            <div style="width:50%;float:left;">\n                <label for="special"><input id="special" type="checkbox" checked/>&nbsp;&nbsp;',i="mm_new_password_helper_special",o=a.intl,r=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof r===c?r.call(t,i,{hash:{}}):r===u?d.call(t,"intl",i,{hash:{}}):r,s+=p(i)+'</label>\n            </div>\n        </div>\n    <div style="margin-top:10px;margin-bottom:10px;">\n      <input type="button" id="fillIt" class="btn btn-success done" style="background:#168AD3;" value="',i="mm_new_password_helper_save",o=a.intl,r=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof r===c?r.call(t,i,{hash:{}}):r===u?d.call(t,"intl",i,{hash:{}}):r,s+=p(i)+'"/>\n    </div>\n    </div>\n    ',i=t,i=l.invokePartial(n["common.auto_fill_with"],"common.auto_fill_with",i,a,n),(i||0===i)&&(s+=i),s+="\n    </div>\n    ",i=t,i=l.invokePartial(n["common.header"],"common.header",i,a,n),(i||0===i)&&(s+=i),s+="\n\n</div>\n"}),ABINE_DNTME.CompiledTemplates.password_helper_panel}),ABINE_DNTME.define("abine/views/passwordHelperPanel",["documentcloud/underscore","jquery","duckbone/core","abine/views/panelBase","abine/password","abine/timer","abine/proxies"],function(e,t,a,n,i,r,o){var s=n.extend({templateName:"password_helper_panel",events:{"click .panelSection":"performActions","click #options":"showOptions","click a.strongPassword":"fillWithStrongPassword","click #differentSpecialChars":"fillWithDifferentSpecialChars","click #noSpecialChars":"fillWithNoSpecialChars","click #noNumbers":"fillWithNoNumbers","click #faqLink":"openHelp","click a.getStarted":"getStarted","click .close-header":"logClose","click #refresh-password":"generatePasswordOption","click #fillIt":"fillWithOptionPassword","change #length":"updateLengthNumber","change #numbers":"generatePasswordOption","click #special":"generatePasswordOption"},logClose:function(){this.updatePanelActivity("closed",this.panelId,this.fieldId,!0)},openHelp:function(){o.webapp.openHelp("/faq/guides-blurPasswordManager"),this.closePanel()},afterInitialize:function(){this.fieldId=this.options.fieldId,this.strategyId=this.options.strategyId,this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.numMenuOptions=1,this.bindBaseEvents(),this.applyFadingStyle(),this.fadeIn(),this.model={panelType:"password",hasRegistered:this.options.hasRegistered,dynamicPanel:this.options.dynamicPanel,mapper:!!this.contentManager.preferences.getPref("mapping:mapper"),showMapper:this.contentManager.preferences.isMapper(),show_settings:!this.contentManager.preferences.getPref("password-settings-seen")},this.options.dynamicPanel&&(this.setupDynamicPanel(),this.model.panelSections=this.panelSections),this.contentManager.loadUserPreferences(e.bind(function(){this.model.hasRegistered=!!this.contentManager.preferences.getPref("hasRegistered"),this.model.hasRegistered?(this.updatePanelActivity("impression",2000001,this.fieldId,!0),this.bind("enter0",function(e){this.fillWithStrongPassword(e)})):this.model.dynamicPanel?this.updatePanelActivity("closed",this.model.dynamicPanel.id,this.fieldId,!0):this.bind("enter0",function(e){this.getStarted(e)},this),this.render()},this))},showOptions:function(a){a&&a.preventDefault(),this.ignoreBlur(!0),this.generatePasswordOption(a),t(".moreOptions",this.el).show(),t(".lessOptions",this.el).hide(),this.trigger("render"),r.setTimeout(e.bind(function(){this.focusField(),r.setTimeout(e.bind(function(){this.ignoreBlur(!1)},this),500)},this),100)},generatePasswordOption:function(){var e=this.$("#length").val(),a=this.$("#numbers").prop("checked"),n=this.$("#special").prop("checked");t("#password-input",this.el).val(i.generateNewOptionsPassword(e,a,n))},updateLengthNumber:function(){var e=parseInt(this.$("#length").val());this.$("#pw-length-number").text(e),this.generatePasswordOption()},fillPassword:function(e,t){e&&e.preventDefault(),this.updatePanelActivity("masked",2000001,this.fieldId,!0);var a="/password"==this.options.fieldType;this.fillFields("password",t,{origin:"strong",exactTypeMatch:a}),this.closePanel()},fillWithOptionPassword:function(e){var a=t("#password-input",this.el).val();this.fillPassword(e,a)},fillWithStrongPassword:function(e){var t={"/password":"generateNoSpecialCharsPassword","/password/differentSpecialChars":"generateSpecialCharsPassword","/password/noSpecialChars":"generateNoSpecialCharsPassword","/password/noNumbers":"generateNoDigitsPassword"},a="";a=this.options.fieldType in t?i[t[this.options.fieldType]]():i.generateNoSpecialCharsPassword(),this.fillPassword(e,a)},fillWithDifferentSpecialChars:function(e){o.licenseModule.logPasswordFillData({choice:"differentSpecialChars",domain:this.contentManager.domain}),this.fillPassword(e,i.generateSpecialCharsPassword())},fillWithNoSpecialChars:function(e){o.licenseModule.logPasswordFillData({choice:"noSpecialChars",domain:this.contentManager.domain}),this.fillPassword(e,i.generateNoSpecialCharsPassword())},fillWithNoNumbers:function(e){o.licenseModule.logPasswordFillData({choice:"noNumbers",domain:this.contentManager.domain}),this.fillPassword(e,i.generateNoDigitsPassword())}});return s}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.phone_helper_panel=e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+="\n          ",b=a.primaryPhone,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"primaryPhone"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"isValidated"),i=a["if"],v=k.program(2,o,t),v.hash={},v.fn=v,v.inverse=k.program(7,c,t),n=i.call(e,n,v),(n||0===n)&&(r+=n),r+='\n          <!--Disclose My Phone-->\n          <a href="#" class="mmKeyOption primaryPhone"><div class="element" id="disclose">\n              <span class="panelLeft">\n                  <img class="iconPos" src="',n="/pages/images/2015panels/phone_red.png",b=a.assetUrl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),n=typeof i===E?i.call(e,n,{hash:{}}):i===T?A.call(e,"assetUrl",n,{hash:{}}):i,r+=N(n)+'"/>\n                  ',n="mm_phone_helper_disclosePhone",b=a.intl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===E?i.call(e,n,{hash:{}}):i===T?A.call(e,"intl",n,{hash:{}}):i,r+=N(n)+" ",b=a.primaryPhone,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"primaryPhone"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"getPrettyNumber"),typeof n===E?n=n.call(e,{hash:{}}):n===T&&(n=A.call(e,"primaryPhone.getPrettyNumber",{hash:{}})),r+=N(n)+"\n              </span>\n          </div></a>\n    "}function o(e,t){var n,i,r="";return r+="\n              ",b=a.disposablePhone,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"disposablePhone"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"released"),i=a["if"],v=k.program(3,s,t),v.hash={},v.fn=v,v.inverse=k.program(5,l,t),n=i.call(e,n,v),(n||0===n)&&(r+=n),r+="\n          "}function s(e){var t,n,i="";return i+='\n                <!--Error Handling-->\n                <div id="error" class="element" style="display:none">\n                  <span class="message">',t="mm_phone_helper_restore_failed",b=a.intl,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===E?n.call(e,t,{hash:{}}):n===T?A.call(e,"intl",t,{hash:{}}):n,i+=N(t)+'</span>\n                </div>\n\n                <!--Get New Mask Phone-->\n                <a href="#" class="mmKeyOption disposablePhone"><div class="element" id="mask">\n                  <span class="panelLeft">\n                      <img class="iconPos" src="',t="/pages/images/2015panels/phone_green.png",b=a.assetUrl,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===E?n.call(e,t,{hash:{}}):n===T?A.call(e,"assetUrl",t,{hash:{}}):n,i+=N(t)+'"/>\n                      <span class="msg">',t="mm_phone_helper_newMaskPhone",b=a.intl,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===E?n.call(e,t,{hash:{}}):n===T?A.call(e,"intl",t,{hash:{}}):n,i+=N(t)+'</span>\n                  </span>\n                  <span class="panelRight">\n                    <img class="loading" style="display:none;" src="',t="/pages/images/ajax_loader.gif",b=a.assetUrl,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===E?n.call(e,t,{hash:{}}):n===T?A.call(e,"assetUrl",t,{hash:{}}):n,i+=N(t)+'"/>\n                  </span>\n                </div></a>\n              '}function l(e){var t,n,i="";return i+='\n                <!--Mask My Phone-->\n                <a href="#" class="mmKeyOption disposablePhone"><div class="element" id="mask">\n                  <span class="panelLeft">\n                      <img class="iconPos" src="',t="/pages/images/2015panels/phone_green.png",b=a.assetUrl,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===E?n.call(e,t,{hash:{}}):n===T?A.call(e,"assetUrl",t,{hash:{}}):n,i+=N(t)+'"/>\n                    ',t="mm_phone_helper_maskPhone",b=a.intl,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===E?n.call(e,t,{hash:{}}):n===T?A.call(e,"intl",t,{hash:{}}):n,i+=N(t)+'\n                  </span>\n                  <span class="panelRight">\n                      <span class="overflowText">',b=a.disposablePhone,t=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"disposablePhone"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getPrettyNumber"),typeof t===E?t=t.call(e,{hash:{}}):t===T&&(t=A.call(e,"disposablePhone.getPrettyNumber",{hash:{}})),i+=N(t)+"</span>\n                  </span>\n                </div></a>\n              "}function c(e){var t,n,i="";return i+='\n              <!-- Setup your Masked Phone -->\n              <a href="#" class="mmKeyOption setupPhone"><div class="element" id="mask">\n                  <span class="panelLeft">\n                      ',t="mm_phone_helper_pleaseValidate",b=a.intl,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===E?n.call(e,t,{hash:{}}):n===T?A.call(e,"intl",t,{hash:{}}):n,i+=N(t)+"\n                  </span>\n              </div></a>\n          "}function d(e,t){var n,i,r="";return r+="\n\n        ",b=a.dynamicPanel,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"dynamicPanel"),i=a["if"],v=k.program(10,u,t),v.hash={},v.fn=v,v.inverse=k.program(13,m,t),n=i.call(e,n,v),(n||0===n)&&(r+=n),r+="\n    "}function u(e,t){var n,i,r="";return r+="\n            ",b=a.panelSections,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"panelSections"),i=a.each,v=k.program(11,p,t),v.hash={},v.fn=v,v.inverse=k.noop,n=i.call(e,n,v),(n||0===n)&&(r+=n),r+="\n        "}function p(e){var t,a="";return a+='\n                <div id="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof t===E?t=t.call(e,{hash:{}}):t===T&&(t=A.call(e,"this.id",{hash:{}})),a+=N(t)+'" style="height:',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"height"),typeof t===E?t=t.call(e,{hash:{}}):t===T&&(t=A.call(e,"this.height",{hash:{}})),a+=N(t)+'" class="panelSection ',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"class_name"),typeof t===E?t=t.call(e,{hash:{}}):t===T&&(t=A.call(e,"this.class_name",{hash:{}})),a+=N(t)+'">\n                    ',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"body"),typeof t===E?t=t.call(e,{hash:{}}):t===T&&(t=A.call(e,"this.body",{hash:{}})),(t||0===t)&&(a+=t),a+="\n                </div>\n            "}function m(e,t){var n,i,r="";return r+="\n            ",b=a.entitledToPhone,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"entitledToPhone"),i=a["if"],v=k.program(14,h,t),v.hash={},v.fn=v,v.inverse=k.program(16,_,t),n=i.call(e,n,v),(n||0===n)&&(r+=n),r+="\n        "}function h(e){var t,n,i="";return i+='\n                <a href="#" class="mmKeyOption upgradeToPhone">\n                    <div class="element" id="mask">\n                        <span class="panelLeft">\n                            ',t="mm_phone_helper_setupMasked",b=a.intl,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===E?n.call(e,t,{hash:{}}):n===T?A.call(e,"intl",t,{hash:{}}):n,i+=N(t)+"\n                        </span>\n                    </div>\n                </a>\n            "}function _(e){var t,n,i="";return i+='\n                <a href="#" class="mmKeyOption upgradeToPhone">\n                    <div class="element" id="mask">\n                        <span class="panelLeft" style="width:100%;">\n                            ',t="mm_phone_helper_upgradeMaskedPhone",b=a.intl,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===E?n.call(e,t,{hash:{}}):n===T?A.call(e,"intl",t,{hash:{}}):n,i+=N(t)+"\n                        </span>\n                    </div>\n                </a>\n            "}function f(e){var t,i="";return i+="\n        ",t=e,t=k.invokePartial(n["common.header"],"common.header",t,a,n),(t||0===t)&&(i+=t),i+="\n    "}a=a||e.helpers,n=n||e.partials;var g,y,b,v,w="",k=this,E="function",A=a.helperMissing,T=void 0,N=this.escapeExpression;return w+='<div class="newpanel">\n    <div class="left-panel">\n    ',b=a.primaryPhone,g=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"primaryPhone"),y=a["if"],v=k.program(1,r,i),v.hash={},v.fn=v,v.inverse=k.program(9,d,i),g=y.call(t,g,v),(g||0===g)&&(w+=g),w+="\n\n    </div>\n    ",g=t,g=k.invokePartial(n["common.auto_fill_with"],"common.auto_fill_with",g,a,n),(g||0===g)&&(w+=g),w+="\n\n    ",b=a.dynamicPanel,g=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"dynamicPanel"),y=a.unless,v=k.program(18,f,i),v.hash={},v.fn=v,v.inverse=k.noop,g=y.call(t,g,v),(g||0===g)&&(w+=g),w+="\n\n</div>"}),ABINE_DNTME.CompiledTemplates.phone_helper_panel}),ABINE_DNTME.define("abine/views/phoneHelperPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/intl"],function(e,t,a,n,i,r,o,s){var l=i.extend({templateName:"phone_helper_panel",events:{"click a.primaryPhone":"fillWithPrimaryPhone","click a.disposablePhone":"fillWithDisposablePhone","click a.getStarted":"getStarted","click a.setupPhone":"setupPhone","click a.upgradeToPhone":"getStartedWithPhone","click .panelSection":"performActions","click .help-link":"openHelp","click .close-link":"logClose"},logClose:function(){this.updatePanelActivity("closed",this.panelId,this.fieldId,!0)},getStartedWithPhone:function(e){e&&e.preventDefault(),this.updatePanelActivity("masked",this.panelId,this.fieldId,!0),o.webapp.openPhones(),this.closePanel(e)},openHelp:function(){o.webapp.openHelp("/phone"),this.closePanel()},setupPhone:function(e){o.webapp.openPhones(),this.closePanel(e),e.preventDefault()},afterInitialize:function(){this.fieldId=this.options.fieldId,this.strategyId=this.options.strategyId,this.numMenuOptions=2,this.bindBaseEvents(),this.applyFadingStyle(),this.fadeIn(),this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.model={panelType:"phone",primaryPhone:!1,disposablePhone:!1,hasRegistered:this.options.hasRegistered,entitledToPhone:this.options.entitledToPhone,mapper:!!this.contentManager.preferences.getPref("mapping:mapper"),showMapper:this.contentManager.preferences.isMapper(),show_settings:!this.contentManager.preferences.getPref("phone-settings-seen")},this.contentManager.loadUserPreferences(e.bind(function(){this.model.hasRegistered=!!this.contentManager.preferences.getPref("hasRegistered"),this.model.shieldedPhones=new n.ShieldedPhoneCollection,this.model.shieldedPhones.bind("sync:success",function(){if(this.model.shieldedPhones.length>0&&(this.model.primaryPhone=this.model.shieldedPhones.at(0)),this.model.primaryPhone){if(this.panelId=3000001,this.updatePanelActivity("impression",this.panelId,this.fieldId,!0),this.model.primaryPhone.isValidated()){var t=this.model.primaryPhone.generateDisposable();t.save({},{success:e.bind(function(){this.model.disposablePhone=t,this.render()},this)}),this.bind("enter0",this.fillWithDisposablePhone,this)}else this.bind("enter0",this.setupPhone,this);this.bind("enter1",this.fillWithPrimaryPhone,this)}else if(this.options.dynamicPanel)this.model.dynamicPanel=this.options.dynamicPanel,this.setupDynamicPanel(),this.model.panelSections=this.panelSections,this.panelId=this.model.dynamicPanel.id,this.updatePanelActivity("impression",this.panelId,this.fieldId,!0);else{if(!this.model.entitledToPhone)return void this.closePanel();this.panelId=7000001,this.updatePanelActivity("impression",this.panelId,this.fieldId,!0),this.bind("enter0",this.getStartedWithPhone,this)}this.render()},this),this.model.shieldedPhones.fetchAll()},this))},fillWithPrimaryPhone:function(e){e&&e.preventDefault(),this.updatePanelActivity("disclosed",this.panelId,this.fieldId,!0),this.fillFields("phone",this.model.primaryPhone.toJSON(),"primary"),this.closePanel()},fillWithDisposablePhone:function(t){t&&t.preventDefault(),this.ignoreBlur(!0),this.$(".loading").show(),this.$(".disposablePhone .msg").text(s.getText("mm_phone_helper_restore_progress")),this.contentManager.messenger.send("update:panelActivity:masked",{panelId:this.panelId});var a=this.model.primaryPhone.generateDisposable();a.save({filling:!0},{success:e.bind(function(){this.fillFields("phone",a.toJSON(),"disposable"),this.closePanel()},this),error:e.bind(function(){this.$(".disposablePhone").hide(),this.$("#error").show(),this.trigger("resize")},this)})}});return l}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.changepassword_helper_login_panel=e.template(function(e,t,a,n,i){function r(e){var t,n,i="";return i+='\n    <!-- Login Emails -->\n    <a href="#" class="mmKeyOption account" data-account="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof t===p?t=t.call(e,{hash:{}}):t===h&&(t=m.call(e,"this.id",{hash:{}})),i+=_(t)+'"><div class="element" id="mask">\n        <span class="panelLeft" title="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress"),typeof t===p?t=t.call(e,{hash:{}}):t===h&&(t=m.call(e,"this.getAddress",{hash:{}})),i+=_(t)+'">\n            <img class="iconPos" src="',t="/pages/images/2015panels/pass_green.png",l=a.assetUrl,n=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===p?n.call(e,t,{hash:{}}):n===h?m.call(e,"assetUrl",t,{hash:{}}):n,i+=_(t)+'"/>\n            ',t="mm_cp_login_helper_use",l=a.intl,n=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===p?n.call(e,t,{hash:{}}):n===h?m.call(e,"intl",t,{hash:{}}):n,i+=_(t)+" ",t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress"),typeof t===p?t=t.call(e,{hash:{}}):t===h&&(t=m.call(e,"this.getAddress",{hash:{}})),i+=_(t)+'\n        </span>\n        <span class="panelRight">\n            <span class="overflowText">',t="mm_email_helper_created",l=a.intl,n=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===p?n.call(e,t,{hash:{}}):n===h?m.call(e,"intl",t,{hash:{}}):n,i+=_(t)+" ",t="createdAt",l=a.live_timestamp,n=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"live_timestamp"),t=typeof n===p?n.call(e,t,{hash:{}}):n===h?m.call(e,"live_timestamp",t,{hash:{}}):n,i+=_(t)+"</span>\n        </span>\n    </div></a>\n    "}a=a||e.helpers,n=n||e.partials;var o,s,l,c,d="",u=this,p="function",m=a.helperMissing,h=void 0,_=this.escapeExpression;return d+='<div class="newpanel">\n    <div class="left-panel">\n    ',l=a.accounts,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"accounts"),s=a.each,c=u.program(1,r,i),c.hash={},c.fn=c,c.inverse=u.noop,o=s.call(t,o,c),(o||0===o)&&(d+=o),d+="\n    </div>\n    ",o=t,o=u.invokePartial(n["common.header"],"common.header",o,a,n),(o||0===o)&&(d+=o),d+="\n</div>"}),ABINE_DNTME.CompiledTemplates.changepassword_helper_login_panel}),ABINE_DNTME.define("abine/views/changePasswordHelperPanel",["documentcloud/underscore","jquery","duckbone/core","abine/views/panelBase","abine/password","abine/timer","abine/proxies"],function(e,t,a,n,i,r,o){var s=n.extend({templateName:"changepassword_helper_password_panel",events:{"click .panelSection":"performActions","click #options":"showOptions","click a.strongPassword":"fillWithStrongPassword","click #differentSpecialChars":"fillWithDifferentSpecialChars","click #noSpecialChars":"fillWithNoSpecialChars","click #noNumbers":"fillWithNoNumbers","click #faqLink":"openHelp","click a.getStarted":"getStarted","click .close-header":"logClose","click #refresh-password":"generatePasswordOption","click #fillIt":"fillWithOptionPassword","change #length":"updateLengthNumber","change #numbers":"generatePasswordOption","click #special":"generatePasswordOption"},logClose:function(){this.updatePanelActivity("closed",this.panelId,this.fieldId,!0)},openHelp:function(){o.webapp.openHelp("/faq/guides-blurPasswordManager"),this.closePanel()},afterInitialize:function(){this.fieldId=this.options.fieldId,this.strategyId=this.options.strategyId,this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.numMenuOptions=1,this.bindBaseEvents(),this.applyFadingStyle(),this.fadeIn(),this.model={panelType:"password",hasRegistered:this.options.hasRegistered,dynamicPanel:this.options.dynamicPanel,show_settings:!this.contentManager.preferences.getPref("password-settings-seen")},this.options.dynamicPanel&&(this.setupDynamicPanel(),this.model.panelSections=this.panelSections),this.contentManager.loadUserPreferences(e.bind(function(){this.model.hasRegistered=!!this.contentManager.preferences.getPref("hasRegistered"),this.model.hasRegistered?(this.updatePanelActivity("impression",2000001,this.fieldId,!0),this.bind("enter0",function(e){this.fillWithStrongPassword(e)})):this.model.dynamicPanel?this.updatePanelActivity("closed",this.model.dynamicPanel.id,this.fieldId,!0):this.bind("enter0",function(e){this.getStarted(e)},this),this.render()},this))},showOptions:function(a){a&&a.preventDefault(),this.ignoreBlur(!0),this.generatePasswordOption(a),t(".moreOptions",this.el).show(),t(".lessOptions",this.el).hide(),this.trigger("render"),r.setTimeout(e.bind(function(){this.focusField(),r.setTimeout(e.bind(function(){this.ignoreBlur(!1)},this),500)},this),100)},generatePasswordOption:function(){var e=this.$("#length").val(),a=this.$("#numbers").prop("checked"),n=this.$("#special").prop("checked");t("#password-input",this.el).val(i.generateNewOptionsPassword(e,a,n))},updateLengthNumber:function(){var e=parseInt(this.$("#length").val());this.$("#pw-length-number").text(e),this.generatePasswordOption()},fillPassword:function(e,t){e&&e.preventDefault(),this.updatePanelActivity("masked",2000001,this.fieldId,!0),this.fillFields("password",t,{origin:"strong",exactTypeMatch:!0}),this.closePanel()},fillWithOptionPassword:function(e){var a=t("#password-input",this.el).val();this.fillPassword(e,a)},fillWithStrongPassword:function(e){var t={"/password":i.generateRandomPassword,"/password/differentSpecialChars":i.generateSpecialCharsPassword,"/password/noSpecialChars":i.generateNoSpecialCharsPassword,"/password/noNumbers":i.generateNoDigitsPassword};if(this.fieldType in t)var a=t[this.fieldType]();else var a=i.generateNoSpecialCharsPassword();this.fillPassword(e,a)},fillWithDifferentSpecialChars:function(e){o.licenseModule.logPasswordFillData({choice:"differentSpecialChars",domain:this.contentManager.domain}),this.fillPassword(e,i.generateSpecialCharsPassword())},fillWithNoSpecialChars:function(e){o.licenseModule.logPasswordFillData({choice:"noSpecialChars",domain:this.contentManager.domain}),this.fillPassword(e,i.generateNoSpecialCharsPassword())},fillWithNoNumbers:function(e){o.licenseModule.logPasswordFillData({choice:"noNumbers",domain:this.contentManager.domain}),this.fillPassword(e,i.generateNoDigitsPassword())}});return s}),ABINE_DNTME.define("abine/views/changePasswordLoginHelperPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/proxies"],function(e,t,a,n,i,r){var o=i.extend({templateName:"changepassword_helper_login_panel",events:{"click a.account":"fillWithAccount","click .help-link":"openHelp"},openHelp:function(){r.webapp.openHelp("/faq/guides-blurPasswordManager"),this.closePanel()},afterInitialize:function(){this.fieldId=this.options.fieldId,this.strategyId=this.options.strategyId,this.bindBaseEvents(),this.applyFadingStyle(),this.fadeIn(),this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.model={panelType:"account",accounts:new n.AccountCollection,show_settings:!this.contentManager.preferences.getPref("account-settings-seen")},this.model.accounts.fetchLoginsByDomain(this.options.domain,e.bind(function(e){if(e||0==this.model.accounts.length)this.closePanel();else{this.numMenuOptions=this.model.accounts.length;for(var t=0;t<this.numMenuOptions;t++)this.bind("enter"+t,function(e,t){this.fillWithAccount(e,t)},this);this.render()}},this))},fillWithAccount:function(a,n){a&&a.preventDefault();var i;if(n||0==n){var r=e(this.el.children[0].children).filter(function(e){return t(e).is("a")&&!t(e).hasClass("disabled")});i=t(r[n]).data("account")}else i=t(a.target).closest("a").data("account");var o=e.find(this.model.accounts.models,function(e){return e.get("id")==i});this.contentManager.messenger.send("update:panelActivity:masked",{panelId:7000004});var s=o.get("email"),l=o.get("username"),c=o.get("password");l&&0!=l.length||(l=s),s&&0!=s.length||(s=l),this.fillFields("login",{email:s,username:l,password:c,accountId:o.id},"changepassword"),this.closePanel()}});return o}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.changepassword_helper_password_panel=e.template(function(e,t,a,n){a=a||e.helpers,n=n||e.partials;var i,r,o,s="",l=this,c="function",d=a.helperMissing,u=void 0,p=this.escapeExpression;return s+='<div class="newpanel">\n    <!-- Generate Password -->\n    <div class="left-panel">\n    <a href="#" class="mmKeyOption password strongPassword lessOptions"><div class="element mask" id="pass">\n      <span class="panelLeft">\n        <img class="iconPos" src="',i="/pages/images/2015panels/pass_green.png",o=a.assetUrl,r=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),i=typeof r===c?r.call(t,i,{hash:{}}):r===u?d.call(t,"assetUrl",i,{hash:{}}):r,s+=p(i)+'"/>\n        ',i="mm_password_helper_generateStrong",o=a.intl,r=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof r===c?r.call(t,i,{hash:{}}):r===u?d.call(t,"intl",i,{hash:{}}):r,s+=p(i)+'\n      </span>\n      </div>\n    </a>\n    <a href="#" class="mmKeyOption password lessOptions"><div class="element mask" id="options">\n      <span>\n        <img class="iconPos" src="',i="/pages/images/2015panels/pass_green.png",o=a.assetUrl,r=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),i=typeof r===c?r.call(t,i,{hash:{}}):r===u?d.call(t,"assetUrl",i,{hash:{}}):r,s+=p(i)+'" style="width:37px;height:21px;"/>\n        ',i="mm_new_password_helper_generate",o=a.intl,r=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof r===c?r.call(t,i,{hash:{}}):r===u?d.call(t,"intl",i,{hash:{}}):r,s+=p(i)+'\n      </span>\n    </div></a>\n    <!-- more options -->\n    <div class="password moreOptions" style="display:none;text-align:center;">\n        <div style="margin-top:10px;">\n            <input type="text" id="password-input" style="height:25px;"/>&nbsp;&nbsp;<img style="cursor:pointer;vertical-align:top;margin-top:4px;" id="refresh-password" src="',i="pages/images/pass_gen_refresh.png",o=a.assetUrl,r=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),i=typeof r===c?r.call(t,i,{hash:{}}):r===u?d.call(t,"assetUrl",i,{hash:{}}):r,s+=p(i)+'"/>\n        </div>\n        <div>\n            <label for="length">',i="mm_new_password_helper_length",o=a.intl,r=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof r===c?r.call(t,i,{hash:{}}):r===u?d.call(t,"intl",i,{hash:{}}):r,s+=p(i)+'&nbsp;&nbsp;<input id="length" type="range" min="6" max="25" value="10" step="1"/>&nbsp;&nbsp;<span id="pw-length-number" style="color:#168AD3;">10</span></label>\n        </div>\n        <div>\n            <div style="width:50%;float:left;">\n                <label for="numbers"><input id="numbers" type="checkbox" checked/>&nbsp;&nbsp;',i="mm_new_password_helper_numbers",o=a.intl,r=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof r===c?r.call(t,i,{hash:{}}):r===u?d.call(t,"intl",i,{hash:{}}):r,s+=p(i)+'</label>\n            </div>\n            <div style="width:50%;float:right;">\n                <label for="special"><input id="special" type="checkbox" checked/>&nbsp;&nbsp;',i="mm_new_password_helper_special",o=a.intl,r=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof r===c?r.call(t,i,{hash:{}}):r===u?d.call(t,"intl",i,{hash:{}}):r,s+=p(i)+'</label>\n            </div>\n        </div>\n        <div style="margin-top:10px;margin-bottom:10px;">\n            <input type="button" id="fillIt" class="btn btn-success done" style="background:#168AD3;" value="',i="mm_new_password_helper_save",o=a.intl,r=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof r===c?r.call(t,i,{hash:{}}):r===u?d.call(t,"intl",i,{hash:{}}):r,s+=p(i)+'"/>\n        </div>\n    </div>\n    </div>\n    ',i=t,i=l.invokePartial(n["common.header"],"common.header",i,a,n),(i||0===i)&&(s+=i),s+="\n</div>"}),ABINE_DNTME.CompiledTemplates.changepassword_helper_password_panel}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_blur_panel=e.template(function(e,t,a){a=a||e.helpers;var n,i,r,o="",s="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return o+='<div class="panel compact">\n    <div class="content-wrap">\n        <div style="background:linear-gradient(45deg,#25519c,#46c8f9);text-align:center;">\n             <div class="links-wrapper">\n              <div class="links close-link" style="padding:5px;">\n                <img id="close" height="12px" width="12px" class="header-icon" src="',n="/pages/images/dnt_blur_growl_xclose.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,o+=d(n)+'">\n              </div>\n            </div>\n            <div style="padding-top:30px;padding-bottom:10px;">\n                <img class="thing" src="',n="/pages/images/dnt_blur_growl_dnt_logo.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}
}):i,o+=d(n)+'"/>\n            </div>\n            <div style="padding:0px;">\n                <p style="color:white;font-size:20px;">',n="mm_dntme_blur_isnow",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+'</p>\n            </div>\n            <div style="padding:5px;">\n                <img class="thing" src="',n="/pages/images/blur_growl.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,o+=d(n)+'"/>\n            </div>\n            <div style="padding:10px;">\n                <p style="color:white;font-size:20px;">',n="mm_dntme_blur_passwords",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+"<br>",n="mm_dntme_blur_privacy",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+'</p>\n            </div>\n            <div class="btn" style="margin-bottom:30px;background:#fff;box-shadow:0 2px 0 0 darkblue;">\n                <a id="seeBlur" href="#" style="color:#25519c;font-size:20px;line-height:1.5em;font-weight:bold;">',n="mm_dntme_blur_new",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+"</a>\n            </div>\n        </div>\n    </div>\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_blur_panel}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_a=e.template(function(e,t,a){a=a||e.helpers;var n,i,r,o="",s="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return o+='<div class="panel compact">\n    <div class="content-wrap">\n        <div class="page-content clearfix">\n            <div class="links close-link"></div>\n            <div class="one">',n="pageContent",r=a.child,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"child",n,{hash:{}}):i,o+=d(n)+'</div>\n            <div class="header-settings-link settings-link">\n                <img class="logo compact" src="',n="/pages/images/dnt-ui-header-settings-grey.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,o+=d(n)+'"/>\n            </div>\n        </div>\n    </div>\n    <div class="footer clearfix">\n        <div class="premium-a-link">\n            <img src="',n="pages/images/dnt-ui-footer-new.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,o+=d(n)+'"/>\n            ',n="mm_dntme_new_premium_added",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+'\n        </div>\n    </div>\n    <div class="header dntme">\n        <div class="logo-link">\n          <img class="logo" height="16px" width="17px" src="',n="/pages/images/dnt-ui-header-logo.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,o+=d(n)+'"/>\n          <span class="boldFont">Blur</span>\n        </div>\n    </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_a}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_b=e.template(function(e,t,a){a=a||e.helpers;var n,i,r,o="",s="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return o+='<div class="panel compact">\n    <div class="content-wrap">\n        <div class="page-content clearfix">\n            <div class="links close-link"></div>\n            <div class="one">',n="pageContent",r=a.child,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"child",n,{hash:{}}):i,o+=d(n)+'</div>\n            <div class="header-settings-link settings-link">\n                <img class="logo compact" src="',n="/pages/images/dnt-ui-header-settings.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,o+=d(n)+'"/>\n            </div>\n        </div>\n    </div>\n    <div class="footer clearfix">\n        <div class="premium-b-link">\n            <img src="',n="pages/images/dnt-ui-footer-heart.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,o+=d(n)+'"/>\n          ',n="mm_dntme_support_online_privacy",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+'\n        </div>\n    </div>\n    <div class="header dntme">\n        <div class="logo-link">\n          <img class="logo" height="16px" width="17px" src="',n="/pages/images/dnt-ui-header-logo.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,o+=d(n)+'"/>\n          <span class="boldFont">Blur</span>\n        </div>\n    </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_b}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_c=e.template(function(e,t,a){a=a||e.helpers;var n,i,r,o="",s="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return o+='<div class="panel compact">\n    <div class="content-wrap">\n        <div class="page-content clearfix">\n            <div class="one">',n="pageContent",r=a.child,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"child",n,{hash:{}}):i,o+=d(n)+'</div>\n        </div>\n    </div>\n    <div class="header dntme clearfix">\n        <div class="logo-link-compact">\n          <img class="logo" height="13px" width="13px" src="',n="/pages/images/dnt-ui-header-logo.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,o+=d(n)+'"/>\n          <span class="boldFont">Blur</span>\n        </div>\n        <div class="links-wrapper">\n          <div class="links close-link">\n            <img id="close" height="12px" width="12px" class="header-icon" src="',n="/pages/images/dnt-ui-header-close.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,o+=d(n)+'">\n          </div>\n        </div>\n    </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_c}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_d=e.template(function(e,t,a,n,i){function r(e){var t,n,i="";return i+='\n        <div class="header" id="complete-setup-div" style="text-align:center;margin-bottom:10px;"><input type="button" id="complete-setup" class="btn btn-primary" value=\'',t="mm_dntme_complete_setup_button",l=a.intl,n=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===p?n.call(e,t,{hash:{}}):n===h?m.call(e,"intl",t,{hash:{}}):n,i+=_(t)+"'/></div>\n    "}a=a||e.helpers;var o,s,l,c,d="",u=this,p="function",m=a.helperMissing,h=void 0,_=this.escapeExpression;return d+='<div class="panel compact">\n    <div class="content-wrap">\n        <div class="page-content clearfix">\n            <div class="one">',o="pageContent",l=a.child,s=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),o=typeof s===p?s.call(t,o,{hash:{}}):s===h?m.call(t,"child",o,{hash:{}}):s,d+=_(o)+"</div>\n        </div>\n    </div>\n    ",l=a.registered,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"registered"),s=a.unless,c=u.program(1,r,i),c.hash={},c.fn=c,c.inverse=u.noop,o=s.call(t,o,c),(o||0===o)&&(d+=o),d+='\n    <div class="header dntme clearfix">\n        <div class="logo-link-compact">\n          <img class="logo" height="13px" width="13px" src="',o="/pages/images/dnt-ui-header-logo.png",l=a.assetUrl,s=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof s===p?s.call(t,o,{hash:{}}):s===h?m.call(t,"assetUrl",o,{hash:{}}):s,d+=_(o)+'"/>\n          <span class="boldFont">Blur</span>\n        </div>\n        <div class="links-wrapper">\n          <div class="links close-link">\n            <img id="close" height="12px" width="12px" class="header-icon" src="',o="/pages/images/dnt-ui-header-close.png",l=a.assetUrl,s=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof s===p?s.call(t,o,{hash:{}}):s===h?m.call(t,"assetUrl",o,{hash:{}}):s,d+=_(o)+'">\n          </div>\n        </div>\n    </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_d}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_e=e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+="\n        ",c=a.notNow,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"notNow"),i=a.unless,d=p.program(2,o,t),d.hash={},d.fn=d,d.inverse=p.noop,n=i.call(e,n,d),(n||0===n)&&(r+=n),r+="\n    "}function o(e){var t,n,i="";return i+='\n            <div class="header" id="complete-setup-div" style="text-align:center;margin-bottom:90px;">\n                <div id="welcome-message" style="text-transform:none;">',t="mm_dntme_join_and_protect_1",c=a.intl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"intl",t,{hash:{}}):n,i+=f(t)+"<br/>",t="mm_dntme_join_and_protect_2",c=a.intl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"intl",t,{hash:{}}):n,i+=f(t)+'</div>\n                <div id="error" style="display:none;color:red;text-transform:none;"></div>\n                <div id="progress-section" style="display:none">\n                    <div class="progress progress-striped active">\n                        <div class="bar bar-info" style="width: 100%;"></div>\n                    </div>\n                    <div class="loading-message" style="text-transform:none;"></div>\n                </div>\n                <div id="form-div">\n                <input class="span2" id="protect-email" type="text" style="width:130px;height:25px;margin:10px;" placeholder="',t="mm_dntme_enter_email_simple",c=a.intl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"intl",t,{hash:{}}):n,i+=f(t)+'"/>\n                <input type="button" id="not-now" class="btn" value=\'',t="mm_dntme_intrusive_not_now",c=a.intl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"intl",t,{hash:{}}):n,i+=f(t)+'\'/>\n                <input type="button" id="submit-email" class="btn btn-primary" value=\'',t="mm_dntme_intrusive_submit",c=a.intl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"intl",t,{hash:{}}):n,i+=f(t)+"'/>\n                </div>\n            </div>\n        "}a=a||e.helpers;var s,l,c,d,u="",p=this,m="function",h=a.helperMissing,_=void 0,f=this.escapeExpression;return u+='<div class="panel compact">\n    <div class="content-wrap">\n        <div class="page-content clearfix">\n            <div class="one">',s="pageContent",c=a.child,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"child",s,{hash:{}}):l,u+=f(s)+"</div>\n        </div>\n    </div>\n    ",c=a.registered,s=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"registered"),l=a.unless,d=p.program(1,r,i),d.hash={},d.fn=d,d.inverse=p.noop,s=l.call(t,s,d),(s||0===s)&&(u+=s),u+='\n    <div class="header dntme clearfix">\n        <div class="logo-link-compact">\n          <img class="logo" height="13px" width="13px" src="',s="/pages/images/dnt-ui-header-logo.png",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"assetUrl",s,{hash:{}}):l,u+=f(s)+'"/>\n          <span class="boldFont">Blur</span>\n        </div>\n        <div class="links-wrapper">\n          <div class="links close-link">\n            <img id="close" height="12px" width="12px" class="header-icon" src="',s="/pages/images/dnt-ui-header-close.png",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"assetUrl",s,{hash:{}}):l,u+=f(s)+'">\n          </div>\n        </div>\n    </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_e}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_f=e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+="\n        ",c=a.notNow,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"notNow"),i=a.unless,d=p.program(2,o,t),d.hash={},d.fn=d,d.inverse=p.noop,n=i.call(e,n,d),(n||0===n)&&(r+=n),r+="\n    "}function o(e){var t,n,i="";return i+='\n            <div class="header" id="complete-setup-div" style="text-align:center;margin-bottom:110px;">\n                <div id="welcome-message" style="text-transform:none;">',t="mm_dntme_complete_setup",c=a.intl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"intl",t,{hash:{}}):n,i+=f(t)+'</div>\n                <div id="error" style="display:none;color:red;text-transform:none;"></div>\n                <div id="progress-section" style="display:none">\n                    <div class="progress progress-striped active">\n                        <div class="bar bar-info" style="width: 100%;"></div>\n                    </div>\n                    <div class="loading-message" style="text-transform:none;"></div>\n                </div>\n                <div id="form-div">\n                <input class="span2" id="protect-email" type="text" style="width:130px;height:25px;margin:10px 10px 5px 10px;" placeholder="',t="mm_dntme_enter_email_simple",c=a.intl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"intl",t,{hash:{}}):n,i+=f(t)+'"/>\n                <input class="span2" id="password-field" type="password" style="width:130px;height:25px;margin:5px 10px 10px 10px;" placeholder="',t="mm_dntme_enter_password_simple",c=a.intl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"intl",t,{hash:{}}):n,i+=f(t)+'"/>\n                <input type="button" id="submit-email" class="btn btn-primary" value=\'',t="mm_dntme_intrusive_register",c=a.intl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"intl",t,{hash:{}}):n,i+=f(t)+"'/>\n                </div>\n            </div>\n        "}a=a||e.helpers;var s,l,c,d,u="",p=this,m="function",h=a.helperMissing,_=void 0,f=this.escapeExpression;return u+='<div class="panel compact">\n    <div class="content-wrap">\n        <div class="page-content clearfix">\n            <div class="one">',s="pageContent",c=a.child,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"child",s,{hash:{}}):l,u+=f(s)+"</div>\n        </div>\n    </div>\n    ",c=a.registered,s=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"registered"),l=a.unless,d=p.program(1,r,i),d.hash={},d.fn=d,d.inverse=p.noop,s=l.call(t,s,d),(s||0===s)&&(u+=s),u+='\n    <div class="header dntme clearfix">\n        <div class="logo-link-compact">\n          <img class="logo" height="13px" width="13px" src="',s="/pages/images/dnt-ui-header-logo.png",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"assetUrl",s,{hash:{}}):l,u+=f(s)+'"/>\n          <span class="boldFont">Blur</span>\n        </div>\n        <div class="links-wrapper">\n          <div class="links close-link">\n            <img id="close" height="12px" width="12px" class="header-icon" src="',s="/pages/images/dnt-ui-header-close.png",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"assetUrl",s,{hash:{}}):l,u+=f(s)+'">\n          </div>\n        </div>\n    </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_f}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_medal=e.template(function(e,t,a){a=a||e.helpers;var n,i,r,o="",s="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return o+='<div class="panel compact">\n    <div class="content-wrap">\n        <div class="page-content clearfix">\n            <div class="links close-link"></div>\n            <div class="one">',n="pageContent",r=a.child,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"child",n,{hash:{}}):i,o+=d(n)+'</div>\n            <div class="header-settings-link settings-link">\n                <img class="logo compact" src="',n="/pages/images/dnt-ui-header-settings-grey.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,o+=d(n)+'"/>\n            </div>\n        </div>\n    </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_medal}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_weekly_report=e.template(function(e,t,a){a=a||e.helpers;var n,i,r,o="",s="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return o+='<div class="panel compact">\n    <div class="content-wrap">\n        <div class="page-content clearfix">\n            <div class="links close-link"></div>\n            <div class="one">',n="pageContent",r=a.child,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"child",n,{hash:{}}):i,o+=d(n)+'</div>\n            <div class="header-settings-link settings-link">\n                <img class="logo compact" src="',n="/pages/images/dnt-ui-header-settings-grey.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,o+=d(n)+'"/>\n            </div>\n        </div>\n    </div>\n    <div class="footer weeklyReport clearfix">\n        <img src="',n="pages/images/dnt-ui-weekly-report.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,o+=d(n)+'"/>\n        <span></span>',n="mm_dntme_weekly_report_title",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+" &rarr;\n    </div>\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_weekly_report}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_accounts=e.template(function(e,t,a,n,i){function r(){return"off"}function o(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_on_rememberaccounts",D=a.intl,n=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===C?n.call(e,t,{hash:{}}):n===B?S.call(e,"intl",t,{hash:{}}):n,i+=P(t)+'"'}function s(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_off_rememberaccounts",D=a.intl,n=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===C?n.call(e,t,{hash:{}}):n===B?S.call(e,"intl",t,{hash:{}}):n,i+=P(t)+'"'}function l(){return"off"}function c(){return"on"}function d(){return"off"}function u(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_on_helpmelogin",D=a.intl,n=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===C?n.call(e,t,{hash:{}}):n===B?S.call(e,"intl",t,{hash:{}}):n,i+=P(t)+'"'}function p(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_off_helpmelogin",D=a.intl,n=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===C?n.call(e,t,{hash:{}}):n===B?S.call(e,"intl",t,{hash:{}}):n,i+=P(t)+'"'}function m(){return"off"}function h(){return"on"}function _(){return"off"}function f(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_on_submit_account",D=a.intl,n=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===C?n.call(e,t,{hash:{}}):n===B?S.call(e,"intl",t,{hash:{}}):n,i+=P(t)+'"'}function g(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_off_submit_account",D=a.intl,n=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===C?n.call(e,t,{hash:{}}):n===B?S.call(e,"intl",t,{hash:{}}):n,i+=P(t)+'"'}function y(){return"off"}function b(){return"on"}function v(){return"off"}function w(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_on_suggeststrongpassword",D=a.intl,n=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===C?n.call(e,t,{hash:{}}):n===B?S.call(e,"intl",t,{hash:{}}):n,i+=P(t)+'"'}function k(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_off_suggeststrongpassword",D=a.intl,n=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===C?n.call(e,t,{hash:{}}):n===B?S.call(e,"intl",t,{hash:{}}):n,i+=P(t)+'"'}function E(){return"off"}function A(){return"on"}a=a||e.helpers;var T,N,D,M,I="",x=this,C="function",S=a.helperMissing,B=void 0,P=this.escapeExpression;return I+='<div id="account" class="clearfix setting-row ',D=a.blacklist,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),T=null===T||void 0===T||T===!1?T:ABINE_DNTME.Duckbone.Handlebars.getAttr(T,"accountOff"),N=a["if"],M=x.program(1,r,i),M.hash={},M.fn=M,M.inverse=x.noop,T=N.call(t,T,M),(T||0===T)&&(I+=T),I+='" data-type="blacklist" data-name="save_account">\n  <div class="message" style="width:160px;" title=',D=a.blacklist,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),T=null===T||void 0===T||T===!1?T:ABINE_DNTME.Duckbone.Handlebars.getAttr(T,"accountOff"),N=a["if"],M=x.program(3,o,i),M.hash={},M.fn=M,M.inverse=x.program(5,s,i),T=N.call(t,T,M),(T||0===T)&&(I+=T),I+=">",T="mm_dntme_accounts_save_account",D=a.intl,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),T=typeof N===C?N.call(t,T,{hash:{}}):N===B?S.call(t,"intl",T,{hash:{}}):N,I+=P(T)+'</div>\n  <div class="word switch ',D=a.blacklist,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),T=null===T||void 0===T||T===!1?T:ABINE_DNTME.Duckbone.Handlebars.getAttr(T,"accountOff"),N=a["if"],M=x.program(7,l,i),M.hash={},M.fn=M,M.inverse=x.program(9,c,i),T=N.call(t,T,M),(T||0===T)&&(I+=T),I+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',T="mm_dntme_for_this_site",D=a.intl,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),T=typeof N===C?N.call(t,T,{hash:{}}):N===B?S.call(t,"intl",T,{hash:{}}):N,I+=P(T)+'</div>\n</div>\n\n<div id="account" class="clearfix setting-row ',D=a.blacklist,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),T=null===T||void 0===T||T===!1?T:ABINE_DNTME.Duckbone.Handlebars.getAttr(T,"loginOff"),N=a["if"],M=x.program(11,d,i),M.hash={},M.fn=M,M.inverse=x.noop,T=N.call(t,T,M),(T||0===T)&&(I+=T),I+='" data-type="blacklist" data-name="account">\n  <div class="message" style="width:160px;" title=',D=a.blacklist,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),T=null===T||void 0===T||T===!1?T:ABINE_DNTME.Duckbone.Handlebars.getAttr(T,"loginOff"),N=a["if"],M=x.program(13,u,i),M.hash={},M.fn=M,M.inverse=x.program(15,p,i),T=N.call(t,T,M),(T||0===T)&&(I+=T),I+=">",T="mm_dntme_accounts_help_login",D=a.intl,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),T=typeof N===C?N.call(t,T,{hash:{}}):N===B?S.call(t,"intl",T,{hash:{}}):N,I+=P(T)+'</div>\n  <div class="word switch ',D=a.blacklist,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),T=null===T||void 0===T||T===!1?T:ABINE_DNTME.Duckbone.Handlebars.getAttr(T,"loginOff"),N=a["if"],M=x.program(17,m,i),M.hash={},M.fn=M,M.inverse=x.program(19,h,i),T=N.call(t,T,M),(T||0===T)&&(I+=T),I+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',T="mm_dntme_for_this_site",D=a.intl,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),T=typeof N===C?N.call(t,T,{hash:{}}):N===B?S.call(t,"intl",T,{hash:{}}):N,I+=P(T)+'</div>\n</div>\n\n<div id="submit_account" class="clearfix setting-row ',D=a.blacklist,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),T=null===T||void 0===T||T===!1?T:ABINE_DNTME.Duckbone.Handlebars.getAttr(T,"submitAccountOff"),N=a["if"],M=x.program(21,_,i),M.hash={},M.fn=M,M.inverse=x.noop,T=N.call(t,T,M),(T||0===T)&&(I+=T),I+='" data-type="blacklist" data-name="submit_account">\n  <div class="message" style="width:160px;" title=',D=a.blacklist,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),T=null===T||void 0===T||T===!1?T:ABINE_DNTME.Duckbone.Handlebars.getAttr(T,"submitAccountOff"),N=a["if"],M=x.program(23,f,i),M.hash={},M.fn=M,M.inverse=x.program(25,g,i),T=N.call(t,T,M),(T||0===T)&&(I+=T),I+=">",T="mm_dntme_accounts_submit_account",D=a.intl,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),T=typeof N===C?N.call(t,T,{hash:{}}):N===B?S.call(t,"intl",T,{hash:{}}):N,I+=P(T)+'</div>\n  <div class="word switch ',D=a.blacklist,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),T=null===T||void 0===T||T===!1?T:ABINE_DNTME.Duckbone.Handlebars.getAttr(T,"submitAccountOff"),N=a["if"],M=x.program(27,y,i),M.hash={},M.fn=M,M.inverse=x.program(29,b,i),T=N.call(t,T,M),(T||0===T)&&(I+=T),I+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',T="mm_dntme_for_this_site",D=a.intl,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),T=typeof N===C?N.call(t,T,{hash:{}}):N===B?S.call(t,"intl",T,{hash:{}}):N,I+=P(T)+'</div>\n</div>\n\n<div id="password" class="clearfix setting-row ',D=a.blacklist,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),T=null===T||void 0===T||T===!1?T:ABINE_DNTME.Duckbone.Handlebars.getAttr(T,"passwordOff"),N=a["if"],M=x.program(31,v,i),M.hash={},M.fn=M,M.inverse=x.noop,T=N.call(t,T,M),(T||0===T)&&(I+=T),I+='" data-type="blacklist" data-name="password">\n  <div class="message" style="width:160px;" title=',D=a.blacklist,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),T=null===T||void 0===T||T===!1?T:ABINE_DNTME.Duckbone.Handlebars.getAttr(T,"passwordOff"),N=a["if"],M=x.program(33,w,i),M.hash={},M.fn=M,M.inverse=x.program(35,k,i),T=N.call(t,T,M),(T||0===T)&&(I+=T),I+=">",T="mm_dntme_accounts_password",D=a.intl,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),T=typeof N===C?N.call(t,T,{hash:{}}):N===B?S.call(t,"intl",T,{hash:{}}):N,I+=P(T)+'</div>\n  <div class="word switch ',D=a.blacklist,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),T=null===T||void 0===T||T===!1?T:ABINE_DNTME.Duckbone.Handlebars.getAttr(T,"passwordOff"),N=a["if"],M=x.program(37,E,i),M.hash={},M.fn=M,M.inverse=x.program(39,A,i),T=N.call(t,T,M),(T||0===T)&&(I+=T),I+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',T="mm_dntme_for_this_site",D=a.intl,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),T=typeof N===C?N.call(t,T,{hash:{}}):N===B?S.call(t,"intl",T,{hash:{}}):N,I+=P(T)+"</div>\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_accounts}),ABINE_DNTME.define("abine/views/accountsDashboard",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/views/pageTracker","abine/views/settingsChanged","abine/views/dntmePageBase","abine/timer"],function(e,t,a,n,i,r,o,s,l,c,d){var u=c.extend({templateName:"dntme_dashboard_accounts",events:{"click .setting-row":"toggleSwitch","click .more-settings":"showSettings","click .go-back":"goBack","click a.accountsDashboard":"accountsDashboard"},afterInitialize:function(){if(this.doc=this.el.document,this.options.highlight){var t=this.$("#"+this.options.highlight);t&&t[0]&&(t[0].scrollIntoView(),t.addClass("highlight"))}this.options.timeout&&d.setTimeout(e.bind(function(){this.trigger("close")},this),this.options.timeout)},goBack:function(){this.trigger("change-dashboard","dashboard")},accountsDashboard:function(e){e.preventDefault(),o.webapp.openAccounts(),this.trigger("close")},createChildren:function(){return this.children={},this.children}});return u}),ABINE_DNTME.define("abine/views/dashboard",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/views/pageTracker","abine/intl","abine/timer","abine/responseCodes","abine/views/settingsDashboard"],function(e,t,a,n,i,r,o,s,l,c,d,u){var p=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i,m=a.View.extend({tagName:"div",templateName:"dntme_dashboard_login",afterInitialize:function(){this.doc=this.el.ownerDocument;var e=this;c.setTimeout(function(){e.trigger("mask-passwords")},100)}}),h=a.View.extend({tagName:"div",templateName:"dntme_dashboard_main_grid",afterInitialize:function(){this.doc=this.el.ownerDocument}}),_=a.View.extend({tagName:"div",templateName:"dntme_dashboard_main",className:"dntme_dashboard",events:{"click .show-details":"showChildDashboard","click #register":"register","click #login":"login","submit #frm":"loginOrRegister","click #forgotPassword":"forgotPassword","click #whySignIn":"whySignIn","click .cell":"showChildDashboard","click .main-tracker-title":"showChildDashboard","click #switchLogin":"switchLogin","click #accountSwitch":"triggerSettings","click #walletSwitch":"triggerSettings","click #maskingSwitch":"triggerSettings","click #trackingSwitch":"triggerSettings"},showInlineSettings:function(e,a){t(".mobileCell, .syncCell, .dntme_dntStats",this.el.ownerDocument).hide(),t(".trackingCell, .maskingCell",this.el.ownerDocument).removeClass("b"),this.$("#inline-site-settings").show(),this.settingsView?(this.settingsView.options.highlight=e,this.settingsView.options.switchTo=a,this.settingsView.reload()):(this.settingsView=this.getInlineSettings(e,a),delete this.options.highlight)},getInlineSettings:function(t,a){var n=this.model,i=this.globalData,r=new u({el:this.$("#inline-site-settings")[0],inline:!0,tabData:n,globalData:i,doc:this.el.ownerDocument,messenger:this.messenger,highlight:t,contentManager:this.contentManager,settingsView:"site-settings",switchTo:a});return r.transferEvents(["resize","max-height"],this),n.on("settings-changed",e.debounce(e.bind(function(){this.model.fetch({success:e.bind(function(){this.children.mainGrid.render()},this)})},this),500)),r},triggerSettings:function(a){for(var n="off",i=a.target;!t(i).data("group");)i=i.parentNode;if(this.$(i).hasClass("on")&&(n="on"),!t(i).data("changing"))return t(i).data("changing",!0),t(".knob",i).animate({marginLeft:"on"==n?0:20},e.bind(function(){t(i).removeData("changing"),t(i).toggleClass("on").toggleClass("off")})),this.showInlineSettings(t(i).data("group"),n),a.preventDefault(),!1},afterInitialize:function(){this.toolBarPanelId=7000066,this.messenger.send("update:panelActivity:impression",{panelId:this.toolBarPanelId}),this.model.get("loggedIn")?this.messenger.send("update:panelActivity:masked",{panelId:this.toolBarPanelId}):this.messenger.send("update:panelActivity:disclosed",{panelId:this.toolBarPanelId}),this.doc=this.el.ownerDocument,this.messenger=this.options.messenger,this.contentManager=this.options.contentManager,t("#protect-email, #password-field",this.el).css("height","25px"),this.options.highlight&&(this.model.get("loggedIn")?r.setTimeout(e.bind(function(){this.showInlineSettings(this.options.highlight,"no-switch"),delete this.options.highlight},this),500):delete this.options.highlight)},
switchLogin:function(e){e.preventDefault(),t(".lockBit",this.el).hide(),t("#login",this.el).val(l.getText("mm_dntme_sign_in")),t(".loginBit",this.el).show(),t("#protect-email",this.el).val(""),this.contentManager.preferences.removePref("oldEmail"),this.contentManager.preferences.setPref("loginNotLock","true")},whySignIn:function(e){e.preventDefault(),this.trigger("change-dashboard","login_help")},showChildDashboard:function(e){e.preventDefault();var a=t(e.target).data("dashboard");return a||(a=t(e.target.parentNode).data("dashboard")),"anywhere"==a?(this.model.get("hasMobileApp")||o.webapp.openDntAnywhere(),void this.trigger("close")):"accounts"==a?void this.accountsDashboard():"masking"==a?void this.maskingDashboard():"wallet"==a?void this.walletDashboard():void this.trigger("change-dashboard",a)},accountsDashboard:function(){o.webapp.openAccounts(),this.trigger("close")},maskingDashboard:function(){o.webapp.openMasking(),this.trigger("close")},walletDashboard:function(){o.webapp.openWallet(),this.trigger("close")},forgotPassword:function(e){e.preventDefault(),this.messenger.send("update:panelActivity:closed",{panelId:this.toolBarPanelId}),o.webapp.openForgotPassword(),this.trigger("close")},loginOrRegister:function(e){this.model.get("email")?this.login(e):this.register(e)},login:function(a){function n(e,a){try{m.get(0).ownerDocument&&(t(".loading-message",m).text(l.getText("mm_loading_display_login")),e<a&&(h=c.setTimeout(function(){n(e+1,a)},500)))}catch(e){}}a&&a.preventDefault(),this.trigger("ignore-blur",!0);var i=this.$("#protect-email").val(),r=this.$("#password-field").val(),s=this.$("#mfa-code-field").val(),d=this.$("#error");if(d.hide(),!i.match(p))return this.$("#welcome-message").hide(),d.text(l.getText("mm_dntme_invalid_email")).show(),this.trigger("resize"),void this.trigger("ignore-blur",!1);if(0==r.length)return this.$("#welcome-message").hide(),d.text(l.getText("mm_dntme_invalid_password")).show(),this.trigger("resize"),void this.trigger("ignore-blur",!1);var u={email:i,password:r,mfa_code:s},m=this.$("#progress-section");m.height(this.$("#form-div").height()-10);var h=null;n(0,20),m.show(),this.$("#form-div").hide(),o.licenseModule.login(u,e.bind(function(t,a){this.trigger("ignore-blur",!1),this.processRegistration(t,a,u,e.bind(function(e){c.clearTimeout(h),m.hide(),e||(this.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),this.$("#complete-setup-div").hide(),this.trigger("change-dashboard","dashboard"))},this))},this)),this.trigger("resize")},register:function(a){function n(e,a){try{u.get(0).ownerDocument&&(t(".loading-message",u).text(l.getText("mm_loading_display_register_use"+Math.floor(e/10))),e<a&&(m=c.setTimeout(function(){n(e+1,a)},500)))}catch(e){}}a&&a.preventDefault(),this.trigger("ignore-blur",!0),this.$("#welcome-message").show();var i=this.$("#protect-email").val(),r=this.$("#password-field").val(),s=this.$("#error");if(s.hide(),!i.match(p))return this.$("#welcome-message").hide(),s.text(l.getText("mm_dntme_invalid_email")).show(),this.trigger("resize"),void this.trigger("ignore-blur",!1);if(0==r.length)return this.$("#welcome-message").hide(),s.text(l.getText("mm_dntme_invalid_password")).show(),this.trigger("resize"),void this.trigger("ignore-blur",!1);var d={email:i,password:r,password_hint:l.getText("mm_pwhint_default"),register_type:"dnt_panel",send_password_email:!1},u=this.$("#progress-section");u.height(this.$("#form-div").height()-10);var m=null;n(0,40),u.show(),this.$("#form-div").hide(),o.licenseModule.register(d,e.bind(function(t,a){this.trigger("ignore-blur",!1),this.processRegistration(t,a,d,e.bind(function(e){c.clearTimeout(m),u.hide(),e||(this.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),this.$("#complete-setup-div").hide(),c.setTimeout(function(){o.webapp.openTour()},1e3),this.trigger("close"))},this))},this)),this.trigger("resize")},processRegistration:function(t,a,n,i){if(t){this.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId});var r=l.getText("mm_dntme_register_error"),s=t.responseJSON&&t.responseJSON.data?t.responseJSON.data.errors:null;"invalid email address"==t.responseJSON.error_code?r=l.getText("mm_dntme_invalid_email_server_error"):"mfa code required"==t.responseJSON.error_code?(r="You have enabled 2-factor authentication.  Please enter authentication code below:",this.$("#login-section").hide(),this.$("#mfa-section").show(),this.$("#error, #progress-section").hide(),this.$("#complete-setup-div, #form-div").show(),this.trigger("render")):"wrong password"==t.responseJSON.error_code?r=l.getText("mm_dntme_wrong_password"):"no account found for email"==t.responseJSON.error_code?r=l.getText("mm_dntme_wrong_email"):"version not allowed"==t.responseJSON.error_code?r=l.getText("mm_dntme_version_not_allowed"):"account has been locked"==t.responseJSON.error_code?r=l.getText("mm_dntme_account_locked"):t.responseJSON.error_code==d.SCHEDULED_DOWNTIME?r=l.getText("mm_dntme_server_maintenance"):s&&s.email&&("has already been taken"==s.email[0]?r=l.getText("mm_dntme_duplicate_email",[n.email]):"was used for MaskMe Heavy"==s.email[0]&&(r=l.getText("mm_dntme_version_not_allowed"))),this.$("#error").html(r).show(),t.responseJSON&&t.responseJSON.data&&1==t.responseJSON.data.generated_password&&this.$("#error #loginButton").click(e.bind(function(e){return o.webapp.openPasswordSetupPage(n.email),e.preventDefault(),!1},this)),this.$("#error #retryEmail, #error #loginButton").click(e.bind(this.retryEmail,this)),this.$("#error #dnt2upgrade").click(o.webapp.openDnt2UpgradePage),this.trigger("resize"),i(r)}else this.trigger("refresh-preferences"),i()},retryEmail:function(e){e&&e.preventDefault(),this.$("#error, #progress-section").hide(),this.$("#complete-setup-div, #form-div").show(),this.trigger("render")},createChildren:function(){return this.children={trackersTitle:new s.TitleView({model:this.model,doc:this.el.ownerDocument}),mainGrid:new h({model:this.model,doc:this.el.ownerDocument})},this.globalData=this.globalData||new n.GlobalData({messenger:this.options.messenger}),this.model.showSettings&&(this.settingsView=this.getInlineSettings(this.options.highlight,"no-switch"),delete this.options.highlight),this.children.trackersTitle.transferEvents(["open:understanding:tracker"],this),this.model.get("loggedIn")||(this.model.get("email")?this.panelId=2000011:this.panelId=3000011,this.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.children.loginSection=new m({model:this.model,doc:this.el.ownerDocument}),this.children.loginSection.transferEvents(["mask-passwords"],this)),this.children}});return _}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_ignore_settings=e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+=' \n  <div id="bl-save_account-region" class="ignore-region" style="max-height:185px;overflow: scroll;">\n    ',ne=a.blacklistCollection,n=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),i=a.each,ie=oe.program(2,o,t),ie.hash={},ie.fn=ie,ie.inverse=oe.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='\n  </div>\n  <div id="bl-account-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',ne=a.blacklistCollection,n=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),i=a.each,ie=oe.program(8,d,t),ie.hash={},ie.fn=ie,ie.inverse=oe.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='\n  </div>\n  <div id="bl-submit_account-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',ne=a.blacklistCollection,n=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),i=a.each,ie=oe.program(14,h,t),ie.hash={},ie.fn=ie,ie.inverse=oe.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='\n  </div>\n  <div id="bl-save_card-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',ne=a.blacklistCollection,n=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),i=a.each,ie=oe.program(20,y,t),ie.hash={},ie.fn=ie,ie.inverse=oe.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='\n  </div>\n  <div id="bl-identity-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',ne=a.blacklistCollection,n=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),i=a.each,ie=oe.program(26,k,t),ie.hash={},ie.fn=ie,ie.inverse=oe.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='\n  </div>\n  <div id="bl-tracker-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',ne=a.blacklistCollection,n=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),i=a.each,ie=oe.program(32,N,t),ie.hash={},ie.fn=ie,ie.inverse=oe.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='\n  </div>\n  <div id="bl-address-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',ne=a.blacklistCollection,n=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),i=a.each,ie=oe.program(38,x,t),ie.hash={},ie.fn=ie,ie.inverse=oe.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='\n  </div>\n  <div id="bl-card-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',ne=a.blacklistCollection,n=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),i=a.each,ie=oe.program(44,P,t),ie.hash={},ie.fn=ie,ie.inverse=oe.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='\n  </div>\n  <div id="bl-email-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',ne=a.blacklistCollection,n=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),i=a.each,ie=oe.program(50,R,t),ie.hash={},ie.fn=ie,ie.inverse=oe.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='\n  </div>\n  <div id="bl-password-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',ne=a.blacklistCollection,n=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),i=a.each,ie=oe.program(56,q,t),ie.hash={},ie.fn=ie,ie.inverse=oe.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='\n  </div>\n  <div id="bl-phone-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',ne=a.blacklistCollection,n=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),i=a.each,ie=oe.program(62,G,t),ie.hash={},ie.fn=ie,ie.inverse=oe.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='\n  </div>\n    <div id="bl-real_card-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',ne=a.blacklistCollection,n=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),i=a.each,ie=oe.program(68,Y,t),ie.hash={},ie.fn=ie,ie.inverse=oe.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='\n  </div>\n  <div class="blacklist-entry blacklist-empty" style="margin-left:2em;display:none">',n="mm_dntme_settings_ignore_no_results",ne=a.intl,i=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===se?i.call(e,n,{hash:{}}):i===ce?le.call(e,"intl",n,{hash:{}}):i,r+=de(n)+'. <a href="#" class="clear-blacklist-search">',n="mm_dntme_settings_ignore_clear_search",ne=a.intl,i=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===se?i.call(e,n,{hash:{}}):i===ce?le.call(e,"intl",n,{hash:{}}):i,r+=de(n)+'</a></div>\n  </br>\n  <input style="margin-left:3em;height:2.5em" type="text" id="blacklist-search" placeholder="Search">\n  <div style="margin-left:6em;display:none" id="blacklist-no-entry">',n="mm_dntme_settings_ignore_no_web",ne=a.intl,i=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===se?i.call(e,n,{hash:{}}):i===ce?le.call(e,"intl",n,{hash:{}}):i,r+=de(n)+"</div>\n  "}function o(e,t){var n,i,r="";return r+="\n      ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"save_account"),i=a["if"],ie=oe.program(3,s,t),ie.hash={},ie.fn=ie,ie.inverse=oe.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+="\n    "}function s(e,t){var n,i,r="";return r+='<div class="container-',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+' blacklist-entry setting-row" data-name="save_account" data-type="blacklist" data-domain="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'" data-id="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.id",{hash:{}})),r+=de(n)+'">\n        <div class="message">',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'</div>\n        <div class="word switch ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"save_account"),i=a["if"],ie=oe.program(4,l,t),ie.hash={},ie.fn=ie,ie.inverse=oe.program(6,c,t),n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='" style="float:right;"\n        >\n          <div class="knob"></div>\n        </div>\n      </div>'}function l(){return"off"}function c(){return"on"}function d(e,t){var n,i,r="";return r+="\n      ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"account"),i=a["if"],ie=oe.program(9,u,t),ie.hash={},ie.fn=ie,ie.inverse=oe.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+="\n    "}function u(e,t){var n,i,r="";return r+='<div class="container-',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+' blacklist-entry setting-row" data-name="account" data-type="blacklist" data-domain="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'" data-id="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.id",{hash:{}})),r+=de(n)+'">\n        <div class="message">',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'</div>\n        <div class="word switch ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"account"),i=a["if"],ie=oe.program(10,p,t),ie.hash={},ie.fn=ie,ie.inverse=oe.program(12,m,t),n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function p(){return"off"}function m(){return"on"}function h(e,t){var n,i,r="";return r+="\n      ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"submit_account"),i=a["if"],ie=oe.program(15,_,t),ie.hash={},ie.fn=ie,ie.inverse=oe.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+="\n    "}function _(e,t){var n,i,r="";return r+='<div class="container-',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+' blacklist-entry setting-row" data-name="submit_account" data-type="blacklist" data-domain="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'" data-id="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.id",{hash:{}})),r+=de(n)+'">\n        <div class="message">',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'</div>\n        <div class="word switch ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"submit_account"),i=a["if"],ie=oe.program(16,f,t),ie.hash={},ie.fn=ie,ie.inverse=oe.program(18,g,t),n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function f(){return"off"}function g(){return"on"}function y(e,t){var n,i,r="";return r+="\n      ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"save_card"),i=a["if"],ie=oe.program(21,b,t),ie.hash={},ie.fn=ie,ie.inverse=oe.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+="\n    "}function b(e,t){var n,i,r="";return r+='<div class="container-',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+' blacklist-entry setting-row" data-name="save_card" data-type="blacklist" data-domain="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'" data-id="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.id",{hash:{}})),r+=de(n)+'">\n        <div class="message">',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'</div>\n        <div class="word switch ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"save_card"),i=a["if"],ie=oe.program(22,v,t),ie.hash={},ie.fn=ie,ie.inverse=oe.program(24,w,t),n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function v(){return"off"}function w(){return"on"}function k(e,t){var n,i,r="";return r+="\n      ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"identity"),i=a["if"],ie=oe.program(27,E,t),ie.hash={},ie.fn=ie,ie.inverse=oe.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+="\n    "}function E(e,t){var n,i,r="";return r+='<div class="container-',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+' blacklist-entry setting-row" data-name="identity" data-type="blacklist" data-domain="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'" data-id="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.id",{hash:{}})),r+=de(n)+'">\n        <div class="message">',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'</div>\n        <div class="word switch ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"identity"),i=a["if"],ie=oe.program(28,A,t),ie.hash={},ie.fn=ie,ie.inverse=oe.program(30,T,t),n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function A(){return"off"}function T(){return"on"}function N(e,t){var n,i,r="";return r+="\n      ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"tracker"),i=a["if"],ie=oe.program(33,D,t),ie.hash={},ie.fn=ie,ie.inverse=oe.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+="\n    "}function D(e,t){var n,i,r="";return r+='<div class="container-',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+' blacklist-entry setting-row" data-name="tracker" data-type="blacklist" data-domain="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'" data-id="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.id",{hash:{}})),r+=de(n)+'">\n        <div class="message">',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'</div>\n        <div class="word switch ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"tracker"),i=a["if"],ie=oe.program(34,M,t),ie.hash={},ie.fn=ie,ie.inverse=oe.program(36,I,t),n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function M(){return"off"}function I(){return"on"}function x(e,t){var n,i,r="";return r+="\n      ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"address"),i=a["if"],ie=oe.program(39,C,t),ie.hash={},ie.fn=ie,ie.inverse=oe.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+="\n    "}function C(e,t){var n,i,r="";return r+='<div class="container-',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+' blacklist-entry setting-row" data-name="address" data-type="blacklist" data-domain="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'" data-id="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.id",{hash:{}})),r+=de(n)+'">\n        <div class="message">',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'</div>\n        <div class="word switch ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"address"),i=a["if"],ie=oe.program(40,S,t),ie.hash={},ie.fn=ie,ie.inverse=oe.program(42,B,t),n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function S(){return"off"}function B(){return"on"}function P(e,t){var n,i,r="";return r+="\n      ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"card"),i=a["if"],ie=oe.program(45,z,t),ie.hash={},ie.fn=ie,ie.inverse=oe.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+="\n    "}function z(e,t){var n,i,r="";return r+='<div class="container-',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+' blacklist-entry setting-row" data-name="card" data-type="blacklist" data-domain="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'" data-id="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.id",{hash:{}})),r+=de(n)+'">\n        <div class="message">',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'</div>\n        <div class="word switch ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"card"),i=a["if"],ie=oe.program(46,F,t),ie.hash={},ie.fn=ie,ie.inverse=oe.program(48,O,t),n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function F(){return"off"}function O(){return"on"}function R(e,t){var n,i,r="";return r+="\n      ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),i=a["if"],ie=oe.program(51,H,t),ie.hash={},ie.fn=ie,ie.inverse=oe.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+="\n    "}function H(e,t){var n,i,r="";return r+='<div class="container-',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+' blacklist-entry setting-row" data-name="email" data-type="blacklist" data-domain="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'" data-id="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.id",{hash:{}})),r+=de(n)+'">\n        <div class="message">',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'</div>\n        <div class="word switch ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),i=a["if"],ie=oe.program(52,L,t),ie.hash={},ie.fn=ie,ie.inverse=oe.program(54,j,t),n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function L(){return"off"}function j(){return"on"}function q(e,t){var n,i,r="";return r+="\n      ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"password"),i=a["if"],ie=oe.program(57,U,t),ie.hash={},ie.fn=ie,ie.inverse=oe.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+="\n    "}function U(e,t){var n,i,r="";return r+='<div class="container-',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+' blacklist-entry setting-row" data-name="password" data-type="blacklist" data-domain="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'" data-id="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.id",{hash:{}})),r+=de(n)+'">\n        <div class="message">',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'</div>\n        <div class="word switch ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"password"),i=a["if"],ie=oe.program(58,V,t),ie.hash={},ie.fn=ie,ie.inverse=oe.program(60,W,t),n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function V(){return"off"}function W(){return"on"}function G(e,t){var n,i,r="";return r+="\n      ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"phone"),i=a["if"],ie=oe.program(63,$,t),ie.hash={},ie.fn=ie,ie.inverse=oe.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+="\n    "}function $(e,t){var n,i,r="";return r+='<div class="container-',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+' blacklist-entry setting-row" data-name="phone" data-type="blacklist" data-domain="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'" data-id="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.id",{hash:{}})),r+=de(n)+'">\n        <div class="message">',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'</div>\n        <div class="word switch ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"phone"),i=a["if"],ie=oe.program(64,K,t),ie.hash={},ie.fn=ie,ie.inverse=oe.program(66,J,t),n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function K(){return"off"}function J(){return"on"}function Y(e,t){var n,i,r="";return r+="\n      ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"real_card"),i=a["if"],ie=oe.program(69,X,t),ie.hash={},ie.fn=ie,ie.inverse=oe.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+="\n    "}function X(e,t){var n,i,r="";return r+='<div class="container-',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+' blacklist-entry setting-row" data-name="real_card" data-type="blacklist" data-domain="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'" data-id="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.id",{hash:{}})),r+=de(n)+'">\n        <div class="message">',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===se?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'</div>\n        <div class="word switch ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"real_card"),i=a["if"],ie=oe.program(70,Z,t),ie.hash={},ie.fn=ie,ie.inverse=oe.program(72,Q,t),n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function Z(){return"off"}function Q(){return"on"}function ee(e){var t,n,i="";return i+='\n    <div style="margin-left:6em">',t="mm_dntme_settings_ignore_no_web",ne=a.intl,n=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===se?n.call(e,t,{hash:{}}):n===ce?le.call(e,"intl",t,{hash:{}}):n,i+=de(t)+"</div>\n  "}a=a||e.helpers;var te,ae,ne,ie,re="",oe=this,se="function",le=a.helperMissing,ce=void 0,de=this.escapeExpression;return re+='<div id="ignore-container">\n  <div style="margin-left:2em">',te="mm_dntme_settings_ignore_list_for",ne=a.intl,ae=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),te=typeof ae===se?ae.call(t,te,{hash:{}}):ae===ce?le.call(t,"intl",te,{hash:{}}):ae,re+=de(te)+': <br/><select id="ignore-dropdown" style="width:90%">\n    <option style=\'text-align:left;\' value="account">',te="mm_dntme_settings_ignore_dd_account_auto",ne=a.intl,ae=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),te=typeof ae===se?ae.call(t,te,{hash:{}}):ae===ce?le.call(t,"intl",te,{hash:{}}):ae,re+=de(te)+"</option>\n    <option style='text-align:left;' value=\"submit_account\" selected>",te="mm_dntme_settings_ignore_dd_submit_account",ne=a.intl,ae=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),te=typeof ae===se?ae.call(t,te,{hash:{}}):ae===ce?le.call(t,"intl",te,{hash:{}}):ae,re+=de(te)+"</option>\n    <option style='text-align:left;' value=\"save_account\" selected>",te="mm_dntme_settings_ignore_dd_account_save",ne=a.intl,ae=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),te=typeof ae===se?ae.call(t,te,{hash:{}}):ae===ce?le.call(t,"intl",te,{hash:{}}):ae,re+=de(te)+"</option>\n    <option style='text-align:left;' value=\"save_card\">",te="mm_dntme_settings_ignore_dd_save_card",ne=a.intl,ae=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),te=typeof ae===se?ae.call(t,te,{hash:{}}):ae===ce?le.call(t,"intl",te,{hash:{}}):ae,re+=de(te)+"</option>\n    <option style='text-align:left;' value=\"address\">",te="mm_dntme_settings_ignore_dd_address_auto",ne=a.intl,ae=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),te=typeof ae===se?ae.call(t,te,{hash:{}}):ae===ce?le.call(t,"intl",te,{hash:{}}):ae,re+=de(te)+"</option>\n    <option style='text-align:left;' value=\"real_card\">",te="mm_dntme_settings_ignore_dd_cc_auto",ne=a.intl,ae=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),te=typeof ae===se?ae.call(t,te,{hash:{}}):ae===ce?le.call(t,"intl",te,{hash:{}}):ae,re+=de(te)+"</option>\n    <option style='text-align:left;' value=\"card\">",te="mm_dntme_settings_ignore_dd_cc_mask",ne=a.intl,ae=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),te=typeof ae===se?ae.call(t,te,{hash:{}}):ae===ce?le.call(t,"intl",te,{hash:{}}):ae,re+=de(te)+"</option>\n    <option style='text-align:left;' value=\"email\">",te="mm_dntme_settings_ignore_dd_email_mask",ne=a.intl,ae=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),te=typeof ae===se?ae.call(t,te,{hash:{}}):ae===ce?le.call(t,"intl",te,{hash:{}}):ae,re+=de(te)+"</option>\n    <option style='text-align:left;' value=\"phone\">",te="mm_dntme_settings_ignore_dd_phone_mask",ne=a.intl,ae=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),te=typeof ae===se?ae.call(t,te,{hash:{}}):ae===ce?le.call(t,"intl",te,{hash:{}}):ae,re+=de(te)+"</option>\n    <option style='text-align:left;' value=\"password\">",te="mm_dntme_settings_ignore_dd_pw",ne=a.intl,ae=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),te=typeof ae===se?ae.call(t,te,{hash:{}}):ae===ce?le.call(t,"intl",te,{hash:{}}):ae,re+=de(te)+"</option>\n    <option style='text-align:left;' value=\"identity\">",te="mm_dntme_settings_ignore_dd_identity",ne=a.intl,ae=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),te=typeof ae===se?ae.call(t,te,{hash:{}}):ae===ce?le.call(t,"intl",te,{hash:{}}):ae,re+=de(te)+"</option>\n    <option style='text-align:left;' value=\"tracker\">",te="mm_dntme_settings_ignore_dd_tracker",ne=a.intl,ae=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),te=typeof ae===se?ae.call(t,te,{hash:{}}):ae===ce?le.call(t,"intl",te,{hash:{}}):ae,re+=de(te)+"</option>\n  </select>\n  </div>\n  </br>\n  ",ne=a.blacklistCollection,te=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklistCollection"),ae=a["if"],ie=oe.program(1,r,i),ie.hash={},ie.fn=ie,ie.inverse=oe.program(74,ee,i),te=ae.call(t,te,ie),(te||0===te)&&(re+=te),re+="\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_ignore_settings}),ABINE_DNTME.define("abine/views/ignoreSettings",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/views/pageTracker","abine/views/settingsChanged","abine/views/dntmePageBase","abine/timer"],function(e,t,a,n,i,r,o,s,l,c,d){
var u=c.extend({templateName:"dntme_dashboard_ignore_settings",events:{"click .setting-row":"toggleSwitch","click .more-settings":"showSettings","click .go-back":"goBack","change #ignore-dropdown":"toggleSection","keyup #blacklist-search":"blacklistSearch","click .clear-blacklist-search":"clearBlacklistSearch"},afterInitialize:function(){if(this.toggleSection(),this.doc=this.el.document,this.options.highlight){var t=this.$("#"+this.options.highlight);t&&t[0]&&(t[0].scrollIntoView(),t.addClass("highlight"))}this.options.timeout&&d.setTimeout(e.bind(function(){this.trigger("close")},this),this.options.timeout)},goBack:function(){this.trigger("change-dashboard","dashboard")},createChildren:function(){return this.children={},this.children},toggleSection:function(){this.$(".ignore-region").hide(),this.$("#bl-"+this.$("#ignore-dropdown").val()+"-region").show();var e=this.$("#bl-"+this.$("#ignore-dropdown").val()+"-region div.blacklist-entry:visible");0==e.length?(this.$("#blacklist-no-entry").show(),this.$("#blacklist-search").hide()):(this.$("#blacklist-no-entry").hide(),this.$("#blacklist-search").show()),this.trigger("resize")},blacklistSearch:function(){var e=this.$("#blacklist-search").val().replace(".","\\.");e=e.replace(/[^a-z0-9\\.\s]/gi,"").replace(/[_\s]/g,""),this.$(".blacklist-entry").hide();var t=this.$(".blacklist-entry[class*="+e+"]");t.length>0||""==e?(t.show(),this.$(".blacklist-empty").hide()):this.$(".blacklist-empty").show(),this.trigger("resize")},clearBlacklistSearch:function(e){return this.$("#blacklist-search").val(""),this.blacklistSearch(),e.preventDefault(),!1}});return u}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_login=e.template(function(e,t,a,n,i){function r(){return"display:none;"}function o(){return"display:none;"}function s(e,t){var n,i,r="";return r+='\n  \n  <div id="form-div">\n\n    <div id="login-section">\n      <div style="clear:both;display:block;width:0px;max-width:0px;height:0px;max-height:0px;overflow:hidden;opacity:0;"\n           class="autofill-grabber"><input type="text" autocomplete="off" id="login_email" tabindex="-1"><input type="password" autocomplete="off" id="login_password" tabindex="-1">\n      </div>\n      <input id="protect-email" class="loginBit" type="text" value="',b=a.email,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),typeof n===E?n=n.call(e,{hash:{}}):n===T&&(n=A.call(e,"email",{hash:{}})),r+=N(n)+'" style="width:230px;margin:10px 10px 5px 10px;height:25;',b=a.unlockScreen,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"unlockScreen"),i=a["if"],v=k.program(6,l,t),v.hash={},v.fn=v,v.inverse=k.noop,n=i.call(e,n,v),(n||0===n)&&(r+=n),r+='" placeholder="',n="mm_dntme_enter_email_simple",b=a.intl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===E?i.call(e,n,{hash:{}}):i===T?A.call(e,"intl",n,{hash:{}}):i,r+=N(n)+'"/><br/>\n      <input id="password-field" type="password" style="width:230px;margin:5px 10px 10px 10px;height:25;" placeholder="',n="mm_dntme_enter_password_simple",b=a.intl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===E?i.call(e,n,{hash:{}}):i===T?A.call(e,"intl",n,{hash:{}}):i,r+=N(n)+'"/>\n    </div>\n\n    <div id="mfa-section" style="display:none;">\n      <input type="text" id="mfa-code-field" style="width:230px;height:25px;margin:5px 10px 10px 10px" name="mfa_code" placeholder="Authentication Code" />\n    </div>\n    <input type="',b=a.loginNotRegister,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"loginNotRegister"),i=a["if"],v=k.program(8,c,t),v.hash={},v.fn=v,v.inverse=k.program(10,d,t),n=i.call(e,n,v),(n||0===n)&&(r+=n),r+='" id="login" class="btn btn-success" value=\'',b=a.unlockScreen,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"unlockScreen"),i=a["if"],v=k.program(12,u,t),v.hash={},v.fn=v,v.inverse=k.program(14,p,t),n=i.call(e,n,v),(n||0===n)&&(r+=n),r+="'/>\n    <input type=\"",b=a.loginNotRegister,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"loginNotRegister"),i=a.unless,v=k.program(16,m,t),v.hash={},v.fn=v,v.inverse=k.program(18,h,t),n=i.call(e,n,v),(n||0===n)&&(r+=n),r+='" style="',b=a.unlockScreen,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"unlockScreen"),i=a["if"],v=k.program(20,_,t),v.hash={},v.fn=v,v.inverse=k.noop,n=i.call(e,n,v),(n||0===n)&&(r+=n),r+='" id="register" class="loginBit btn btn-primary" value=\'',n="mm_dntme_create_account",b=a.intl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===E?i.call(e,n,{hash:{}}):i===T?A.call(e,"intl",n,{hash:{}}):i,r+=N(n)+'\'/>\n    <input type="button" style="',b=a.unlockScreen,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"unlockScreen"),i=a.unless,v=k.program(22,f,t),v.hash={},v.fn=v,v.inverse=k.noop,n=i.call(e,n,v),(n||0===n)&&(r+=n),r+='" id="switchLogin" class="btn btn-primary lockBit" value=\'',n="mm_dntme_use_another_account",b=a.intl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===E?i.call(e,n,{hash:{}}):i===T?A.call(e,"intl",n,{hash:{}}):i,r+=N(n)+'\'/>\n    <br/>\n  </div>\n  <a href="" id="forgotPassword">',n="mm_dntme_forgot_my_password",b=a.intl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===E?i.call(e,n,{hash:{}}):i===T?A.call(e,"intl",n,{hash:{}}):i,r+=N(n)+"</a><br/>\n  "}function l(){return"display:none;"}function c(){return"submit"}function d(){return"button"}function u(e){var t,n;return t="mm_dntme_unlock",b=a.intl,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===E?n.call(e,t,{hash:{}}):n===T?A.call(e,"intl",t,{hash:{}}):n,N(t)}function p(e){var t,n;return t="mm_dntme_sign_in",b=a.intl,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===E?n.call(e,t,{hash:{}}):n===T?A.call(e,"intl",t,{hash:{}}):n,N(t)}function m(){return"submit"}function h(){return"button"}function _(){return"display:none;"}function f(){return"display:none;"}a=a||e.helpers;var g,y,b,v,w="",k=this,E="function",A=a.helperMissing,T=void 0,N=this.escapeExpression,D=a.blockHelperMissing;return w+='<div class="login_overlay"></div>\n\n<div class="login_form">\n\n  <div id="welcome-message">\n\n    <span class="lockBit" style="',b=a.unlockScreen,g=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"unlockScreen"),y=a.unless,v=k.program(1,r,i),v.hash={},v.fn=v,v.inverse=k.noop,g=y.call(t,g,v),(g||0===g)&&(w+=g),w+='">',g="mm_dntme_unlock_your",b=a.intl,y=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),g=typeof y===E?y.call(t,g,{hash:{}}):y===T?A.call(t,"intl",g,{hash:{}}):y,w+=N(g)+'</span>\n    <span class="loginBit" style="',b=a.unlockScreen,g=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"unlockScreen"),y=a["if"],v=k.program(3,o,i),v.hash={},v.fn=v,v.inverse=k.noop,g=y.call(t,g,v),(g||0===g)&&(w+=g),w+='">',g="mm_dntme_sign_in_to_your",b=a.intl,y=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),g=typeof y===E?y.call(t,g,{hash:{}}):y===T?A.call(t,"intl",g,{hash:{}}):y,w+=N(g)+'</span>\n    <img class="logo" height="16px" width="17px" src="',g="/pages/images/dnt-ui-header-logo.png",b=a.assetUrl,y=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),g=typeof y===E?y.call(t,g,{hash:{}}):y===T?A.call(t,"assetUrl",g,{hash:{}}):y,w+=N(g)+'"/>\n    <span class="boldFont">Blur</span>\n    ',g="mm_dntme_sign_in_to_your_account",b=a.intl,y=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),g=typeof y===E?y.call(t,g,{hash:{}}):y===T?A.call(t,"intl",g,{hash:{}}):y,w+=N(g)+'\n  </div>\n  \n  <div id="error" style="display:none;color:white;text-transform:none;"></div>\n  \n  <div id="progress-section" style="display:none;margin-top:10px;">\n    <div class="progress progress-striped active">\n      <div class="bar bar-info" style="width: 100%;"></div>\n    </div>\n    <div class="loading-message" style="text-transform:none;"></div>\n  </div>\n  \n  ',g="frm",b=a.form,y=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"form"),v=k.program(5,s,i),v.hash={},v.fn=v,v.inverse=k.noop,g=b&&typeof y===E?y.call(t,g,v):D.call(t,y,g,v),(g||0===g)&&(w+=g),w+="\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_login}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_login_help=e.template(function(e,t,a){a=a||e.helpers;var n,i,r,o="",s="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return o+='<div class="settings-header clearfix">\n  <div class="go-back"><img src="',n="/pages/images/back.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,o+=d(n)+'" width="18px;"/> ',n="mm_dntme_back",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+'</div>\n  <div class="title"><img class="logo" height="24px" width="24px" src="',n="/pages/images/Icon-48.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,o+=d(n)+'"/>\n    <span class="boldFont">Blur</span></div>\n</div>\n<div class="login_help">\n  <h3>',n="mm_dntme_dashboard_login_help_title1",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+"</h3>\n  <p>",n="mm_dntme_dashboard_login_help_body11",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+"</p>\n  <h3>",n="mm_dntme_dashboard_login_help_title2",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+"</h3>\n  <p>",n="mm_dntme_dashboard_login_help_body21",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+"</p>\n  <p>",n="mm_dntme_dashboard_login_help_body22",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+"</p>\n  <p>",n="mm_dntme_dashboard_login_help_body23",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+"</p>\n  <h3>",n="mm_dntme_dashboard_login_help_title3",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+"</h3>\n  <p>",n="mm_dntme_dashboard_login_help_body31",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+"</p>\n  <p>",n="mm_dntme_dashboard_login_help_body32",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+"</p>\n  <p>",n="mm_dntme_dashboard_login_help_body33",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+"</p>\n  <h3>",n="mm_dntme_dashboard_login_help_title4",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+"</h3>\n  <p>",n="mm_dntme_dashboard_login_help_body41",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+"</p>\n  <p>",n="mm_dntme_dashboard_login_help_body42",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,o+=d(n)+"</p>\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_login_help}),ABINE_DNTME.define("abine/views/loginHelp",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/views/pageTracker","abine/views/settingsChanged","abine/views/dntmePageBase"],function(e,t,a,n,i,r,o,s,l,c){var d=c.extend({templateName:"dntme_dashboard_login_help",events:{"click .go-back":"goBack"},afterInitialize:function(){this.doc=this.el.document},goBack:function(){this.trigger("change-dashboard","dashboard")}});return d}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_main=e.template(function(e,t,a,n,i){function r(){return"disabled"}function o(e,t){var n,i,r="";return r+=" ",E=a.trackers,n=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"length"),i=a.unless,A=N.program(4,s,t),A.hash={},A.fn=A,A.inverse=N.noop,n=i.call(e,n,A),(n||0===n)&&(r+=n),r}function s(){return"no-trackers"}function l(e){var t,n,i="";return i+='<a href="" class="show-details" data-dashboard="tracking">',t="mm_dntme_dashboard_show_details",E=a.intl,n=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===D?n.call(e,t,{hash:{}}):n===I?M.call(e,"intl",t,{hash:{}}):n,i+=x(t)+"</a>"}function c(){return'\n      <div id="inline-site-settings"></div>\n  '}function d(){return'\n      <div id="inline-site-settings" style="display: none;"></div>\n  '}function u(e,t){var n,i,r="";return r+='\n    <div class="mobileCell cell l b" data-dashboard="anywhere" style="font-size:10pt;text-align:center;',E=a.showSettings,n=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"showSettings"),i=a["if"],A=N.program(13,p,t),A.hash={},A.fn=A,A.inverse=N.noop,n=i.call(e,n,A),(n||0===n)&&(r+=n),r+='">\n      ',E=a.hasMobileApp,n=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"hasMobileApp"),i=a["if"],A=N.program(15,m,t),A.hash={},A.fn=A,A.inverse=N.program(17,h,t),n=i.call(e,n,A),(n||0===n)&&(r+=n),r+='\n    </div>\n    <div class="syncCell cell b" data-dashboard="dropbox" style="font-size:10pt;text-align:center;',E=a.showSettings,n=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"showSettings"),i=a["if"],A=N.program(19,_,t),A.hash={},A.fn=A,A.inverse=N.noop,n=i.call(e,n,A),(n||0===n)&&(r+=n),r+='">\n      ',E=a.entitledToSync,n=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"entitledToSync"),i=a["if"],A=N.program(21,f,t),A.hash={},A.fn=A,A.inverse=N.program(26,b,t),n=i.call(e,n,A),(n||0===n)&&(r+=n),r+="\n    </div>\n  "}function p(){return"display:none;"}function m(e){var t,n,i="";return i+="\n        ",t="mm_dntme_dashboard_has_mobile_app_1",E=a.intl,n=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===D?n.call(e,t,{hash:{}}):n===I?M.call(e,"intl",t,{hash:{}}):n,i+=x(t)+'<br/><span class="green">',t="mm_dntme_dashboard_has_mobile_app_2",E=a.intl,n=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===D?n.call(e,t,{hash:{}}):n===I?M.call(e,"intl",t,{hash:{}}):n,i+=x(t)+'</span>\n        <div class="btn disabled" style="height:9px;line-height:0.5;">',t="mm_dntme_dashboard_done",E=a.intl,n=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===D?n.call(e,t,{hash:{}}):n===I?M.call(e,"intl",t,{hash:{}}):n,i+=x(t)+"</div>\n      "}function h(e){var t,n,i="";return i+="\n        ",t="mm_dntme_dashboard_no_mobile_app_1",E=a.intl,n=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===D?n.call(e,t,{hash:{}}):n===I?M.call(e,"intl",t,{hash:{}}):n,i+=x(t)+'<br/><span class="red">',t="mm_dntme_dashboard_no_mobile_app_2",E=a.intl,n=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===D?n.call(e,t,{hash:{}}):n===I?M.call(e,"intl",t,{hash:{}}):n,i+=x(t)+"</span> ",t="mm_dntme_dashboard_no_mobile_app_3",E=a.intl,n=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===D?n.call(e,t,{hash:{}}):n===I?M.call(e,"intl",t,{hash:{}}):n,i+=x(t)+'<br/>\n        <div style="float:left;margin-left:15px;margin-right:-20px;color:red;font-size:18pt;"><strong>!</strong></div><div class="btn btn-danger" style="height:9px;line-height:0.5;">',t="mm_dntme_dashboard_get_app",E=a.intl,n=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===D?n.call(e,t,{hash:{}}):n===I?M.call(e,"intl",t,{hash:{}}):n,i+=x(t)+"</div>\n      "}function _(){return"display:none;"}function f(e,t){var n,i,r="";return r+="\n          ",E=a.dropboxEnabled,n=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"dropboxEnabled"),i=a["if"],A=N.program(22,g,t),A.hash={},A.fn=A,A.inverse=N.program(24,y,t),n=i.call(e,n,A),(n||0===n)&&(r+=n),r+="\n      "}function g(e){var t,n,i="";return i+="\n            ",t="mm_dntme_dashboard_has_dropbox_1",E=a.intl,n=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===D?n.call(e,t,{hash:{}}):n===I?M.call(e,"intl",t,{hash:{}}):n,i+=x(t)+'<br/><span class="green">',t="mm_dntme_dashboard_has_dropbox_2",E=a.intl,n=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===D?n.call(e,t,{hash:{}}):n===I?M.call(e,"intl",t,{hash:{}}):n,i+=x(t)+'</span>\n            <div class="btn disabled" style="height:9px;line-height:0.5;">',t="mm_dntme_dashboard_done",E=a.intl,n=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===D?n.call(e,t,{hash:{}}):n===I?M.call(e,"intl",t,{hash:{}}):n,i+=x(t)+"</div>\n          "}function y(e){var t,n,i="";return i+="\n            ",t="mm_dntme_dashboard_no_dropbox_1",E=a.intl,n=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===D?n.call(e,t,{hash:{}}):n===I?M.call(e,"intl",t,{hash:{}}):n,i+=x(t)+'<br/><span class="red">',t="mm_dntme_dashboard_no_dropbox_2",E=a.intl,n=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===D?n.call(e,t,{hash:{}}):n===I?M.call(e,"intl",t,{hash:{}}):n,i+=x(t)+"</span> ",t="mm_dntme_dashboard_no_dropbox_3",E=a.intl,n=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===D?n.call(e,t,{hash:{}}):n===I?M.call(e,"intl",t,{hash:{}}):n,i+=x(t)+'<br/>\n            <div style="float:left;margin-left:15px;margin-right:-20px;color:red;font-size:18pt;"><strong>!</strong></div><div class="btn btn-danger" style="height:9px;line-height:0.5;">',t="mm_dntme_dashboard_setup_sync",E=a.intl,n=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===D?n.call(e,t,{hash:{}}):n===I?M.call(e,"intl",t,{hash:{}}):n,i+=x(t)+"</div>\n          "}function b(e){var t,n,i="";return i+="\n        ",t="mm_dntme_dashboard_no_sync_1",E=a.intl,n=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===D?n.call(e,t,{hash:{}}):n===I?M.call(e,"intl",t,{hash:{}}):n,i+=x(t)+'<br/><span class="red">',t="mm_dntme_dashboard_no_sync_2",E=a.intl,n=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===D?n.call(e,t,{hash:{}}):n===I?M.call(e,"intl",t,{hash:{}}):n,i+=x(t)+'</span><br/>\n        <div style="float:left;margin-left:15px;margin-right:-20px;color:red;font-size:18pt;"><strong>!</strong></div><div class="btn btn-danger" style="height:9px;line-height:0.5;">',t="mm_dntme_dashboard_premium",E=a.intl,n=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===D?n.call(e,t,{hash:{}}):n===I?M.call(e,"intl",t,{hash:{}}):n,i+=x(t)+"</div>\n      "}function v(e){var t,n,i="";return i+="\n    ",t="loginSection",E=a.child,n=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),t=typeof n===D?n.call(e,t,{hash:{}}):n===I?M.call(e,"child",t,{hash:{}}):n,i+=x(t)+"\n  "}a=a||e.helpers;var w,k,E,A,T="",N=this,D="function",M=a.helperMissing,I=void 0,x=this.escapeExpression;return T+='<div class="dashboard_title">\n  <div class="section off others clearfix">\n    <div class="section-header clearfix ',E=a.disabled,w=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"disabled"),k=a["if"],A=N.program(1,r,i),A.hash={},A.fn=A,A.inverse=N.program(3,o,i),w=k.call(t,w,A),(w||0===w)&&(T+=w),T+='">\n      ',w="trackersTitle",E=a.child,k=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),w=typeof k===D?k.call(t,w,{hash:{}}):k===I?M.call(t,"child",w,{hash:{}}):k,T+=x(w)+"\n    </div>\n  </div>\n  ",E=a.loggedIn,w=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"loggedIn"),k=a.unless,A=N.program(6,l,i),A.hash={},A.fn=A,A.inverse=N.noop,w=k.call(t,w,A),(w||0===w)&&(T+=w),T+='\n</div>\n<div class="grid clearfix">\n  ',w="mainGrid",E=a.child,k=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),w=typeof k===D?k.call(t,w,{hash:{}}):k===I?M.call(t,"child",w,{hash:{}}):k,T+=x(w)+"\n  ",E=a.showSettings,w=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"showSettings"),k=a["if"],A=N.program(8,c,i),A.hash={},A.fn=A,A.inverse=N.program(10,d,i),w=k.call(t,w,A),(w||0===w)&&(T+=w),T+="\n  ",E=a.hasMobileAppAndDropboxEnabled,w=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasMobileAppAndDropboxEnabled"),k=a.unless,A=N.program(12,u,i),A.hash={},A.fn=A,A.inverse=N.noop,w=k.call(t,w,A),(w||0===w)&&(T+=w),T+="\n  ",E=a.loggedIn,w=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"loggedIn"),k=a.unless,A=N.program(28,v,i),A.hash={},A.fn=A,A.inverse=N.noop,w=k.call(t,w,A),(w||0===w)&&(T+=w),T+="\n</div>\n"}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_main}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_main_grid=e.template(function(e,t,a,n,i){function r(){return"off"}function o(){return"on"}function s(){return"off"}function l(){return"on"}function c(){return"b"}function d(){return"off"}function u(){return"on"}function p(){return"b"}function m(){return"off"}function h(){return"on"}a=a||e.helpers;var _,f,g,y,b,v,w="",k=this,E="function",A=a.helperMissing,T=void 0,N=this.escapeExpression,D=a.blockHelperMissing;return w+='<div class="cell l" data-dashboard="accounts">\n  <img style="margin-top:-10px" src="',_="pages/images/accounts.png",b=a.assetUrl,f=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),_=typeof f===E?f.call(t,_,{hash:{}}):f===T?A.call(t,"assetUrl",_,{hash:{}}):f,w+=N(_)+'" /><span class="title">',_="mm_dntme_dashboard_accounts",b=a.intl,f=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),_=typeof f===E?f.call(t,_,{hash:{}}):f===T?A.call(t,"intl",_,{hash:{}}):f,w+=N(_)+'</span>\n  <div style="position:absolute;top:18px;left:110px;" id="accountSwitch" data-group="acctGroup" class="word switch ',b=a.blacklist,_=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),_=null===_||void 0===_||_===!1?_:ABINE_DNTME.Duckbone.Handlebars.getAttr(_,"passwordOff"),b=a.blacklist,f=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),f=null===f||void 0===f||f===!1?f:ABINE_DNTME.Duckbone.Handlebars.getAttr(f,"loginOff"),b=a.blacklist,g=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),g=null===g||void 0===g||g===!1?g:ABINE_DNTME.Duckbone.Handlebars.getAttr(g,"accountOff"),b=a.if_all,y=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"if_all"),v=k.program(1,r,i),v.hash={},v.fn=v,v.inverse=k.program(3,o,i),_=b&&typeof y===E?y.call(t,g,f,_,v):D.call(t,y,g,f,_,v),(_||0===_)&&(w+=_),w+='">\n    <div class="knob"></div>\n  </div>\n</div>\n<div class="cell" data-dashboard="wallet">\n  <img style="margin-top:-10px" src="',_="pages/images/wallet.png",b=a.assetUrl,f=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),_=typeof f===E?f.call(t,_,{hash:{}}):f===T?A.call(t,"assetUrl",_,{hash:{}}):f,w+=N(_)+'" /><span class="title">',_="mm_dntme_dashboard_wallet",b=a.intl,f=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),_=typeof f===E?f.call(t,_,{hash:{}}):f===T?A.call(t,"intl",_,{hash:{}}):f,w+=N(_)+'</span>\n  <div style="position:absolute;top:18px;right:5px;" id="walletSwitch" data-group="walletGroup" class="word switch ',b=a.blacklist,_=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),_=null===_||void 0===_||_===!1?_:ABINE_DNTME.Duckbone.Handlebars.getAttr(_,"addressOff"),b=a.blacklist,f=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),f=null===f||void 0===f||f===!1?f:ABINE_DNTME.Duckbone.Handlebars.getAttr(f,"cardOff"),b=a.blacklist,g=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),g=null===g||void 0===g||g===!1?g:ABINE_DNTME.Duckbone.Handlebars.getAttr(g,"realCardOff"),b=a.if_all,y=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"if_all"),v=k.program(5,s,i),v.hash={},v.fn=v,v.inverse=k.program(7,l,i),_=b&&typeof y===E?y.call(t,g,f,_,v):D.call(t,y,g,f,_,v),(_||0===_)&&(w+=_),w+='">\n    <div class="knob"></div>\n  </div>\n</div>\n<div class="maskingCell cell l ',b=a.hasMobileAppAndDropboxEnabled,_=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasMobileAppAndDropboxEnabled"),f=a["if"],v=k.program(9,c,i),v.hash={},v.fn=v,v.inverse=k.noop,_=f.call(t,_,v),(_||0===_)&&(w+=_),w+='" data-dashboard="masking">\n  <img style="margin-top:-10px" src="',_="pages/images/masking.png",b=a.assetUrl,f=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),_=typeof f===E?f.call(t,_,{hash:{}}):f===T?A.call(t,"assetUrl",_,{hash:{}}):f,w+=N(_)+'" /><span class="title">',_="mm_dntme_dashboard_masking",b=a.intl,f=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),_=typeof f===E?f.call(t,_,{hash:{}}):f===T?A.call(t,"intl",_,{hash:{}}):f,w+=N(_)+'</span>\n  <div style="position:absolute;top:70px;left:110px;" id="maskingSwitch" data-group="maskingGroup" class="word switch ',b=a.blacklist,_=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),_=null===_||void 0===_||_===!1?_:ABINE_DNTME.Duckbone.Handlebars.getAttr(_,"cardOff"),b=a.blacklist,f=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),f=null===f||void 0===f||f===!1?f:ABINE_DNTME.Duckbone.Handlebars.getAttr(f,"phoneOff"),b=a.blacklist,g=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),g=null===g||void 0===g||g===!1?g:ABINE_DNTME.Duckbone.Handlebars.getAttr(g,"emailOff"),b=a.if_all,y=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"if_all"),v=k.program(11,d,i),v.hash={},v.fn=v,v.inverse=k.program(13,u,i),_=b&&typeof y===E?y.call(t,g,f,_,v):D.call(t,y,g,f,_,v),(_||0===_)&&(w+=_),w+='">\n    <div class="knob"></div>\n  </div>\n</div>\n<div class="trackingCell cell ',b=a.hasMobileAppAndDropboxEnabled,_=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasMobileAppAndDropboxEnabled"),f=a["if"],v=k.program(15,p,i),v.hash={},v.fn=v,v.inverse=k.noop,_=f.call(t,_,v),(_||0===_)&&(w+=_),w+='" data-dashboard="tracking">\n  <img style="margin-top:-10px" src="',_="pages/images/tracking.png",b=a.assetUrl,f=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),_=typeof f===E?f.call(t,_,{hash:{}}):f===T?A.call(t,"assetUrl",_,{hash:{}}):f,w+=N(_)+'" /><span class="title">',_="mm_dntme_dashboard_tracking",b=a.intl,f=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),_=typeof f===E?f.call(t,_,{hash:{}}):f===T?A.call(t,"intl",_,{hash:{}}):f,w+=N(_)+'</span>\n  <div style="position:absolute;top:70px;right:5px;" id="trackingSwitch" data-group="trackingGroup" class="word switch ',b=a.blacklist,_=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),_=null===_||void 0===_||_===!1?_:ABINE_DNTME.Duckbone.Handlebars.getAttr(_,"trackerOff"),b=a.if_all,f=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"if_all"),v=k.program(17,m,i),v.hash={},v.fn=v,v.inverse=k.program(19,h,i),_=b&&typeof f===E?f.call(t,_,v):D.call(t,f,_,v),(_||0===_)&&(w+=_),w+='">\n    <div class="knob"></div>\n  </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_main_grid}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_masking=e.template(function(e,t,a,n,i){function r(){return"off"}function o(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_on_card",E=a.intl,n=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===D?n.call(e,t,{hash:{}}):n===I?M.call(e,"intl",t,{hash:{}}):n,i+=x(t)+'"'}function s(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_off_card",E=a.intl,n=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===D?n.call(e,t,{hash:{}}):n===I?M.call(e,"intl",t,{hash:{}}):n,i+=x(t)+'"'}function l(){return"off"}function c(){return"on"}function d(){return"off"}function u(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_on_email",E=a.intl,n=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===D?n.call(e,t,{hash:{}}):n===I?M.call(e,"intl",t,{hash:{}}):n,i+=x(t)+'"'}function p(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_off_email",E=a.intl,n=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===D?n.call(e,t,{hash:{}}):n===I?M.call(e,"intl",t,{hash:{}}):n,i+=x(t)+'"'}function m(){return"off"}function h(){return"on"}function _(){return"off"}function f(){return"off"}function g(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_on_phone",E=a.intl,n=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===D?n.call(e,t,{hash:{}}):n===I?M.call(e,"intl",t,{hash:{}}):n,i+=x(t)+'"'}function y(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_off_phone",E=a.intl,n=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===D?n.call(e,t,{hash:{}}):n===I?M.call(e,"intl",t,{hash:{}}):n,i+=x(t)+'"'}function b(){return"off"}function v(){return"on"}a=a||e.helpers;var w,k,E,A,T="",N=this,D="function",M=a.helperMissing,I=void 0,x=this.escapeExpression;return T+='<div id="card" class="clearfix setting-row ',E=a.blacklist,w=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),w=null===w||void 0===w||w===!1?w:ABINE_DNTME.Duckbone.Handlebars.getAttr(w,"cardOff"),k=a["if"],A=N.program(1,r,i),A.hash={},A.fn=A,A.inverse=N.noop,w=k.call(t,w,A),(w||0===w)&&(T+=w),T+='" data-type="blacklist" data-name="card">\n  <div class="message" style="width:160px;" title=',E=a.blacklist,w=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),w=null===w||void 0===w||w===!1?w:ABINE_DNTME.Duckbone.Handlebars.getAttr(w,"cardOff"),k=a["if"],A=N.program(3,o,i),A.hash={},A.fn=A,A.inverse=N.program(5,s,i),w=k.call(t,w,A),(w||0===w)&&(T+=w),T+=">",w="mm_dntme_masking_card",E=a.intl,k=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),w=typeof k===D?k.call(t,w,{hash:{}}):k===I?M.call(t,"intl",w,{hash:{}}):k,T+=x(w)+'</div>\n  <div class="word switch ',E=a.blacklist,w=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),w=null===w||void 0===w||w===!1?w:ABINE_DNTME.Duckbone.Handlebars.getAttr(w,"cardOff"),k=a["if"],A=N.program(7,l,i),A.hash={},A.fn=A,A.inverse=N.program(9,c,i),w=k.call(t,w,A),(w||0===w)&&(T+=w),T+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',w="mm_dntme_for_this_site",E=a.intl,k=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),w=typeof k===D?k.call(t,w,{hash:{}}):k===I?M.call(t,"intl",w,{hash:{}}):k,T+=x(w)+'</div>\n</div>\n\n<div id="email" class="clearfix setting-row ',E=a.blacklist,w=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),w=null===w||void 0===w||w===!1?w:ABINE_DNTME.Duckbone.Handlebars.getAttr(w,"emailOff"),k=a["if"],A=N.program(11,d,i),A.hash={},A.fn=A,A.inverse=N.noop,w=k.call(t,w,A),(w||0===w)&&(T+=w),T+='" data-type="blacklist" data-name="email">\n  <div class="message" style="width:160px;" title=',E=a.blacklist,w=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),w=null===w||void 0===w||w===!1?w:ABINE_DNTME.Duckbone.Handlebars.getAttr(w,"emailOff"),k=a["if"],A=N.program(13,u,i),A.hash={},A.fn=A,A.inverse=N.program(15,p,i),w=k.call(t,w,A),(w||0===w)&&(T+=w),T+=">",w="mm_dntme_masking_email",E=a.intl,k=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),w=typeof k===D?k.call(t,w,{hash:{}}):k===I?M.call(t,"intl",w,{hash:{}}):k,T+=x(w)+'</div>\n  <div class="word switch ',E=a.blacklist,w=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),w=null===w||void 0===w||w===!1?w:ABINE_DNTME.Duckbone.Handlebars.getAttr(w,"emailOff"),k=a["if"],A=N.program(17,m,i),A.hash={},A.fn=A,A.inverse=N.program(19,h,i),w=k.call(t,w,A),(w||0===w)&&(T+=w),T+=" ",E=a.blacklist,w=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),w=null===w||void 0===w||w===!1?w:ABINE_DNTME.Duckbone.Handlebars.getAttr(w,"globalEmail"),k=a.unless,A=N.program(21,_,i),A.hash={},A.fn=A,A.inverse=N.noop,w=k.call(t,w,A),(w||0===w)&&(T+=w),T+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',w="mm_dntme_for_this_site",E=a.intl,k=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),w=typeof k===D?k.call(t,w,{hash:{}}):k===I?M.call(t,"intl",w,{hash:{}}):k,T+=x(w)+'</div>\n</div>\n\n<div id="phone" class="clearfix setting-row ',E=a.blacklist,w=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),w=null===w||void 0===w||w===!1?w:ABINE_DNTME.Duckbone.Handlebars.getAttr(w,"phoneOff"),k=a["if"],A=N.program(23,f,i),A.hash={},A.fn=A,A.inverse=N.noop,w=k.call(t,w,A),(w||0===w)&&(T+=w),T+='" data-type="blacklist" data-name="phone">\n  <div class="message" style="width:160px;" title=',
E=a.blacklist,w=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),w=null===w||void 0===w||w===!1?w:ABINE_DNTME.Duckbone.Handlebars.getAttr(w,"phoneOff"),k=a["if"],A=N.program(25,g,i),A.hash={},A.fn=A,A.inverse=N.program(27,y,i),w=k.call(t,w,A),(w||0===w)&&(T+=w),T+=">",w="mm_dntme_masking_phone",E=a.intl,k=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),w=typeof k===D?k.call(t,w,{hash:{}}):k===I?M.call(t,"intl",w,{hash:{}}):k,T+=x(w)+'</div>\n  <div class="word switch ',E=a.blacklist,w=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),w=null===w||void 0===w||w===!1?w:ABINE_DNTME.Duckbone.Handlebars.getAttr(w,"phoneOff"),k=a["if"],A=N.program(29,b,i),A.hash={},A.fn=A,A.inverse=N.program(31,v,i),w=k.call(t,w,A),(w||0===w)&&(T+=w),T+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',w="mm_dntme_for_this_site",E=a.intl,k=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),w=typeof k===D?k.call(t,w,{hash:{}}):k===I?M.call(t,"intl",w,{hash:{}}):k,T+=x(w)+"</div>\n</div>\n\n"}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_masking}),ABINE_DNTME.define("abine/views/maskingDashboard",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/views/pageTracker","abine/views/settingsChanged","abine/views/dntmePageBase","abine/timer"],function(e,t,a,n,i,r,o,s,l,c,d){var u=c.extend({templateName:"dntme_dashboard_masking",events:{"click .setting-row":"toggleSwitch","click .more-settings":"showSettings","click .go-back":"goBack","click a.maskingDashboard":"maskingDashboard"},afterInitialize:function(){if(this.doc=this.el.document,this.options.highlight){var t=this.$("#"+this.options.highlight);t&&t[0]&&(t[0].scrollIntoView(),t.addClass("highlight"))}this.options.timeout&&d.setTimeout(e.bind(function(){this.trigger("close")},this),this.options.timeout)},goBack:function(){this.trigger("change-dashboard","dashboard")},maskingDashboard:function(e){e.preventDefault(),o.webapp.openMasking(),this.trigger("close")},createChildren:function(){return this.children={},this.children}});return u}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_settings=e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+=" <!-- hacky way to prevent render until model is fetched... duckbone lifecycle... -->\n\n<!-- HEADER BARS -->\n",y=a.inline,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"inline"),i=a.unless,b=v.program(2,o,t),b.hash={},b.fn=b,b.inverse=v.noop,n=i.call(e,n,b),(n||0===n)&&(r+=n),r+='\n\n<!-- SITE SPECIFIC SETTINGS PAGE -->\n<div id="site-settings-page" class="site-specific">\n  ',n="trackingSettings",y=a.child,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"child",n,{hash:{}}):i,r+=A(n)+"\n  ",y=a.showSiteTrackers,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"showSiteTrackers"),i=a["if"],b=v.program(11,u,t),b.hash={},b.fn=b,b.inverse=v.noop,n=i.call(e,n,b),(n||0===n)&&(r+=n),r+="\n  ",n="accountSettings",y=a.child,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"child",n,{hash:{}}):i,r+=A(n)+"\n  ",n="walletSettings",y=a.child,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"child",n,{hash:{}}):i,r+=A(n)+"\n  ",n="maskingSettings",y=a.child,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"child",n,{hash:{}}):i,r+=A(n)+"\n",y=a.inline,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"inline"),i=a.unless,b=v.program(13,p,t),b.hash={},b.fn=b,b.inverse=v.noop,n=i.call(e,n,b),(n||0===n)&&(r+=n),r+="\n</div>\n\n",y=a.inline,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"inline"),i=a.unless,b=v.program(16,h,t),b.hash={},b.fn=b,b.inverse=v.noop,n=i.call(e,n,b),(n||0===n)&&(r+=n),r+="\n\n"}function o(e,t){var n,i,r="";return r+='\n<div class="settings-header clearfix site-specific">\n    <div id="go-back-to-dashboard-btn" style="position:absolute;top:1px;left:10px;" class="go-back"><img src="',n="/pages/images/back.png",y=a.assetUrl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"assetUrl",n,{hash:{}}):i,r+=A(n)+'" width="18px;"/> ',n="mm_dntme_back",y=a.intl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"intl",n,{hash:{}}):i,r+=A(n)+'</div>\n    <div class="title" title="',y=a.host,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof n===w?n=n.call(e,{hash:{}}):n===E&&(n=k.call(e,"host",{hash:{}})),r+=A(n)+'" style="position:absolute;height:80px;top:5px;right:30px;width:180px;">\n      <span style="display:block;font-size:16px;font-weight:lighter;">',n="mm_dntme_settings_for",y=a.intl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"intl",n,{hash:{}}):i,r+=A(n)+'</span>\n      <span class="boldFont" style="font-size:20px;">',y=a.host,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof n===w?n=n.call(e,{hash:{}}):n===E&&(n=k.call(e,"host",{hash:{}})),r+=A(n)+'</span>\n    </div>\n</div>\n<div class="settings-header clearfix global-settings">\n  <div id="go-back-to-site-settings-btn" class="go-back"><img src="',n="/pages/images/back.png",y=a.assetUrl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"assetUrl",n,{hash:{}}):i,r+=A(n)+'" width="18px;"/> ',n="mm_dntme_back",y=a.intl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"intl",n,{hash:{}}):i,r+=A(n)+'</div>\n  <div class="version">\n        ',y=a.new_version,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"new_version"),i=a["if"],b=v.program(3,s,t),b.hash={},b.fn=b,b.inverse=v.program(5,l,t),n=i.call(e,n,b),(n||0===n)&&(r+=n),r+='\n  </div>\n</div>\n<div class="ignore-settings settings-header clearfix" style="display:none">\n  <div id="ig-go-back-to-site-settings-btn" class="go-back"><img src="',n="/pages/images/back.png",y=a.assetUrl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"assetUrl",n,{hash:{}}):i,r+=A(n)+'" width="18px;"/> ',n="mm_dntme_back",y=a.intl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"intl",n,{hash:{}}):i,r+=A(n)+'</div>\n  <div class="version">\n        ',y=a.new_version,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"new_version"),i=a["if"],b=v.program(7,c,t),b.hash={},b.fn=b,b.inverse=v.program(9,d,t),n=i.call(e,n,b),(n||0===n)&&(r+=n),r+="\n  </div>\n</div>\n\n",n="settingsChanged",y=a.child,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"child",n,{hash:{}}):i,r+=A(n)+"\n"}function s(e){var t,n,i,r="";return r+='\n          <a href=# id="newVersion" class="info-message"\n             title="',t="mm_dntme_your_version",y=a.intl,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"intl",t,{hash:{}}):n,r+=A(t)+" ",t="version",y=a.configVar,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"configVar"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"configVar",t,{hash:{}}):n,r+=A(t)+'">',y=a.new_version,t=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"new_version"),n="mm_dntme_new_version_available",y=a.intl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===w?i.call(e,n,t,{hash:{}}):i===E?k.call(e,"intl",n,t,{hash:{}}):i,r+=A(t)+"</a>\n        "}function l(e){var t,n,i="";return i+="\n          ",t="mm_dntme_version",y=a.intl,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"intl",t,{hash:{}}):n,i+=A(t)+" ",t="version",y=a.configVar,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"configVar"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"configVar",t,{hash:{}}):n,i+=A(t)+"\n        "}function c(e){var t,n,i,r="";return r+='\n          <a href=# class="newVersion" class="info-message"\n             title="',t="mm_dntme_your_version",y=a.intl,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"intl",t,{hash:{}}):n,r+=A(t)+" ",t="version",y=a.configVar,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"configVar"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"configVar",t,{hash:{}}):n,r+=A(t)+'">',y=a.new_version,t=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"new_version"),n="mm_dntme_new_version_available",y=a.intl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===w?i.call(e,n,t,{hash:{}}):i===E?k.call(e,"intl",n,t,{hash:{}}):i,r+=A(t)+"</a>\n        "}function d(e){var t,n,i="";return i+="\n          ",t="mm_dntme_version",y=a.intl,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"intl",t,{hash:{}}):n,i+=A(t)+" ",t="version",y=a.configVar,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"configVar"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"configVar",t,{hash:{}}):n,i+=A(t)+"\n        "}function u(e){var t,n;return t="siteTrackers",y=a.child,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"child",t,{hash:{}}):n,A(t)}function p(e,t){var n,i,r="";return r+='\n  <div class="clearfix" style="border-top:1px solid #cccccc">\n    <div style="float:left;margin:0px 0px 0px 10px;">\n      ',n="mm_dntme_version",y=a.intl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"intl",n,{hash:{}}):i,r+=A(n)+" ",n="version",y=a.configVar,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"configVar"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"configVar",n,{hash:{}}):i,r+=A(n)+"\n      ",n="Chrome",y=a.unlessBrowser,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"unlessBrowser"),b=v.program(14,m,t),b.hash={},b.fn=b,b.inverse=v.noop,n=y&&typeof i===w?i.call(e,n,b):T.call(e,i,n,b),(n||0===n)&&(r+=n),r+='\n    </div>\n    <div style="float:right;margin-right:10px;" class="otherSettings">\n        <div id="global-settings-btn"style="text-align:center;cursor:pointer;"><a>',n="mm_dntme_settings_for_all_sites",y=a.intl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"intl",n,{hash:{}}):i,r+=A(n)+'</a></div>\n        <div class="ignore-settings-btn"style="text-align:center;cursor:pointer;"><a>',n="mm_dntme_settings_ignore",y=a.intl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"intl",n,{hash:{}}):i,r+=A(n)+"</a></div>\n    </div>\n  </div>\n"}function m(e){var t,n,i="";return i+='\n        <br/>\n        <a href="#" class="checkForNewVersion">\n          <span>',t="mm_dntme_check_for_version",y=a.intl,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"intl",t,{hash:{}}):n,i+=A(t)+'</span>\n          <img class="loading" style="display:none;" src="',t="/pages/images/ajax_loader.gif",y=a.assetUrl,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"assetUrl",t,{hash:{}}):n,i+=A(t)+'"/>\n        </a>\n        <a href="#" style="display: none;" class="newVersionAvailable"></a>\n        <span style="display: none;" class="latestVersion">',t="mm_dntme_latest_version",y=a.intl,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"intl",t,{hash:{}}):n,i+=A(t)+"</span>\n      "}function h(e,t){var n,i,r="";return r+='\n\n<!-- GLOBAL SETTINGS PAGE -->\n<div id="global-settings-page" class="settings global-settings">\n\n  <!-- GLOBAL PANEL SETTINGS SECTION -->\n  <div id="global-panel-settings" class="global-panel-settings">\n    <div style="margin: 0px 0px 10px 30px;">\n      <div class="btn " disabled>',n="mm_dntme_panel_settings",y=a.intl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"intl",n,{hash:{}}):i,r+=A(n)+'</div>\n      <div id="global-preferences-btn" class="btn btn-primary">',n="mm_dntme_more_settings_capitalized",y=a.intl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"intl",n,{hash:{}}):i,r+=A(n)+"</div>\n    </div>\n    ",n="features",y=a.child,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"child",n,{hash:{}}):i,r+=A(n)+'\n    <div class="global-language dntme_global_feature">\n      <div id="browsing" class="clearfix setting-row feature browsing">\n        <div class="message" title="" style="width:160px;" data-original-title="">Your language is: </div>\n        <select id="language" style="width:100px!important;">\n            <option value="en">English</option>\n            <option value="es">Spanish</option>\n            <option value="de">German</option>\n            <option value="pl">Polish</option>\n            <option value="pt">Portuguese</option>\n            <option value="zh">Chinese</option>\n            <option value="nl">Dutch</option>\n            <option value="it">Italian</option>\n            <option value="fr">French</option>\n        </select>\n      </div>\n    </div>\n    <div id="site-specific-settings-btn"style="text-align:center;cursor:pointer;"><a>',n="mm_dntme_settings_for_current_site",y=a.intl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"intl",n,{hash:{}}):i,r+=A(n)+'</a></div>\n    <div class="ignore-settings-btn"style="text-align:center;cursor:pointer;"><a>',n="mm_dntme_settings_ignore",y=a.intl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"intl",n,{hash:{}}):i,r+=A(n)+'</a></div>\n  </div>\n\n  <!-- GLOBAL PREFERENCES SECTION -->\n  <div id="global-preferences" class="global-preferences">\n    <div style="margin: 0px 0px 10px 30px;">\n        <div id="global-panel-settings-btn" class="btn btn-primary">',n="mm_dntme_panel_settings",y=a.intl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"intl",n,{hash:{}}):i,r+=A(n)+'</div>\n        <div class="btn" disabled>',n="mm_dntme_more_settings_capitalized",y=a.intl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"intl",n,{hash:{}}):i,r+=A(n)+'</div>\n    </div>\n\n    <div style="margin: 0px 0px 15px 10px;">\n      ',n="preferences",y=a.child,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"child",n,{hash:{}}):i,r+=A(n)+"\n    </div>\n\n    ",y=a.maskmeInstalled,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"maskmeInstalled"),i=a.unless,b=v.program(17,_,t),b.hash={},b.fn=b,b.inverse=v.noop,n=i.call(e,n,b),(n||0===n)&&(r+=n),r+='\n  </div>\n\n</div>\n\n<div class="ignore-settings" style="display: none;">\n',n="ignoreSettings",y=a.child,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"child",n,{hash:{}}):i,r+=A(n)+"\n</br>\n</div>\n"}function _(e){var t,n,i="";return i+='\n    <div>\n      <a href=# class="more-options">\n        ',t="mm_dntme_more_options_in_dashboard",y=a.intl,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"intl",t,{hash:{}}):n,i+=A(t)+"\n      </a>\n    </div>\n    "}a=a||e.helpers;var f,g,y,b,v=this,w="function",k=a.helperMissing,E=void 0,A=this.escapeExpression,T=a.blockHelperMissing;return y=a.blacklist,f=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),g=a["if"],b=v.program(1,r,i),b.hash={},b.fn=b,b.inverse=v.noop,f=g.call(t,f,b),f||0===f?f:""}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_settings}),ABINE_DNTME.define("abine/views/settingsDashboard",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/views/maskingDashboard","abine/views/walletDashboard","abine/views/ignoreSettings","abine/views/accountsDashboard","abine/views/settingsChanged","abine/views/trackerBlocking","abine/views/trackers","abine/views/features","abine/views/preferences","abine/views/trustedSites","abine/views/dntmePageBase","abine/timer","abine/intl"],function(e,t,a,n,i,r,o,s,l,c,d,u,p,m,h,_,f,g,y,b){var v=a.View.extend({className:"dntme_settings settings",templateName:"dntme_dashboard_settings",events:{"click .more-options":"moreOptions","click #viewAllTrackers":"viewAllTrackers","click #hideAllTrackers":"hideAllTrackers","click #reloadTrackers":"reload","click #newVersion":"downloadNewVersion","click .checkForNewVersion":"checkForNewVersion","click .latestVersion":"checkForNewVersion","click .newVersionAvailable":"downloadNewVersion","click #global-settings-btn":"showGlobalPanelSettings","click #global-panel-settings-btn":"showGlobalPanelSettings","click .ignore-settings-btn":"showIgnoreSettings","click #global-preferences-btn":"showGlobalPreferences","click #go-back-to-site-settings-btn":"showSiteSpecificSettings","click #ig-go-back-to-site-settings-btn":"showSiteSpecificSettings","click #go-back-to-dashboard-btn":"showDashboard","click #site-specific-settings-btn":"showSiteSpecificSettings","change #language":"changeLanguage"},changeLanguage:function(){var e=this.$("#language"),t=new n.PreferenceCollection({});t.setPref("dnt_language",e.val()),b.setupLocale(e.val(),function(){})},reload:function(){var e=this,t=0,a=[],n=function(){if(t++,2==t){if(e.options.switchTo)switch(e.options.settingsView="site-settings",e.options.highlight){case"acctGroup":a=["#account","#password"];break;case"maskingGroup":a=["#email","#phone","#card"];break;case"walletGroup":a=["#suggestRealCard","#suggestAddresses","#card","#suggestIdentities","#saveCard"];break;case"trackingGroup":a=["#trackers"];break;default:a=["#"+e.options.highlight]}e.renderView(e.options.settingsView||"site-settings",a,e.options.switchTo),delete e.options.settingsView,delete e.options.switchTo}};this.options.tabData.fetch({success:n}),this.options.globalData.fetch({success:n})},downloadNewVersion:function(e){e.preventDefault(),o.securityManager.openPage("https://link.abine.com/blur-"+ABINE_DNTME.config.browser.toLowerCase()+"-latest"),this.trigger("close")},checkForNewVersion:function(){this.$(".latestVersion, .newVersionAvailable").hide(),this.$(".checkForNewVersion, .checkForNewVersion .loading").show(),this.$(".checkForNewVersion span").text(b.getText("mm_dntme_checking_for_new_version"));var t=new n.ExtensionVersion;t.fetch({success:e.bind(function(){if(this.$(".checkForNewVersion .loading, .otherSettings, .checkForNewVersion").hide(),t.get("newVersionAvailable")){var e=this.$(".newVersionAvailable");e.text(b.getText("mm_dntme_new_version_available_click_here",[t.get("version")])).show(),e.attr("href","https://link.abine.com/blur-"+ABINE_DNTME.config.browser.toLowerCase()+"-latest")}else this.$(".latestVersion, .otherSettings").show()},this)})},showGlobalPanelSettings:function(){var e=b.getLang();this.$("#language").val(e),this.$(".site-specific, .global-preferences, .dntme_page_settings_changed").hide(),this.$(".global-settings, .global-panel-settings").show(),this.trigger("resize")},showGlobalPreferences:function(){this.$(".site-specific, .global-panel-settings, .dntme_page_settings_changed").hide(),this.$(".global-settings, .global-preferences").show(),this.trigger("resize")},showIgnoreSettings:function(){this.$(".site-specific, .global-settings, .global-panel-settings, .site-specific, .dntme_page_settings_changed").hide(),this.$(".ignore-settings").show(),this.trigger("resize")},showDashboard:function(){this.trigger("showPageView"),this.$(".settings-link").show()},showSiteSpecificSettings:function(t,a,n){this.$(".global-preferences, .global-settings, .global-panel-settings").hide(),this.$(".ignore-settings").hide(),this.$(".site-specific, .dntme_page_settings_changed").show(),a&&e(a).each(e.bind(function(e){var t=this.$("#site-settings-page "+e+" div.switch."+n)[0];if(t&&t.click(),"#account"==e){var t=this.$("#site-settings-page "+e+" div.switch."+n)[1];t&&t.click()}},this)),this.trigger("resize")},moreOptions:function(e){e.preventDefault(),o.webapp.openSettings()},viewAllTrackers:function(e){e.preventDefault(),this.showTrackers=!0,this.reload("global-panel-settings")},hideAllTrackers:function(e){e.preventDefault(),this.showTrackers=!1,this.reload("global-panel-settings")},afterInitialize:function(){this.doc=this.el.ownerDocument,this.model=this.options.tabData,this.model.inline=this.options.inline,this.model.on("reloaded",e.bind(function(){if(t(".message, .info-message",this.el.ownerDocument).tooltip({delay:0}),this.options.highlight){var a="#"+this.options.highlight;a.match(/card/)&&(a="#card, #suggestRealCard"),a.match(/identity/)&&(a="#suggestIdentities"),a.match(/address/)&&(a="#address, #suggestAddresses"),a.match(/password/)&&(a="#password, #suggestStrongPassword"),a.match(/account/)&&(a="#account, #rememberAccounts, #helpMeLogin, #submitAccount"),a.match(/acctGroup/)&&(a="#account, #password, #rememberAccounts, #helpMeLogin, #submitAccount, #suggestStrongPassword"),a.match(/walletGroup/)&&(a="#suggestRealCard, #suggestAddresses, #card, #suggestIdentities, #saveCard, #rememberCards"),a.match(/maskingGroup/)&&(a="#email, #phone, #card"),a.match(/trackingGroup/)&&(a="#browsing, #trackers");var n=this.$(a);n.length&&n.addClass("highlight")}this.options.timeout&&y.setTimeout(e.bind(function(){this.trigger("close")},this),this.options.timeout)},this)),this.model.on("open-global-setting",e.bind(function(e){this.options.highlight=e.highlight,this.renderView("global-panel-settings")},this)),this.model.on("settings-changed",e.bind(function(e){t(".message, .info-message",this.el.ownerDocument).tooltip({delay:0}),this.children.settingsChanged.update(e.feature)},this)),this.reload()},renderView:function(e,t,a){switch(this.render(),this.model.trigger("reloaded"),e){case"site-settings":this.showSiteSpecificSettings(null,t,a);break;case"global-panel-settings":this.showGlobalPanelSettings();break;case"global-preferences":this.showGlobalPreferences()}},createChildren:function(){var t=e.extend({},this.options,{model:this.options.tabData});return delete t.el,this.children={settingsChanged:new u(t),trackingSettings:new p(t),maskingSettings:new s(t),accountSettings:new d(t),ignoreSettings:new c(t),walletSettings:new l(t),features:new h({collection:this.options.globalData.globalFeatures,doc:this.el.ownerDocument,highlight:this.options.highlight}),preferences:new _({collection:this.options.globalData.preferences,doc:this.el.ownerDocument}),trustedSites:new f({collection:this.options.globalData.blacklist,doc:this.el.ownerDocument})},this.children.settingsChanged.transferEvents(["resize"],this),this.children.ignoreSettings.transferEvents(["resize"],this),this.children}});return v}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_tracker_blocking=e.template(function(e,t,a,n,i){function r(){return"off"}function o(e){var t,n,i,r="";return r+='"',t="this site",n="mm_dntme_help_what_will_happen_on_browsing",p=a.intl,i=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===f?i.call(e,n,t,{hash:{}}):i===y?g.call(e,"intl",n,t,{hash:{}}):i,r+=b(t)+'"'}function s(e){var t,n,i,r="";return r+='"',t="this site",n="mm_dntme_help_what_will_happen_off_browsing",p=a.intl,i=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===f?i.call(e,n,t,{hash:{}}):i===y?g.call(e,"intl",n,t,{hash:{}}):i,r+=b(t)+'"'}function l(){return"off"}function c(){return"on"}a=a||e.helpers;var d,u,p,m,h="",_=this,f="function",g=a.helperMissing,y=void 0,b=this.escapeExpression;return h+='<div id="trackers" class="clearfix setting-row ',p=a.blacklist,d=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),d=null===d||void 0===d||d===!1?d:ABINE_DNTME.Duckbone.Handlebars.getAttr(d,"trackerOff"),u=a["if"],m=_.program(1,r,i),m.hash={},m.fn=m,m.inverse=_.noop,d=u.call(t,d,m),(d||0===d)&&(h+=d),h+='" data-type="blacklist" data-name="tracker">\n  <div class="message" style="width:160px;" title=',p=a.blacklist,d=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),d=null===d||void 0===d||d===!1?d:ABINE_DNTME.Duckbone.Handlebars.getAttr(d,"trackerOff"),u=a["if"],m=_.program(3,o,i),m.hash={},m.fn=m,m.inverse=_.program(5,s,i),d=u.call(t,d,m),(d||0===d)&&(h+=d),h+=">",d="mm_dntme_tracking_blocker",p=a.intl,u=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),d=typeof u===f?u.call(t,d,{hash:{}}):u===y?g.call(t,"intl",d,{hash:{}}):u,h+=b(d)+'</div>\n  <div class="word switch ',p=a.blacklist,d=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),d=null===d||void 0===d||d===!1?d:ABINE_DNTME.Duckbone.Handlebars.getAttr(d,"trackerOff"),u=a["if"],m=_.program(7,l,i),m.hash={},m.fn=m,m.inverse=_.program(9,c,i),d=u.call(t,d,m),(d||0===d)&&(h+=d),h+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',d="mm_dntme_for_this_site",p=a.intl,u=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),d=typeof u===f?u.call(t,d,{hash:{}}):u===y?g.call(t,"intl",d,{hash:{}}):u,h+=b(d)+"</div>\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_tracker_blocking}),ABINE_DNTME.define("abine/views/trackerBlocking",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/views/pageTracker","abine/views/settingsChanged","abine/views/dntmePageBase","abine/timer"],function(e,t,a,n,i,r,o,s,l,c,d){var u=c.extend({templateName:"dntme_dashboard_tracker_blocking",events:{"click .setting-row":"toggleSwitch","click .more-settings":"showSettings","click .go-back":"goBack"},afterInitialize:function(){if(this.doc=this.el.document,this.options.highlight){var t=this.$("#"+this.options.highlight);t&&t[0]&&(t[0].scrollIntoView(),t.addClass("highlight"))}this.options.timeout&&d.setTimeout(e.bind(function(){this.trigger("close")},this),this.options.timeout)},goBack:function(){this.trigger("change-dashboard","dashboard")},createChildren:function(){return this.children={},this.children}});return u}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_tracking=e.template(function(e,t,a){a=a||e.helpers;var n,i,r,o="function",s=a.helperMissing,l=void 0,c=this.escapeExpression;return n="trackerSection",r=a.child,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),n=typeof i===o?i.call(t,n,{hash:{}}):i===l?s.call(t,"child",n,{hash:{}}):i,c(n)}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_tracking}),ABINE_DNTME.define("abine/views/trackingDashboard",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/views/pageTracker","abine/views/settingsChanged","abine/views/dntmePageBase"],function(e,t,a,n,i,r,o,s,l,c){var d=c.extend({templateName:"dntme_dashboard_tracking",events:{"click .setting-row":"toggleSwitch","click .suggested":"openSuggested","click a.who":"openWhoAreThey"},openSuggested:function(e){e.preventDefault(),o.securityManager.openLink({type:"recommended",host:this.model.get("host")})},openWhoAreThey:function(e){e.preventDefault(),o.webapp.openUnderstandingTracking(),this.trigger("close")},afterInitialize:function(){this.doc=this.el.document},createChildren:function(){return this.children={trackerSection:new s({model:this.model,doc:this.el.ownerDocument,withGoBack:!0})},this.children.trackerSection.on("trackerToggled",e.bind(this.trackerToggled,this)),this.children.trackerSection.transferEvents(["resize","close","change-dashboard"],this),this.children}});return d}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_wallet=e.template(function(e,t,a,n,i){function r(){return"off"}function o(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_on_suggestrealcard",D=a.intl,n=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===C?n.call(e,t,{hash:{}}):n===B?S.call(e,"intl",t,{hash:{}}):n,i+=P(t)+'"'}function s(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_off_suggestrealcard",D=a.intl,n=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===C?n.call(e,t,{hash:{}}):n===B?S.call(e,"intl",t,{hash:{}}):n,i+=P(t)+'"'}function l(){return"off"}function c(){return"on"}function d(){return"off"}function u(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_on_suggestidentities",D=a.intl,n=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===C?n.call(e,t,{hash:{}}):n===B?S.call(e,"intl",t,{hash:{}}):n,i+=P(t)+'"'}function p(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_off_suggestidentities",D=a.intl,n=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===C?n.call(e,t,{hash:{}}):n===B?S.call(e,"intl",t,{hash:{}}):n,i+=P(t)+'"'}function m(){return"off"}function h(){return"on"}function _(){return"off"}function f(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_on_suggestaddresses",D=a.intl,n=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===C?n.call(e,t,{hash:{}}):n===B?S.call(e,"intl",t,{hash:{}}):n,i+=P(t)+'"'}function g(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_off_suggestaddresses",D=a.intl,n=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===C?n.call(e,t,{hash:{}}):n===B?S.call(e,"intl",t,{hash:{}}):n,i+=P(t)+'"'}function y(){return"off"}function b(){return"on"}function v(){return"off"}function w(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_on_save_card",D=a.intl,n=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===C?n.call(e,t,{hash:{}}):n===B?S.call(e,"intl",t,{hash:{}}):n,i+=P(t)+'"'}function k(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_off_save_card",D=a.intl,n=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===C?n.call(e,t,{hash:{}}):n===B?S.call(e,"intl",t,{hash:{}}):n,i+=P(t)+'"'}function E(){return"off"}function A(){return"on"}a=a||e.helpers;var T,N,D,M,I="",x=this,C="function",S=a.helperMissing,B=void 0,P=this.escapeExpression;return I+='<div id="suggestRealCard" class="clearfix setting-row ',D=a.blacklist,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),T=null===T||void 0===T||T===!1?T:ABINE_DNTME.Duckbone.Handlebars.getAttr(T,"realCardOff"),N=a["if"],M=x.program(1,r,i),M.hash={},M.fn=M,M.inverse=x.noop,T=N.call(t,T,M),(T||0===T)&&(I+=T),I+='" data-type="blacklist" data-name="real_card">\n  <div class="message" style="width:160px;" title=',D=a.blacklist,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),T=null===T||void 0===T||T===!1?T:ABINE_DNTME.Duckbone.Handlebars.getAttr(T,"realCardOff"),N=a["if"],M=x.program(3,o,i),M.hash={},M.fn=M,M.inverse=x.program(5,s,i),T=N.call(t,T,M),(T||0===T)&&(I+=T),I+=">",T="mm_dntme_wallet_real_card",D=a.intl,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),T=typeof N===C?N.call(t,T,{hash:{}}):N===B?S.call(t,"intl",T,{hash:{}}):N,I+=P(T)+'</div>\n  <div class="word switch ',D=a.blacklist,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),T=null===T||void 0===T||T===!1?T:ABINE_DNTME.Duckbone.Handlebars.getAttr(T,"realCardOff"),N=a["if"],M=x.program(7,l,i),M.hash={},M.fn=M,M.inverse=x.program(9,c,i),T=N.call(t,T,M),(T||0===T)&&(I+=T),I+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',T="mm_dntme_for_this_site",D=a.intl,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),T=typeof N===C?N.call(t,T,{hash:{}}):N===B?S.call(t,"intl",T,{hash:{}}):N,I+=P(T)+'</div>\n</div>\n\n<div id="suggestIdentities" class="clearfix setting-row ',D=a.blacklist,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),T=null===T||void 0===T||T===!1?T:ABINE_DNTME.Duckbone.Handlebars.getAttr(T,"identityOff"),N=a["if"],M=x.program(11,d,i),M.hash={},M.fn=M,M.inverse=x.noop,T=N.call(t,T,M),(T||0===T)&&(I+=T),I+='" data-type="blacklist" data-name="identity">\n  <div class="message" style="width:160px;" title=',D=a.blacklist,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),T=null===T||void 0===T||T===!1?T:ABINE_DNTME.Duckbone.Handlebars.getAttr(T,"identityOff"),
N=a["if"],M=x.program(13,u,i),M.hash={},M.fn=M,M.inverse=x.program(15,p,i),T=N.call(t,T,M),(T||0===T)&&(I+=T),I+=">",T="mm_dntme_wallet_identity",D=a.intl,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),T=typeof N===C?N.call(t,T,{hash:{}}):N===B?S.call(t,"intl",T,{hash:{}}):N,I+=P(T)+'</div>\n  <div class="word switch ',D=a.blacklist,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),T=null===T||void 0===T||T===!1?T:ABINE_DNTME.Duckbone.Handlebars.getAttr(T,"identityOff"),N=a["if"],M=x.program(17,m,i),M.hash={},M.fn=M,M.inverse=x.program(19,h,i),T=N.call(t,T,M),(T||0===T)&&(I+=T),I+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',T="mm_dntme_for_this_site",D=a.intl,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),T=typeof N===C?N.call(t,T,{hash:{}}):N===B?S.call(t,"intl",T,{hash:{}}):N,I+=P(T)+'</div>\n</div>\n\n<div id="suggestAddresses" class="clearfix setting-row ',D=a.blacklist,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),T=null===T||void 0===T||T===!1?T:ABINE_DNTME.Duckbone.Handlebars.getAttr(T,"addressOff"),N=a["if"],M=x.program(21,_,i),M.hash={},M.fn=M,M.inverse=x.noop,T=N.call(t,T,M),(T||0===T)&&(I+=T),I+='" data-type="blacklist" data-name="address">\n  <div class="message" style="width:160px;" title=',D=a.blacklist,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),T=null===T||void 0===T||T===!1?T:ABINE_DNTME.Duckbone.Handlebars.getAttr(T,"addressOff"),N=a["if"],M=x.program(23,f,i),M.hash={},M.fn=M,M.inverse=x.program(25,g,i),T=N.call(t,T,M),(T||0===T)&&(I+=T),I+=">",T="mm_dntme_wallet_address",D=a.intl,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),T=typeof N===C?N.call(t,T,{hash:{}}):N===B?S.call(t,"intl",T,{hash:{}}):N,I+=P(T)+'</div>\n  <div class="word switch ',D=a.blacklist,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),T=null===T||void 0===T||T===!1?T:ABINE_DNTME.Duckbone.Handlebars.getAttr(T,"addressOff"),N=a["if"],M=x.program(27,y,i),M.hash={},M.fn=M,M.inverse=x.program(29,b,i),T=N.call(t,T,M),(T||0===T)&&(I+=T),I+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',T="mm_dntme_for_this_site",D=a.intl,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),T=typeof N===C?N.call(t,T,{hash:{}}):N===B?S.call(t,"intl",T,{hash:{}}):N,I+=P(T)+'</div>\n</div>\n\n<div id="saveCard" class="clearfix setting-row ',D=a.blacklist,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),T=null===T||void 0===T||T===!1?T:ABINE_DNTME.Duckbone.Handlebars.getAttr(T,"saveCardOff"),N=a["if"],M=x.program(31,v,i),M.hash={},M.fn=M,M.inverse=x.noop,T=N.call(t,T,M),(T||0===T)&&(I+=T),I+='" data-type="blacklist" data-name="save_card">\n<div class="message" style="width:160px;" title=',D=a.blacklist,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),T=null===T||void 0===T||T===!1?T:ABINE_DNTME.Duckbone.Handlebars.getAttr(T,"saveCardOff"),N=a["if"],M=x.program(33,w,i),M.hash={},M.fn=M,M.inverse=x.program(35,k,i),T=N.call(t,T,M),(T||0===T)&&(I+=T),I+=">",T="mm_dntme_wallet_save_card",D=a.intl,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),T=typeof N===C?N.call(t,T,{hash:{}}):N===B?S.call(t,"intl",T,{hash:{}}):N,I+=P(T)+'</div>\n<div class="word switch ',D=a.blacklist,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),T=null===T||void 0===T||T===!1?T:ABINE_DNTME.Duckbone.Handlebars.getAttr(T,"saveCardOff"),N=a["if"],M=x.program(37,E,i),M.hash={},M.fn=M,M.inverse=x.program(39,A,i),T=N.call(t,T,M),(T||0===T)&&(I+=T),I+='">\n  <div class="knob"></div>\n</div>\n<div class="for">',T="mm_dntme_for_this_site",D=a.intl,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),T=typeof N===C?N.call(t,T,{hash:{}}):N===B?S.call(t,"intl",T,{hash:{}}):N,I+=P(T)+"</div>\n</div>\n"}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_wallet}),ABINE_DNTME.define("abine/views/walletDashboard",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/views/pageTracker","abine/views/settingsChanged","abine/views/dntmePageBase","abine/timer"],function(e,t,a,n,i,r,o,s,l,c,d){var u=c.extend({templateName:"dntme_dashboard_wallet",events:{"click .setting-row":"toggleSwitch","click .more-settings":"showSettings","click .go-back":"goBack","click a.walletDashboard":"walletDashboard"},afterInitialize:function(){if(this.doc=this.el.document,this.options.highlight){var t=this.$("#"+this.options.highlight);t&&t[0]&&(t[0].scrollIntoView(),t.addClass("highlight"))}this.options.timeout&&d.setTimeout(e.bind(function(){this.trigger("close")},this),this.options.timeout)},goBack:function(){this.trigger("change-dashboard","dashboard")},walletDashboard:function(e){e.preventDefault(),o.webapp.openWallet(),this.trigger("close")},createChildren:function(){return this.children={},this.children}});return u}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_empty=e.template(function(e,t,a){a=a||e.helpers;var n="";return n}),ABINE_DNTME.CompiledTemplates.dntme_empty}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_global_feature=e.template(function(e,t,a,n,i){function r(){return"off"}function o(){return"on"}function s(){return"off"}a=a||e.helpers;var l,c,d,u,p="",m=this,h="function",_=a.helperMissing,f=void 0,g=this.escapeExpression;return p+='<div class="clearfix setting-row feature ',d=a.value,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"value"),c=a.unless,u=m.program(1,r,i),u.hash={},u.fn=u,u.inverse=m.noop,l=c.call(t,l,u),(l||0===l)&&(p+=l),p+=" ",d=a.name,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"name"),typeof l===h?l=l.call(t,{hash:{}}):l===f&&(l=_.call(t,"name",{hash:{}})),p+=g(l)+'" id="',d=a.name,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"name"),typeof l===h?l=l.call(t,{hash:{}}):l===f&&(l=_.call(t,"name",{hash:{}})),p+=g(l)+'">\n  <div class="message" style="width:160px;" title="',d=a.getTooltip,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getTooltip"),typeof l===h?l=l.call(t,{hash:{}}):l===f&&(l=_.call(t,"getTooltip",{hash:{}})),p+=g(l)+'">',d=a.getLabel,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getLabel"),typeof l===h?l=l.call(t,{hash:{}}):l===f&&(l=_.call(t,"getLabel",{hash:{}})),p+=g(l)+'</div>\n  <div class="word switch ',d=a.value,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"value"),c=a["if"],u=m.program(3,o,i),u.hash={},u.fn=u,u.inverse=m.program(5,s,i),l=c.call(t,l,u),(l||0===l)&&(p+=l),p+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',l="mm_dntme_for_all_sites",d=a.intl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"intl",l,{hash:{}}):c,p+=g(l)+"</div>\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_global_feature}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_global_features=e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+="\n  <legend>",n="mm_dntme_trusted_sites",d=a.intl,i=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===h?i.call(e,n,{hash:{}}):i===f?_.call(e,"intl",n,{hash:{}}):i,r+=g(n)+'<span class="info-message" title="',n="mm_dntme_help_trusted_sites",d=a.intl,i=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===h?i.call(e,n,{hash:{}}):i===f?_.call(e,"intl",n,{hash:{}}):i,r+=g(n)+'"> (',n="mm_dntme_info",d=a.intl,i=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===h?i.call(e,n,{hash:{}}):i===f?_.call(e,"intl",n,{hash:{}}):i,r+=g(n)+')</span></legend>\n  <div class="trusted-sites ',d=a.maskmeInstalled,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"maskmeInstalled"),i=a["if"],u=m.program(2,o,t),u.hash={},u.fn=u,u.inverse=m.noop,n=i.call(e,n,u),(n||0===n)&&(r+=n),r+='">\n    ',n="blacklist",d=a.child,i=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),n=typeof i===h?i.call(e,n,{hash:{}}):i===f?_.call(e,"child",n,{hash:{}}):i,r+=g(n)+"\n  </div>\n"}function o(){return"maskme"}function s(e){var t,n,i="";return i+='\n<div>\n  <a href=# class="more-options">\n    ',t="mm_dntme_more_options_in_dashboard",d=a.intl,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===h?n.call(e,t,{hash:{}}):n===f?_.call(e,"intl",t,{hash:{}}):n,i+=g(t)+"\n  </a>\n</div>\n"}a=a||e.helpers;var l,c,d,u,p="",m=this,h="function",_=a.helperMissing,f=void 0,g=this.escapeExpression;return p+="<legend>",l="mm_dntme_global_defaults",d=a.intl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"intl",l,{hash:{}}):c,p+=g(l)+'<span class="info-message" title="',l="mm_dntme_help_global_defaults",d=a.intl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"intl",l,{hash:{}}):c,p+=g(l)+'"> (',l="mm_dntme_info",d=a.intl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"intl",l,{hash:{}}):c,p+=g(l)+")</span></legend>\n",l="features",d=a.child,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"child",l,{hash:{}}):c,p+=g(l)+"\n\n",d=a.blacklist,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),l=null===l||void 0===l||l===!1?l:ABINE_DNTME.Duckbone.Handlebars.getAttr(l,"length"),c=a["if"],u=m.program(1,r,i),u.hash={},u.fn=u,u.inverse=m.noop,l=c.call(t,l,u),(l||0===l)&&(p+=l),p+="\n\n",d=a.maskmeInstalled,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"maskmeInstalled"),c=a.unless,u=m.program(4,s,i),u.hash={},u.fn=u,u.inverse=m.noop,l=c.call(t,l,u),(l||0===l)&&(p+=l),p}),ABINE_DNTME.CompiledTemplates.dntme_global_features}),ABINE_DNTME.define("abine/views/features",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/intl"],function(e,t,a){var n=a.View.extend({tagName:"div",className:"dntme_global_feature",templateName:"dntme_global_feature",events:{"click .feature":"toggleFeature"},renderFeature:function(){this.render(),"search"==this.model.get("name")&&this.model.collection.messenger.send("private:search:toggle",{search:this.model.get("value")}),t(".info-message",this.el.ownerDocument).tooltip({delay:0})},toggleFeature:function(a){if("A"!=a.target.nodeName){var n=t(a.target);n.hasClass("feature")||(n=t(a.target).parents(".feature"));var i=t(".switch",n);t(i).data("changing")||(t(i).data("changing",!0),t(".knob",i).animate({marginLeft:this.model.get("value")?0:20},e.bind(function(){t(i).removeData("changing"),"search"==this.model.get("name")&&this.model.get("value")&&this.model.collection.messenger.send("update:panelActivity:closed",{panelId:7000002}),this.model.save({value:!this.model.get("value")},{success:e.bind(this.renderFeature,this)}),"browsing"==this.model.get("name")&&t("#reloadTrackers",this.el.ownerDocument).click()},this)))}}}),i=a.ListView.extend({tagName:"div",className:"",viewClass:n});return i}),ABINE_DNTME.define("abine/views/dntmeSettings",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/intl"],function(e,t,a,n,i,r,o){var s=a.View.extend({tagName:"div",className:"dntme_global_features",templateName:"dntme_global_features",createChildren:function(){return{}}}),l=i.extend({className:"dntme_settings",templateName:"dntme_global_main",events:{"click #viewAllTrackers":"viewAllTrackers","click #hideAllTrackers":"hideAllTrackers","click #reloadTrackers":"reload","click .more-options":"moreOptions","click #newVersion":"downloadNewVersion"},afterInitialize:function(){this.doc=this.el.ownerDocument,this.model=new n.GlobalData({messenger:this.options.messenger}),this.on("render",e.bind(function(){if(this.trigger("resize"),this.model.get("premium")?t(".premium",this.el.ownerDocument).text(o.getText("mm_dntme_premium")):t(".premium",this.el.ownerDocument).text(o.getText("mm_dntme_upgrade_to_premium")),this.$("img.info-message").tooltip({delay:0,placement:"bottom"}),this.$(".info-message").tooltip({delay:0}),this.options.highlight){var e=this.$("#"+this.options.highlight);e[0].scrollIntoView(),e.addClass("highlight")}},this)),this.model.bind("sync:success",e.bind(this.render,this))},createChildren:function(){return this.showTrackers?{}:{details:new s({model:this.model,doc:this.el.ownerDocument})}}});return l}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_global_main=e.template(function(e,t,a,n,i){function r(e){var t,n,i,r="";return r+='\n        <a href=# id="newVersion" class="info-message"\n           title="',t="mm_dntme_your_version",c=a.intl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"intl",t,{hash:{}}):n,r+=f(t)+" ",t="version",c=a.configVar,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"configVar"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"configVar",t,{hash:{}}):n,r+=f(t)+'">',c=a.new_version,t=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"new_version"),n="mm_dntme_new_version_available",c=a.intl,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===m?i.call(e,n,t,{hash:{}}):i===_?h.call(e,"intl",n,t,{hash:{}}):i,r+=f(t)+"</a>\n      "}function o(e){var t,n,i="";return i+="\n        ",t="mm_dntme_version",c=a.intl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"intl",t,{hash:{}}):n,i+=f(t)+" ",t="version",c=a.configVar,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"configVar"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"configVar",t,{hash:{}}):n,i+=f(t)+"\n      "}a=a||e.helpers;var s,l,c,d,u="",p=this,m="function",h=a.helperMissing,_=void 0,f=this.escapeExpression;return u+='<div class="settings">\n  <div class="settings-header clearfix">\n    <div class="go-back"><img src="',s="/pages/images/back.png",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"assetUrl",s,{hash:{}}):l,u+=f(s)+'" width="18px;"/> ',s="mm_dntme_back",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"intl",s,{hash:{}}):l,u+=f(s)+'</div>\n    <div class="version">\n      ',c=a.new_version,s=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"new_version"),l=a["if"],d=p.program(1,r,i),d.hash={},d.fn=d,d.inverse=p.program(3,o,i),s=l.call(t,s,d),(s||0===s)&&(u+=s),u+="\n    </div>\n  </div>\n\n  ",s="details",c=a.child,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"child",s,{hash:{}}):l,u+=f(s)+"\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_global_main}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_global_preference=e.template(function(e,t,a,n,i){function r(){return"on"}function o(){return"off"}function s(e){var t,n;return t="/pages/images/selected.png",u=a.assetUrl,n=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===_?n.call(e,t,{hash:{}}):n===g?f.call(e,"assetUrl",t,{hash:{}}):n,y(t)}function l(e){var t,n;return t="/pages/images/unselected.png",u=a.assetUrl,n=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===_?n.call(e,t,{hash:{}}):n===g?f.call(e,"assetUrl",t,{hash:{}}):n,y(t)}a=a||e.helpers;var c,d,u,p,m="",h=this,_="function",f=a.helperMissing,g=void 0,y=this.escapeExpression;return m+='<div class="pref ',u=a.value,c=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"value"),d=a["if"],p=h.program(1,r,i),p.hash={},p.fn=p,p.inverse=h.program(3,o,i),c=d.call(t,c,p),(c||0===c)&&(m+=c),m+='" id="',u=a.getId,c=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getId"),typeof c===_?c=c.call(t,{hash:{}}):c===g&&(c=f.call(t,"getId",{hash:{}})),m+=y(c)+'">\n  <img width="16px" height="16px" src="',u=a.value,c=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"value"),d=a["if"],p=h.program(5,s,i),p.hash={},p.fn=p,p.inverse=h.program(7,l,i),c=d.call(t,c,p),(c||0===c)&&(m+=c),m+='"/>\n  <span>',u=a.getLabel,c=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getLabel"),typeof c===_?c=c.call(t,{hash:{}}):c===g&&(c=f.call(t,"getLabel",{hash:{}})),m+=y(c)+'</span><span class="info-message" title="',u=a.getTooltip,c=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getTooltip"),typeof c===_?c=c.call(t,{hash:{}}):c===g&&(c=f.call(t,"getTooltip",{hash:{}})),m+=y(c)+'"> (',c="mm_dntme_info",u=a.intl,d=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),c=typeof d===_?d.call(t,c,{hash:{}}):d===g?f.call(t,"intl",c,{hash:{}}):d,m+=y(c)+")</span>\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_global_preference}),ABINE_DNTME.define("abine/views/preferences",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/intl"],function(e,t,a){var n=a.View.extend({tagName:"div",templateName:"dntme_global_preference",className:"dntme_preference",events:{"click .pref":"togglePreference"},togglePreference:function(){this.model.save({value:!this.model.get("value")}),this.render(),t(".info-message",this.el.ownerDocument).tooltip({delay:0})}}),i=a.ListView.extend({tagName:"div",className:"preference-list",viewClass:n});return i}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_global_trackers=e.template(function(e,t,a){a=a||e.helpers;var n,i,r,o="",s="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return o+='<div class="trackers"><span id="reloadTrackers"></span>\n',n="globalTrackers",r=a.child,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"child",n,{hash:{}}):i,o+=d(n)+"\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_global_trackers}),ABINE_DNTME.define("abine/views/trackers",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/intl"],function(e,t,a){var n=a.View.extend({tagName:"div",templateName:"dntme_page_tracker",events:{"click .tracker":"toggleTracker"},toggleTracker:function(){this.model.save({blocked:!this.model.get("blocked")}),this.render()}}),i=a.ListView.extend({tagName:"div",className:"",viewClass:n});return i}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_global_trusted_site=e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+='\n        <img src="',n="/pages/images/key-grey.png",y=a.assetUrl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),n=typeof i===k?i.call(e,n,{hash:{}}):i===A?E.call(e,"assetUrl",n,{hash:{}}):i,r+=T(n)+'" width="16px" height="16px"\n             class="icon-key ',y=a.account,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"account"),i=a["if"],b=w.program(2,o,t),b.hash={},b.fn=b,b.inverse=w.program(4,s,t),n=i.call(e,n,b),(n||0===n)&&(r+=n),r+='" title="',n="mm_dntme_help_dont_save_accounts",y=a.intl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===k?i.call(e,n,{hash:{}}):i===A?E.call(e,"intl",n,{hash:{}}):i,r+=T(n)+'" />\n    '}function o(){return"on"}function s(){return"off"}function l(){return"on"}function c(){return"off"}function d(){return"on"}function u(){return"off"}function p(){return"on"}function m(){return"off"}function h(){return"on"}function _(){return"off"}a=a||e.helpers;var f,g,y,b,v="",w=this,k="function",E=a.helperMissing,A=void 0,T=this.escapeExpression;return v+='<div class="clearfix site">\n  <span class="domain">',y=a.domain,f=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"domain"),typeof f===k?f=f.call(t,{hash:{}}):f===A&&(f=E.call(t,"domain",{hash:{}})),v+=T(f)+'</span>\n  <span class="icons">\n    ',y=a.globalAccounts,f=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"globalAccounts"),g=a["if"],b=w.program(1,r,i),b.hash={},b.fn=b,b.inverse=w.noop,f=g.call(t,f,b),(f||0===f)&&(v+=f),v+='\n      <img src="',f="/pages/images/maskcard-icon-grey.png",y=a.assetUrl,g=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),f=typeof g===k?g.call(t,f,{hash:{}}):g===A?E.call(t,"assetUrl",f,{hash:{}}):g,v+=T(f)+'" width="16px" height="11px"\n           class="icon-card ',y=a.card,f=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"card"),g=a["if"],b=w.program(6,l,i),b.hash={},b.fn=b,b.inverse=w.program(8,c,i),f=g.call(t,f,b),(f||0===f)&&(v+=f),v+='" title="',f="mm_dntme_help_trusted_card",y=a.intl,g=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),f=typeof g===k?g.call(t,f,{hash:{}}):g===A?E.call(t,"intl",f,{hash:{}}):g,v+=T(f)+'"/>\n      <img src="',f="/pages/images/maskphone-icon-grey.png",y=a.assetUrl,g=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),f=typeof g===k?g.call(t,f,{hash:{}}):g===A?E.call(t,"assetUrl",f,{hash:{}}):g,v+=T(f)+'" width="18px" height="18px"\n                 class="icon-phone ',y=a.phone,f=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"phone"),g=a["if"],b=w.program(10,d,i),b.hash={},b.fn=b,b.inverse=w.program(12,u,i),f=g.call(t,f,b),(f||0===f)&&(v+=f),v+='" title="',f="mm_dntme_help_trusted_phone",y=a.intl,g=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),f=typeof g===k?g.call(t,f,{hash:{}}):g===A?E.call(t,"intl",f,{hash:{}}):g,v+=T(f)+'"/>\n      <img src="',f="/pages/images/maskmail-icon-grey.png",y=a.assetUrl,g=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),f=typeof g===k?g.call(t,f,{hash:{}}):g===A?E.call(t,"assetUrl",f,{hash:{}}):g,v+=T(f)+'" width="18px" height="13px"\n                 class="icon-email ',y=a.email,f=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"email"),g=a["if"],b=w.program(14,p,i),b.hash={},b.fn=b,b.inverse=w.program(16,m,i),f=g.call(t,f,b),(f||0===f)&&(v+=f),v+='" title="',f="mm_dntme_help_trusted_email",y=a.intl,g=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),f=typeof g===k?g.call(t,f,{hash:{}}):g===A?E.call(t,"intl",f,{hash:{}}):g,v+=T(f)+'"/>\n      <img src="',f="/pages/images/globe-grey.png",y=a.assetUrl,g=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),f=typeof g===k?g.call(t,f,{hash:{}}):g===A?E.call(t,"assetUrl",f,{hash:{}}):g,v+=T(f)+'" width="16px" height="16px"\n           class="icon-tracker ',y=a.tracker,f=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"tracker"),g=a["if"],b=w.program(18,h,i),b.hash={},b.fn=b,b.inverse=w.program(20,_,i),f=g.call(t,f,b),(f||0===f)&&(v+=f),v+='" title="',f="mm_dntme_help_trusted_browsing",y=a.intl,g=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),f=typeof g===k?g.call(t,f,{hash:{}}):g===A?E.call(t,"intl",f,{hash:{}}):g,v+=T(f)+'" />\n  </span>\n</div>'}),ABINE_DNTME.CompiledTemplates.dntme_global_trusted_site}),ABINE_DNTME.define("abine/views/trustedSites",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/intl"],function(e,t,a){var n=a.View.extend({tagName:"div",className:"dntme_trusted_site",templateName:"dntme_global_trusted_site",events:{"click .icon-tracker":"toggleBrowsing","click .icon-email":"toggleEmail","click .icon-phone":"togglePhone","click .icon-card":"toggleCard","click .icon-key":"toggleAccount"},toggleBrowsing:function(){this.model.save({changed:"tracker",trusted:!0,tracker:!this.model.get("tracker")},{success:e.bind(this.render,this)})},toggleEmail:function(){this.model.save({changed:"email",trusted:!0,email:!this.model.get("email")},{success:e.bind(this.render,this)})},togglePhone:function(){this.model.save({changed:"phone",trusted:!0,phone:!this.model.get("phone")},{success:e.bind(this.render,this)})},toggleCard:function(){this.model.save({changed:"card",trusted:!0,card:!this.model.get("card")},{success:e.bind(this.render,this)})},toggleAccount:function(){this.model.save({changed:"account",trusted:!0,account:!this.model.get("account")},{success:e.bind(this.render,this)})}}),i=a.ListView.extend({tagName:"div",className:"",viewClass:n});return i}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_blacklist=e.template(function(e,t,a,n,i){function r(){return"off"}function o(){return"off"}function s(){return"on"}function l(){return"data-blacklisted=1"}function c(e,t){var n,i,r="";return r+="\n    ",J=a.tracker,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"tracker"),i=a["if"],Y=Z.program(10,d,t),Y.hash={},Y.fn=Y,Y.inverse=Z.program(12,u,t),n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+="\n      </a>\n  "}function d(e){var t,n,i="";return i+='\n        <div class="skip suggested">',t="mm_dntme_suggested",J=a.intl,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===Q?n.call(e,t,{hash:{}}):n===te?ee.call(e,"intl",t,{hash:{}}):n,i+=ae(t)+"</div>\n    "}function u(e){var t,n,i="";return i+='\n        <div class="skip not suggested">',t="mm_dntme_not_suggested",J=a.intl,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===Q?n.call(e,t,{hash:{}}):n===te?ee.call(e,"intl",t,{hash:{}}):n,i+=ae(t)+"</div>\n    "}function p(e,t){var n,i,r="";return r+='\n<div class="clearfix feature ',J=a.globalEmail,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalEmail"),i=a["if"],Y=Z.program(15,m,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+=" ",J=a.globalEmail,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalEmail"),i=a.unless,Y=Z.program(18,_,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+='">\n  <div class="message">',n="mm_dntme_dont_track_email_here",J=a.intl,i=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===Q?i.call(e,n,{hash:{}}):i===te?ee.call(e,"intl",n,{hash:{}}):i,r+=ae(n)+'</div>\n  <div class="message messageHover">',n="mm_dntme_disabled_in_settings",J=a.intl,i=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===Q?i.call(e,n,{hash:{}}):i===te?ee.call(e,"intl",n,{hash:{}}):i,r+=ae(n)+'</div>\n  <div class="switch ',J=a.emailEnabled,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"emailEnabled"),i=a["if"],Y=Z.program(20,f,t),Y.hash={},Y.fn=Y,Y.inverse=Z.program(22,g,t),n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+='" data-feature="email" ',J=a.emailEnabled,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"emailEnabled"),i=a.unless,Y=Z.program(24,y,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+='>\n    <div class="knob"></div>\n  </div>\n  ',J=a.has_masked_emails,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"has_masked_emails"),i=a["if"],Y=Z.program(26,b,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+='\n</div>\n<div class="clearfix feature ',J=a.globalCard,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalCard"),i=a["if"],Y=Z.program(28,v,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+=" ",J=a.globalCard,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalCard"),i=a.unless,Y=Z.program(31,k,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+='">\n    <div class="message">',n="mm_dntme_dont_track_card_here",J=a.intl,i=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===Q?i.call(e,n,{hash:{}}):i===te?ee.call(e,"intl",n,{hash:{}}):i,r+=ae(n)+'</div>\n    <div class="message messageHover">',n="mm_dntme_disabled_in_settings",J=a.intl,i=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===Q?i.call(e,n,{hash:{}}):i===te?ee.call(e,"intl",n,{hash:{}}):i,r+=ae(n)+'</div>\n    <div class="switch ',J=a.cardEnabled,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"cardEnabled"),i=a["if"],Y=Z.program(33,E,t),Y.hash={},Y.fn=Y,Y.inverse=Z.program(35,A,t),n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+='" data-feature="card"  ',J=a.cardEnabled,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"cardEnabled"),i=a.unless,Y=Z.program(37,T,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+='>\n        <div class="knob"></div>\n    </div>\n  ',J=a.hasEnabledCard,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"hasEnabledCard"),i=a["if"],Y=Z.program(39,N,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+='\n</div>\n<div class="clearfix feature ',J=a.globalPhone,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalPhone"),i=a["if"],Y=Z.program(41,D,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+=" ",J=a.globalPhone,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalPhone"),i=a.unless,Y=Z.program(44,I,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+='">\n  <div class="message">',n="mm_dntme_dont_track_phone_here",J=a.intl,i=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===Q?i.call(e,n,{hash:{}}):i===te?ee.call(e,"intl",n,{hash:{}}):i,r+=ae(n)+'</div>\n  <div class="message messageHover">',n="mm_dntme_disabled_in_settings",J=a.intl,i=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===Q?i.call(e,n,{hash:{}}):i===te?ee.call(e,"intl",n,{hash:{}}):i,r+=ae(n)+'</div>\n  <div class="switch ',J=a.phoneEnabled,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"phoneEnabled"),i=a["if"],Y=Z.program(46,x,t),Y.hash={},Y.fn=Y,Y.inverse=Z.program(48,C,t),n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+='" data-feature="phone" ',J=a.phoneEnabled,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"phoneEnabled"),i=a.unless,Y=Z.program(50,S,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+='>\n    <div class="knob"></div>\n  </div>\n  ',J=a.has_masked_phones,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"has_masked_phones"),i=a["if"],Y=Z.program(52,B,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+="\n</div>\n",J=a.accountsEnabled,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"accountsEnabled"),i=a["if"],Y=Z.program(54,P,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+="\n"}function m(e,t){var n,i;return J=a.email,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),i=a["if"],Y=Z.program(16,h,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),n||0===n?n:""}function h(){return"off"}function _(){return"disabled"}function f(){return"on"}function g(){return"off"}function y(){return"data-blacklisted=1"}function b(e){var t,n,i="";return i+='\n    <div class="skip link viewMaskedEmails">',t="mm_dntme_view_maskmed_email",J=a.intl,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===Q?n.call(e,t,{hash:{}}):n===te?ee.call(e,"intl",t,{hash:{}}):n,i+=ae(t)+"</div>\n  "}function v(e,t){var n,i;return J=a.cardEnabled,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"cardEnabled"),i=a.unless,Y=Z.program(29,w,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),n||0===n?n:""}function w(){return"off"}function k(){return"disabled"}function E(){return"on"}function A(){return"off"}function T(){return"data-blacklisted=1"}function N(e){var t,n,i="";return i+='\n      <div class="skip link viewMaskedCards">',t="mm_dntme_view_maskmed_card",J=a.intl,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===Q?n.call(e,t,{hash:{}}):n===te?ee.call(e,"intl",t,{hash:{}}):n,i+=ae(t)+"</div>\n  "}function D(e,t){var n,i;return J=a.phoneEnabled,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"phoneEnabled"),i=a.unless,Y=Z.program(42,M,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),n||0===n?n:""}function M(){return"off"}function I(){return"disabled"}function x(){return"on"}function C(){return"off"}function S(){return"data-blacklisted=1"}function B(e){var t,n,i="";return i+='\n    <div class="skip link viewMaskedPhones">',t="mm_dntme_view_maskmed_phone",J=a.intl,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===Q?n.call(e,t,{hash:{}}):n===te?ee.call(e,"intl",t,{hash:{}}):n,i+=ae(t)+"</div>\n  "}function P(e,t){var n,i,r="";return r+='\n<div class="clearfix feature ',J=a.globalPassword,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalPassword"),i=a["if"],Y=Z.program(55,z,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+=" ",J=a.globalPassword,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalPassword"),i=a.unless,Y=Z.program(58,O,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+='">\n  <div class="message">',n="mm_dntme_dont_track_passwords_here",J=a.intl,i=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===Q?i.call(e,n,{hash:{}}):i===te?ee.call(e,"intl",n,{hash:{}}):i,r+=ae(n)+'</div>\n  <div class="message messageHover">',n="mm_dntme_disabled_in_settings",
J=a.intl,i=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===Q?i.call(e,n,{hash:{}}):i===te?ee.call(e,"intl",n,{hash:{}}):i,r+=ae(n)+'</div>\n  <div class="switch ',J=a.passwordsEnabled,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"passwordsEnabled"),i=a["if"],Y=Z.program(60,R,t),Y.hash={},Y.fn=Y,Y.inverse=Z.program(62,H,t),n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+='" data-feature="password" ',J=a.passwordsEnabled,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"passwordsEnabled"),i=a.unless,Y=Z.program(64,L,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+='>\n    <div class="knob"></div>\n  </div>\n    <div class="skip link viewAccounts">',n="mm_dntme_view_maskmed_passwords",J=a.intl,i=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===Q?i.call(e,n,{hash:{}}):i===te?ee.call(e,"intl",n,{hash:{}}):i,r+=ae(n)+'</div>\n</div>\n<div class="clearfix feature ',J=a.globalLogin,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalLogin"),i=a["if"],Y=Z.program(66,j,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+=" ",J=a.globalLogin,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalLogin"),i=a.unless,Y=Z.program(69,U,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+='">\n  <div class="message">',n="mm_dntme_dont_track_logins_here",J=a.intl,i=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===Q?i.call(e,n,{hash:{}}):i===te?ee.call(e,"intl",n,{hash:{}}):i,r+=ae(n)+'</div>\n  <div class="message messageHover">',n="mm_dntme_disabled_in_settings",J=a.intl,i=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===Q?i.call(e,n,{hash:{}}):i===te?ee.call(e,"intl",n,{hash:{}}):i,r+=ae(n)+'</div>\n  <div class="switch ',J=a.loginsEnabled,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"loginsEnabled"),i=a["if"],Y=Z.program(71,V,t),Y.hash={},Y.fn=Y,Y.inverse=Z.program(73,W,t),n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+='" data-feature="login" ',J=a.loginsEnabled,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"loginsEnabled"),i=a.unless,Y=Z.program(75,G,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+='>\n    <div class="knob"></div>\n  </div>\n    <div class="skip link viewAccounts">',n="mm_dntme_view_maskmed_logins",J=a.intl,i=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===Q?i.call(e,n,{hash:{}}):i===te?ee.call(e,"intl",n,{hash:{}}):i,r+=ae(n)+"</div>\n</div>\n"}function z(e,t){var n,i;return J=a.passwordsEnabled,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"passwordsEnabled"),i=a.unless,Y=Z.program(56,F,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),n||0===n?n:""}function F(){return"off"}function O(){return"disabled"}function R(){return"on"}function H(){return"off"}function L(){return"data-blacklisted=1"}function j(e,t){var n,i;return J=a.loginsEnabled,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"loginsEnabled"),i=a.unless,Y=Z.program(67,q,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),n||0===n?n:""}function q(){return"off"}function U(){return"disabled"}function V(){return"on"}function W(){return"off"}function G(){return"data-blacklisted=1"}a=a||e.helpers;var $,K,J,Y,X="",Z=this,Q="function",ee=a.helperMissing,te=void 0,ae=this.escapeExpression;return X+='<div class="clearfix feature ',J=a.tracker,$=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"tracker"),K=a["if"],Y=Z.program(1,r,i),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,$=K.call(t,$,Y),($||0===$)&&(X+=$),X+='">\n  <div class="message">',$="mm_dntme_dont_track_browsing_here",J=a.intl,K=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),$=typeof K===Q?K.call(t,$,{hash:{}}):K===te?ee.call(t,"intl",$,{hash:{}}):K,X+=ae($)+'</div>\n  <div class="switch ',J=a.tracker,$=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"tracker"),K=a["if"],Y=Z.program(3,o,i),Y.hash={},Y.fn=Y,Y.inverse=Z.program(5,s,i),$=K.call(t,$,Y),($||0===$)&&(X+=$),X+='" data-feature="tracker" ',J=a.tracker,$=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"tracker"),K=a["if"],Y=Z.program(7,l,i),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,$=K.call(t,$,Y),($||0===$)&&(X+=$),X+='>\n    <div class="knob"></div>\n  </div>\n  ',J=a.suggestedAllow,$=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"suggestedAllow"),K=a["if"],Y=Z.program(9,c,i),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,$=K.call(t,$,Y),($||0===$)&&(X+=$),X+="\n</div>\n",J=a.maskmeInstalled,$=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"maskmeInstalled"),K=a.unless,Y=Z.program(14,p,i),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,$=K.call(t,$,Y),($||0===$)&&(X+=$),X}),ABINE_DNTME.CompiledTemplates.dntme_page_blacklist}),ABINE_DNTME.define("abine/views/pageBlacklist",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies"],function(e,t,a,n,i,r,o){var s=a.View.extend({tagName:"div",templateName:"dntme_page_blacklist",events:{"click .viewMaskedEmails":"viewMaskedEmails","click .viewMaskedPhones":"viewMaskedPhones","click .viewMaskedCards":"viewMaskedCards","click .viewAccounts":"viewAccounts","click .feature":"toggleSwitch","click .suggested":"openSuggested"},viewAccounts:function(e){o.webapp.openAccounts(),e.preventDefault(),this.trigger("close")},viewMaskedEmails:function(e){o.webapp.openEmails(),e.preventDefault(),this.trigger("close")},viewMaskedPhones:function(e){o.webapp.openPhones(),e.preventDefault(),this.trigger("close")},viewMaskedCards:function(e){o.webapp.openCards(),e.preventDefault(),this.trigger("close")},openSuggested:function(e){e.preventDefault(),o.securityManager.openLink({type:"recommended",host:this.model.get("host")})},toggleSwitch:function(a){var n=t(a.target);if(!n.hasClass("skip")&&(n.hasClass("feature")||(n=t(a.target).parents(".feature")),!n.hasClass("disabled"))){var i=t(".switch",n),r={},o=i.data("feature");r.changed=o,r[o]=!i.data("blacklisted"),t(i).data("changing")||(t(i).data("changing",!0),t(".knob",i).animate({marginLeft:r[o]?0:20},e.bind(function(){t(i).removeData("changing"),this.model.save(r),this.trigger("featureToggled",o)},this)))}},afterInitialize:function(){this.doc=this.el.ownerDocument}});return s}),ABINE_DNTME.define("abine/views/cardAlert",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer"],function(e,t,a){var n=a.View.extend({events:{"click #card-alert-got-it":"cardAlertClose","click .section-header":"toggleSection"},tagName:"div",templateName:"dntme_page_card_alert_panel",cardAlertClose:function(){this.trigger("got-it")},afterInitialize:function(){this.doc=this.el.ownerDocument,this.panelId=this.model.get("showFreeCard")?4000006:4000005,this.model.trackers.on("changed",e.bind(function(){this.children.trackersTitle.render(),this.trigger("trackerToggled")},this))},beforeRemove:function(){this.model.trackers.off("changed")},autoResize:function(){this.trigger("resize")},toggleSection:function(a,n){if(a&&a.preventDefault(),this.$("#got-it-div").hide(),this.options.compact)return void this.trigger("show-trackers");if(!this.model.get("disabled")&&this.model.trackers.length>0){var i=this.$(".section-header").parent(".section");i.toggleClass("off").toggleClass("on"),this.trigger("max-height");var r=t(".section-content",i),o=e.bind(this.autoResize,this);n?(r.show(),o()):i.hasClass("on")?r.slideDown("fast",o):r.slideUp("fast",o)}},isOpen:function(){return!this.$(".section-header").parent(".section").hasClass("off")},createChildren:function(){return{trackersTitle:new i({model:this.model,doc:this.el.ownerDocument})}}}),i=a.View.extend({tagName:"span",templateName:"dntme_page_card_alert_panel_title",afterInitialize:function(){this.doc=this.el.ownerDocument}});return n}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_card_alert_panel=e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+='\n<!-- start card money card alert panel -->\n  <div class="section off others clearfix">\n    <div class="section-header clearfix ',_=a.disabled,n=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"disabled"),i=a["if"],f=g.program(2,o,t),f.hash={},f.fn=f,f.inverse=g.program(4,s,t),n=i.call(e,n,f),(n||0===n)&&(r+=n),r+='">\n      ',n="trackersTitle",_=a.child,i=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),n=typeof i===y?i.call(e,n,{hash:{}}):i===v?b.call(e,"child",n,{hash:{}}):i,r+=w(n)+'\n    </div>\n    <div style="margin: 5px 15px;">\n      <div style="font-weight:bold;vertical-align:middle;display:inline-block;width:100px;">',n="mm_dntme_card_alert_panelEarned",_=a.intl,i=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===y?i.call(e,n,{hash:{}}):i===v?b.call(e,"intl",n,{hash:{}}):i,r+=w(n)+'</div>\n      <div style="display:inline-block;vertical-align:middle;width:50px;"><img src="',n="pages/images/card-lock.png",_=a.assetUrl,i=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),n=typeof i===y?i.call(e,n,{hash:{}}):i===v?b.call(e,"assetUrl",n,{hash:{}}):i,r+=w(n)+'"/></div>\n      <div style="margin-top:10px;">',n="mm_dntme_card_alert_panelProtectWith",_=a.intl,i=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===y?i.call(e,n,{hash:{}}):i===v?b.call(e,"intl",n,{hash:{}}):i,r+=w(n)+'</div>\n      <div style="margin-top:10px;">',n="mm_dntme_card_alert_panelRedeemYourCard",_=a.intl,i=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===y?i.call(e,n,{hash:{}}):i===v?b.call(e,"intl",n,{hash:{}}):i,r+=w(n)+'</div>\n    </div>\n    <div id="got-it-div" style="text-align:center;margin-bottom:10px;"><input type="button" id="card-alert-got-it" class="btn btn-primary" value=\'',n="mm_dntme_card_alert_panelGotIt",_=a.intl,i=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===y?i.call(e,n,{hash:{}}):i===v?b.call(e,"intl",n,{hash:{}}):i,r+=w(n)+"'/></div>\n  </div>\n"}function o(){return"disabled"}function s(e,t){var n,i,r="";return r+=" ",_=a.trackers,n=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"length"),i=a.unless,f=g.program(5,l,t),f.hash={},f.fn=f,f.inverse=g.noop,n=i.call(e,n,f),(n||0===n)&&(r+=n),r}function l(){return"no-trackers"}function c(e,t){var n,i,r="";return r+='\n<!-- start premium card alert panel -->\n <div class="section off others clearfix">\n    <div class="section-header clearfix ',_=a.disabled,n=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"disabled"),i=a["if"],f=g.program(8,d,t),f.hash={},f.fn=f,f.inverse=g.program(10,u,t),n=i.call(e,n,f),(n||0===n)&&(r+=n),r+='">\n      ',n="trackersTitle",_=a.child,i=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),n=typeof i===y?i.call(e,n,{hash:{}}):i===v?b.call(e,"child",n,{hash:{}}):i,r+=w(n)+'\n    </div>\n    <div style="margin: 5px 15px;">\n      <div style="font-size:12pt;">',n="mm_dntme_card_alert_panelAtRisk",_=a.intl,i=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===y?i.call(e,n,{hash:{}}):i===v?b.call(e,"intl",n,{hash:{}}):i,r+=w(n)+'</div>\n      <div style="margin-top:10px;">',n="mm_dntme_card_alert_panelUseMask",_=a.intl,i=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===y?i.call(e,n,{hash:{}}):i===v?b.call(e,"intl",n,{hash:{}}):i,r+=w(n)+'</div>\n    </div>\n    <div id="got-it-div" style="text-align:center;margin-bottom:10px;"><input type="button" id="card-alert-got-it" class="btn btn-primary" value=\'',n="mm_dntme_card_alert_panelGotIt",_=a.intl,i=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===y?i.call(e,n,{hash:{}}):i===v?b.call(e,"intl",n,{hash:{}}):i,r+=w(n)+"'/></div>\n  </div>\n<!-- end premium card alert panel -->\n"}function d(){return"disabled"}function u(e,t){var n,i,r="";return r+=" ",_=a.trackers,n=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"length"),i=a.unless,f=g.program(11,p,t),f.hash={},f.fn=f,f.inverse=g.noop,n=i.call(e,n,f),(n||0===n)&&(r+=n),r}function p(){return"no-trackers"}a=a||e.helpers;var m,h,_,f,g=this,y="function",b=a.helperMissing,v=void 0,w=this.escapeExpression;return _=a.showFreeCard,m=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"showFreeCard"),h=a["if"],f=g.program(1,r,i),f.hash={},f.fn=f,f.inverse=g.program(7,c,i),m=h.call(t,m,f),m||0===m?m:""}),ABINE_DNTME.CompiledTemplates.dntme_page_card_alert_panel}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_card_alert_panel_title=e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+="\n  ",d=a.disabled,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"disabled"),i=a.unless,u=m.program(2,o,t),u.hash={},u.fn=u,u.inverse=m.noop,n=i.call(e,n,u),(n||0===n)&&(r+=n),r+="\n"}function o(e,t){var n,i,r="";return r+="\n    ",d=a.trackers,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"length"),i=a["if"],u=m.program(3,s,t),u.hash={},u.fn=u,u.inverse=m.noop,n=i.call(e,n,u),(n||0===n)&&(r+=n),r+="\n  "}function s(e){var t,n,i="";return i+='\n      <div class="right-section">\n        <img class="arrow-open" src="',t="pages/images/dnt-ui-drawer-arrow-closed.png",d=a.assetUrl,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===h?n.call(e,t,{hash:{}}):n===f?_.call(e,"assetUrl",t,{hash:{}}):n,i+=g(t)+'" />\n        <img class="arrow-close" src="',t="pages/images/dnt-ui-drawer-arrow-open.png",d=a.assetUrl,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===h?n.call(e,t,{hash:{}}):n===f?_.call(e,"assetUrl",t,{hash:{}}):n,i+=g(t)+'" />\n      </div>\n    '}a=a||e.helpers;var l,c,d,u,p="",m=this,h="function",_=a.helperMissing,f=void 0,g=this.escapeExpression;return p+='<div class="left-section">\n  <div class="count">!!</div>\n  <div class="message">\n    <div class="blocked">',l="mm_dntme_card_alert_panel_MaskedCard",d=a.intl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"intl",l,{hash:{}}):c,p+=g(l)+'</div>\n    <div class="host" title="',d=a.host,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"host"),typeof l===h?l=l.call(t,{hash:{}}):l===f&&(l=_.call(t,"host",{hash:{}})),p+=g(l)+'">',l="mm_dntme_at",d=a.intl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"intl",l,{hash:{}}):c,p+=g(l)+" ",d=a.host,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"host"),typeof l===h?l=l.call(t,{hash:{}}):l===f&&(l=_.call(t,"host",{hash:{}})),p+=g(l)+"</div>\n  </div>\n</div>\n\n",d=a.compact,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"compact"),c=a.unless,u=m.program(1,r,i),u.hash={},u.fn=u,u.inverse=m.noop,l=c.call(t,l,u),(l||0===l)&&(p+=l),p+="\n"}),ABINE_DNTME.CompiledTemplates.dntme_page_card_alert_panel_title}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_compact=e.template(function(e,t,a){a=a||e.helpers;var n,i,r,o="",s="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return o+='<div class="page clearfix">\n  ',n="contentSection",r=a.child,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"child",n,{hash:{}}):i,o+=d(n)+"\n  ",n="dntStats",r=a.child,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),n=typeof i===s?i.call(t,n,{hash:{}}):i===c?l.call(t,"child",n,{hash:{}}):i,o+=d(n)+"\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_page_compact}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_dnt_stats=e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+='\n        <div class="total-trackers ',I=a.totalGreaterThan10000,n=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"totalGreaterThan10000"),i=a["if"],x=S.program(2,o,t),x.hash={},x.fn=x,x.inverse=S.noop,n=i.call(e,n,x),(n||0===n)&&(r+=n),r+='">\n\t\t\t\t\t',I=a.formattedTotal,n=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"formattedTotal"),typeof n===B?n=n.call(e,{hash:{}}):n===z&&(n=P.call(e,"formattedTotal",{hash:{}})),r+=F(n)+'\n\t\t\t\t</div>\n\t\t\t\t<div class="trackers-blocked">\n\t\t\t\t\t<span>\n            <a href=# class="understandingTrackers">',n="mm_dntme_dnt_stats_trackers",I=a.intl,i=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===B?i.call(e,n,{hash:{}}):i===z?P.call(e,"intl",n,{hash:{}}):i,r+=F(n)+"</a>\n                        ",n="mm_dntme_dnt_stats_blocked",I=a.intl,i=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===B?i.call(e,n,{hash:{}}):i===z?P.call(e,"intl",n,{hash:{}}):i,r+=F(n)+"\n          </span><br />",n="mm_dntme_since",I=a.intl,i=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===B?i.call(e,n,{hash:{}}):i===z?P.call(e,"intl",n,{hash:{}}):i,r+=F(n)+" <span class='date'>Feb' 12</span>\n\t\t\t\t</div>\n\t\t\t"}function o(e,t){var n,i;return I=a.totalGreaterThan1000000,n=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"totalGreaterThan1000000"),i=a["if"],x=S.program(3,s,t),x.hash={},x.fn=x,x.inverse=S.program(5,l,t),n=i.call(e,n,x),n||0===n?n:""}function s(){return"tiny"}function l(){return"small"}function c(e,t){var n,i,r="";return r+="\n\t\t\t\t",I=a.totalGreaterThan10000,n=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"totalGreaterThan10000"),i=a["if"],x=S.program(8,d,t),x.hash={},x.fn=x,x.inverse=S.program(10,u,t),n=i.call(e,n,x),(n||0===n)&&(r+=n),r+="\n\t\t\t"}function d(e){var t,n,i="";return i+="\n\t\t\t\t\t",t="mm_dntme_alltime_blocked_small_1",I=a.intl,n=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===B?n.call(e,t,{hash:{}}):n===z?P.call(e,"intl",t,{hash:{}}):n,i+=F(t)+" <b>",I=a.formattedTotal,t=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"formattedTotal"),typeof t===B?t=t.call(e,{hash:{}}):t===z&&(t=P.call(e,"formattedTotal",{hash:{}})),i+=F(t)+"</b> ",t="mm_dntme_alltime_blocked_small_2",I=a.intl,n=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===B?n.call(e,t,{hash:{}}):n===z?P.call(e,"intl",t,{hash:{}}):n,i+=F(t)+"\n\t\t\t\t"}function u(e){var t,n,i="";return i+="\n\t\t\t\t\t",t="mm_dntme_alltime_blocked_1",I=a.intl,n=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===B?n.call(e,t,{hash:{}}):n===z?P.call(e,"intl",t,{hash:{}}):n,i+=F(t)+" <b>",I=a.formattedTotal,t=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"formattedTotal"),typeof t===B?t=t.call(e,{hash:{}}):t===z&&(t=P.call(e,"formattedTotal",{hash:{}})),i+=F(t)+"</b> ",t="mm_dntme_alltime_blocked_2",I=a.intl,n=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===B?n.call(e,t,{hash:{}}):n===z?P.call(e,"intl",t,{hash:{}}):n,i+=F(t)+"\n\t\t\t\t"}function p(e,t){var n,i,r="";return r+='\n  <div id="chartArea" class="clearfix medals-expanded-wrapper" style="display:none;">\n  ',I=a.showMedals,n=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"showMedals"),i=a["if"],x=S.program(13,m,t),x.hash={},x.fn=x,x.inverse=S.program(38,N,t),n=i.call(e,n,x),(n||0===n)&&(r+=n),r+="\n  </div>\n "}function m(e,t){var n,i,r="";return r+='\n\t\t<div class="medals-sanity-check">\n\t\t\t<div class="medals-display">\n\t\t\t\t<ul class="medals-list">\n\t\t\t\t\t<li class="bronze medal ',I=a.achievedBronze,n=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"achievedBronze"),i=a["if"],x=S.program(14,h,t),x.hash={},x.fn=x,x.inverse=S.noop,n=i.call(e,n,x),(n||0===n)&&(r+=n),r+='">\n\t\t\t\t\t\t<span class="medal-graphic"></span><br />\n\t\t\t\t\t\t<span class="medal-count">',I=a.achievedBronze,n=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"achievedBronze"),i=a["if"],x=S.program(16,_,t),x.hash={},x.fn=x,x.inverse=S.program(18,f,t),n=i.call(e,n,x),(n||0===n)&&(r+=n),r+='</span>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class="silver medal ',I=a.achievedSilver,n=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"achievedSilver"),i=a["if"],x=S.program(20,g,t),x.hash={},x.fn=x,x.inverse=S.noop,n=i.call(e,n,x),(n||0===n)&&(r+=n),r+='">\n\t\t\t\t\t\t<span class="medal-graphic"></span><br />\n\t\t\t\t\t\t<span class="medal-count">',I=a.achievedSilver,n=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"achievedSilver"),i=a["if"],x=S.program(22,y,t),x.hash={},x.fn=x,x.inverse=S.program(24,b,t),n=i.call(e,n,x),(n||0===n)&&(r+=n),r+='</span>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class="gold medal ',I=a.achievedGold,n=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"achievedGold"),i=a["if"],x=S.program(26,v,t),x.hash={},x.fn=x,x.inverse=S.noop,n=i.call(e,n,x),(n||0===n)&&(r+=n),r+='">\n\t\t\t\t\t\t<span class="medal-graphic"></span><br />\n\t\t\t\t\t\t<span class="medal-count">',I=a.achievedGold,n=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"achievedGold"),i=a["if"],x=S.program(28,w,t),x.hash={},x.fn=x,x.inverse=S.program(30,k,t),n=i.call(e,n,x),(n||0===n)&&(r+=n),r+='</span>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class="platinum medal ',I=a.achievedPlatinum,n=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"achievedPlatinum"),i=a["if"],x=S.program(32,E,t),x.hash={},x.fn=x,x.inverse=S.noop,n=i.call(e,n,x),(n||0===n)&&(r+=n),r+='">\n\t\t\t\t\t\t<span class="medal-graphic"></span><br />\n\t\t\t\t\t\t<span class="medal-count">',I=a.achievedPlatinum,n=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"achievedPlatinum"),i=a["if"],x=S.program(34,A,t),x.hash={},x.fn=x,x.inverse=S.program(36,T,t),n=i.call(e,n,x),(n||0===n)&&(r+=n),r+='</span>\n\t\t\t\t\t</li>\n\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div class="more-stats">\n\t\t\t\t<p>',n="mm_dntme_dnt_stats_only",I=a.intl,i=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===B?i.call(e,n,{hash:{}}):i===z?P.call(e,"intl",n,{hash:{}}):i,r+=F(n)+'<span id="nextMedalAt">',I=a.nextMedalAtFormatted,n=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"nextMedalAtFormatted"),typeof n===B?n=n.call(e,{hash:{}}):n===z&&(n=P.call(e,"nextMedalAtFormatted",{hash:{}})),r+=F(n)+"</span> ",n="mm_dntme_dnt_stats_moreUntil",I=a.intl,i=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===B?i.call(e,n,{hash:{}}):i===z?P.call(e,"intl",n,{hash:{}}):i,r+=F(n)+'</p>\n\t\t\t\t<a class="see-stats-btn" href="#">',n="mm_dntme_dnt_stats_seeAll",I=a.intl,i=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===B?i.call(e,n,{hash:{}}):i===z?P.call(e,"intl",n,{hash:{}}):i,r+=F(n)+"</a>\n\t\t\t</div>\n\t\t</div>\n  "}function h(){return"achieved"}function _(){return"&#10003;"}function f(){return"X"}function g(){return"achieved"}function y(){return"&#10003;"}function b(){return"X"}function v(){return"achieved"}function w(){return"&#10003;"}function k(){return"X"}function E(){return"achieved"}function A(e){var t;return I=a.getPlatinumCount,t=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getPlatinumCount"),typeof t===B?t=t.call(e,{hash:{}}):t===z&&(t=P.call(e,"getPlatinumCount",{hash:{}})),F(t)}function T(){return"X"}function N(e){var t,n,i="";return i+='\n      <a class="see-stats-btn" href="#" style="width:120px;margin:5px auto;">',t="mm_dntme_dnt_stats_seeAll",I=a.intl,n=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===B?n.call(e,t,{hash:{}}):n===z?P.call(e,"intl",t,{hash:{}}):n,i+=F(t)+"</a>\n  "}a=a||e.helpers;var D,M,I,x,C="",S=this,B="function",P=a.helperMissing,z=void 0,F=this.escapeExpression;return C+='<div id="DNTPNewBadge" class="clearfix" style="display: none;">\n\t<div class="close-badge"></div>\n\t\t<span class="halfBadge">\n\t\t\t<div class="badgeText badgeIconSmall badge',I=a.getBadgeType,D=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getBadgeType"),typeof D===B?D=D.call(t,{hash:{}}):D===z&&(D=P.call(t,"getBadgeType",{hash:{}})),C+=F(D)+'Img"></div>\n\t\t\t<div class="badgeCongratsNormal">\n\t\t\t\t<div class="blueText congrats">',D="mm_dntme_congrats",I=a.intl,M=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),D=typeof M===B?M.call(t,D,{hash:{}}):M===z?P.call(t,"intl",D,{hash:{}}):M,C+=F(D)+'</div>\n\t\t\t\t<div>\n\t\t\t\t\t<span class="darkText blocked-over">',D="mm_dntme_youve_blocked_over",I=a.intl,M=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),D=typeof M===B?M.call(t,D,{hash:{}}):M===z?P.call(t,"intl",D,{hash:{}}):M,C+=F(D)+'</span>\n\t\t\t\t\t<div class="blueText number-trackers">',I=a.getBadgeCount,D=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getBadgeCount"),typeof D===B?D=D.call(t,{hash:{}}):D===z&&(D=P.call(t,"getBadgeCount",{hash:{}})),C+=F(D)+" ",D="mm_dntme_trackers",I=a.intl,M=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),D=typeof M===B?M.call(t,D,{hash:{}}):M===z?P.call(t,"intl",D,{hash:{}}):M,C+=F(D)+'</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</span>\n</div>\n<div id="viewDetailedStats" class="open clearfix">\n\t\t<div class="allTimeTotal clearfix">\n\t\t\t',I=a.compact,D=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"compact"),M=a.unless,x=S.program(1,r,i),x.hash={},x.fn=x,x.inverse=S.program(7,c,i),D=M.call(t,D,x),(D||0===D)&&(C+=D),C+="\n\t\t</div>\n</div>\n",I=a.compact,D=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"compact"),M=a.unless,x=S.program(12,p,i),x.hash={},x.fn=x,x.inverse=S.noop,D=M.call(t,D,x),(D||0===D)&&(C+=D),C}),ABINE_DNTME.CompiledTemplates.dntme_page_dnt_stats}),ABINE_DNTME.define("abine/views/dntmeStats",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies"],function(e,t,a,n,i,r,o){var s=a.View.extend({tagName:"div",templateName:"dntme_page_dnt_stats",className:"dntme_dntStats",events:{"click #viewDetailedStats":"viewDetailedStats","click .allTimeTotal .blue":"viewDetailedStats","click .cash-for-cards-webapp-signup":"openCashForCardsSignup","click .see-stats-btn":"openStatsPage","click .understandingTrackers":"openUnderstandingTrackers","click .medals-display":"reshowLastMedal"},afterInitialize:function(){this.model.sync("read",this,{eventName:"read:dntStats:getBadgeData",success:function(e){this.model.bronzeLimit=e.totalBlocked.levels[0].limit,this.model.silverLimit=e.totalBlocked.levels[1].limit,this.model.goldLimit=e.totalBlocked.levels[2].limit,this.model.platinumLimit=e.totalBlocked.levels[3].limit,this.render()},error:function(){ABINE_DNTME.log.error("[ERROR HANDLER]#[abine/models/dntStats]#[getBadgeData]# error event in model.sync event: read:dntStats:getBadgeData")}})},openUnderstandingTrackers:function(e){e.preventDefault(),this.trigger("open:understanding:tracker")},reshowLastMedal:function(e){e.preventDefault(),this.model.achievedBronze()&&(t("#DNTPNewBadge",this.el).slideDown(),this.hideChart())},openCashForCardsSignup:function(e){this.model.toggleViewedBadge(),o.webapp.openCashForCardsSignup(),e.preventDefault(),this.trigger("close")},hideChart:function(){var t=e.bind(function(){this.trigger("resize")},this);this.$("#chartArea").slideUp(t),this.$("#viewDetailedStats").removeClass("open")},showChart:function(){this.trigger("max-height");var t=e.bind(function(){this.trigger("resize")},this);this.$("#chartArea").slideDown(t),this.$("#viewDetailedStats").addClass("open")},viewDetailedStats:function(e){e.preventDefault(),this.$("#viewDetailedStats").hasClass("open")?this.hideChart():this.showChart()},openStatsPage:function(e){return e.preventDefault(),o.webapp.openStats(),this.trigger("close"),!1}});return s}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_main=e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+='\n    <div class="dynamicPanels">\n      ',d=a.panelSections,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"panelSections"),i=a.each,u=m.program(2,o,t),u.hash={},u.fn=u,u.inverse=m.noop,n=i.call(e,n,u),(n||0===n)&&(r+=n),r+="\n    </div>\n  "}function o(e,t){var n,i,r="";return r+='\n        <div id="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof n===h?n=n.call(e,{hash:{}}):n===f&&(n=_.call(e,"this.id",{hash:{}})),r+=g(n)+'" ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"height"),i=a["if"],u=m.program(3,s,t),u.hash={},u.fn=u,u.inverse=m.noop,n=i.call(e,n,u),(n||0===n)&&(r+=n),r+=' class="panelSection ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"class_name"),typeof n===h?n=n.call(e,{hash:{}}):n===f&&(n=_.call(e,"this.class_name",{hash:{}})),r+=g(n)+'">\n          ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"body"),typeof n===h?n=n.call(e,{hash:{}}):n===f&&(n=_.call(e,"this.body",{hash:{}})),(n||0===n)&&(r+=n),r+="\n        </div>\n      "}function s(e){var t,a="";return a+='style="height:',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"height"),typeof t===h?t=t.call(e,{hash:{}}):t===f&&(t=_.call(e,"this.height",{hash:{}})),a+=g(t)+'"'}a=a||e.helpers;var l,c,d,u,p="",m=this,h="function",_=a.helperMissing,f=void 0,g=this.escapeExpression;return p+='<div class="page clearfix">\n  ',l="contentSection",d=a.child,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"child",l,{hash:{}}):c,p+=g(l)+"\n  ",l="dntStats",d=a.child,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"child",l,{hash:{}}):c,p+=g(l)+"\n  ",d=a.dynamicPanel,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"dynamicPanel"),c=a["if"],u=m.program(1,r,i),u.hash={},u.fn=u,u.inverse=m.noop,l=c.call(t,l,u),(l||0===l)&&(p+=l),p+="\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_page_main}),ABINE_DNTME.define("abine/views/dntmePage",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/intl","abine/views/dntmeStats","abine/views/cardAlert","abine/views/pageTracker","abine/views/dashboard","abine/views/trackingDashboard","abine/views/settingsDashboard","abine/views/loginHelp"],function(e,t,a,n,i,r,o,s,l,c,d,u,p,m,h){var _=a.View.extend({templateName:"dntme_empty"}),f=i.extend({events:{"click .panelSection":"performActions","click .close-badge":"toggleBadge"},templateName:"dntme_page_main",className:"dntme_page",toggleBadge:function(){return this.options.compact?(this.model.dntStats.toggleViewedBadge(),this.trigger("show-trackers"),void this.options.messenger.send("update:panelActivity:closed",{panelId:8000005})):(t("#chartArea",this.el).slideDown("fast"),t("#DNTPNewBadge",this.el).slideUp(),this.trigger("max-height"),void(this.model.get("premium")?this.options.messenger.send("update:panelActivity:closed",{panelId:8000004}):this.options.messenger.send("update:panelActivity:closed",{panelId:8000005})))},autoResize:function(){this.trigger("resize")},reload:function(){this.model.fetch({success:e.bind(this.render,this)})},refreshPanel:function(t){this.children&&this.children.contentSection&&!this.model.get("settingsChanged")&&this.model.trackers.length!=t.total&&this.model.fetch({success:e.bind(function(){var e=this.children.contentSection;if(this.children&&e&&e.trackerSection){var t=e.trackerSection.isOpen();e.trackerSection.render(),t&&e.trackerSection.toggleSection(null,!0),this.options.compact&&this.updateStats()}this.autoResize()},this)})},updateStats:function(){this.model.get("reloadRequired")||this.options.compact&&"medals"!=this.options.page&&!this.options.cardAlertPanel?"weekly-report"==this.options.page&&t(".dntme_dntStats",this.el).hide():(this.children.dntStats.render(),this.model.dntStats.showMedals()&&!this.model.dntStats.viewedBadge()?(t("#chartArea",this.el).hide(),t("#allTimeTotal",this.el).hide(),t("#DNTPNewBadge",this.el).show(),this.model.get("premium")?this.options.messenger.send("update:panelActivity:impression",{panelId:8000004}):this.options.messenger.send("update:panelActivity:impression",{panelId:8000005}),this.options.compact||this.model.dntStats.toggleViewedBadge()):(this.options.cardAlertPanel&&(this.model.get("showFreeCard")?this.options.messenger.send("update:panelActivity:impression",{panelId:4000006}):this.options.messenger.send("update:panelActivity:impression",{panelId:4000005})),t("#DNTPNewBadge",this.el).hide())),this.$("#chartArea").hide()},afterInitialize:function(){this.doc=this.el.ownerDocument,this.model=new n.TabData({messenger:this.options.messenger}),this.options.dynamicPanel&&(this.model.dynamicPanel=this.options.dynamicPanel,this.setupDynamicPanel(),this.model.panelSections=this.panelSections),this.options.compact&&(this.templateName="dntme_page_compact",this.model.compact=!0),this.weakBindTo(this.options.messenger,"background:dntme:tracker-count-changed",e.debounce(e.bind(this.refreshPanel,this),1e3)),this.on("render",e.bind(function(){this.model.trackers.messenger=this.options.messenger,this.model.blacklist.messenger=this.options.messenger,this.model.get("weeklyReport")&&t(".weeklyReport span",this.el.ownerDocument).text(this.model.get("weeklyReport")),
this.model.get("maskmeInstalled")&&(this.options.compact||t(".footer",this.el.ownerDocument).hide()),this.options.compact&&t(".premium span.date",this.el.ownerDocument).text(this.model.get("installMonth")),this.updateStats(),this.trigger("resize"),t("div.allTimeTotal div.trackers-blocked span.date",this.el.ownerDocument).text(this.model.get("installMonth"))},this)),r.setTimeout(e.bind(function(){this.model.fetch({success:e.bind(function(){if(this.options.compact&&!this.options.page&&!this.options.cardAlertPanel){if(this.model.get("weeklyReport"))return void this.trigger("show-report");if(this.model.dntStats.canAutoShowBadge())return void this.trigger("show-medals")}this.render()},this)})},this),0)},showTrackers:function(){this.children.contentSection.toggleSection()},createChildren:function(){var t;this.options.highlight&&this.model.get("loggedIn")&&(this.model.showSettings=!0);var a={model:this.model,compact:this.options.compact,domain:this.options.domain,contentManager:this.options.contentManager,messenger:this.options.messenger,doc:this.el.ownerDocument,highlight:this.options.highlight,timeout:this.options.timeout,switchTo:this.options.switchTo};this.options.cardAlertPanel?(t=new c(a),t.on("close",e.bind(function(){this.options.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("close")},this)),t.on("got-it",e.bind(function(){this.options.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),this.trigger("close")},this))):t="dashboard"==this.options.page?new u(a):"login_help"==this.options.page?new h(a):this.options.compact?new d(a):new p(a),t.transferEvents(["resize","max-height","show-trackers","show-dashboard","mask-passwords","close","show-settings","refresh-preferences","open:understanding:tracker","ignore-blur"],this),t.on("change-dashboard",e.bind(function(e){this.options.page=e,this.reload()},this)),t.on("mask-passwords",e.bind(this.maskPasswords,this)),this.model.dntStats.compact=this.model.compact;var n=new l({model:this.model.dntStats,doc:this.el.ownerDocument});return n.transferEvents(["close","resize","max-height","open:understanding:tracker"],this),("login_help"==this.options.page||this.model.showSettings)&&(n=new _({model:{},doc:this.el.ownerDocument})),{contentSection:t,dntStats:n}}});return f}),ABINE_DNTME.define("abine/views/dntmePageBase",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/intl"],function(e,t,a,n,i,r,o,s){var l=a.View.extend({toggleSwitch:function(a){var i=t(a.target);if(!i.hasClass("skip")&&(i.hasClass("setting-row")||(i=t(a.target).parents(".setting-row")),!i.hasClass("disabled"))){var r=t(".switch",i);if(!t(r).data("changing")){var o={},l=i.data("type"),c=i.data("name");o.id=i.data("id")||this.model.blacklist.get("id"),o.domain=i.data("domain")||this.model.blacklist.get("domain"),o.type=l,o.name=c,o.value=!r.hasClass("blacklist"==l?"off":"on");var d,u=null;switch(c){case"identity":d=this.model.blacklist.get("globalIdentity"),u="suggestIdentities";break;case"real_card":d=this.model.blacklist.get("globalRealCard"),u="suggestRealCard";break;case"save_card":d=this.model.blacklist.get("globalSaveCard"),u="saveCard";break;case"password":d=this.model.blacklist.get("globalPassword"),u="suggestStrongPassword";break;case"account":d=this.model.blacklist.get("globalLogin"),u="helpMeLogin";break;case"submit_account":d=this.model.blacklist.get("globalSubmitAccount"),u="submitAccount";break;case"address":d=this.model.blacklist.get("globalAddress"),u="suggestAddresses";break;case"tracker":d=this.model.blacklist.get("globalTracker"),u="browsing";break;case"save_account":d=this.model.blacklist.get("globalAccounts"),u="rememberAccounts";break;default:d=this.model.blacklist.get("global"+c.charAt(0).toUpperCase()+c.slice(1)),u=c}if(0==o.value&&0==d&&!this.options.inline)return this.model.trigger("open-global-setting",{highlight:u}),void this.showSettingsSubPage("global-panel-settings",u);var p=o.value;"blacklist"==l&&(p=!p),t(r).data("changing",!0),t(".knob",r).animate({marginLeft:p?20:0},e.bind(function(){t(r).removeData("changing");var e=new n.BlacklistOrPreference;this.options.inline&&(o.suppressWebapp=!0),e.save(o),i.toggleClass("off"),r.toggleClass("off").toggleClass("on"),t(".message",i).removeAttr("data-original-title");var a=o.value?"on":"off";"browsing"==u?t(".message",i).attr("title",s.getText("mm_dntme_help_what_will_happen_"+a+"_"+u.toLowerCase()),"this site"):t(".message",i).attr("title",s.getText("mm_dntme_help_what_will_happen_"+a+"_"+u.toLowerCase())),t(".message",i).tooltip({delay:0}),"blacklist"==l&&this.featureToggled(c)},this))}}},trackerToggled:function(){this.featureToggled("individual-tracker")},featureToggled:function(t){this.model.fetch({success:e.bind(function(){var a=this.children.trackerSection;"tracker"==t&&a&&(this.model.get("disabled")?this.$(".section-content",a.el).slideUp("slow",e.bind(function(){a.render(),this.trigger("resize")},this)):(a.render(),this.trigger("resize"))),this.children.settingsChanged?this.children.settingsChanged.update(t):this.model.trigger("settings-changed",{feature:t}),r.setTimeout(e.bind(function(){this.model.get("toggledOff")&&!this.model.custom.isFeedbackShown()&&this.model.custom.setCustomTabData("feedbackShown",!0)},this),500)},this)})},showSettings:function(e){e&&e.preventDefault(),this.trigger("show-settings")},showSettingsSubPage:function(e,t){this.trigger("show-settings",null,{highlight:t,subPage:e})}});return l}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_settings_changed=e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+='\n  <div class="alert">\n    <i class="icon-warning-sign"></i>\n    ',m=a.custom,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"custom"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"changedFeature"),i=a["if"],h=_.program(2,o,t),h.hash={},h.fn=h,h.inverse=_.program(4,s,t),n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="\n  </div>\n  ",m=a.toggledOff,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"toggledOff"),i=a["if"],h=_.program(6,l,t),h.hash={},h.fn=h,h.inverse=_.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="\n"}function o(e){var t,n,i="";return i+="\n      ",i+="\n      ",m=a.custom,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"custom"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"changedFeature"),typeof t===f?t=t.call(e,{hash:{}}):t===y&&(t=g.call(e,"custom.changedFeature",{hash:{}})),i+=b(t)+" ",t="mm_dntme_toggled_reload",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===f?n.call(e,t,{hash:{}}):n===y?g.call(e,"intl",t,{hash:{}}):n,i+=b(t)+"\n    "}function s(e){var t,n,i="";return i+="\n      ",t="mm_dntme_toggled_reload",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===f?n.call(e,t,{hash:{}}):n===y?g.call(e,"intl",t,{hash:{}}):n,i+=b(t)+"\n    "}function l(e,t){var n,i,r="";return r+="\n    ",m=a.suggestedAllow,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"suggestedAllow"),i=a.unless,h=_.program(7,c,t),h.hash={},h.fn=h,h.inverse=_.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="\n  "}function c(e,t){var n,i,r="";return r+="\n      ",m=a.custom,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"custom"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"isFeedbackShown"),i=a.unless,h=_.program(8,d,t),h.hash={},h.fn=h,h.inverse=_.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="\n    "}function d(e){var t,n,i="";return i+='\n        <div class="thanks alert alert-success" style="display:none"><i class="icon-ok-sign"></i> ',t="mm_dntme_thanks_for_feedback",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===f?n.call(e,t,{hash:{}}):n===y?g.call(e,"intl",t,{hash:{}}):n,i+=b(t)+'</div>\n        <div class="feedback well">\n            ',t="mm_dntme_help_others",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===f?n.call(e,t,{hash:{}}):n===y?g.call(e,"intl",t,{hash:{}}):n,i+=b(t)+"\n            <div id=reasons><ul>\n                <li id=reason1>",t="mm_dntme_reason_site_not_working",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===f?n.call(e,t,{hash:{}}):n===y?g.call(e,"intl",t,{hash:{}}):n,i+=b(t)+"</li>\n                <li id=reason2>",t="mm_dntme_reason_other",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===f?n.call(e,t,{hash:{}}):n===y?g.call(e,"intl",t,{hash:{}}):n,i+=b(t)+'</li>\n                <textarea id="desc" name="description"></textarea>\n                <button id="feedback-submit" class="btn btn-mini btn-success">',t="mm_dntme_feedback_submit",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===f?n.call(e,t,{hash:{}}):n===y?g.call(e,"intl",t,{hash:{}}):n,i+=b(t)+'</button>\n                <span class="text-error" style="display:none;">',t="mm_dntme_please_fill_reason",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===f?n.call(e,t,{hash:{}}):n===y?g.call(e,"intl",t,{hash:{}}):n,i+=b(t)+"</span>\n            </ul></div>\n        </div>\n      "}a=a||e.helpers;var u,p,m,h,_=this,f="function",g=a.helperMissing,y=void 0,b=this.escapeExpression;return m=a.settingsChanged,u=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"settingsChanged"),p=a["if"],h=_.program(1,r,i),h.hash={},h.fn=h,h.inverse=_.noop,u=p.call(t,u,h),u||0===u?u:""}),ABINE_DNTME.CompiledTemplates.dntme_page_settings_changed}),ABINE_DNTME.define("abine/views/settingsChanged",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer"],function(e,t,a,n,i,r){var o=a.View.extend({tagName:"div",templateName:"dntme_page_settings_changed",events:{"click #reason1":"siteNotWorking","click #feedback-submit":"otherReason"},siteNotWorking:function(e){e.preventDefault(),this.submitFeedback(intl.getText("mm_dntme_reason_site_not_working"))},otherReason:function(e){return e.preventDefault(),this.$(".text-error").hide(),""==this.$("#desc").val()?void this.$(".text-error").show():(this.submitFeedback(this.$("#desc").val()),!1)},submitFeedback:function(t){this.$(".feedback").slideUp("slow"),this.$(".thanks").slideDown("slow"),r.setTimeout(e.bind(function(){this.$(".thanks").fadeOut()},this),3e3),this.model.save({feedback:t}),this.doc.defaultView.focus()},update:function(a){if(this.model.get("settingsChanged")){"individual-tracker"!=a?(this.model.custom.setCustomTabData("changedFeature",a),this.model.custom.setCustomTabData("changedFeatureOffStatus",this.model.blacklist.get(a))):(this.model.custom.setCustomTabData("changedFeature",""),this.model.custom.setCustomTabData("changedFeatureOffStatus","")),this.trigger("max-height");var n=this.el.innerHTML;this.render(),n!=this.el.innerHTML&&(t(this.el).hide(),t(this.el).slideDown("slow",e.bind(function(){this.trigger("resize")},this)))}else t(this.el).slideUp("slow",e.bind(function(){this.render(),this.trigger("resize")},this))},afterInitialize:function(){this.doc=this.el.ownerDocument}});return o}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_tracker=e.template(function(e,t,a,n,i){function r(){return"blocked"}function o(){return"with-suggested"}function s(e){var t,n;return t="/pages/images/blocked.png",g=a.assetUrl,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"assetUrl",t,{hash:{}}):n,A(t)}function l(e){var t,n;return t="/pages/images/unblocked.png",g=a.assetUrl,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"assetUrl",t,{hash:{}}):n,A(t)}function c(e){var t,n;return t="mm_dntme_blocked",g=a.intl,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"intl",t,{hash:{}}):n,A(t)}function d(e){var t,n;return t="mm_dntme_unblocked",g=a.intl,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"intl",t,{hash:{}}):n,A(t)}function u(e,t){var n,i;return g=a.suggested,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"suggested"),i=a["if"],y=v.program(14,p,t),y.hash={},y.fn=y,y.inverse=v.noop,n=i.call(e,n,y),n||0===n?n:""}function p(e,t){var n,i;return g=a.blocked,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blocked"),i=a["if"],y=v.program(15,m,t),y.hash={},y.fn=y,y.inverse=v.program(17,h,t),n=i.call(e,n,y),n||0===n?n:""}function m(e){var t,n,i="";return i+='<div class="not suggested">',t="mm_dntme_not_suggested",g=a.intl,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"intl",t,{hash:{}}):n,i+=A(t)+"</div>"}function h(e){var t,n,i="";return i+='<div class="suggested">',t="mm_dntme_suggested",g=a.intl,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"intl",t,{hash:{}}):n,i+=A(t)+"</div>"}a=a||e.helpers;var _,f,g,y,b="",v=this,w="function",k=a.helperMissing,E=void 0,A=this.escapeExpression;return b+='<div class="tracker ',g=a.blocked,_=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blocked"),f=a["if"],y=v.program(1,r,i),y.hash={},y.fn=y,y.inverse=v.noop,_=f.call(t,_,y),(_||0===_)&&(b+=_),b+=" ",g=a.suggested,_=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"suggested"),f=a["if"],y=v.program(3,o,i),y.hash={},y.fn=y,y.inverse=v.noop,_=f.call(t,_,y),(_||0===_)&&(b+=_),b+=' clearfix">\n  <span class="name">',g=a.name,_=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"name"),typeof _===w?_=_.call(t,{hash:{}}):_===E&&(_=k.call(t,"name",{hash:{}})),b+=A(_)+'</span>\n  <div class="state"><img class="tracker-image" src="',g=a.blocked,_=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blocked"),f=a["if"],y=v.program(5,s,i),y.hash={},y.fn=y,y.inverse=v.program(7,l,i),_=f.call(t,_,y),(_||0===_)&&(b+=_),b+='" /></div>\n  <div class="message">\n    ',g=a.blocked,_=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blocked"),f=a["if"],y=v.program(9,c,i),y.hash={},y.fn=y,y.inverse=v.program(11,d,i),_=f.call(t,_,y),(_||0===_)&&(b+=_),b+="\n  ",g=a.hasSuggested,_=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasSuggested"),f=a["if"],y=v.program(13,u,i),y.hash={},y.fn=y,y.inverse=v.noop,_=f.call(t,_,y),(_||0===_)&&(b+=_),b+="\n  </div>\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_page_tracker}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_tracker_list=e.template(function(e,t,a,n,i){function r(){return"disabled"}function o(e,t){var n,i,r="";return r+=" ",b=a.trackers,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"length"),i=a.unless,v=k.program(4,s,t),v.hash={},v.fn=v,v.inverse=k.noop,n=i.call(e,n,v),(n||0===n)&&(r+=n),r}function s(){return"no-trackers"}function l(){return"off"}function c(){return"off"}function d(){return"on"}function u(e,t){var n,i,r="";return r+="\n        ",b=a.blacklist,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklist"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"trackerOff"),i=a["if"],v=k.program(13,p,t),v.hash={},v.fn=v,v.inverse=k.program(15,m,t),n=i.call(e,n,v),(n||0===n)&&(r+=n),r+="\n        </a>\n      "}function p(e){var t,n,i="";return i+='\n          <div class="skip suggested">',t="mm_dntme_suggested",b=a.intl,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===E?n.call(e,t,{hash:{}}):n===T?A.call(e,"intl",t,{hash:{}}):n,i+=N(t)+"</div>\n        "}function m(e){var t,n,i="";return i+='\n          <div class="skip not suggested">',t="mm_dntme_not_suggested",b=a.intl,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===E?n.call(e,t,{hash:{}}):n===T?A.call(e,"intl",t,{hash:{}}):n,i+=N(t)+"</div>\n        "}function h(e,t){var n,i,r="";return r+="\n      ",b=a.blacklist,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklist"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"trackerOff"),i=a.unless,v=k.program(18,_,t),v.hash={},v.fn=v,v.inverse=k.noop,n=i.call(e,n,v),(n||0===n)&&(r+=n),r+="\n    "}function _(e,t){var n,i,r="";return r+="\n        ",b=a.trackers,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"length"),i=a["if"],v=k.program(19,f,t),v.hash={},v.fn=v,v.inverse=k.noop,n=i.call(e,n,v),(n||0===n)&&(r+=n),r+='\n        <div style="padding:5px;margin:0px 10px;">\n          <img src="',n="pages/images/tracking.png",b=a.assetUrl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),n=typeof i===E?i.call(e,n,{hash:{}}):i===T?A.call(e,"assetUrl",n,{hash:{}}):i,r+=N(n)+'" style="width:40px;margin-right:10px;float:left;"/>\n          <a href="#" class="trackerDashboard" style="text-decoration:underline;line-height:1.5;display:block;">',n="mm_dntme_tracking_goto_dashboard",b=a.intl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===E?i.call(e,n,{hash:{}}):i===T?A.call(e,"intl",n,{hash:{}}):i,r+=N(n)+"</a>\n        </div>\n      "}function f(e){var t,n,i="";return i+='\n          <div class="section-content" style="overflow: hidden;display: block;">\n            <div class="list"><div class="content">',t="trackerList",b=a.child,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),t=typeof n===E?n.call(e,t,{hash:{}}):n===T?A.call(e,"child",t,{hash:{}}):n,i+=N(t)+"</div></div>\n          </div>\n        "}a=a||e.helpers;var g,y,b,v,w="",k=this,E="function",A=a.helperMissing,T=void 0,N=this.escapeExpression;return w+='  <div class="section on others clearfix">\n    <div class="section-header clearfix ',b=a.blacklist,g=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),g=null===g||void 0===g||g===!1?g:ABINE_DNTME.Duckbone.Handlebars.getAttr(g,"trackerOff"),y=a["if"],v=k.program(1,r,i),v.hash={},v.fn=v,v.inverse=k.program(3,o,i),g=y.call(t,g,v),(g||0===g)&&(w+=g),w+='">\n      ',g="trackersTitle",b=a.child,y=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),g=typeof y===E?y.call(t,g,{hash:{}}):y===T?A.call(t,"child",g,{hash:{}}):y,w+=N(g)+'\n    </div>\n\n    <div class="clearfix setting-row ',b=a.blacklist,g=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),g=null===g||void 0===g||g===!1?g:ABINE_DNTME.Duckbone.Handlebars.getAttr(g,"trackerOff"),y=a["if"],v=k.program(6,l,i),v.hash={},v.fn=v,v.inverse=k.noop,g=y.call(t,g,v),(g||0===g)&&(w+=g),w+='" data-type="blacklist" data-name="tracker" style="margin:5px 0px;">\n      <div class="message">',g="mm_dntme_tracking_blocker",b=a.intl,y=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),g=typeof y===E?y.call(t,g,{hash:{}}):y===T?A.call(t,"intl",g,{hash:{}}):y,w+=N(g)+'</div>\n      <div class="word switch ',b=a.blacklist,g=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),g=null===g||void 0===g||g===!1?g:ABINE_DNTME.Duckbone.Handlebars.getAttr(g,"trackerOff"),y=a["if"],v=k.program(8,c,i),v.hash={},v.fn=v,v.inverse=k.program(10,d,i),g=y.call(t,g,v),(g||0===g)&&(w+=g),w+='">\n        <div class="knob"></div>\n      </div>\n      ',b=a.suggestedAllow,g=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"suggestedAllow"),y=a["if"],v=k.program(12,u,i),v.hash={},v.fn=v,v.inverse=k.noop,g=y.call(t,g,v),(g||0===g)&&(w+=g),w+='\n      <div class="for">',g="mm_dntme_for_this_website",b=a.intl,y=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),g=typeof y===E?y.call(t,g,{hash:{}}):y===T?A.call(t,"intl",g,{hash:{}}):y,w+=N(g)+"</div>\n    </div>\n\n    ",b=a.compact,g=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"compact"),y=a.unless,v=k.program(17,h,i),v.hash={},v.fn=v,v.inverse=k.noop,g=y.call(t,g,v),(g||0===g)&&(w+=g),w+="\n  </div>"}),ABINE_DNTME.CompiledTemplates.dntme_page_tracker_list}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_tracker_title=e.template(function(e,t,a,n,i){function r(e){var t,n,i="";return i+='\n  <div style="font-size:10pt;text-align: center;width: 100%;">',t="mm_dntme_reload_required",_=a.intl,n=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===b?n.call(e,t,{hash:{}}):n===w?v.call(e,"intl",t,{hash:{}}):n,i+=k(t)+"</div>\n"}function o(e,t){var n,i,r="";return r+='\n  <div class="left-section main-tracker-title" data-dashboard="tracking">\n  ',_=a.blacklist,n=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklist"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"trackerOff"),i=a["if"],f=y.program(4,s,t),f.hash={},f.fn=f,f.inverse=y.program(6,l,t),n=i.call(e,n,f),(n||0===n)&&(r+=n),r+="\n  </div>\n"}function s(e){var t,n,i="";return i+='\n    <div class="message-disabled">\n      <div class="disabled-text">',t="mm_dntme_tracking_disabled",_=a.intl,n=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===b?n.call(e,t,{hash:{}}):n===w?v.call(e,"intl",t,{hash:{}}):n,i+=k(t)+'</div>\n      <div class="disabled-subtext" title="',_=a.host,t=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof t===b?t=t.call(e,{hash:{}}):t===w&&(t=v.call(e,"host",{hash:{}})),i+=k(t)+'">',_=a.host,t=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof t===b?t=t.call(e,{hash:{}}):t===w&&(t=v.call(e,"host",{hash:{}})),i+=k(t)+"</div>\n    </div>\n  "}function l(e,t){var n,i,r="";return r+="\n    ",_=a.trackers,n=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"length"),i=a["if"],f=y.program(7,c,t),f.hash={},f.fn=f,f.inverse=y.program(12,p,t),n=i.call(e,n,f),(n||0===n)&&(r+=n),r+="\n  "}function c(e,t){var n,i,r="";return r+='\n      <div class="count">',_=a.trackers,n=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"getBlocked"),typeof n===b?n=n.call(e,{hash:{}}):n===w&&(n=v.call(e,"trackers.getBlocked",{hash:{}})),r+=k(n)+'</div>\n      <div class="message">\n        <div class="blocked">\n          ',_=a.understanding_tracker_clicked,n=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"understanding_tracker_clicked"),i=a["if"],f=y.program(8,d,t),f.hash={},f.fn=f,f.inverse=y.program(10,u,t),n=i.call(e,n,f),(n||0===n)&&(r+=n),r+="\n          ",n="mm_dntme_blocked_at",_=a.intl,i=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===b?i.call(e,n,{hash:{}}):i===w?v.call(e,"intl",n,{hash:{}}):i,r+=k(n)+'\n        </div>\n        <div class="host" title="',_=a.host,n=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof n===b?n=n.call(e,{hash:{}}):n===w&&(n=v.call(e,"host",{hash:{}})),r+=k(n)+'">at&nbsp;',_=a.host,n=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof n===b?n=n.call(e,{hash:{}}):n===w&&(n=v.call(e,"host",{hash:{}})),r+=k(n)+"</div>\n      </div>\n    "}function d(e){var t,n,i,r="";return r+="\n            ",_=a.trackers,t=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getBlocked"),n="mm_dntme_tracker",_=a.plural,i=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"plural"),t=typeof i===b?i.call(e,n,t,{hash:{}}):i===w?v.call(e,"plural",n,t,{hash:{}}):i,r+=k(t)+"\n          "}function u(e){var t,n,i,r="";return r+='\n            <a href=# class="understandingTrackers">',_=a.trackers,t=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getBlocked"),n="mm_dntme_tracker",_=a.plural,i=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"plural"),t=typeof i===b?i.call(e,n,t,{hash:{}}):i===w?v.call(e,"plural",n,t,{hash:{}}):i,r+=k(t)+"</a>\n          "}function p(e){var t,n,i="";return i+='\n      <div class="message-clear">\n        <div class="count"></div>\n        <div class="all-clear">',t="mm_dntme_clear_skies",_=a.intl,n=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===b?n.call(e,t,{hash:{}}):n===w?v.call(e,"intl",t,{hash:{}}):n,i+=k(t)+'</div>\n        <div class="all-clear-subtext" title="',_=a.host,t=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof t===b?t=t.call(e,{hash:{}}):t===w&&(t=v.call(e,"host",{hash:{}})),i+=k(t)+'">',t="mm_dntme_at",_=a.intl,n=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===b?n.call(e,t,{hash:{}}):n===w?v.call(e,"intl",t,{hash:{}}):n,i+=k(t)+" ",_=a.host,t=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof t===b?t=t.call(e,{hash:{}}):t===w&&(t=v.call(e,"host",{hash:{}})),i+=k(t)+"</div>\n      </div>\n    "}a=a||e.helpers;var m,h,_,f,g="",y=this,b="function",v=a.helperMissing,w=void 0,k=this.escapeExpression;return g+="\n",_=a.reloadRequired,m=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"reloadRequired"),h=a["if"],f=y.program(1,r,i),f.hash={},f.fn=f,f.inverse=y.program(3,o,i),m=h.call(t,m,f),(m||0===m)&&(g+=m),g}),ABINE_DNTME.CompiledTemplates.dntme_page_tracker_title}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_tracker_title_goback=e.template(function(e,t,a,n,i){function r(e){var t,n,i="";return i+='\n  <div style="font-size:10pt;text-align: center;width: 100%;">',t="mm_dntme_reload_required",g=a.intl,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"intl",t,{hash:{}}):n,i+=A(t)+"</div>\n"}function o(e,t){var n,i,r="";return r+="\n<div>\n  ",g=a.trackers,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"length"),i=a["if"],y=v.program(4,s,t),y.hash={},y.fn=y,y.inverse=v.program(9,d,t),n=i.call(e,n,y),(n||0===n)&&(r+=n),r+="\n</div>\n"}function s(e,t){var n,i,r="";return r+='\n    <div class="message">\n      <div class="blocked">\n        <div class="host" title="',g=a.host,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof n===w?n=n.call(e,{hash:{}}):n===E&&(n=k.call(e,"host",{hash:{}})),r+=A(n)+'">',g=a.host,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof n===w?n=n.call(e,{hash:{}}):n===E&&(n=k.call(e,"host",{hash:{}})),r+=A(n)+'</div>\n        <div class="count">\n          ',g=a.trackers,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"getBlocked"),typeof n===w?n=n.call(e,{hash:{}}):n===E&&(n=k.call(e,"trackers.getBlocked",{hash:{}})),r+=A(n)+"\n          ",g=a.understanding_tracker_clicked,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"understanding_tracker_clicked"),i=a["if"],y=v.program(5,l,t),y.hash={},y.fn=y,y.inverse=v.program(7,c,t),n=i.call(e,n,y),(n||0===n)&&(r+=n),r+="\n          ",n="mm_dntme_blocked",g=a.intl,i=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"intl",n,{hash:{}}):i,r+=A(n)+"\n        </div>\n      </div>\n    </div>\n  "}function l(e){var t,n,i,r="";return r+="\n            ",g=a.trackers,t=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getBlocked"),n="mm_dntme_tracker",g=a.plural,i=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"plural"),t=typeof i===w?i.call(e,n,t,{hash:{}}):i===E?k.call(e,"plural",n,t,{hash:{}}):i,r+=A(t)+"\n          "}function c(e){var t,n,i,r="";return r+='\n            <a href=# class="understandingTrackers">',g=a.trackers,t=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getBlocked"),n="mm_dntme_tracker",g=a.plural,i=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"plural"),t=typeof i===w?i.call(e,n,t,{hash:{}}):i===E?k.call(e,"plural",n,t,{hash:{}}):i,r+=A(t)+"</a>\n          "}function d(e,t){var n,i,r="";return r+='\n    <div class="message">\n        <div class="blocked">\n          <div class="host" title="',g=a.host,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof n===w?n=n.call(e,{hash:{}}):n===E&&(n=k.call(e,"host",{hash:{}})),r+=A(n)+'">',g=a.host,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof n===w?n=n.call(e,{hash:{}}):n===E&&(n=k.call(e,"host",{hash:{}})),r+=A(n)+'</div>\n            <div class="count">\n              ',g=a.blacklist,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklist"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"trackerOff"),i=a["if"],y=v.program(10,u,t),y.hash={},y.fn=y,y.inverse=v.program(12,p,t),n=i.call(e,n,y),(n||0===n)&&(r+=n),r+="\n            </div>\n        </div>\n      </div>\n  "}function u(e){var t,n,i="";return i+="\n                ",t="mm_dntme_trackers_allowed",g=a.intl,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"intl",t,{hash:{}}):n,i+=A(t)+"\n              "}function p(e,t){var n,i,r="";return r+="\n                <span>0</span>\n                ",g=a.understanding_tracker_clicked,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"understanding_tracker_clicked"),i=a["if"],y=v.program(13,m,t),y.hash={},y.fn=y,y.inverse=v.program(15,h,t),n=i.call(e,n,y),(n||0===n)&&(r+=n),r+="\n                ",n="mm_dntme_blocked",g=a.intl,i=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"intl",n,{hash:{}}):i,r+=A(n)+"\n              "}function m(e){var t,n,i,r="";return r+="\n                  ",g=a.trackers,t=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getBlocked"),n="mm_dntme_tracker",g=a.plural,i=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"plural"),t=typeof i===w?i.call(e,n,t,{hash:{}}):i===E?k.call(e,"plural",n,t,{hash:{}}):i,r+=A(t)+"\n                "}function h(e){var t,n,i,r="";return r+='\n                  <a href=# class="understandingTrackers">',g=a.trackers,t=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getBlocked"),n="mm_dntme_tracker",g=a.plural,i=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"plural"),t=typeof i===w?i.call(e,n,t,{hash:{}}):i===E?k.call(e,"plural",n,t,{hash:{}}):i,r+=A(t)+"</a>\n                "}a=a||e.helpers;var _,f,g,y,b="",v=this,w="function",k=a.helperMissing,E=void 0,A=this.escapeExpression;return b+='<div class="go-back-tracker"><img src="',_="/pages/images/back.png",g=a.assetUrl,f=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),_=typeof f===w?f.call(t,_,{hash:{}}):f===E?k.call(t,"assetUrl",_,{hash:{}}):f,b+=A(_)+'" width="18px;" style="padding-top:12px;"/></div>\n',g=a.reloadRequired,_=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"reloadRequired"),f=a["if"],y=v.program(1,r,i),y.hash={},y.fn=y,y.inverse=v.program(3,o,i),_=f.call(t,_,y),(_||0===_)&&(b+=_),b}),ABINE_DNTME.CompiledTemplates.dntme_page_tracker_title_goback}),ABINE_DNTME.define("abine/views/pageTracker",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies"],function(e,t,a,n,i,r,o){var s=a.View.extend({tagName:"div",templateName:"dntme_page_tracker",className:"dntme_tracker",events:{"click .suggested":"openSuggested","click .tracker":"toggleTracker"},openSuggested:function(e){e.preventDefault(),o.securityManager.openLink({type:"recommended",tracker:this.model.get("name")})},toggleTracker:function(e){e.target.className&&e.target.className.indexOf("suggested")!=-1||(this.model.save({blocked:!this.model.get("blocked")}),this.model.collection.trigger("changed"))},afterInitialize:function(){this.doc=this.el.ownerDocument}}),l=a.ListView.extend({tagName:"div",className:"",viewClass:s}),c=a.View.extend({tagName:"span",templateName:"dntme_page_tracker_title",className:"dntme_tracker_title",events:{"click .understandingTrackers":"openUnderstandingTrackers"},afterInitialize:function(){this.doc=this.el.ownerDocument},openUnderstandingTrackers:function(e){e.preventDefault(),this.trigger("open:understanding:tracker")}}),d=a.View.extend({tagName:"span",templateName:"dntme_page_tracker_title_goback",className:"dntme_tracker_title",events:{"click .go-back-tracker":"goBack","click .understandingTrackers":"openUnderstandingTrackers"},afterInitialize:function(){this.doc=this.el.ownerDocument},goBack:function(){this.trigger("change-dashboard","dashboard");
},openUnderstandingTrackers:function(e){e.preventDefault(),this.trigger("open:understanding:tracker")}}),u=a.View.extend({events:{"click .section-header":"toggleSection","click a.trackerDashboard":"trackerDashboard"},tagName:"div",templateName:"dntme_page_tracker_list",className:"dntme_trackers",trackerDashboard:function(e){e.preventDefault(),o.webapp.openStats(),this.trigger("close")},afterInitialize:function(){this.doc=this.el.ownerDocument,this.model.trackers.on("changed",e.bind(function(){this.children.trackersTitle.render(),this.trigger("trackerToggled")},this))},beforeRemove:function(){this.model.trackers.off("changed")},autoResize:function(){this.trigger("resize")},toggleSection:function(e){if(e&&e.preventDefault(),this.options.compact)return void this.trigger("show-dashboard")},isOpen:function(){return!this.$(".section-header").parent(".section").hasClass("off")},createChildren:function(){var e=this.options.withGoBack?d:c;return this.children={trackersTitle:new e({model:this.model,doc:this.el.ownerDocument}),trackerList:new l({collection:this.model.trackers,doc:this.el.ownerDocument})},this.children.trackersTitle.transferEvents(["change-dashboard","open:understanding:tracker"],this),this.children}});return u.TitleView=c,u}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_panel=e.template(function(e,t,a,n,i){function r(e){var t,n,i="";return i+='\n          <span class="dashboard">',t="mm_dntme_premium_user",c=a.intl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"intl",t,{hash:{}}):n,i+=f(t)+"</span>\n        "}function o(e){var t,n,i="";return i+='\n          <span class="premium-link">',t="mm_dntme_go_premium",c=a.intl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"intl",t,{hash:{}}):n,i+=f(t)+"</span>\n        "}a=a||e.helpers;var s,l,c,d,u="",p=this,m="function",h=a.helperMissing,_=void 0,f=this.escapeExpression;return u+='<div class="panel">\n  <div class="content-wrap">\n    <div class="page-content clearfix">\n      <img src="',s="pages/images/blur_xclose_ext.png",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"assetUrl",s,{hash:{}}):l,u+=f(s)+'" class="close-link" style="cursor:pointer;position:absolute;left:280px;top:10px;z-index:1;"/>\n      <div class="one">',s="pageContent",c=a.child,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"child",s,{hash:{}}):l,u+=f(s)+'</div>\n      <div class="two" style="display:none;border-bottom: 1px solid #cccccc;">',s="settingsContent",c=a.child,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"child",s,{hash:{}}):l,u+=f(s)+'</div>\n    </div>\n  </div>\n  <div id="mapForm" style="display:none;text-align: center;padding: 5px;font-weight: bold;border-bottom:1px solid #3498db;"><a href="#">',s="mm_correct_blur",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"intl",s,{hash:{}}):l,u+=f(s)+'</a></div>\n  <div class="header dntme clearfix" style="height:auto;">\n    <div class="logo-link">\n      <img class="logo" id="blur-logo-action" style="margin-left:-4px;height:16px;width:auto;" src="',c=a.panelLogoBig,s=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"panelLogoBig"),typeof s===m?s=s.call(t,{hash:{}}):s===_&&(s=h.call(t,"panelLogoBig",{hash:{}})),u+=f(s)+'"/>\n    </div>\n    <div class="links-wrapper">\n      <div class="links">\n        <strong style="color:green;">\n        ',c=a.premium,s=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"premium"),l=a["if"],d=p.program(1,r,i),d.hash={},d.fn=d,d.inverse=p.program(3,o,i),s=l.call(t,s,d),(s||0===s)&&(u+=s),u+='\n        </strong>\n      </div>\n      <div class="links help-link">\n         ',s="mm_dntme_help",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"intl",s,{hash:{}}):l,u+=f(s)+'\n      </div>\n      <div class="links settings-link">\n        ',s="mm_dntme_settings",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof l===m?l.call(t,s,{hash:{}}):l===_?h.call(t,"intl",s,{hash:{}}):l,u+=f(s)+"\n      </div>\n    </div>\n  </div>\n</div>\n"}),ABINE_DNTME.CompiledTemplates.dntme_panel}),ABINE_DNTME.define("abine/views/dntmePanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/contentMessenger","documentcloud/backbone","abine/proxies","abine/views/dntmePage","abine/views/settingsDashboard","abine/intl","abine/timer","abine/responseCodes"],function(e,t,a,n,i,r,o,s,l,c,d,u,p,m){function h(e,t){t=t||"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!-$#%^@";for(var a="",n=0;n<e;n++)a+=t.charAt(Math.floor(Math.random()*t.length));return a}var _=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i,f=a.View.extend({tagName:"div",templateName:"dntme_empty",afterInitialize:function(){this.doc=this.el.ownerDocument},load:function(){var e=this.options.realView();e.load=e.reload,t(this.el).replaceWith(e.el),e.delegateEvents(),this.options.postLoad&&this.options.postLoad(e)}}),g=i.extend({templateName:"dntme_panel",events:{"click .close-link":"logClose","click .settings-link":"showSettingsView","click .premium-link":"showPremium","click .help-link":"showHelp","click .logo-link":"logoClick","click .home-link":"logoClick","click #pageView":"showPageView","click #mapForm":"mapForm","click .dashboard":"openDashboard","click .premium-a-link":"openPremiumA","click .premium-b-link":"openPremiumB","click .premium":"openPremiumC","click .cash-for-cards-webapp-signup":"openCashForCardsSignup","click .weeklyReport":"openWeeklyReport","click .medal-notification":"clickedNormalMedalNotification","click .medal-with-card-notification":"clickedMedalWithCardNotification","click #complete-setup":"openPostInstall","click #not-now":"clickedNotNow","click #submit-email":"autoregFromIntrusive","click #seeBlur":"openBlurPage","click .more-options":"closePanel"},logoClick:function(e){e.preventDefault(),this.children.pageContent.model.get("maskmeInstalled")?l.securityManager.openLink({type:"dntme"}):l.webapp.openDashboard(),this.closePanel()},openPostInstall:function(){l.licenseModule.logSplitData({bucket_id:this.options.intrusiveSplit,test_data:{int1:1}}),l.securityManager.openPostInstall()},clickedNotNow:function(){l.licenseModule.logSplitData({bucket_id:this.options.intrusiveSplit,test_data:{int2:1}}),this.$("#complete-setup-div").hide();var e=new n.Preference;e.save({key:"notNowClicked",value:"true"}),this.panelId&&this.contentManager.messenger.send("update:panelActivity:closed",{panelId:this.panelId})},autoregFromIntrusive:function(){l.licenseModule.logSplitData({bucket_id:this.options.intrusiveSplit,test_data:{int3:1}}),this.setupUser()},mapForm:function(e){e.preventDefault(),this.options.contentManager.showMapForm({formId:this.forms[0],forms:this.forms}),this.closePanel(e,!0),this.trigger("remove")},setupUser:function(a,n){function i(e,a){try{f.get(0).ownerDocument&&(n?t(".loading-message",f).text(u.getText("mm_loading_display_register_use"+Math.floor(e/5))):t(".loading-message",f).text(u.getText("mm_loading_display_register"+Math.floor(e/5))),e<a&&(g=p.setTimeout(function(){i(e+1,a)},500)))}catch(e){}}a&&a.preventDefault(),n=n||!1;var r=this.$("#protect-email").val(),o=this.$("#password-field").val(),s=this.$("#password-field").length>0,c=this.$("#error");if(c.hide(),!r.match(_))return this.$("#welcome-message").hide(),c.text(u.getText("mm_dntme_invalid_email")).show(),void this.autoResize();if(s&&0==o.length)return this.$("#welcome-message").hide(),c.text(u.getText("mm_dntme_invalid_password")).show(),void this.autoResize();var d=h(6),m={email:r,password:s?o:d,password_hint:u.getText("mm_pwhint_default"),generated_password:!s,register_type:"dnt_intrusive_panel",send_password_email:!s},f=this.$("#progress-section"),g=null;i(0,20),f.show(),this.$("#welcome-message, #form-div").hide(),l.licenseModule.register(m,e.bind(function(t,a){this.processRegistration(t,a,m,e.bind(function(e){e?(this.panelId&&this.contentManager.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId}),p.clearTimeout(g),f.hide()):(this.panelId&&this.contentManager.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),l.licenseModule.logSplitData({bucket_id:this.options.intrusiveSplit,test_data:{int4:1}}),this.$("#complete-setup-div").hide(),this.openTour())},this))},this)),this.autoResize()},processRegistration:function(t,a,n,i){if(t){var r=u.getText("mm_dntme_register_error"),o=t.responseJSON&&t.responseJSON.data?t.responseJSON.data.errors:null;"invalid email address"==t.responseJSON.error_code?r=u.getText("mm_dntme_invalid_email_server_error"):t.responseJSON.error_code==m.SCHEDULED_DOWNTIME?r=u.getText("mm_dntme_server_maintenance"):o&&o.email&&("has already been taken"==o.email[0]?r=u.getText("mm_dntme_duplicate_email",[n.email]):"was used for MaskMe Heavy"==o.email[0]&&(r=u.getText("mm_dntme_version_not_allowed"))),this.$("#welcome-message").hide(),this.$("#error").html(r).show(),t.responseJSON&&t.responseJSON.data&&1==t.responseJSON.data.generated_password?this.$("#error #loginButton").click(e.bind(function(e){return l.licenseModule.logSplitData({bucket_id:this.options.intrusiveSplit,test_data:{int5:1}}),this.openPasswordSetupPage(n.email),e.preventDefault(),!1},this)):this.$("#error #loginButton").click(e.bind(function(e){return l.licenseModule.logSplitData({bucket_id:this.options.intrusiveSplit,test_data:{int5:1}}),this.openLoginPage(),e.preventDefault(),!1},this)),this.$("#error #retryEmail").click(e.bind(this.retryEmail,this)),this.$("#error #dnt2upgrade").click(e.bind(this.openDnt2UpgradePage,this)),this.autoResize(),i(r)}else this.contentManager.preferences.fetchAll(),i()},retryEmail:function(e){e&&e.preventDefault(),this.$("#error, #progress-section").hide(),this.$("#complete-setup-div, #form-div, #welcome-message").show(),this.triggerRender()},openDashboard:function(e){l.webapp.openDashboard(),e.preventDefault(),this.closePanel()},openWeeklyReport:function(e){var t=new n.Preference;t.save({key:"weeklyReportClickedOn",value:Date.now()}),l.webapp.openWeeklyReport(),e.preventDefault(),this.closePanel()},openCashForCardsSignup:function(e){l.webapp.openCashForCardsSignup(),e.preventDefault(),this.closePanel()},clickedNormalMedalNotification:function(){this.messenger.send("update:panelActivity:click",{panelId:8000004})},clickedMedalWithCardNotification:function(){this.messenger.send("update:panelActivity:click",{panelId:8000005})},openPremiumC:function(e){this.options.compact&&!this.options.premium?l.webapp.openPiwikCampaign("extIntFooterC","premium"):l.webapp.openPremium(),e.preventDefault(),this.closePanel()},openPremiumA:function(e){l.webapp.openPiwikCampaign("extIntFooterA","premium"),e.preventDefault(),this.closePanel()},openPremiumB:function(e){l.webapp.openPiwikCampaign("extIntFooterB","premium"),e.preventDefault(),this.closePanel()},showHelp:function(e){e.preventDefault(),l.webapp.openHelp("/faq/faq-configureSettings"),this.closePanel()},showPremium:function(e){e.preventDefault(),l.webapp.openPremium(),this.closePanel()},showPageView:function(t){t&&t.preventDefault(),this.children.pageContent.load(),this.changingView||(this.changingView=!0,this.$(".settings-link").removeClass("highlight"),this.$(".settings-link").show(),this.disableAnimation?(this.$(".one").show(),this.changingView=!1,this.$(".two").hide()):this.$(".one").animate({marginLeft:0},e.bind(function(){this.$(".one").show(),this.changingView=!1,this.$(".two").hide(),this.trigger("resize")},this)),this.$(".settings-link").show(),this.fetchFormIds())},showSettingsView:function(a,n){if(a&&a.preventDefault&&a.preventDefault(),this.options.domain&&"about:home"==this.options.domain)return t(".settings-link",this.el).attr("title",u.getText("mm_dntme_reload_required_short")),void t(".settings-link",this.el).tooltip("show");if(n)return void this.trigger("show-settings",{switchTo:n.switchTo,highlight:n.highlight,subPage:n.subPage});if(this.children.settingsContent.load(),this.$(".settings-link").hasClass("highlight")){this.options.page="dashboard";try{this.children.pageContent.options.page="dashboard"}catch(e){}return void this.showPageView(a)}return this.options.compact?void("medals"==this.options.page?this.trigger("show-settings",{highlight:"showmedals"}):"weekly-report"==this.options.page?this.trigger("show-settings",{highlight:"showweeklyreports"}):this.trigger("show-settings",{highlight:"showtrackersonload"})):void(this.changingView||(this.changingView=!0,this.children.pageContent&&this.children.pageContent.model&&(this.children.pageContent.model.compact=!1),this.$(".settings-link").addClass("highlight"),this.disableAnimation?(this.$(".two").show(),this.changingView=!1,this.$(".one").hide()):this.$(".one").animate({marginLeft:-310},e.bind(function(){this.$(".two").show(),this.changingView=!1,this.$(".one").hide(),this.trigger("resize")},this)),this.$(".settings-link").hide()))},goBack:function(e){e.preventDefault(),this.showPageView(e)},openBlurPage:function(e){e.preventDefault(),l.webapp.openPage("#blur"),this.logClose()},logClose:function(){this.options.cardAlertPanel&&(this.contentManager.preferences.getPref("entitledToPayments")?this.options.messenger.send("update:panelActivity:closed",{panelId:4000005}):this.options.messenger.send("update:panelActivity:closed",{panelId:4000006})),this.options.showBlurGrowl&&(this.contentManager.preferences.setPref("showBlurGrowl","false"),this.contentManager.preferences.setPref("blurGrowlTab","false")),this.closePanel()},bindAutoFade:function(){function a(){r.clearTimeout(i.autoCloseTimer)}function n(){a(),i.autoCloseTimer=r.setTimeout(e.bind(i.closePanel,i),7e3)}if(this.options.compact)if(this.options.cardAlertPanel||this.options.showBlurGrowl);else{var i=this;t(this.el).hover(a,n),n()}else this.doc.defaultView.focus(),this.doc.defaultView.addEventListener("blur",e.bind(function(){this._ignoreBlur||this.closePanel()},this),!1)},fetchFormIds:function(){this.forms=[],this.formIdFetchHooked||(this.formIdFetchHooked=!0,this.messenger.on("form:ids:response",e.bind(function(e){0==this.forms.length&&e.length>0&&this.$("#mapForm").show(),this.forms=this.forms.concat(e)},this))),this.messenger.sendToCS("CS","get:form:ids",this.options.contentManager.frameId)},afterInitialize:function(){this.doc=this.el.ownerDocument,this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.applyFadingStyle(),this.fadeIn(),this.options.compact&&(this.opacity="0.8",this.templateName="dntme_compact_panel_c",this.options.showBlurGrowl?(this.templateName="dntme_blur_panel",this.opacity="1.0"):this.options.cardAlertPanel||("weekly-report"==this.options.page?(this.templateName="dntme_compact_panel_weekly_report",this.opacity="1.0"):"medals"==this.options.page?this.templateName="dntme_compact_panel_medal":this.options.premium||(this.options.intrusiveSplit==m.SPLIT_INTRUSIVE_CONTROL?this.templateName="dntme_compact_panel_c":this.options.intrusiveSplit==m.SPLIT_INTRUSIVE_COMPLETE_SETUP_BUTTON?this.templateName="dntme_compact_panel_d":this.options.intrusiveSplit==m.SPLIT_INTRUSIVE_GOT_IT_REG?(this.panelId=4000011,this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.templateName="dntme_compact_panel_e"):this.options.intrusiveSplit==m.SPLIT_INTRUSIVE_ALWAYS_REG&&(this.panelId=5000011,this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.templateName="dntme_compact_panel_f"))),this.el.className=this.className=this.templateName),this.bindAutoFade(),this.model={compact:this.options.compact,notNow:this.options.notNow,premium:this.options.premium,registered:this.options.registered},this.render();var t=this.children;"settings"==this.options.page?(this.disableAnimation=!0,this.options.settingsView="global-panel-settings",this.showSettingsView()):this.options.page in{accounts:1,masking:1,wallet:1}?(this.disableAnimation=!0,this.showSettingsView()):"trackers"==this.options.page?(t.pageContent.load(),r.setTimeout(e.bind(function(){this.children.pageContent.showTrackers()},this),100)):t.pageContent.load(),"Firefox"==ABINE_DNTME.config.browser&&this.$("#blur-logo-action").css("margin-top","3px"),this.fetchFormIds()},getPageView:function(){var t=new c({doc:this.el.ownerDocument,contentManager:this.options.contentManager,messenger:this.messenger,dynamicPanel:this.options.dynamicPanel,domain:this.options.domain,compact:this.options.compact,cardAlertPanel:this.options.cardAlertPanel,showBlurGrowl:this.options.showBlurGrowl,highlight:this.options.highlight,switchTo:this.options.switchTo,page:this.options.page,premium:this.options.premium,timeout:this.options.timeout});return t.transferEvents(["resize","max-height","show-trackers","show-dashboard","show-medals","show-report","ignore-blur"],this),t.on("close",e.bind(function(){this.closePanel()},this)),t.on("show-settings",e.bind(this.showSettingsView,this)),t.on("ignore-blur",e.bind(function(e){this._ignoreBlur=e},this)),t.on("open:understanding:tracker",e.bind(function(){l.webapp.openPage("/#/understandingTracking");var e=new n.Preference;e.save({key:"understanding_tracker_clicked",value:"true"}),this.contentManager.preferences.fetchAll(),this.closePanel()},this)),t.on("refresh-preferences",e.bind(function(){this.contentManager.preferences.fetchAll()},this)),t},getSettingsView:function(){var t=new n.TabData({messenger:this.options.messenger}),a=new n.GlobalData({messenger:this.options.messenger}),i=new d({tabData:t,globalData:a,doc:this.el.ownerDocument,messenger:this.messenger,highlight:this.options.highlight,contentManager:this.contentManager,settingsView:this.options.settingsView,switchTo:this.options.switchTo});return delete this.options.highlight,i.transferEvents(["resize","max-height"],this),i.on("close",e.bind(function(){this.closePanel()},this)),i.on("showPageView",e.bind(function(){this.options.page="dashboard";try{this.children.pageContent.options.page="dashboard"}catch(e){}this.showPageView()},this)),i},setDelayedView:function(t,a){var n=this;this.children[t]=new f({doc:this.el.ownerDocument,realView:e.bind(a,this),postLoad:function(e){n.children[t]=e}})},createChildren:function(){return this.children={},this.setDelayedView("pageContent",this.getPageView),this.setDelayedView("settingsContent",this.getSettingsView),this.children}});return g}),ABINE_DNTME.require(["abine/contentMessenger","abine/assets","abine/views/commonhelpers","abine/eventLogger"],function(e){function t(){ABINE_DNTME.startTime=Date.now(),a(function(){ABINE_DNTME.contentMessenger.on("init-"+ABINE_DNTME.context,function(e){e.message_id in i||(i[e.message_id]=!0,n(e))}),ABINE_DNTME.contentMessenger.sendToCS("CS","panel-ready-"+ABINE_DNTME.context)})}function a(e){ABINE_DNTME.requireDuckbone(function(){ABINE_DNTME.requireModels(e)})}function n(e){ABINE_DNTME.require(["abine/proxyContentManager"],function(t){var a=window.contentManager;if(!a){window.contentManager=a=new t.ContentManager(e);var n=function(){a.destroy()};window.addEventListener("unload",n,!1)}a.show(e.view)})}ABINE_DNTME.context=window.location.href.substr(window.location.href.indexOf("?")+1),ABINE_DNTME.contentMessenger=ABINE_DNTME.contentMessenger||new e.ContentMessenger({document:document});var i={};setInterval(function(){i={}},6e4),t()});