/**
 * Blur Copyright (c) 2008-2015 by Abine, Inc. All Rights Reserved.
 *
 * This software is the confidential and proprietary information
 * of Abine, Inc. ("Confidential Information"), subject
 * to the Non-Disclosure Agreement and/or License Agreement you entered
 * into with Abine. You shall use such Confidential Information only
 * in accordance with the terms of said Agreement(s). Abine makes
 * no representations or warranties about the suitability of the
 * software. The software is provided with ABSOLUTELY NO WARRANTY
 * and Abine will NOT BE LIABLE for ANY DAMAGES resulting from
 * the use of the software.
 *
 * Contact license@getabine.com with any license-related questions.
 *
 * https://www.abine.com
 * @license
 *
 */
ABINE_DNTME.define("abine/views/panelBase",["documentcloud/underscore","jquery","duckbone/core","abine/timer","models","abine/window","abine/contentMessenger","abine/timer","abine/config","abine/proxies"],function(e,t,n,a,i,r,s,o,l,d){var c=300,m={},h=n.View.extend({opacity:"1.0",initialize:function(){e.extend(this.events,{"mousedown #disableLink":"disableLink","mousedown .autoFillWith":"autoFillWith"}),n.View.prototype.initialize.apply(this,arguments)},adjustHeader:function(){var e=this.$(".newheader .b-link");if(!e.data("adjusted")){e.data("adjusted","yes");var t=e.position();t&&t.top<30&&(this.$(".newheader").addClass("singleLine"),this.trigger("resize",{extraWidth:50}))}},render:function(){return this.model?(this.renderTemplate(),o.setTimeout(e.bind(function(){this.adjustHeader(),this.trigger("render");var n=t("input, textarea",this.el);n.placeholder&&n.placeholder(),o.setTimeout(e.bind(this.maskPasswords,this),100)},this),50),this):this},autoResize:function(t){o.setTimeout(e.bind(function(){this.trigger("resize",t)},this),50)},triggerRender:function(){o.setTimeout(e.bind(function(){this.trigger("render")},this),50)},disableLink:function(e){e.preventDefault(),e.stopPropagation(),this.options.contentManager.disablePanelOnThisSite(),this.closePanel(e)},autoFillWith:function(e){this.ignoreBlur(!0),e.preventDefault(),e.stopPropagation(),this.options.contentManager.showAutoFillWith(this.options),this.closePanel(e,!0),this.trigger("remove")},ignoreBlur:function(e){return"undefined"==typeof e?!!this._ignoreBlur:void(e===!1?(this._ignoreBlur=!1,this.options.contentManager.ignoreBlur(this.options.strategyId,this.options.fieldId,!1)):(this._ignoreBlur=!0,this.options.contentManager.ignoreBlur(this.options.strategyId,this.options.fieldId,!0)))},focusField:function(){this.options.contentManager.focusField(this.options.strategyId,this.options.fieldId)},focusFieldWithIntent:function(e){this.options.contentManager.focusFieldWithIntent(this.options.strategyId,this.options.fieldId,e)},addFieldBorder:function(e){this.options.contentManager.messenger.sendToCS("CS","addFieldBorder",{strategyId:this.options.strategyId,fieldId:e})},removeFieldBorder:function(e){this.options.contentManager.messenger.sendToCS("CS","removeFieldBorder",{strategyId:this.options.strategyId,fieldId:e})},bindHeaderClose:function(){t(this.el).bind("mousedown",e.bind(function(e){this.ignoreBlur(!0);var n=t(e.target),a=n.data("highlight")||n.parent().data("highlight"),r="settings";if(a&&(["email","phone","card"].indexOf(a)>-1&&(r="masking"),["account","password"].indexOf(a)>-1&&(r="accounts"),["address","real_card"].indexOf(a)>-1&&(r="wallet")),n.hasClass("close-link")||n.parent().hasClass("close-link"))this.dataTypePanel()&&(this.options.contentManager.showFieldIconsOnThisSite(),this.options.contentManager.showFieldIcon(this.options.strategyId,this.options.fieldId,!0)),this.closePanel();else if(n.hasClass("b-link")||n.parent().hasClass("b-link"))"login_helper_panel"==this.options.el.className?d.webapp.openPage("/#/accounts/"+this.options.domain):this.options.contentManager.showToolbarPanel({page:"dashboard",highlight:a}),this.closePanel();else if(n.hasClass("logo-link")||n.parent().hasClass("logo-link"))d.webapp.openDashboard(),this.closePanel();else if(n.hasClass("close-icon")||n.hasClass("close-dd"))this.closePanel();else if(n.hasClass("settings-link")||n.parent().hasClass("settings-link")){var s=n.data("add-setting")||n.parent().data("add-setting");if(s){var o=new i.Preference;o.save({key:s,value:"true"}),this.options.contentManager.messenger.trigger("broadcast:preference:reload")}this.options.contentManager.showToolbarPanel({page:r,highlight:a}),this.closePanel()}},this))},dataTypePanel:function(){return!this.ignoreExplicitClose},bindKeyEvents:function(){this.options.contentManager.bindKeyEvents(this.options.strategyId,this.options.fieldId,this.doNotCloseOnTyping,e.bind(this.handleKeyEvents,this))},handleKeyEvents:function(e){"enter"==e?(this.selectedField||0===this.selectedField)&&this.trigger("enter"+this.selectedField,{selectedField:this.selectedField,preventDefault:function(){}},this.selectedField):"down"==e?this.highlightOption(this.selectedField||0===this.selectedField?this.selectedField+1:0):"up"==e?this.highlightOption(this.selectedField||0===this.selectedField?this.selectedField-1:-1):"close"==e&&(this.closePanel(),delete this.selectedField)},bindPanelTextInput:function(n){t(n).unbind("focus.dntme").bind("focus.dntme",e.bind(function(){a.clearTimeout(this._blurTimer),this.ignoreBlur(!0),a.setTimeout(e.bind(function(){this.ignoreBlur(!1)},this),500)},this)),t(n).unbind("blur.dntme").bind("blur.dntme",e.bind(function(){this._blurTimer=a.setTimeout(e.bind(function(){this.ignoreBlur()?this.focusField():(this.cleanupPanel(),this.closingOnBlur(),this.closePanel()),a.setTimeout(e.bind(function(){this.ignoreBlur(!1)},this),500)},this),500)},this))},bindBaseEvents:function(){this.bindHeaderClose(),this.bindKeyEvents()},cleanupPanel:function(){},closingOnBlur:function(){},highlightOption:function(n){var a=e(t(this.el).find(".mmKeyOption")).filter(function(e){return t(e).hasClass("mmKeyOption")&&"none"!==t(e).css("display")&&t(e).is("a")&&!t(e).hasClass("disabled")});n=(n+a.length)%a.length,(this.selectedField||0===this.selectedField)&&t(a[this.selectedField].children[0]).removeClass("hover"),t(a[n].children[0]).addClass("hover"),this.selectedField=n},applyFadingStyle:function(){var e=c/1e3+"s",t="opacity ease "+e+", margin-top ease "+e;this.el.style.transition=this.el.style.WebkitTransition=this.el.style.MozTransition=this.el.style.OTransition=this.el.style.MsTransition=t},fadeIn:function(){this.el.style.opacity="0.0",this.el.style.marginTop="50px",a.setTimeout(e.bind(function(){this.el.style.opacity=this.opacity,this.el.style.marginTop="0px"},this),100)},fadeOut:function(){try{this.el.style.opacity="1.0",this.el.style.marginTop="0px"}catch(e){}a.setTimeout(e.bind(function(){try{this.el.style.opacity="0.0",this.el.style.marginTop="50px"}catch(e){}},this),100);try{delete this.contentManager._currentPanelField}catch(e){}a.setTimeout(e.bind(function(){this.trigger("remove")},this),100+c)},getContentMessenger:function(){return this.messenger=this.messenger||ABINE_DNTME.contentMessenger||this.options&&this.options.contentManager&&this.options.contentManager.messenger||new s.ContentMessenger,this.messenger},triggerPanelFillEvent:function(e){this.getContentMessenger(),e.field.origin=e.origin;var n={disposableGUID:e.field.disposableGUID,name:e.field.name,origin:e.field.origin,dataType:e.field.dataType,accountId:e.accountId,value:e.field.value};e.field.element.setAttribute("abineOrigin",e.field.origin),t(this.options.formEl).attr("maskMeFilled","yes"),this.options.contentManager.triggerPanelFillEvent(this.options.formEl,n)},isVisible:function(e){try{return t(e).is(":visible")&&"hidden"!=t(e).css("visibility")}catch(e){}return!0},fillFields:function(e,t,n){this.options.contentManager.fillFields(e,this.options.strategyId,this.options.fieldId,t,n)},sendFeedbackEmail:function(e){this.options.contentManager.sendFeedbackEmail(this.options.strategyId,this.options.fieldId,e)},hidePanel:function(){this.trigger("hide")},removePanel:function(){this.trigger("remove")},closePanel:function(t){t&&t.preventDefault(),this.fadeOut(),a.setTimeout(e.bind(function(){this.options.contentManager.removePanels(this.options.contentManager.frameId||ABINE_DNTME.context,this.options.strategyId,this.options.fieldId)},this),0)},clickedInsideOfTarget:function(e,t){for(;t.parentNode&&t.id!=e;)t=t.parentNode;return t.id==e},performActions:function(t){this.getContentMessenger(),e.each(this.panelSectionActionMap[t.currentTarget.id],e.bind(function(e){if(e.target_id&&""!=e.target_id&&this.clickedInsideOfTarget(e.target_id,t.target)||e.target_id&&""==e.target_id||!e.target_id)if("open_registration_page"==e.name)this.getStarted(t,{id:this.options.dynamicPanel.id,action:e.name});else if("open_page"==e.name)d.securityManager.openPage(e.extra);else if("trigger_click"==e.name)this.messenger.send("update:panelActivity:click",{panelId:this.options.dynamicPanel.id});else if("trigger_conversion"==e.name)this.messenger.send("update:panelActivity:conversion",{panelId:this.options.dynamicPanel.id});else if("dismiss_panel"==e.name)this.options.dynamicPanel.field_type.indexOf("new-feature-added")!=-1||this.closePanel();else if("change_show_rate"==e.name)d.panelsModule.changePanelShowRate({panelId:this.options.dynamicPanel.id,extra:e.extra});else if("change_preference"==e.name){var n=new i.Preference;n.save(JSON.parse(e.extra))}else"no_action"==e.name||("open_plans_page"==e.name?this.openPlansPage("panelID"+this.options.dynamicPanel.id,null,{id:this.options.dynamicPanel.id,action:e.name}):"open_activate_cards_page"==e.name?this.openActivateCardsPage(null,{id:this.options.dynamicPanel.id,action:e.name}):"open_snowman_page"==e.name?this.openSnowmanPage(null,{id:this.options.dynamicPanel.id,action:e.name}):"open_new_premium_feature_added_page"==e.name&&this.openNewFeatureAdded(null,{id:this.options.dynamicPanel.id,action:e.name}))},this))},maskPasswords:function(){"Firefox"==ABINE_DNTME.config.browser&&(this.$("input[type=text]").each(function(e,t){t.setAttribute("autocomplete","off")}),this.$("input[type=password]").each(function(e,t){function n(){clearTimeout(i),i=setTimeout(function(){for(var e=a.value,n=0,i=[],r=[],s=t.value,o=t.selectionStart,l=t.selectionEnd,d=0;d<s.length;d++)9679==s.charCodeAt(d)?i.push(e[n++]):i.push(s.charAt(d)),r.push(String.fromCharCode(9679));a.value=i.join(""),t.value=r.join(""),t.selectionStart=o,t.selectionEnd=l},10)}var a=t.ownerDocument.createElement("input");a.type="hidden",a.name=t.name,a.id=t.id,t.id=t.id+"X",t.name=t.name+"X",t.type="text",t.setAttribute("autocomplete","off"),t.parentNode.appendChild(a);var i;t.addEventListener("keypress",n),t.addEventListener("keyup",n),t.addEventListener("paste",n)}))},setupDynamicPanel:function(){this.panelPositions=this.options.dynamicPanel.panel_positions,this.panelSections=[],this.panelSectionActionMap={},e.each(this.panelPositions,e.bind(function(t){var n=t.panel_section;n.has_action=t.panel_actions.length>0,this.panelSectionActionMap[n.id]=[],e.each(t.panel_actions,e.bind(function(e){this.panelSectionActionMap[n.id].push(e)},this)),this.panelSections.push(n)},this))},closeHeader:function(e){e&&e.preventDefault(),this.ignoreExplicitClose||this.options.contentManager.closePanelFromHeader(this.options.strategyId,this.options.fieldId),this.closePanel(e)},getStarted:function(e,t){d.webapp.openHome(t),this.closePanel()},openTour:function(){d.webapp.openTour(),this.closePanel()},openSetupEmailPage:function(){d.webapp.openEmails(),this.closePanel()},openSettings:function(e){return e&&e.preventDefault(),d.webapp.openSettings(),this.closePanel(),!1},openLoginPage:function(e){e&&"string"!=typeof e&&(e.preventDefault&&e.preventDefault(),e=null),d.webapp.openLogin(e),this.closePanel()},openDnt2UpgradePage:function(){d.webapp.openDnt2UpgradePage(),this.closePanel()},openPasswordSetupPage:function(e){d.webapp.openPasswordSetup(e),this.closePanel()},openActivateCardsPage:function(e,t){d.webapp.openCards(t),this.closePanel()},openPlansPage:function(e,t,n){d.webapp.openPremium(e,null,n)},openSnowmanPage:function(e,t){d.webapp.openSnowman(null,t)},openNewFeatureAdded:function(e,t){d.webapp.openNewFeatureAdded(null,t)},updatePanelActivity:function(e,t,n,a){if(this.options.contentManager&&this.options.contentManager.messenger&&this.options.contentManager.messenger.send("update:panelActivity:"+e,{panelId:t}),a){var i="aggregate:"+t;m[i]=m[i]||{},m[i][n]=m[i][n]||{};var r=m[i][n];if(r[e])return;if("closed"==e&&(r.masked||r.disclosed))return;for(var s in r)"impression"!=s&&(r[s]=0,this.options.contentManager.messenger.send("update:panelActivity:"+s,{panelId:i,revert:!0}));r[e]=1,this.options.contentManager.messenger.send("update:panelActivity:"+e,{panelId:i})}}});return h}),ABINE_DNTME.define("abine/password",[],function(){function e(e,t){return"undefined"==typeof t&&(t=e,e=0),Math.floor(Math.random()*(t-e)+e)}function t(t,n,a){for(var i=1;i<=a;i++){var r=e(0,t.length);t=[t.slice(0,r),n[e(n.length)],t.slice(r)].join("")}return t}var n=12,a=1,i=2,r=4,s=8,o="0123456789",l="`~!@#$%^&*()_-+={}|[]\\:\";'<>?,/",d=".-_",c="ABCDEFGHJKLMNOPQRSTUVWXYZ",m=c.toLowerCase(),h={generateRandomPassword:function(h,p,u){h=h||m,(!p||p<1)&&(p=n);var _="";return u=u||a|i|r,u&a&&(_=t(_,c,e(2,3))),u&r&&(_=t(_,l,e(1,3))),u&s&&(_=t(_,d,1)),u&i&&(_=t(_,o,e(1,3))),_.length<p&&(_=t(_,h,p-_.length)),_},generateSpecialCharsPassword:function(){return this.generateRandomPassword(null,null,a|i|s)},generateNoSpecialCharsPassword:function(){return this.generateRandomPassword(null,null,a|i)},generateNoDigitsPassword:function(){return this.generateRandomPassword(null,null,a)},generateNewOptionsPassword:function(e,t,n){var s=a;return t&&(s|=i),n&&(s|=r),this.generateRandomPassword(null,e,s)}};return h}),ABINE_DNTME.define("abine/proxyContentManager",["documentcloud/underscore","jquery","abine/core","abine/contentMessenger","abine/timer","models","abine/config","abine/intl","abine/proxies","abine/views/unlockPanel","abine/views/notificationPanel","abine/assets","abine/views/dntmePanel","abine/views/emailHelperPanel","abine/views/phoneHelperPanel","abine/views/changePasswordHelperPanel","abine/views/changePasswordLoginHelperPanel","abine/views/loginHelperPanel","abine/views/paymentHelperPanel","abine/views/passwordHelperPanel","abine/views/addressHelperPanel","abine/views/autoFillWithPanel","abine/views/mapFormPanel","abine/views/mapReviewPanel","abine/views/autoFillPanel","abine/views/identityHelperPanel"],function(e,t,n,a,i,r,s,o,l,d,c,m,h,p,u,_,g,f,b,y,v,k,w,E,A,N){var T=n.BaseClass.extend({initialize:function(t){this.href=t.href,this.host=this.href.replace(/http[s]?:\/\//i,"").replace(/\/.*/i,""),this.domain=t.domain||(this.href?abineUrl.getTLD(this.href):null),this.document=t.document||document,this.frameId=t.frameId||ABINE_DNTME.context,this.messenger=t.contentMessenger||ABINE_DNTME.contentMessenger,l.connect(this.messenger,e.bind(function(e){this.tabId=e},this)),this._locked=t.locked,ABINE_DNTME.contentuser={hasRegEmail:e.bind(function(){return!!this.preferences&&this.preferences.hasPref("regEmail")},this)},this.messenger.on("broadcast:preference:reload",e.bind(function(){this.loadUserPreferences()},this)),this.messenger.on("closePanel",e.bind(function(){this.closeCurrentPanel(),this.removePanels(this.frameId)},this))},reloadPreference:function(){this.loadUserPreferences(),this.messenger.sendToCS("CS","reloadPreference")},isLocked:function(){return this._locked},locked:function(){this._locked=!0,this.trigger("locked")},unlocked:function(){this._locked=!1,this.trigger("unlocked"),this.preferences&&this.preferences.fetchAll()},getValue:function(e,t,n,a){var i=e+":"+Math.random(),r=this;this.messenger.on(i,function e(t){r.messenger.off(i,e),a(t)}),this.messenger.sendToCS("CS","getValue",{name:e,responseKey:i,strategyId:t,fieldId:n,frameId:this.frameId})},show:function(t){this.closeCurrentPanel(),this.loadUserPreferences(e.bind(function(){this.closeCurrentPanel(),"blur"==t.name?this.showToolbarPanel(t.payload):"email"==t.name?this._currentPanelView=this.showEmailPanel(t.payload):"password"==t.name?this._currentPanelView=this.showPasswordPanel(t.payload):"change-password"==t.name?this._currentPanelView=this.showChangePasswordPanel(t.payload):"login"==t.name?this._currentPanelView=this.showLoginPanel(t.payload):"change-password-login"==t.name?this._currentPanelView=this.showChangePasswordLoginPanel(t.payload):"address"==t.name?this._currentPanelView=this.showAddressPanel(t.payload):"payment"==t.name?this._currentPanelView=this.showPaymentPanel(t.payload):"phone"==t.name?this._currentPanelView=this.showPhonePanel(t.payload):"identity"==t.name?this._currentPanelView=this.showIdentityPanel(t.payload):"unlock"==t.name?this._currentPanelView=this.showUnlockPanel(t.payload):"notification"==t.name?(this._notificationPanelShown=!0,this._showNotification(t.payload.notification,t.payload.timeout)):"autoFill"==t.name?this.showAutoFillPanel(t.payload):"autoFillWith"==t.name?this._currentPanelView=this._showAutoFillWith(t.payload):"mapForm"==t.name&&this._showMapForm(t.payload)},this))},loadUserPreferences:function(t){function n(){var e=this.preferences.getPref("userTag")||this.preferences.getPref("dynamicTag");e&&ABINE_DNTME.config.updateTag(e);var n=this.preferences.getPref("dnt_language");n?o.setupLocale(n,function(){t.call(this)}):t.call(this)}t=t||function(){},this.preferences=new r.PreferenceCollection({}),this.preferences.bind("sync:success",e.once(e.bind(function(){n.call(this)},this))),this.preferences.bind("sync:error",e.bind(function(){n.call(this)},this)),this.preferences.fetchAll()},disablePanelOnThisPage:function(){this.messenger.sendToCS("CS","disablePanelOnThisPage")},disablePanelOnThisSite:function(){this.messenger.sendToCS("CS","disablePanelOnThisSite")},showFieldIconsOnThisSite:function(){this.messenger.sendToCS("CS","showFieldIconsOnThisSite")},closeToolbarPanel:function(){if(this.lastDNTMePanel){try{this.lastDNTMePanel.remove()}catch(e){}this.lastDNTMePanel=null}},closeCurrentPanel:function(){if(this._currentPanelView){try{this.messenger.sendToCS("CS","cleanUpAfterPanelClosed",{strategyId:this._currentPanelView.options.strategyId,fieldId:this._currentPanelView.options.fieldId}),this._currentPanelView.remove()}catch(e){}this._currentPanelView=null}},closePanelFromHeader:function(e,t){this.messenger.sendToCS("CS","closePanelFromHeader",{strategyId:e,fieldId:t})},showToolbarPanel:function(n){return this._currentPanelView||this._notificationPanelShown?void this.messenger.sendToCS("CS","showToolbarPanel",n):(this.closeToolbarPanel(),void l.panelsModule.getDNTMePanel(n.tabId,e.bind(function(e){var a=this.lastDNTMePanel=new h({messenger:this.messenger,contentManager:this,domain:this.domain,dynamicPanel:e,compact:n.compact,cardAlertPanel:n.cardAlertPanel,showBlurGrowl:n.showBlurGrowl,page:n.page,subPage:n.subPage,highlight:n.highlight,timeout:n.timeout,switchTo:n.switchTo,notNow:this.preferences.getPref("notNowClicked"),intrusiveSplit:this.preferences.getSplitTest("intrusive01"),registered:this.preferences.getPref("hasRegistered"),premium:this.preferences.getPref("entitledToPhone"),footerCampaign:this.preferences.getPref("footerCampaign"),el:t("<div></div>",this.document).get(0)});a.messenger=this.messenger,a.bind("remove",function(){this.lastDNTMePanel=null;try{a.remove()}catch(e){}this.removePanels(this.frameId)},this),a.bind("render resize",function(){this.autoResizePanels("abineDNTMePanel",0,10)},this),a.bind("show-settings",function(e){delete n.compact,n.page="settings",e&&(n.highlight=e.highlight,n.subPage=e.subPage,n.switchTo=e.switchTo),this.showToolbarPanel(n)},this),a.bind("show-trackers",function(){delete n.compact,n.page="trackers",this.showToolbarPanel(n)},this),a.bind("show-dashboard",function(){delete n.compact,n.page="dashboard",this.showToolbarPanel(n)},this),a.bind("show-medals",function(){n.cardAlertPanel||(n.page="medals",this.showToolbarPanel(n))},this),a.bind("show-report",function(){n.cardAlertPanel||(n.page="weekly-report",this.showToolbarPanel(n))},this),a.bind("max-height",function(){this.autoResizePanels("abineDNTMePanel",0,1e3)},this),t("body",this.document).append(a.el)},this)))},hookPanelEvents:function(e){e.bind("remove",function(){try{e.remove()}catch(e){}this.removePanels(this.frameId)},this),e.bind("render resize",function(e){e=e||{className:null,extraWidth:null,extraHeight:null},this.autoResizePanels(e.className,e.extraWidth,e.extraHeight)},this)},showEmailPanel:function(e){var n=new p({fieldId:e.fieldId,strategyId:e.strategyId,category:e.category,fieldType:e.fieldType,formType:e.formType,contentManager:this,hasPassword:e.hasPassword,oldValue:e.oldValue,hasRegistered:this.preferences.isPrefTrue("hasRegistered"),domain:e.domain||this.domain,dynamicPanel:e.dynamicPanel,iconClick:e.iconClick,el:t("<div></div>",this.document).get(0)});return this.hookPanelEvents(n),t("body",this.document).append(n.el),n},showPasswordPanel:function(e){var n=new y({fieldId:e.fieldId,strategyId:e.strategyId,category:e.category,fieldType:e.fieldType,formType:e.formType,contentManager:this,hasRegistered:this.preferences.isPrefTrue("hasRegistered"),domain:e.domain||this.domain,dynamicPanel:e.dynamicPanel,dynamicPanelsJSON:e.dynamicPanelsJSON,iconClick:e.iconClick,el:t("<div></div>",this.document).get(0)});return this.hookPanelEvents(n),t("body",this.document).append(n.el),n},showChangePasswordPanel:function(e){var n=new _({fieldId:e.fieldId,strategyId:e.strategyId,fieldType:e.fieldType,formType:e.formType,category:e.category,contentManager:this,hasRegistered:this.preferences.isPrefTrue("hasRegistered"),domain:e.domain||this.domain,iconClick:e.iconClick,el:t("<div></div>",this.document).get(0)});return this.hookPanelEvents(n),t("body",this.document).append(n.el),n},showLoginPanel:function(e){var n=new f({fieldId:e.fieldId,strategyId:e.strategyId,fieldType:e.fieldType,formType:e.formType,category:e.category,contentManager:this,hasRegistered:this.preferences.isPrefTrue("hasRegistered"),domain:e.domain||this.domain,dynamicPanel:e.dynamicPanel,iconClick:e.iconClick,fillAccount:e.fillAccount,el:t("<div></div>",this.document).get(0)});return this.hookPanelEvents(n),t("body",this.document).append(n.el),n},showChangePasswordLoginPanel:function(e){var n=new g({fieldId:e.fieldId,strategyId:e.strategyId,fieldType:e.fieldType,formType:e.formType,category:e.category,contentManager:this,domain:e.domain||this.domain,iconClick:e.iconClick,el:t("<div></div>",this.document).get(0)});return this.hookPanelEvents(n),t("body",this.document).append(n.el),n},showAddressPanel:function(e){var n=new v({fieldId:e.fieldId,strategyId:e.strategyId,fieldType:e.fieldType,formType:e.formType,category:e.category,dynamicPanel:e.dynamicPanel,dynamicPanelsJSON:e.json,contentManager:this,hasRegistered:this.preferences.isPrefTrue("hasRegistered"),iconClick:e.iconClick,domain:e.domain||this.domain,el:t("<div></div>",this.document).get(0)});return this.hookPanelEvents(n),t("body",this.document).append(n.el),n},showIdentityPanel:function(e){var n=new N({fieldId:e.fieldId,strategyId:e.strategyId,fieldType:e.fieldType,formType:e.formType,category:e.category,dynamicPanel:e.dynamicPanel,dynamicPanelsJSON:e.json,contentManager:this,hasRegistered:this.preferences.isPrefTrue("hasRegistered"),iconClick:e.iconClick,allDataTypes:e.allDataTypes,domain:e.domain||this.domain,el:t("<div></div>",this.document).get(0)});return this.hookPanelEvents(n),t("body",this.document).append(n.el),n},showPhonePanel:function(e){var n=new u({fieldId:e.fieldId,strategyId:e.strategyId,fieldType:e.fieldType,formType:e.formType,category:e.category,dynamicPanel:e.dynamicPanel,contentManager:this,entitledToPhone:this.preferences.isPrefTrue("entitledToPhone"),hasRegistered:this.preferences.isPrefTrue("hasRegistered"),iconClick:e.iconClick,domain:e.domain||this.domain,el:t("<div></div>",this.document).get(0)});return this.hookPanelEvents(n),t("body",this.document).append(n.el),n},showPaymentPanel:function(e){var n=this.preferences,a=new b({fieldId:e.fieldId,strategyId:e.strategyId,fieldType:e.fieldType,formType:e.formType,category:e.category,contentManager:this,authToken:!this.isLocked(),amount:e.amount,beginnerMode:n.getPref("beginnerMode"),hasRegistered:n.isPrefTrue("hasRegistered"),entitledToPayments:n.isPrefTrue("entitledToPayments"),hasEnabledPayments:n.isPrefTrue("hasEnabledPayments"),hasAuthorizedCoinbase:n.isPrefTrue("hasAuthorizedCoinbase"),entitledToPhone:n.isPrefTrue("entitledToPhone"),cardDisabled:e.maskedCardsDisabled,realCardDisabled:e.autoFillCardsDisabled,dynamicPanel:e.dynamicPanel,fromContextMenu:e.fromContextMenu,domain:e.domain||this.domain,params:e.params,el:t("<div></div>",this.document).get(0),paymentsr2:e.paymentsr2,iconClick:e.iconClick});return this.hookPanelEvents(a),t("body",this.document).append(a.el),a},showUnlockPanel:function(e){var n=new d({fieldId:e.fieldId,strategyId:e.strategyId,fieldType:e.fieldType,formType:e.formType,category:e.category,contentManager:this,preferences:this.preferences,el:t("<div></div>",this.document).get(0)});return this.hookPanelEvents(n),t("body",this.document).append(n.el),n},showNotification:function(e){this.messenger.send("background:show:notification:forward",e)},_showNotification:function(n,a){var i=c.NotificationPanelView,r={notification:n,contentManager:this,amount:n.amount,domain:this.domain,messenger:this.messenger,el:t("<div></div>",this.document).get(0),timeout:a};if("card"==n.type){var s=1;this.preferences.hasPref("countCardNotifications")&&(s=parseInt(this.preferences.getPref("countCardNotifications"))+1),this.preferences.setPref("countCardNotifications",s),i=c.CardNotificationPanelView,s<=5&&(n.detailed=!0)}else if("checkout_growl"==n.type)i=c.CheckoutGrowlNotificationPanelView;else if("real_card"==n.type)i=c.RealCardNotificationPanelView;else if("save_card"==n.type)i=c.SaveCardNotificationPanelView;else if("email"==n.type||"post-register"==n.type){var o=1;this.preferences.hasPref("countEmailNotifications")&&(o=parseInt(this.preferences.getPref("countEmailNotifications"))+1),this.preferences.setPref("countEmailNotifications",o),o<=1&&(i=c.DetailedEmailNotificationPanelView,n.neverFade=!0)}else"login"==n.type?i=c.SaveLoginNotificationPanelView:"failed_login"==n.type?i=c.FailedLoginNotificationPanelView:"password_with_no_login"==n.type?i=c.PasswordWithNoLoginNotificationPanelView:"change_password"==n.type?i=c.ChangePasswordNotificationPanelView:"growl"==n.type?i=c.GrowlNotificationPanelView:"expire_warning"==n.type?i=c.ExpireWarningNotificationPanelView:"expire_notify"==n.type&&(i=c.ExpireNotifyNotificationPanelView);var l=new i(r),d=e.bind(function(){this.messenger.off("background:saveForm:notification:close",d);try{l.remove()}catch(e){}this.removePanels(this.frameId)},this);this.messenger.on("background:saveForm:notification:close",d),l.bind("remove",function(){this.messenger.off("background:saveForm:notification:close",d),l.remove(),this.messenger.sendToCS("CS","closeNotification",this.frameId)},this),l.bind("render resize",function(e){e=e||{extraWidth:null,extraHeight:null},this.autoResizePanels("abineNotificationPanel",e.extraWidth,e.extraHeight)},this),t("body",this.document).append(l.el)},fillFields:function(e,t,n,a,i){var r={type:e,strategyId:t,fieldId:n,values:a,origin:i};this.messenger.sendToCS("CS","fillFields",r)},sendFeedbackEmail:function(e,t,n){this.messenger.sendToCS("CS","sendFeedbackEmail",{strategyId:e,fieldId:t,data:n})},autoResizePanels:function(e,t,n){this.messenger.sendToCS("CS","autoResizePanels",{className:e,extraWidth:t,extraHeight:n,documentHeight:this.document.body.offsetHeight})},removePanels:function(t,n,a){this.messenger&&(a&&this.messenger.off("keyEvent-"+a),this.messenger.sendToCS("CS","removePanels",{id:t,strategyId:n,fieldId:a}),t.indexOf("doNotRemove")==-1&&i.setTimeout(e.bind(this.destroy,this),0))},bindKeyEvents:function(e,t,n,a){this.messenger.sendToCS("CS","bindKeyEvents",{frameId:this.frameId,strategyId:e,fieldId:t,doNotCloseOnTyping:n}),this.messenger.off("keyEvent-"+t),this.messenger.on("keyEvent-"+t,a)},ignoreBlur:function(e,t,n){this.messenger&&this.messenger.sendToCS("CS","ignoreBlur",{strategyId:e,fieldId:t,value:n})},showFieldIcon:function(e,t,n){this.messenger&&this.messenger.sendToCS("CS","showFieldIcon",{strategyId:e,fieldId:t,value:n})},focusField:function(e,t){this.messenger&&this.messenger.sendToCS("CS","focusField",{strategyId:e,fieldId:t})},focusFieldWithIntent:function(e,t,n){this.messenger&&this.messenger.sendToCS("CS","focusFieldWithIntent",{strategyId:e,fieldId:t,params:n,frameId:this.frameId})},showAutoFillWith:function(e){this.messenger&&this.messenger.sendToCS("CS","showAutoFillWith",{fieldId:e.fieldId,strategyId:e.strategyId,fieldType:e.fieldType,category:e.category})},_showAutoFillWith:function(e){var n=new k({fieldId:e.fieldId,strategyId:e.strategyId,category:e.category,fieldType:e.fieldType,formType:e.formType,panelDisabledHere:e.panelDisabledHere,contentManager:this,authToken:!this.isLocked(),domain:this.domain,el:t("<div></div>",this.document).get(0)});return n.bind("remove",function(){try{n.remove()}catch(e){}this.removePanels(this.frameId)},this),n.bind("render resize",function(e){e=e||{className:null,extraWidth:null,extraHeight:null},this.autoResizePanels(e.className,e.extraWidth,e.extraHeight)},this),t("body",this.document).append(n.el),n},showMapForm:function(e){this.messenger.sendToCS("CS","showMapForm",{fieldId:e.fieldId,strategyId:e.strategyId,fieldType:e.fieldType,mapFirstForm:e.mapFirstForm,forms:e.forms,formId:e.formId})},_showMapForm:function(e){var n=new(e.reviewMode?E:w)({fieldId:e.fieldId,strategyId:e.strategyId,category:e.category,fieldType:e.fieldType,formType:e.formType,fields:e.fields,forms:e.forms,formId:e.formId,mappings:e.mappings,formSignature:e.formSignature,reviewMode:e.reviewMode,contentManager:this,authToken:!this.isLocked(),domain:this.domain,el:t("<div></div>",this.document).get(0)});n.bind("remove",function(){try{n.remove()}catch(e){}this.removePanels(this.frameId)},this),n.bind("render resize",function(e){e=e||{className:null,extraWidth:null,extraHeight:null},this.autoResizePanels(e.className,e.extraWidth,e.extraHeight)},this),t("body",this.document).append(n.el)},showAutoFillPanel:function(e){var n=new A({fieldId:e.fieldId,strategyId:e.strategyId,category:e.category,fieldType:e.fieldType,formType:e.formType,fields:e.fields,mappings:e.mappings,formSignature:e.formSignature,reviewMode:e.reviewMode,contentManager:this,authToken:!this.isLocked(),domain:this.domain,href:this.href,el:t("<div></div>",this.document).get(0)});n.bind("remove",function(){try{n.remove()}catch(e){}this.removePanels(this.frameId)},this),n.bind("render resize",function(e){e=e||{className:null,extraWidth:null,extraHeight:null},this.autoResizePanels(e.className,e.extraWidth,e.extraHeight)},this),t("body",this.document).append(n.el)},destroy:function(){try{l.disconnect()}catch(e){}this.messenger&&(this.messenger.off(),this.messenger.destroy(),delete this.messenger)}});return{ContentManager:T}}),/* ===========================================================
 * bootstrap-tooltip.js v2.3.2
 * http://getbootstrap.com/2.3.2/javascript.html#tooltips
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ===========================================================
 * Copyright 2013 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
!function(e){"use strict";var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,n,a){var i,r,s,o,l;for(this.type=t,this.$element=e(n),this.options=this.getOptions(a),this.enabled=!0,s=this.options.trigger.split(" "),l=s.length;l--;)o=s[l],"click"==o?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):"manual"!=o&&(i="hover"==o?"mouseenter":"focus",r="hover"==o?"mouseleave":"blur",this.$element.on(i+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(r+"."+this.type,this.options.selector,e.proxy(this.leave,this)));this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var n,a=e.fn[this.type].defaults,i={};return this._options&&e.each(this._options,function(e,t){a[e]!=t&&(i[e]=t)},this),n=e(t.currentTarget)[this.type](i).data(this.type),n.options.delay&&n.options.delay.show?(clearTimeout(this.timeout),n.hoverState="in",void(this.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show))):n.show()},leave:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),n.options.delay&&n.options.delay.hide?(n.hoverState="out",void(this.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide))):n.hide()},show:function(){var t,n,a,i,r,s,o=e.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(o),o.isDefaultPrevented())return;switch(t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),r="function"==typeof this.options.placement?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,t.detach().css({top:0,left:0,display:"block"}),this.options.container?t.appendTo(this.options.container):t.insertAfter(this.$element),n=this.getPosition(),a=t[0].offsetWidth,i=t[0].offsetHeight,r){case"bottom":s={top:n.top+n.height,left:n.left+n.width/2-a/2};break;case"top":s={top:n.top-i,left:n.left+n.width/2-a/2};break;case"left":s={top:n.top+n.height/2-i/2,left:n.left-a};break;case"right":s={top:n.top+n.height/2-i/2,left:n.left+n.width}}this.applyPlacement(s,r),this.$element.trigger("shown")}},applyPlacement:function(e,t){var n,a,i,r,s=this.tip(),o=s[0].offsetWidth,l=s[0].offsetHeight;s.offset(e).addClass(t).addClass("in"),n=s[0].offsetWidth,a=s[0].offsetHeight,"top"==t&&a!=l&&(e.top=e.top+l-a,r=!0),"bottom"==t||"top"==t?(i=0,e.left<0&&(i=e.left*-2,e.left=0,s.offset(e),n=s[0].offsetWidth,a=s[0].offsetHeight),this.replaceArrow(i-o+n,n,"left")):this.replaceArrow(a-l,a,"top"),r&&s.offset(e)},replaceArrow:function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function t(){var t=setTimeout(function(){n.off(e.support.transition.end).detach()},500);n.one(e.support.transition.end,function(){clearTimeout(t),n.detach()})}var n=this.tip(),a=e.Event("hide");if(this.$element.trigger(a),!a.isDefaultPrevented())return n.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?t():n.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var t=this.$element[0];return e.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},getTitle:function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},tip:function(){return this.$tip=this.$tip||e(this.options.template,this.$element)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(t){var n=t?e(t.currentTarget)[this.type](this._options).data(this.type):this;n.tip().hasClass("in")?n.hide():n.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var n=e.fn.tooltip;e.fn.tooltip=function(n){return this.each(function(){var a=e(this),i=a.data("tooltip"),r="object"==typeof n&&n;i||a.data("tooltip",i=new t(this,r)),"string"==typeof n&&i[n]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(window.jQuery),ABINE_DNTME.CompiledTemplates=ABINE_DNTME.CompiledTemplates||{},ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("common.auto_fill_with",e.template(function(e,t,n,a,i){function r(e,t){var a,i,r="";return r+='\n<a href="#" class="mmKeyOption autoFillWith">\n  <div class="element" id="disclose">\n    <span class="panelLeft full" style="text-align:left;font-size: 9pt;color:#3497db;"> &nbsp;&nbsp;\n      ',c=n.mapper,a=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"mapper"),i=n["if"],m=h.program(2,s,t),m.hash={},m.fn=m,m.inverse=h.program(4,o,t),a=i.call(e,a,m),(a||0===a)&&(r+=a),r+="\n    </span>\n  </div>\n</a>\n"}function s(e){var t,a,i="";return i+="\n        ",t="mm_auto_fill_with_map_form",c=n.intl,a=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===p?a.call(e,t,{hash:{}}):a===_?u.call(e,"intl",t,{hash:{}}):a,i+=g(t)+"\n      "}function o(e){var t,a,i="";return i+="\n        ",t="mm_dntme_correct_something",c=n.intl,a=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===p?a.call(e,t,{hash:{}}):a===_?u.call(e,"intl",t,{hash:{}}):a,i+=g(t)+"\n      "}n=n||e.helpers;var l,d,c,m,h=this,p="function",u=n.helperMissing,_=void 0,g=this.escapeExpression;return c=n.showMapper,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"showMapper"),d=n["if"],m=h.program(1,r,i),m.hash={},m.fn=m,m.inverse=h.noop,l=d.call(t,l,m),l||0===l?l:""}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("common.biometric_auth",e.template(function(e,t,n,a,i){function r(e){var t,a,i="";return i+='\n          <img src="',t="/pages/images/faceid.png",g=n.assetUrl,a=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===v?a.call(e,t,{hash:{}}):a===w?k.call(e,"assetUrl",t,{hash:{}}):a,i+=E(t)+'" class="loading" style="width: 55px;"/><br/>Face ID\n      '}function s(e,t){var a,i,r="";return r+="\n          ",g=n.touch_id,a=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"touch_id"),i=n["if"],f=y.program(4,o,t),f.hash={},f.fn=f,f.inverse=y.program(6,l,t),a=i.call(e,a,f),(a||0===a)&&(r+=a),r+="\n      "}function o(e){var t,a,i="";return i+='\n              <img src="',t="/pages/images/fingerprint.png",g=n.assetUrl,a=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===v?a.call(e,t,{hash:{}}):a===w?k.call(e,"assetUrl",t,{hash:{}}):a,i+=E(t)+'" class="loading" style="width: 55px;"/><br/>Touch ID\n          '}function l(e){var t,a,i="";return i+='\n              <img src="',t="/pages/images/phoneid.png",g=n.assetUrl,a=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===v?a.call(e,t,{hash:{}}):a===w?k.call(e,"assetUrl",t,{hash:{}}):a,i+=E(t)+'" class="loading" style="width: 55px;"/><br/>\n          '}function d(e){var t,a,i="";return i+="\n          ",t="mm_payment_helper_request_faceid_auth",g=n.intl,a=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===v?a.call(e,t,{hash:{}}):a===w?k.call(e,"intl",t,{hash:{}}):a,i+=E(t)+"\n      "}function c(e,t){var a,i,r="";return r+="\n          ",g=n.touch_id,a=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"touch_id"),i=n["if"],f=y.program(11,m,t),f.hash={},f.fn=f,f.inverse=y.program(13,h,t),a=i.call(e,a,f),(a||0===a)&&(r+=a),r+="\n      "}function m(e){var t,a,i="";return i+="\n              ",t="mm_payment_helper_request_biometric_auth",g=n.intl,a=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===v?a.call(e,t,{hash:{}}):a===w?k.call(e,"intl",t,{hash:{}}):a,i+=E(t)+"\n          "}function h(e){var t,a,i="";return i+="\n              ",t="mm_payment_helper_request_phoneid_auth",g=n.intl,a=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===v?a.call(e,t,{hash:{}}):a===w?k.call(e,"intl",t,{hash:{}}):a,i+=E(t)+"\n          "}function p(e){var t,a,i="";return i+='\n    <div class="control-group" style="margin-left:50px;">\n      <span >',t="mm_payment_helper_master_pass_auth_message",g=n.intl,a=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===v?a.call(e,t,{hash:{}}):a===w?k.call(e,"intl",t,{hash:{}}):a,i+=E(t)+'</span><br/>\n      <div id="masterPassErr" style="display:none;color:red;text-transform:none;"></div>\n      <span class="fields">\n        <div id="login-section">\n          <input id="password" type="password" style="width:140px;height:28px;margin:10px 5px;margin-left:0px;" placeholder="',t="mm_dntme_enter_password_simple",g=n.intl,a=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===v?a.call(e,t,{hash:{}}):a===w?k.call(e,"intl",t,{hash:{}}):a,i+=E(t)+'"/>\n        </div>\n         <input type="submit" id="unlockButton" class="btn btn-success unlock-msg" value=\'',t="mm_payment_helper_master_pass_auth_verify",g=n.intl,a=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===v?a.call(e,t,{hash:{}}):a===w?k.call(e,"intl",t,{hash:{}}):a,i+=E(t)+'\' style="padding:5px 35px;background:none;background-color:#4c90da;"/>\n      </span>\n    </div>\n  '}n=n||e.helpers;var u,_,g,f,b="",y=this,v="function",k=n.helperMissing,w=void 0,E=this.escapeExpression,A=n.blockHelperMissing;return b+='<!-- Step 3.1 Biometric auth -->\n<div class="clearfix" id="biometricAuth" style="display:none;">\n  <div style="float:left;width:80px;margin:10px;text-align:center;font-size: 8pt;padding-top: 10px;border-right: 1px solid #eee;">\n      ',g=n.face_id,u=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"face_id"),_=n["if"],f=y.program(1,r,i),f.hash={},f.fn=f,f.inverse=y.program(3,s,i),u=_.call(t,u,f),(u||0===u)&&(b+=u),b+='\n  </div>\n  <div style="float:left;margin: 10px;width:230px;text-align: center;">\n    <span id="biometricInfo" class="loading-dots" style="font-size: 12pt;display: inline-block;margin: 5px;">\n      ',g=n.face_id,u=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"face_id"),_=n["if"],f=y.program(8,d,i),f.hash={},f.fn=f,f.inverse=y.program(10,c,i),u=_.call(t,u,f),(u||0===u)&&(b+=u),b+='\n    </span>\n    <span id="biometricError" style="display:none;color:red;"></span>\n    <br/>\n    <input type="button" class="btn btn-success" id="retryBiometricAuth" style="margin: 5px;" value="',u="mm_payment_helper_retry_biometric_auth",g=n.intl,_=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof _===v?_.call(t,u,{hash:{}}):_===w?k.call(t,"intl",u,{hash:{}}):_,b+=E(u)+'"/><br/>\n    <a id="masterPassAuth" href="#">',u="mm_payment_helper_master_pass_auth",g=n.intl,_=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof _===v?_.call(t,u,{hash:{}}):_===w?k.call(t,"intl",u,{hash:{}}):_,b+=E(u)+'</a>\n  </div>\n</div>\n<!-- End Step 3.1 Biometric auth -->\n\n<!-- Step 3.2 Master password auth -->\n<div class="clearfix" id="masterPassStep" style="display:none;padding-top:15px;">\n  <div style="float:left;">\n    <img style="margin-top:30px;margin-left:6px;" height="40px" width="40px" src="',u="/pages/images/NewIcon.png",g=n.assetUrl,_=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),u=typeof _===v?_.call(t,u,{hash:{}}):_===w?k.call(t,"assetUrl",u,{hash:{}}):_,b+=E(u)+'"/>\n  </div>\n  ',u="unlock",g=n.form,_=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"form"),f=y.program(15,p,i),f.hash={},f.fn=f,f.inverse=y.noop,u=g&&typeof _===v?_.call(t,u,f):A.call(t,_,u,f),(u||0===u)&&(b+=u),b+="\n</div>\n<!-- End Step 3.2 Master password auth -->\n"}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("common.disable_link",e.template(function(e,t,n){n=n||e.helpers;var a,i,r,s="",o="function",l=n.helperMissing,d=void 0,c=this.escapeExpression;return s+='<a href="#" id="disableLink" style="text-transform: none;margin-left: 10px;font-size: 9pt;text-decoration: underline;">',a="mm_dntme_disable_panel",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+"</a>"}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("common.field_types",e.template(function(e,t,n){n=n||e.helpers;return'<select class="fieldTypes" style="vertical-align:middle;">\n  <option value="">-- Please select --</option>\n  <option class="start" value="/unknown">Ignore</option>\n  <optgroup class="person-grp" label="Person">\n    <option value="/contact/email">Email</option>\n    <option value="/nameperson/friendly">Username or User ID</option>\n    <option value="/nameperson/full">Full Name</option>\n    <option value="/nameperson/prefix">Title (Mr/Mrs/Ms)</option>\n    <option value="/nameperson/first">First Name</option>\n    <option value="/nameperson/middle">Middle Name</option>\n    <option value="/nameperson/last">Last Name</option>\n    <option value="/nameperson/suffix">Suffix (Jr./Sr./II)</option>\n    <option value="/person/gender">Gender</option>\n  </optgroup>\n  <optgroup class="security-grp" label="Security">\n    <option value="/password">Password</option>\n    <option value="/password/differentSpecialChars">Limited Special Chars (.-_)</option>\n    <option value="/password/noSpecialChars">No Special Characters</option>\n    <option value="/password/noNumbers">No Numbers</option>\n    <option value="/passwordold">Old Password</option>\n  </optgroup>\n  <optgroup class="combined-grp" label="Combined Login/Register Form">\n    <option value="/contact/email/login">Username or Email</option>\n    <option value="/password/login">Password</option>\n  </optgroup>\n  <optgroup class="phone-grp" label="Phone Fields">\n    <option value="/contact/phone">Phone xxx-yyy-zzzz</option>\n    <option value="/contact/phone/areacode">Phone areacode (xxx)</option>\n    <option value="/contact/phone/exchange">Phone exchange yyy</option>\n    <option value="/contact/phone/local">Phone local zzzz</option>\n    <option value="/contact/phone/number">Phone last 7 yyy-zzzz</option>\n    <option value="/contact/phone/extension">Phone extension</option>\n    <option value="/contact/phone/countrycode">Phone country code</option>\n  </optgroup>\n  <optgroup class="phone-grp" label="Home Phone">\n    <option value="/contact/phone/home">Home Phone xxx-yyy-zzzz</option>\n    <option value="/contact/phone/areacode/home">Home Phone areacode (xxx)</option>\n    <option value="/contact/phone/exchange/home">Home Phone exchange yyy</option>\n    <option value="/contact/phone/local/home">Home Phone local zzzz</option>\n    <option value="/contact/phone/number/home">Home Phone last 7 yyy-zzzz</option>\n    <option value="/contact/phone/extension/home">Home Phone extension</option>\n    <option value="/contact/phone/countrycode/home">Home Phone country code</option>\n  </optgroup>\n  <optgroup class="phone-grp" label="Work Phone">\n    <option value="/contact/phone/work">Work Phone xxx-yyy-zzzz</option>\n    <option value="/contact/phone/areacode/work">Work Phone areacode (xxx)</option>\n    <option value="/contact/phone/exchange/work">Work Phone exchange yyy</option>\n    <option value="/contact/phone/local/work">Work Phone local zzzz</option>\n    <option value="/contact/phone/number/work">Work Phone last 7 yyy-zzzz</option>\n    <option value="/contact/phone/extension/work">Work Phone extension</option>\n    <option value="/contact/phone/countrycode/work">Work Phone country code</option>\n  </optgroup>\n  <optgroup class="phone-grp" label="Mobile Phone">\n    <option value="/contact/phone/mobile">Mobile Phone xxx-yyy-zzzz</option>\n    <option value="/contact/phone/areacode/mobile">Mobile Phone areacode (xxx)</option>\n    <option value="/contact/phone/exchange/mobile">Mobile Phone exchange yyy</option>\n    <option value="/contact/phone/local/mobile">Mobile Phone local zzzz</option>\n    <option value="/contact/phone/number/mobile">Mobile Phone last 7 yyy-zzzz</option>\n    <option value="/contact/phone/extension/mobile">Mobile Phone extension</option>\n    <option value="/contact/phone/countrycode/mobile">Mobile Phone country code</option>\n  </optgroup>\n  <optgroup class="phone-grp" label="Fax Phone">\n    <option value="/contact/phone/fax">Fax Phone xxx-yyy-zzzz</option>\n    <option value="/contact/phone/areacode/fax">Fax Phone areacode (xxx)</option>\n    <option value="/contact/phone/exchange/fax">Fax Phone exchange yyy</option>\n    <option value="/contact/phone/local/fax">Fax Phone local zzzz</option>\n    <option value="/contact/phone/number/fax">Fax Phone last 7 yyy-zzzz</option>\n    <option value="/contact/phone/extension/fax">Fax Phone extension</option>\n    <option value="/contact/phone/countrycode/fax">Fax Phone country code</option>\n  </optgroup>\n  <optgroup class="card-grp" label="Credit Card Fields">\n    <option value="/financial/creditcard/number">Full Card Number</option>\n    <option value="/financial/creditcard/type">Card Type</option>\n    <option value="/financial/creditcard/issuedto">Issued To Full</option>\n    <option value="/financial/creditcard/verification">CVV/CVC/CVV2</option>\n    <option value="/financial/creditcard/expiry">Expiration Date (mm/yyyy)</option>\n    <option value="/financial/creditcard/expiry2">Expiration Date (mm/yy)</option>\n    <option value="/financial/creditcard/expirymonth">Expiration Month</option>\n    <option value="/financial/creditcard/expiryyear">Expiration Year (4 digits)</option>\n    <option value="/financial/creditcard/expiryyear2">Expiration Year (2 digits)</option>\n    <option value="/financial/creditcard/number/part1">Card Number First 4</option>\n    <option value="/financial/creditcard/number/part2">Card Number Second 4</option>\n    <option value="/financial/creditcard/number/part3">Card Number Third 4</option>\n    <option value="/financial/creditcard/number/part4">Card Number Last 4</option>\n    <option value="/financial/creditcard/number/amex/part1">AmEx Number First 4</option>\n    <option value="/financial/creditcard/number/amex/part2">AmEx Number Second 6</option>\n    <option value="/financial/creditcard/number/amex/part3">AmEx Number Third 5</option>\n    <option value="/financial/creditcard/issuedto/first">Issued To First</option>\n    <option value="/financial/creditcard/issuedto/last">Issued To Last</option>\n  </optgroup>\n  <optgroup class="address-grp" label="Address">\n    <option value="/contact/postaladdress">Address Line 1</option>\n    <option value="/contact/postaladdressAdditional">Address Line 2</option>\n    <option value="/contact/postaladdress3">Address Line 3</option>\n    <option value="/contact/city">City</option>\n    <option value="/contact/state">State</option>\n    <option value="/contact/state/code">State Code</option>\n    <option value="/contact/postalcode">Zip/Postal Code</option>\n    <option value="/contact/country">Country</option>\n  </optgroup>\n  <optgroup class="address-grp" label="Billing Address">\n    <option value="/contact/postaladdress/billing">Billing Address Line 1</option>\n    <option value="/contact/postaladdressAdditional/billing">Billing Address Line 2</option>\n    <option value="/contact/postaladdress3/billing">Billing Address Line 3</option>\n    <option value="/contact/city/billing">Billing City</option>\n    <option value="/contact/state/billing">Billing State</option>\n    <option value="/contact/state/code/billing">Billing State Code</option>\n    <option value="/contact/postalcode/billing">Billing Zip/Postal Code</option>\n    <option value="/contact/country/billing">Billing Country</option>\n  </optgroup>\n  <optgroup class="address-grp" label="Shipping Address">\n    <option value="/contact/postaladdress/shipping">Shipping Address Line 1</option>\n    <option value="/contact/postaladdressAdditional/shipping">Shipping Address Line 2</option>\n    <option value="/contact/postaladdress3/shipping">Shipping Address Line 3</option>\n    <option value="/contact/city/shipping">Shipping City</option>\n    <option value="/contact/state/shipping">Shipping State</option>\n    <option value="/contact/state/code/shipping">Shipping State Code</option>\n    <option value="/contact/postalcode/shipping">Shipping Zip/Postal Code</option>\n    <option value="/contact/country/shipping">Shipping Country</option>\n  </optgroup>\n  <optgroup class="address-grp" label="Business Address">\n    <option value="/contact/postaladdress/business">Business Address Line 1</option>\n    <option value="/contact/postaladdressAdditional/business">Business Address Line 2</option>\n    <option value="/contact/postaladdress3/business">Business Address Line 3</option>\n    <option value="/contact/city/business">Business City</option>\n    <option value="/contact/state/business">Business State</option>\n    <option value="/contact/state/code/business">Business State Code</option>\n    <option value="/contact/postalcode/business">Business Zip/Postal Code</option>\n    <option value="/contact/country/business">Business Country</option>\n  </optgroup>\n  <optgroup class="address-grp" label="Home Address">\n    <option value="/contact/postaladdress/home">Home Address Line 1</option>\n    <option value="/contact/postaladdressAdditional/home">Home Address Line 2</option>\n    <option value="/contact/postaladdress3/home">Home Address Line 3</option>\n    <option value="/contact/city/home">Home City</option>\n    <option value="/contact/state/home">Home State</option>\n    <option value="/contact/state/code/home">Home State Code</option>\n    <option value="/contact/postalcode/home">Home Zip/Postal Code</option>\n    <option value="/contact/country/home">Home Country</option>\n  </optgroup>\n  <optgroup class="date-grp" label="Birth Date">\n    <option value="/birthdate/age">Age</option>\n    <option value="/birthdate/birthmonth">Birth Date (month)</option>\n    <option value="/birthdate/birthday">Birth Date (day)</option>\n    <option value="/birthdate/birthyear">Birth Date (year)</option>\n    <option value="/birthdate/MM-DD-YYYY">Birth Date (MM-DD-YYYY)</option>\n    <option value="/birthdate/MM/DD/YYYY">Birth Date (MM/DD/YYYY)</option>\n    <option value="/birthdate/DD-MM-YYYY">Birth Date (DD-MM-YYYY)</option>\n    <option value="/birthdate/DD/MM/YYYY">Birth Date (DD/MM/YYYY)</option>\n  </optgroup>\n  <option value="/captcha">Captcha</option>\n  <option value="/auth/otp">One Time Password</option>\n  <option value="/auth/hint">Password Hint</option>\n  <option value="/auth/question">Security Question</option>\n  <option value="/auth/answer">Security Answer</option>\n  <option value="/website">Website Url</option>\n  <option value="/company/name">Company Name</option>\n  <option value="/company/position">Company Position</option>\n  <option value="/socialSecurityNumber">SSN #</option>\n  <option value="/driverLicense">Driver License #</option>\n  <option value="/loyalty/flier">Frequent Flier #</option>\n  <option value="/loyalty/card">Loyalty Card #</option>\n  <option value="/rememberLogin">Remember Me</option>\n  <option value="/agreeTOS">Agree to TOS</option>\n  <option value="/comment">Comment</option>\n  <option value="/message">message</option>\n</select>'}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("common.form_types",e.template(function(e,t,n){n=n||e.helpers;return'<select id="formType">\n  <option value="">-- Please Select --</option>\n  <option value="loginForm">Login Form</option>\n  <option value="registrationForm">Registration Form</option>\n  <option value="checkoutForm">Checkout Form</option>\n  <option value="changePasswordForm">Change Password Form</option>\n  <option value="otherForm">Other Form</option>\n  <option value="ignoreForm">Ignore Form</option>\n</select>'}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("common.header",e.template(function(e,t,n,a,i){function r(e){var t,a="";return a+='data-highlight="',l=n.panelType,t=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"panelType"),typeof t===h?t=t.call(e,{hash:{}}):t===u&&(t=p.call(e,"panelType",{hash:{}})),a+=_(t)+'"'}n=n||e.helpers;var s,o,l,d,c="",m=this,h="function",p=n.helperMissing,u=void 0,_=this.escapeExpression;return c+='<div class="newheader">\n  <div class="newlinks close-link">\n    <img class="" src="',s="/pages/images/2015panels/panel_xclose.png",l=n.assetUrl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),s=typeof o===h?o.call(t,s,{hash:{}}):o===u?p.call(t,"assetUrl",s,{hash:{}}):o,c+=_(s)+'"/>\n  </div>\n  <div class="newlinks b-link" ',l=n.panelType,s=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"panelType"),o=n["if"],d=m.program(1,r,i),d.hash={},d.fn=d,d.inverse=m.noop,s=o.call(t,s,d),(s||0===s)&&(c+=s),c+='>\n    <img class="" src="',l=n.panelLogoSmall,s=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"panelLogoSmall"),typeof s===h?s=s.call(t,{hash:{}}):s===u&&(s=p.call(t,"panelLogoSmall",{hash:{}})),c+=_(s)+'"/>\n  </div>\n</div>'}))}),ABINE_DNTME.define("abine/views/commonhelpers",["wycats/handlebars","abine/config","abine/intl","abine/assets","abine/cobranding"],function(e,t,n,a,i){e.registerHelper("if_all",function(){for(var e=[].slice.apply(arguments),t=e.pop(),n=t.fn,a=0;a<e.length;++a)if(!e[a]){n=t.inverse;break}return n(this)}),e.registerHelper("configVar",function(n){return e.Utils.escapeExpression(t[n])}),e.registerHelper("ifContentUser",function(e,t){return"function"==typeof ABINE_DNTME.contentuser[e]&&ABINE_DNTME.contentuser[e]()?t.fn(this):t.inverse(this)}),e.registerHelper("ifBrowser",function(e,n){return t.browser==e?n.fn(this):n.inverse(this)}),e.registerHelper("unlessBrowser",function(e,n){return t.browser!=e?n.fn(this):n.inverse(this)}),e.registerHelper("intl",function(e,t){return arguments.length>1&&(t=Array.prototype.slice.call(arguments,1)),n.getText(e,t)}),e.registerHelper("nl2br",function(t){return e.Utils.escapeExpression(t).replace(/\n/g,"<br/>")}),e.registerHelper("plural",function(e,t){arguments.length>1&&(t=Array.prototype.slice.call(arguments,1));var a=n.getText(e,t);return 1!=t[t.length-2]?a.length>2&&a.substr(a.length-3).match(/y$/)?a.substr(0,a.length-1)+"ies":a+"s":a}),e.registerHelper("date",function(e){return new Date(e).toLocaleDateString()}),e.registerHelper("panelLogoSmall",function(){return a.assetUrl(i.get("panel.logo.small"))}),e.registerHelper("panelLogoBig",function(){return a.assetUrl(i.get("panel.logo.big"))}),e.registerHelper("settingsIcon",function(e,t){var a='<div class="links '+t+'" data-highlight="'+e+'" data-add-setting="'+e+'-settings-seen">';return a+=n.getText("mm_dntme_settings"),a+="</div>"})}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.loading_display_loading_display=e.template(function(e,t,n){n=n||e.helpers;var a,i,r,s="",o="function",l=n.helperMissing,d=void 0,c=this.escapeExpression;return s+='<div class="loading-display">\n  <div class="progress progress-striped active">\n    <div class="bar bar-info" style="width: 100%;"></div>\n  </div>\n  <div class="loading-message">\n    ',a="mm_loading_display_Loading",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+'\n  </div>\n</div>\n<div class="refreshing-display" style="display:none;">\n    <img src="',a="/pages/images/ajax_loader.gif",r=n.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"assetUrl",a,{hash:{}}):i,s+=c(a)+'" />\n</div>'}),ABINE_DNTME.CompiledTemplates.loading_display_loading_display}),ABINE_DNTME.define("abine/views/loading_display",["documentcloud/underscore","jquery","duckbone/core","abine/timer","abine/intl"],function(e,t,n,a,i){var r=n.View.extend({templateName:"loading_display_loading_display",afterInitialize:function(){this.options.customMessages||(this.options.customMessages=["mm_loading_display_LotOfAccounts","mm_loading_display_StillWorking","mm_loading_display_HangOn","mm_loading_display_Sorry"]);var n=0;this.changeMessage=a.setInterval(e.bind(function(){n>=this.options.customMessages.length?a.clearInterval(this.changeMessage):(t(this.el).find(".loading-message").html(i.getText(this.options.customMessages[n],["loading_"+this.options.pageName])),n++)},this),this.options.interval||5e3)},reset:function(){a.clearInterval(this.changeMessage),t(this.el).find(".loading-message").html(""),this.afterInitialize()},hide:function(){a.clearInterval(this.changeMessage),t(this.el).find(".loading-display").hide(),t(this.el).find(".refreshing-display").hide()},startRefreshing:function(){t(this.el).find(".refreshing-display").show()}});return r}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.unlock_panel=e.template(function(e,t,n,a,i){function r(e){var t,a,i="";return i+='\n    <div class="control-group" style="margin-left:50px;">\n      <span class="login-msg">',t="mm_unlock_panel_login_message",l=n.intl,a=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===h?a.call(e,t,{hash:{}}):a===u?p.call(e,"intl",t,{hash:{}}):a,i+=_(t)+'</span><span class="unlock-msg">',t="mm_unlock_panel_unlock_message",l=n.intl,a=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===h?a.call(e,t,{hash:{}}):a===u?p.call(e,"intl",t,{hash:{}}):a,i+=_(t)+'</span><br/>\n      <div id="error" style="display:none;color:black;text-transform:none;"></div>\n      <span class="fields">\n        <div id="login-section">\n          <div style="clear:both;display:block;width:0px;max-width:0px;height:0px;max-height:0px;overflow:hidden;opacity:0;"\n               class="autofill-grabber"><input type="text" autocomplete="off" id="login_email" tabindex="-1"><input type="password" autocomplete="off" id="login_password" tabindex="-1">\n          </div>\n          <input id="email" type="text" value="',l=n.email,t=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),typeof t===h?t=t.call(e,{hash:{}}):t===u&&(t=p.call(e,"email",{hash:{}})),i+=_(t)+'" style="width:140px;height:28px;margin:10px 5px;margin-left:0px;" placeholder="',t="mm_dntme_enter_email_simple",l=n.intl,a=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===h?a.call(e,t,{hash:{}}):a===u?p.call(e,"intl",t,{hash:{}}):a,i+=_(t)+'"/>\n          <input id="password" type="password" style="width:140px;height:28px;margin:10px 5px;margin-left:0px;" placeholder="',t="mm_dntme_enter_password_simple",l=n.intl,a=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===h?a.call(e,t,{hash:{}}):a===u?p.call(e,"intl",t,{hash:{}}):a,i+=_(t)+'"/>\n        </div>\n        <div id="mfa-section" style="display:none;">\n          <input type="text" id="mfa-code-field" style="width:140px;height:28px;margin:10px 5px" name="mfa_code" placeholder="Authentication Code" />\n        </div>\n         <input type="submit" id="unlockButton" class="btn btn-success login-msg" value=\'',t="mm_dntme_sign_in",l=n.intl,a=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===h?a.call(e,t,{hash:{}}):a===u?p.call(e,"intl",t,{hash:{}}):a,i+=_(t)+'\' style="padding:5px 35px;background:none;background-color:#4c90da;"/>\n         <input type="submit" id="unlockButton" class="btn btn-success unlock-msg" value=\'',t="mm_unlock_panel_unlock",l=n.intl,a=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===h?a.call(e,t,{hash:{}}):a===u?p.call(e,"intl",t,{hash:{}}):a,i+=_(t)+'\' style="padding:5px 35px;background:none;background-color:#4c90da;"/>\n         <a id="login-different-user" class="unlock-msg" style="cursor:pointer;margin-left:20px;">',t="mm_unlock_panel_different_user",l=n.intl,a=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===h?a.call(e,t,{hash:{}}):a===u?p.call(e,"intl",t,{hash:{}
}):a,i+=_(t)+'</a>\n        <span class="retry" style="display: none;"><br/><a href="" id="forgotPassword">',t="mm_dntme_forgot_my_password",l=n.intl,a=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===h?a.call(e,t,{hash:{}}):a===u?p.call(e,"intl",t,{hash:{}}):a,i+=_(t)+'</a></span><br/>\n      </span>\n      <div id="progress-section" style="display:none;margin-top:10px;">\n        <div class="progress progress-striped active">\n          <div class="bar bar-info" style="width: 100%;"></div>\n        </div>\n        <div class="loading-message" style="text-transform:none;text-align: center">',t="mm_loading_display_login",l=n.intl,a=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===h?a.call(e,t,{hash:{}}):a===u?p.call(e,"intl",t,{hash:{}}):a,i+=_(t)+'</div>\n      </div>\n    </div>\n    <div style="height:8px;">&nbsp;</div>\n  '}n=n||e.helpers;var s,o,l,d,c="",m=this,h="function",p=n.helperMissing,u=void 0,_=this.escapeExpression,g=n.blockHelperMissing;return c+='<div class="panel">\n   <div style="float:left;">\n    <img style="margin-top:30px;margin-left:6px;" height="40px" width="40px" src="',l=n.panelLogoSmall,s=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"panelLogoSmall"),typeof s===h?s=s.call(t,{hash:{}}):s===u&&(s=p.call(t,"panelLogoSmall",{hash:{}})),c+=_(s)+'"/>\n   </div>\n  ',s="unlock",l=n.form,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"form"),d=m.program(1,r,i),d.hash={},d.fn=d,d.inverse=m.noop,s=l&&typeof o===h?o.call(t,s,d):g.call(t,o,s,d),(s||0===s)&&(c+=s),c+='\n\n  <div class="header">\n    <div class="logo-link" style="display:none;">\n      <img class="logo" height="24px" width="24px" src="',s="/pages/images/Icon-48.png",l=n.assetUrl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),s=typeof o===h?o.call(t,s,{hash:{}}):o===u?p.call(t,"assetUrl",s,{hash:{}}):o,c+=_(s)+'"/>\n      <span class="boldFont">Blur</span>\n    </div>\n    <div class="links-wrapper">\n      <div class="links close-link">\n        ',s="mm_dntme_hide_panel",l=n.intl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof o===h?o.call(t,s,{hash:{}}):o===u?p.call(t,"intl",s,{hash:{}}):o,c+=_(s)+'\n      </div>\n      <div id="faqLink" class="links help-link">\n        ',s="mm_dntme_help",l=n.intl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof o===h?o.call(t,s,{hash:{}}):o===u?p.call(t,"intl",s,{hash:{}}):o,c+=_(s)+"\n      </div>\n    </div>\n  </div>\n\n</div>"}),ABINE_DNTME.CompiledTemplates.unlock_panel}),ABINE_DNTME.define("abine/views/unlockPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/proxies","abine/timer","abine/intl","abine/responseCodes"],function(e,t,n,a,i,r,s,o,l){var d=i.extend({templateName:"unlock_panel",events:{"submit .unlock":"verifyPassword","click .help-link":"openFaq","click .settings-link":"openSettings","click #forgotPassword":"forgotPassword","click #login-different-user":"loginDifferentUser"},afterInitialize:function(){this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.applyFadingStyle(),this.fadeIn();var e=this.contentManager.preferences.getPref("oldEmail");this.model={panelType:"unlock",email:e||"",password:""},this.panelId=6000011,this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render(),e?(t(".login-msg",this.el).hide(),t(".unlock-msg",this.el).show(),t("#email",this.el).hide()):t(".unlock-msg",this.el).hide(),this.bindBlurClose()},loginDifferentUser:function(e){e.preventDefault(),this.contentManager.preferences.removePref("oldEmail"),this.contentManager.preferences.setPref("loginNotLock","true"),t("#email",this.el).val(""),t(".unlock-msg",this.el).hide(),t("#email",this.el).show(),t(".login-msg",this.el).show()},forgotPassword:function(e){e.preventDefault(),r.webapp.openForgotPassword(),this.trigger("close")},openFaq:function(){r.webapp.openHelp("/faq/faq-loginHelp"),this.closePanel()},openSettings:function(){this.options.contentManager.showToolbarPanel({page:"settings"}),this.closePanel()},bindBlurClose:function(){0==this.model.email.length?this.bindPanelTextInput(t(t("#password",this.el)).add(t("#email",this.el))):this.bindPanelTextInput(t(t("#email",this.el)).add(t("#password",this.el))),t(this.el).bind("mousedown",e.bind(function(t){var n=t.target.className.split(" ");e.contains(n,"close-link")&&(r.memoryStore.set("login-panel-ignored",0),r.memoryStore.set("login-panel-closed",null),this.contentManager.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.closeHeader()),this.ignoreBlur(!0)},this))},verifyPassword:function(n){this.ignoreBlur(!0),n.preventDefault(),t(this.el).find(".unlockButton").attr("disabled","disabled");var a=t("#email",this.el).val(),i=t("#password",this.el).val(),s=t("#mfa-code-field",this.el).val();this.$("#progress-section").show(),this.$(".fields").hide(),this.$(".retry").show(),this.autoResize();var o={email:a,password:i,mfa_code:s};r.licenseModule.login(o,e.bind(function(t){this.$("#progress-section").hide(),this.$(".fields").show(),this.processLogin(t,o,e.bind(this.unlocked,this))},this))},processLogin:function(t,n,a){if(t){this.contentManager.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId});var i=o.getText("mm_dntme_register_error"),s=t.responseJSON&&t.responseJSON.data?t.responseJSON.data.errors:null;"invalid email address"==t.responseJSON.error_code?i=o.getText("mm_dntme_invalid_email_server_error"):"wrong password"==t.responseJSON.error_code?i=o.getText("mm_dntme_wrong_password"):"mfa code required"==t.responseJSON.error_code?(i="You have enabled 2-factor authentication.  Please enter authentication code below:",this.$("#login-section").hide(),this.$("#mfa-section").show(),this.$("#error, #progress-section").hide(),this.$("#complete-setup-div, #form-div").show(),this.trigger("render")):"no account found for email"==t.responseJSON.error_code?i=o.getText("mm_dntme_wrong_email"):"version not allowed"==t.responseJSON.error_code?i=o.getText("mm_dntme_version_not_allowed"):"account has been locked"==t.responseJSON.error_code?i=o.getText("mm_dntme_account_locked"):t.responseJSON.error_code==l.SCHEDULED_DOWNTIME?i=o.getText("mm_dntme_server_maintenance"):s&&s.email&&"was used for MaskMe Heavy"==s.email[0]&&(i=o.getText("mm_dntme_version_not_allowed")),this.$("#error").html(i).show(),t.responseJSON&&t.responseJSON.data&&1==t.responseJSON.data.generated_password&&this.$("#error #loginButton").click(e.bind(function(e){return r.webapp.openPasswordSetupPage(n.email),this.closePanel(),e.preventDefault(),!1},this)),this.$("#error #retryEmail, #error #loginButton").click(e.bind(function(e){return this.$(".fields, #error").toggle(),this.autoResize(),e.preventDefault(),!1},this)),this.$("#error #dnt2upgrade").click(e.bind(function(){r.webapp.openDnt2UpgradePage(),this.closePanel()},this)),this.autoResize(),a(i)}else this.contentManager.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),this.contentManager.preferences.fetchAll({success:function(){r.webapp.openDashboard(!0),a()}})},closingOnBlur:function(){r.memoryStore.get("login-panel-ignored",function(e){e?e++:e=1,e>=3?(r.memoryStore.set("login-panel-ignored",0),r.memoryStore.set("login-panel-closed",Date.now())):(r.memoryStore.set("login-panel-ignored",0),r.memoryStore.set("login-panel-closed",null))})},unlocked:function(t){t||(this.closePanel(),s.setTimeout(e.bind(this.focusField,this),100))}});return d}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.email_helper_panel=e.template(function(e,t,n,a,i){function r(e,t){var a,i,r="";return r+='\n        <!--Mask My Email-->\n        <a href="#" class="mmKeyOption disposableEmail"><div class="element" id="mask">\n            <span class="panelLeft">\n                <img class="iconPos" src="',a="/pages/images/2015panels/email_green.png",f=n.assetUrl,i=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),a=typeof i===k?i.call(e,a,{hash:{}}):i===E?w.call(e,"assetUrl",a,{hash:{}}):i,r+=A(a)+'" style="width:44px;height:21px;"/>\n                ',a="mm_email_helper_maskMyEmail",f=n.intl,i=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===k?i.call(e,a,{hash:{}}):i===E?w.call(e,"intl",a,{hash:{}}):i,r+=A(a)+'\n            </span>\n            <span class="panelRight">\n              ',f=n.tabData,a=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"tabData"),a=null===a||void 0===a||a===!1?a:ABINE_DNTME.Duckbone.Handlebars.getAttr(a,"hasFiveOrMoreTrackers"),i=n["if"],b=v.program(2,s,t),b.hash={},b.fn=b,b.inverse=v.noop,a=i.call(e,a,b),(a||0===a)&&(r+=a),r+='\n              <img class="loading" style="display:none;" src="',a="/pages/images/ajax_loader.gif",f=n.assetUrl,i=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),a=typeof i===k?i.call(e,a,{hash:{}}):i===E?w.call(e,"assetUrl",a,{hash:{}}):i,r+=A(a)+'"/>\n            </span>\n        </div></a>\n\n        <!--Server Down Error Handling-->\n        <span class="errorBtn disabled errorReportLink" style="display:none;cursor:pointer;"><div class="element">\n            <span class="panelLeft">\n                <a>',a="mm_email_helper_serverIsDown",f=n.intl,i=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===k?i.call(e,a,{hash:{}}):i===E?w.call(e,"intl",a,{hash:{}}):i,r+=A(a)+'</a>\n            </span>\n            <span class="panelRight">\n                <a>',a="mm_email_helper_tryAgainLater",f=n.intl,i=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===k?i.call(e,a,{hash:{}}):i===E?w.call(e,"intl",a,{hash:{}}):i,r+=A(a)+'</a>\n            </span>\n        </div></span>\n\n        <!--Account disabled Error Handling-->\n        <div class="accountDisabledBtn element" style="display:none">\n            <span class="message">',a="mm_email_helper_accountDisabled",f=n.intl,i=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===k?i.call(e,a,{hash:{}}):i===E?w.call(e,"intl",a,{hash:{}}):i,r+=A(a)+'</span>\n            <a href=# class="enableAccount">',a="mm_email_helper_accountEnableLink",f=n.intl,i=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===k?i.call(e,a,{hash:{}}):i===E?w.call(e,"intl",a,{hash:{}}):i,r+=A(a)+"</a>\n        </div>\n\n        <!--Disclose My Email-->\n        ",a="hasRegEmail",f=n.ifContentUser,i=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"ifContentUser"),b=v.program(4,o,t),b.hash={},b.fn=b,b.inverse=v.program(6,l,t),a=f&&typeof i===k?i.call(e,a,b):N.call(e,i,a,b),(a||0===a)&&(r+=a),r+="\n\n      ",f=n.accounts,a=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"accounts"),i=n.each,b=v.program(9,c,t),b.hash={},b.fn=b,b.inverse=v.noop,a=i.call(e,a,b),(a||0===a)&&(r+=a),r+="\n\n      <!-- If Masked Emails already exist for this domain -->\n         ",f=n.disposableEmails,a=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"disposableEmails"),i=n.each,b=v.program(14,p,t),b.hash={},b.fn=b,b.inverse=v.noop,a=i.call(e,a,b),(a||0===a)&&(r+=a),r+="\n    "}function s(e){var t,a,i,r="";return r+="\n                <span class=\"whatIsThisLink recommended largeOverflowText\"><span class='num-trackers'>",f=n.tabData,t=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"tabData"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"trackers"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"length"),a="mm_email_helper_recommended",f=n.intl,i=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===k?i.call(e,a,t,{hash:{}}):i===E?w.call(e,"intl",a,t,{hash:{}}):i,r+=A(t)+"</span>.</span>\n              "}function o(e){var t,a,i="";return i+='\n            <a href="#" class="mmKeyOption primaryEmail"><div class="element" id="disclose">\n                <span class="panelLeft">\n                    <img class="iconPos" src="',t="/pages/images/2015panels/email_red.png",f=n.assetUrl,a=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===k?a.call(e,t,{hash:{}}):a===E?w.call(e,"assetUrl",t,{hash:{}}):a,i+=A(t)+'" style="width:44px;height:21px;"/>\n                    ',t="mm_email_helper_discloseEmail",f=n.intl,a=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===k?a.call(e,t,{hash:{}}):a===E?w.call(e,"intl",t,{hash:{}}):a,i+=A(t)+"\n                </span>\n            </div></a>\n        "}function l(e,t){var a,i,r="";return r+='\n            <a href="#" class="mmKeyOption primaryEmail"><div class="element" id="disclose">\n                <span class="panelLeft">\n                    <img class="iconPos" src="',a="/pages/images/2015panels/email_red.png",f=n.assetUrl,i=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),a=typeof i===k?i.call(e,a,{hash:{}}):i===E?w.call(e,"assetUrl",a,{hash:{}}):i,r+=A(a)+'" style="width:44px;height:21px;"/>\n                    ',f=n.primaryEmail,a=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"primaryEmail"),a=null===a||void 0===a||a===!1?a:ABINE_DNTME.Duckbone.Handlebars.getAttr(a,"email"),typeof a===k?a=a.call(e,{hash:{}}):a===E&&(a=w.call(e,"primaryEmail.email",{hash:{}})),r+=A(a)+"\n                </span>\n            </div></a>\n            ",f=n.primaryEmail,a=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"primaryEmail"),a=null===a||void 0===a||a===!1?a:ABINE_DNTME.Duckbone.Handlebars.getAttr(a,"altEmails"),i=n.each,b=v.program(7,d,t),b.hash={},b.fn=b,b.inverse=v.noop,a=i.call(e,a,b),(a||0===a)&&(r+=a),r+="\n        "}function d(e){var t,a,i="";return i+='\n            <a href="#" class="mmKeyOption altEmail" data-value="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),typeof t===k?t=t.call(e,{hash:{}}):t===E&&(t=w.call(e,"this.email",{hash:{}})),i+=A(t)+'"><div class="element" id="disclose">\n                <span class="panelLeft">\n                    <img class="iconPos" src="',t="/pages/images/2015panels/email_red.png",f=n.assetUrl,a=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===k?a.call(e,t,{hash:{}}):a===E?w.call(e,"assetUrl",t,{hash:{}}):a,i+=A(t)+'" style="width:44px;height:21px;"/>\n                    ',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),typeof t===k?t=t.call(e,{hash:{}}):t===E&&(t=w.call(e,"this.email",{hash:{}})),i+=A(t)+"\n                </span>\n            </div></a>\n            "}function c(e,t){var a,i,r="";return r+='\n        <!-- Login Emails -->\n        <a href="#" class="mmKeyOption account" data-account="',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof a===k?a=a.call(e,{hash:{}}):a===E&&(a=w.call(e,"this.id",{hash:{}})),r+=A(a)+'"><div class="element otherblue" >\n        <span class="panelLeft" title="',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress"),typeof a===k?a=a.call(e,{hash:{}}):a===E&&(a=w.call(e,"this.getAddress",{hash:{}})),r+=A(a)+'">\n          ',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"isCompanyAccount"),i=n["if"],b=v.program(10,m,t),b.hash={},b.fn=b,b.inverse=v.program(12,h,t),a=i.call(e,a,b),(a||0===a)&&(r+=a),r+="\n          ",a="mm_login_helper_use",f=n.intl,i=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===k?i.call(e,a,{hash:{}}):i===E?w.call(e,"intl",a,{hash:{}}):i,r+=A(a)+" ",a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress"),typeof a===k?a=a.call(e,{hash:{}}):a===E&&(a=w.call(e,"this.getAddress",{hash:{}})),r+=A(a)+'\n        </span>\n        <span class="panelRight">\n            <span class="overflowText">(',a="createdAt",f=n.live_timestamp,i=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"live_timestamp"),a=typeof i===k?i.call(e,a,{hash:{}}):i===E?w.call(e,"live_timestamp",a,{hash:{}}):i,r+=A(a)+")</span>\n        </span>\n        </div></a>\n      "}function m(e){var t,a,i="";return i+='\n            <img class="" src="',t="/pages/images/2015panels/login_red.png",f=n.assetUrl,a=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===k?a.call(e,t,{hash:{}}):a===E?w.call(e,"assetUrl",t,{hash:{}}):a,i+=A(t)+'" style="width:40px;height:21px;"/>\n          '}function h(e){var t,a,i="";return i+='\n            <img class="" src="',t="/pages/images/2015panels/login_blue.png",f=n.assetUrl,a=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===k?a.call(e,t,{hash:{}}):a===E?w.call(e,"assetUrl",t,{hash:{}}):a,i+=A(t)+'" style="width:40px;height:21px;"/>\n          '}function p(e){var t,a,i="";return i+='\n            <a href="#" data-aliasaddress="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress"),typeof t===k?t=t.call(e,{hash:{}}):t===E&&(t=w.call(e,"this.getAddress",{hash:{}})),i+=A(t)+'" class="mmKeyOption usedEmail"><div class="element otherblue">\n                <span class="panelLeft disposable">\n                    <img class="iconPos" src="',t="/pages/images/2015panels/email_blue.png",f=n.assetUrl,a=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===k?a.call(e,t,{hash:{}}):a===E?w.call(e,"assetUrl",t,{hash:{}}):a,i+=A(t)+'" style="width:44px;height:21px;"/>\n                    ',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress"),typeof t===k?t=t.call(e,{hash:{}}):t===E&&(t=w.call(e,"this.getAddress",{hash:{}})),i+=A(t)+'\n                </span>\n                <span class="panelRight disposable">\n                    <span class="overflowText">(',t="createdAt",f=n.live_timestamp,a=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"live_timestamp"),t=typeof a===k?a.call(e,t,{hash:{}}):a===E?w.call(e,"live_timestamp",t,{hash:{}}):a,i+=A(t)+")</span>\n                </span>\n            </div></a>\n         "}function u(e){var t,a,i="";return i+='\n        <!-- new email register flow -->\n        <div class="progress-section" style="display:none">\n            <div class="progress progress-striped active">\n                <div class="bar bar-info" style="width: 100%;"></div>\n            </div>\n            <div class="loading-message"></div>\n        </div>\n\n        <div class="info" style="font-weight: bold;">',t="mm_dntme_enter_email",f=n.intl,a=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===k?a.call(e,t,{hash:{}}):a===E?w.call(e,"intl",t,{hash:{}}):a,i+=A(t)+'</div>\n        <a href="#" class="mmKeyOption registerEmail"><div class="element" id="mask">\n          <span class="panelLeft">\n              <img class="iconPos" src="',t="/pages/images/2015panels/email_green.png",f=n.assetUrl,a=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===k?a.call(e,t,{hash:{}}):a===E?w.call(e,"assetUrl",t,{hash:{}}):a,i+=A(t)+'" style="width:44px;height:21px;"/>\n            ',t="mm_email_helper_maskMyEmail",f=n.intl,a=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===k?a.call(e,t,{hash:{}}):a===E?w.call(e,"intl",t,{hash:{}}):a,i+=A(t)+'\n          </span>\n          <span class="panelRight whatIsThisLink">\n            ',t="mm_email_helper_whatIsThis",f=n.intl,a=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===k?a.call(e,t,{hash:{}}):a===E?w.call(e,"intl",t,{hash:{}}):a,i+=A(t)+'\n          </span>\n        </div></a>\n        <a href="#" class="mmKeyOption noPrimaryEmail"><div class="element" id="disclose">\n            <span class="panelLeft">\n                <img class="iconPos" src="',t="/pages/images/2015panels/email_red.png",f=n.assetUrl,a=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===k?a.call(e,t,{hash:{}}):a===E?w.call(e,"assetUrl",t,{hash:{}}):a,i+=A(t)+'" style="width:44px;height:21px;"/>\n              ',t="mm_email_helper_discloseEmail",f=n.intl,a=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===k?a.call(e,t,{hash:{}}):a===E?w.call(e,"intl",t,{hash:{}}):a,i+=A(t)+"\n            </span>\n        </div></a>\n    "}n=n||e.helpers,a=a||e.partials;var _,g,f,b,y="",v=this,k="function",w=n.helperMissing,E=void 0,A=this.escapeExpression,N=n.blockHelperMissing;return y+='<div class="newpanel">\n    <div class="left-panel">\n    <div id="error" style="display:none;"></div>\n    ',f=n.hasRegistered,_=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasRegistered"),g=n["if"],b=v.program(1,r,i),b.hash={},b.fn=b,b.inverse=v.program(16,u,i),_=g.call(t,_,b),(_||0===_)&&(y+=_),y+="\n    ",_=t,_=v.invokePartial(a["common.auto_fill_with"],"common.auto_fill_with",_,n,a),(_||0===_)&&(y+=_),y+="\n    </div>\n    ",_=t,_=v.invokePartial(a["common.header"],"common.header",_,n,a),(_||0===_)&&(y+=_),y+="\n\n</div>"}),ABINE_DNTME.CompiledTemplates.email_helper_panel}),ABINE_DNTME.define("abine/views/emailHelperPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/contentMessenger","abine/proxies","abine/intl","abine/responseCodes"],function(e,t,n,a,i,r,s,o,l,d){function c(e,t){t=t||"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!-$#%^@";for(var n="",a=0;a<e;a++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}var m=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i,h=(n.View.extend({tagName:"span",templateName:"email_helper_tracker_count",afterInitialize:function(){this.doc=this.el.ownerDocument}}),i.extend({templateName:"email_helper_panel",events:{"click .recommended span":"showDNTMe","click a.registerEmail":"setupUser","click a.noPrimaryEmail":"noPrimaryEmail","click a.primaryEmail":"fillWithPrimaryEmail","click a.altEmail":"fillWithAlternateEmail","click a.disposableEmail":"fillWithDisposableEmail","click a.usedEmail":"fillWithUsedEmail","click a.account":"fillWithAccount","click a.disabled":"closePanel","click .panelSection":"performActions","click a.enableAccount":"enableAccount","click .errorReportLink":"makeErrorReport","click .help-link":"openHelp","click .logo-link":"openHelp","click .turn-off":"turnOffEmailPanels","click .turn-on":"turnOnEmailPanels","click .close-link":"logClose"},logClose:function(){this.updatePanelActivity("closed",this.panelId,this.fieldId,!0)},turnOffEmailPanels:function(e){e.preventDefault(),this.contentManager.preferences.setPref("suggestProtectedEmail","false"),this.closeHeader()},turnOnEmailPanels:function(e){e.preventDefault(),this.contentManager.preferences.setPref("suggestProtectedEmail","true"),this.closePanel()},openMaskedEmailsIn30:function(e){return e.preventDefault(),!t(e.target).hasClass("num-trackers")&&(o.webapp.openMaskedEmailsIn30(),this.closePanel(),!1)},openHelp:function(e){return!t(e.target).hasClass("num-trackers")&&"disableLink"!=e.target.id&&(o.webapp.openHelp("/email"),void this.closePanel())},showDNTMe:function(e){e.preventDefault(),this.contentManager.showToolbarPanel({page:"trackers"}),this.closePanel()},makeErrorReport:function(){o.webapp.openHelp(""),this.closePanel()},afterInitialize:function(){this.fieldId=this.options.fieldId,this.strategyId=this.options.strategyId,this.numMenuOptions=3,this.applyFadingStyle(),this.fadeIn(),this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.model={panelType:"email",primaryEmail:!1,panelsDisabled:!this.contentManager.preferences.getPref("suggestProtectedEmail"),iconClick:!!this.options.iconClick,hasRegistered:this.options.hasRegistered,disposableEmails:new a.DisposableEmailCollection,mapper:!!this.contentManager.preferences.getPref("mapping:mapper"),showMapper:this.contentManager.preferences.isMapper(),show_settings:!this.contentManager.preferences.getPref("email-settings-seen")},this.model.tabData=new a.TabData({messenger:this.options.messenger}),this.model.tabData.fetchTrackers({success:e.bind(function(){this.model.tabData.hasFiveOrMoreTrackers()&&(this.model.show_settings=!1),this.model.shieldedEmails=new a.ShieldedEmailCollection,this.model.shieldedEmails.fetchAll({success:e.bind(function(){this.model.shieldedEmails.length>0&&(this.model.primaryEmail=this.model.shieldedEmails.at(0)),this.model.primaryEmail?(this.panelId=1000001,this.updatePanelActivity("impression",this.panelId,this.fieldId,!0),this.model.accounts=new a.AccountCollection,this.model.accounts.fetchLoginsByDomain(this.options.domain,e.bind(function(){this.options.hasPassword||(this.model.accounts=new a.AccountCollection),this.model.disposableEmails=new a.DisposableEmailCollection,this.model.disposableEmails.fetchAllByDomain(this.options.domain,e.bind(function(){this.numMenuOptions=2,this.bind("enter0",function(e){this.fillWithDisposableEmail(e)}),this.bind("enter1",function(e){this.fillWithPrimaryEmail(e)}),this.numMenuOptions+=this.model.accounts.length;for(var e=2;e<this.numMenuOptions;e++)this.bind("enter"+e,function(e,t){this.fillWithLoginAccount(e,t)});this.numMenuOptions+=this.model.disposableEmails.length;for(var e=2+this.model.accounts.length;e<this.numMenuOptions;e++)this.bind("enter"+e,function(e,t){this.fillWithUsedEmail(e,t)});this.render()},this))},this))):(this.model.hasRegistered=!1,this.model.dynamicPanel?(this.panelId=this.model.dynamicPanel.id,this.updatePanelActivity("impression",this.panelId,this.fieldId,!0)):(this.doNotCloseOnTyping=!0,this.panelId=5000001,this.updatePanelActivity("impression",this.panelId,this.fieldId,!0),this.bind("enter0",this.setupUser,this),this.bind("enter1",this.noPrimaryEmail,this)),this.render()),this.bindBaseEvents()},this)})},this)})},noPrimaryEmail:function(e){e&&e.preventDefault(),this.setupUser(e,!0)},retryEmail:function(e){e&&e.preventDefault(),this.$("#error, .progress-section").hide(),this.$(".info, .registerEmail, .noPrimaryEmail").show(),this.$(".mmKeyOption .hover").removeClass("hover"),this.triggerRender(),delete this.selectedField},setupUser:function(n,a){return n&&(n.preventDefault(),this.$(n.target).hasClass("whatIsThisLink"))?void window.open("https://dnt.abine.com/#help/faq/masking-whataremaskedemails2","_blank"):(a=a||!1,void this.contentManager.getValue("current.field.value",this.strategyId,this.fieldId,e.bind(function(i){function s(e,n){try{u.get(0).ownerDocument&&(a?t(".loading-message",u).text(l.getText("mm_loading_display_register_use"+Math.floor(e/5))):t(".loading-message",u).text(l.getText("mm_loading_display_register"+Math.floor(e/5))),e<n&&(_=r.setTimeout(function(){s(e+1,n)},500)))}catch(e){}}this.$(".info").hide();var d=this.$("#error");if(d.hide(),!i.match(m))return d.text(l.getText("mm_dntme_invalid_email")).show(),void this.autoResize();var h=c(6),p={email:i,password:h,password_hint:l.getText("mm_pwhint_default"),generated_password:!0,register_type:"dnt_email_panel"},u=this.$(".progress-section"),_=null;s(0,20),u.show(),this.$(".registerEmail, .noPrimaryEmail").hide(),o.licenseModule.register(p,e.bind(function(t,i){this.processRegistration(t,i,p,e.bind(function(e){e?(r.clearTimeout(_),u.hide()):a?this.fillWithPrimaryEmail(n,!0):this.fillWithDisposableEmail(n,!0)},this))},this)),this.autoResize()},this)))},processRegistration:function(t,n,a,i){if(t){var r=l.getText("mm_dntme_register_error"),s=t.responseJSON&&t.responseJSON.data?t.responseJSON.data.errors:null;"invalid email address"==t.responseJSON.error_code?r=l.getText("mm_dntme_invalid_email_server_error"):t.responseJSON.error_code==d.SCHEDULED_DOWNTIME?r=l.getText("mm_dntme_server_maintenance"):s&&s.email&&("has already been taken"==s.email[0]?r=l.getText("mm_dntme_duplicate_email",[a.email]):"was used for MaskMe Heavy"==s.email[0]&&(r=l.getText("mm_dntme_version_not_allowed"))),this.$("#error").html(r).show(),t.responseJSON&&t.responseJSON.data&&1==t.responseJSON.data.generated_password?this.$("#error #loginButton").click(e.bind(function(e){return this.openPasswordSetupPage(a.email),e.preventDefault(),!1},this)):this.$("#error #loginButton").click(e.bind(this.openLoginPage,this)),this.$("#error #retryEmail").click(e.bind(this.retryEmail,this)),this.$("#error #dnt2upgrade").click(e.bind(this.openDnt2UpgradePage,this)),this.autoResize(),i(r)}else this.contentManager.preferences.fetchAll(),this.model.shieldedEmails.fetchAll({success:e.bind(function(){this.model.shieldedEmails.length>0&&(this.model.primaryEmail=this.model.shieldedEmails.at(0)),i()},this)})},fillWithPrimaryEmail:function(e,t){if(e&&e.preventDefault(),t=t||!1,this.updatePanelActivity("disclosed",this.panelId,this.fieldId,!0),t){this.fieldId&&this.fillFields("email",this.model.primaryEmail.getAddress(),"primary");var n={msg:l.getText("mm_email_helper_nextDisclose"),targetUrl:ABINE_DNTME.config.protocol+ABINE_DNTME.config.webAppHost+"/#/emailsin30"};n.neverFade=!0,this.options.contentManager.showNotification(n)}else if(this.fieldId&&this.model.primaryEmail&&!ABINE_DNTME.contentuser.hasRegEmail())""==this.model.primaryEmail.get("email")?this.openLoginPage("primaryemail"):this.fillFields("email",this.model.primaryEmail.getAddress(),"primary");else if(ABINE_DNTME.contentuser.hasRegEmail())return void this.openSetupEmailPage();this.closePanel()},fillWithDisposableEmail:function(t,n){if(t&&t.preventDefault(),this.updatePanelActivity("masked",this.panelId,this.fieldId,!0),this.field&&this.model.primaryEmail&&""==this.model.primaryEmail.get("email"))return void this.openLoginPage("maskedemail");if(!this.generatingDisposable){var a=this.options.oldValue;a.match(m)&&this.model.primaryEmail.get("email")!=a?a.indexOf("@"+ABINE_DNTME.config.disposableDomain)!=-1&&(a=null):a=null,a&&(this.ignoreBlur(!0),this.doNotCloseOnTyping=!0),this.generatingDisposable=!0,this.$(".loading").show(),this.$(".recommended").hide();var i=this.model.primaryEmail.generateDisposable(this.options.domain,n?"dnt-autoreg-panel":"dnt-panel");i.save({},{success:e.bind(function(){this.fillFields("email",i.getAddress(),{origin:"disposable",disposableGUID:i.get("guid")}),a?(this.$("#error").html(l.getText("mm_dntme_change_email_message",[this.model.primaryEmail.get("email"),a])).show(),this.$("#error #changeSetting").click(e.bind(this.openSettings,this)),this.$(".mmKeyOption, .sep, .errorBtn").hide(),this.focusField(),delete this.doNotCloseOnTyping,this.autoResize()):this.closePanel(),this.generatingDisposable=!1},this),error:e.bind(function(){this.$(".disposableEmail").hide(),this.$(".errorBtn").show()},this)})}},fillWithAccount:function(n,a){n&&n.preventDefault();var i;if(a||0==a){var r=e(this.el.children[0].children).filter(function(e){return t(e).is("a")&&!t(e).hasClass("disabled")});i=t(r[a]).data("account")}else i=t(n.target).closest("a").data("account");var s=e.find(this.model.accounts.models,function(e){return e.get("id")==i}),o=s.get("login_url");(!o||0==o.length||o!=this.contentManager.href&&this.contentManager.href.indexOf(o)==-1)&&s.set("login_url",this.contentManager.href);var l=s.get("times_used")||0;if(s.set("times_used",l+1),s.set("pushed",0),s.save(),this.contentManager.messenger.send("update:panelActivity:masked",{panelId:7000004}),s.get("mfa"))return this.contentManager.closeCurrentPanel(),this.options.fillAccount=s,this.ignoreBlur(!0),void this.contentManager.showLoginPanel(this.options);var d=s.get("email"),c=s.get("username"),m=s.get("password");c&&0!=c.length||(c=d),d&&0!=d.length||(d=c),this.fillFields("login-no-submit",{email:d,username:c,password:m},"login"),this.closePanel()},enableAccount:function(e){this.getContentMessenger(),this.messenger.send("window:createTab",{localUrl:"pages/index.html#emailDisabled"}),this.closePanel(e)},fillWithUsedEmail:function(n,a){n&&n.preventDefault(),this.updatePanelActivity("masked",this.panelId,this.fieldId,!0);var i;if(a||0==a){var r=e(this.el.children[0].children).filter(function(e){return t(e).is("a")&&!t(e).hasClass("disabled")});i=t(r[a]).data("aliasaddress")}else i=t(n.target).closest("a").data("aliasaddress");this.fillFields("email",i,"disposable"),this.closePanel()},fillWithAlternateEmail:function(n,a){n&&n.preventDefault(),this.updatePanelActivity("disclosed",this.panelId,this.fieldId,!0);var i;if(a||0==a){var r=e(this.el.children[0].children).filter(function(e){return t(e).is("a")&&!t(e).hasClass("disabled")});i=t(r[a]).data("value")}else i=t(n.target).closest("a").data("value");this.fillFields("email",i,"primary"),this.closePanel()}}));return h}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.login_helper_panel=e.template(function(e,t,n,a,i){function r(e,t){var a,i,r="";return r+='\n                <div class="element otherblue">\n            <span class="panelLeft" title="',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress"),typeof a===M?a=a.call(e,{hash:{}}):a===C&&(a=I.call(e,"this.getAddress",{hash:{}})),r+=B(a)+'">\n                ',A=n.loggingAccount,a=A||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"loggingAccount"),a=null===a||void 0===a||a===!1?a:ABINE_DNTME.Duckbone.Handlebars.getAttr(a,"isCompanyAccount"),i=n["if"],N=D.program(2,s,t),N.hash={},
N.fn=N,N.inverse=D.program(4,o,t),a=i.call(e,a,N),(a||0===a)&&(r+=a),r+="\n                Logging in as ",A=n.loggingAccount,a=A||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"loggingAccount"),a=null===a||void 0===a||a===!1?a:ABINE_DNTME.Duckbone.Handlebars.getAttr(a,"getAddress"),typeof a===M?a=a.call(e,{hash:{}}):a===C&&(a=I.call(e,"loggingAccount.getAddress",{hash:{}})),r+=B(a)+"...\n            </span>\n                </div>\n            "}function s(e){var t,a,i="";return i+='\n                    <img class="" src="',t="/pages/images/2015panels/login_red.png",A=n.assetUrl,a=A||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===M?a.call(e,t,{hash:{}}):a===C?I.call(e,"assetUrl",t,{hash:{}}):a,i+=B(t)+'"\n                         style="width:40px;height:21px;"/>\n                '}function o(e){var t,a,i="";return i+='\n                    <img class="" src="',t="/pages/images/2015panels/login_blue.png",A=n.assetUrl,a=A||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===M?a.call(e,t,{hash:{}}):a===C?I.call(e,"assetUrl",t,{hash:{}}):a,i+=B(t)+'"\n                         style="width:40px;height:21px;"/>\n                '}function l(e,t){var a,i,r="";return r+="\n                ",A=n.accounts,a=A||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"accounts"),i=n.each,N=D.program(7,d,t),N.hash={},N.fn=N,N.inverse=D.noop,a=i.call(e,a,N),(a||0===a)&&(r+=a),r+="\n            "}function d(e,t){var a,i,r="";return r+='\n                    <!-- Login Emails -->\n                    <a href="#" class="mmKeyOption account" data-account="',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof a===M?a=a.call(e,{hash:{}}):a===C&&(a=I.call(e,"this.id",{hash:{}})),r+=B(a)+'">\n                        <div class="element otherblue">\n                        <span class="panelLeft" title="',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress"),typeof a===M?a=a.call(e,{hash:{}}):a===C&&(a=I.call(e,"this.getAddress",{hash:{}})),r+=B(a)+'">\n                          ',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"isCompanyAccount"),i=n["if"],N=D.program(8,c,t),N.hash={},N.fn=N,N.inverse=D.program(10,m,t),a=i.call(e,a,N),(a||0===a)&&(r+=a),r+="\n                            ",a="mm_login_helper_use",A=n.intl,i=A||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===M?i.call(e,a,{hash:{}}):i===C?I.call(e,"intl",a,{hash:{}}):i,r+=B(a)+" ",a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress"),typeof a===M?a=a.call(e,{hash:{}}):a===C&&(a=I.call(e,"this.getAddress",{hash:{}})),r+=B(a)+'\n                        </span>\n                            <span class="panelRight">\n                            <span class="edit" style="cursor: pointer;text-decoration: underline;"\n                                  title="Click to edit account">(',a="createdAt",A=n.live_timestamp,i=A||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"live_timestamp"),a=typeof i===M?i.call(e,a,{hash:{}}):i===C?I.call(e,"live_timestamp",a,{hash:{}}):i,r+=B(a)+")\n                            </span>\n                        </span>\n                        </div>\n                    </a>\n                "}function c(e){var t,a,i="";return i+='\n                              <img class="" src="',t="/pages/images/2015panels/login_red.png",A=n.assetUrl,a=A||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===M?a.call(e,t,{hash:{}}):a===C?I.call(e,"assetUrl",t,{hash:{}}):a,i+=B(t)+'"\n                                   style="width:40px;height:21px;"/>\n                          '}function m(e){var t,a,i="";return i+='\n                              <img class="" src="',t="/pages/images/2015panels/login_blue.png",A=n.assetUrl,a=A||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===M?a.call(e,t,{hash:{}}):a===C?I.call(e,"assetUrl",t,{hash:{}}):a,i+=B(t)+'"\n                                   style="width:40px;height:21px;"/>\n                          '}function h(e,t){var a,i,r="";return r+='\n                <div style="margin: 10px; margin-bottom: 0;text-align: center;" class="clearfix">\n                    <div style="margin-left: 20px;display: inline-block;">\n                        ',A=n.face_id,a=A||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"face_id"),i=n["if"],N=D.program(13,p,t),N.hash={},N.fn=N,N.inverse=D.program(15,u,t),a=i.call(e,a,N),(a||0===a)&&(r+=a),r+="\n                    </div>\n                </div>\n            "}function p(e){var t,a,i="";return i+='\n                            <img src="',t="/pages/images/faceid.png",A=n.assetUrl,a=A||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===M?a.call(e,t,{hash:{}}):a===C?I.call(e,"assetUrl",t,{hash:{}}):a,i+=B(t)+'" style="width: 45px;"/><br/>Face ID\n                        '}function u(e,t){var a,i,r="";return r+="\n                            ",A=n.touch_id,a=A||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"touch_id"),i=n["if"],N=D.program(16,_,t),N.hash={},N.fn=N,N.inverse=D.program(18,g,t),a=i.call(e,a,N),(a||0===a)&&(r+=a),r+="\n                        "}function _(e){var t,a,i="";return i+='\n                                <img src="',t="/pages/images/fingerprint.png",A=n.assetUrl,a=A||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===M?a.call(e,t,{hash:{}}):a===C?I.call(e,"assetUrl",t,{hash:{}}):a,i+=B(t)+'" style="width: 45px;"/><br/>Touch ID\n                            '}function g(e){var t,a,i="";return i+='\n                                <img src="',t="/pages/images/phoneid.png",A=n.assetUrl,a=A||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===M?a.call(e,t,{hash:{}}):a===C?I.call(e,"assetUrl",t,{hash:{}}):a,i+=B(t)+'" style="width: 45px;"/><br/>\n                            '}function f(e,t){var i,r,s="";return s+="\n            ",i=e,i=D.invokePartial(a["common.biometric_auth"],"common.biometric_auth",i,n,a),(i||0===i)&&(s+=i),s+='\n            <div class="clearfix" id="biometricSuccess" style="display:none;margin-left: auto;margin-right: auto;width: 350px">\n                <div style="float:left;width:100px;margin:10px;text-align:center;font-size: 10pt;padding: 30px 20px;border-right: 1px solid #eee;">\n                    ',A=n.face_id,i=A||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"face_id"),r=n["if"],N=D.program(21,b,t),N.hash={},N.fn=N,N.inverse=D.program(23,y,t),i=r.call(e,i,N),(i||0===i)&&(s+=i),s+='\n                </div>\n                <div style="float:left;margin: 10px;width:150px;text-align: center;">\n                    <img src="',i="/pages/images/tick.png",A=n.assetUrl,r=A||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),i=typeof r===M?r.call(e,i,{hash:{}}):r===C?I.call(e,"assetUrl",i,{hash:{}}):r,s+=B(i)+'" style="width: 24px;display: inline-block;"/>\n                    <div style="font-size: 10pt; ">',i=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"biometric_type"),typeof i===M?i=i.call(e,{hash:{}}):i===C&&(i=I.call(e,"this.biometric_type",{hash:{}})),s+=B(i)+' approved</div>\n                    <div style="font-size: 10pt;padding-top: 10px;">Logging into</div>\n                    <img class="favicon" style="display:none;max-width: 160px;max-height: 50px;"/>\n                    <div class="no-favicon" style="font-weight: bold;">',i=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof i===M?i=i.call(e,{hash:{}}):i===C&&(i=I.call(e,"this.domain",{hash:{}})),s+=B(i)+'</div>\n                    <div class="loading-dots" style="font-size: 24pt;display: inline-block;margin-top: 20px;">\n                        <span>&bull;</span><span>&bull;</span><span>&bull;</span>\n                    </div>\n                </div>\n            </div>\n        '}function b(e){var t,a,i="";return i+='\n                        <img src="',t="/pages/images/faceid.png",A=n.assetUrl,a=A||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===M?a.call(e,t,{hash:{}}):a===C?I.call(e,"assetUrl",t,{hash:{}}):a,i+=B(t)+'" style="width: 75px;"/><br/>Face ID\n                    '}function y(e,t){var a,i,r="";return r+="\n                        ",A=n.touch_id,a=A||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"touch_id"),i=n["if"],N=D.program(24,v,t),N.hash={},N.fn=N,N.inverse=D.program(26,k,t),a=i.call(e,a,N),(a||0===a)&&(r+=a),r+="\n                    "}function v(e){var t,a,i="";return i+='\n                            <img src="',t="/pages/images/fingerprint.png",A=n.assetUrl,a=A||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===M?a.call(e,t,{hash:{}}):a===C?I.call(e,"assetUrl",t,{hash:{}}):a,i+=B(t)+'" style="width: 75px;"/><br/>Touch ID\n                        '}function k(e){var t,a,i="";return i+='\n                            <img src="',t="/pages/images/phoneid.png",A=n.assetUrl,a=A||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===M?a.call(e,t,{hash:{}}):a===C?I.call(e,"assetUrl",t,{hash:{}}):a,i+=B(t)+'" style="width: 75px;"/><br/>\n                        '}n=n||e.helpers,a=a||e.partials;var w,E,A,N,T="",D=this,M="function",I=n.helperMissing,C=void 0,B=this.escapeExpression;return T+='<div class="newpanel">\n    <div class="left-panel">\n        <div id="accountList">\n            ',A=n.loggingAccount,w=A||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"loggingAccount"),E=n["if"],N=D.program(1,r,i),N.hash={},N.fn=N,N.inverse=D.program(6,l,i),w=E.call(t,w,N),(w||0===w)&&(T+=w),T+="\n            ",A=n.hasBiometricAuth,w=A||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasBiometricAuth"),E=n["if"],N=D.program(12,h,i),N.hash={},N.fn=N,N.inverse=D.noop,w=E.call(t,w,N),(w||0===w)&&(T+=w),T+="\n            ",w=t,w=D.invokePartial(a["common.auto_fill_with"],"common.auto_fill_with",w,n,a),(w||0===w)&&(T+=w),T+="\n        </div>\n        ",A=n.hasBiometricAuth,w=A||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasBiometricAuth"),E=n["if"],N=D.program(20,f,i),N.hash={},N.fn=N,N.inverse=D.noop,w=E.call(t,w,N),(w||0===w)&&(T+=w),T+="\n    </div>\n\n    ",w=t,w=D.invokePartial(a["common.header"],"common.header",w,n,a),(w||0===w)&&(T+=w),T+="\n</div>"}),ABINE_DNTME.CompiledTemplates.login_helper_panel}),ABINE_DNTME.define("abine/views/loginHelperPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/proxies","abine/timer","abine/intl","cryptojs"],function(e,t,n,a,i,r,s,o,l){var d=i.extend({templateName:"login_helper_panel",events:{"click a.account":"fillWithAccount","click .help-link":"openHelp","click .edit":"openEdit","click #masterPassAuth":"masterPassAuth","click #retryBiometricAuth":"retryBiometricAuth","submit form.unlock":"verifyMasterPass"},openHelp:function(){r.webapp.openHelp("/faq/guides-blurPasswordManager"),this.closePanel()},showFavIcon:function(){var e=this,t="https://s3.amazonaws.com/abine-favicons/"+e.model.hash+".png",n=new Image;n.onload=function(){e.$(".favicon").attr("src",t).show(),e.$(".no-favicon").hide()},n.onerror=function(){e.$(".favicon").hide(),e.$(".no-favicon").show()},n.src=t},afterInitialize:function(){var t=this;this.fieldId=this.options.fieldId,this.strategyId=this.options.strategyId,this.bindBaseEvents(),this.applyFadingStyle(),this.fadeIn(),this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger;var n=this.contentManager.preferences.getPref("masked_card_auth"),i=this.contentManager.preferences.getPref("biometric_type"),r=null;"biometric"==n&&("apns.face_id"==i?r="Face ID":"apns.touch_id"==i?r="Touch ID":"apns.pin_id"==i&&(r="Mobile")),this.model={panelType:"account",accounts:new a.AccountCollection,mapper:!!this.contentManager.preferences.getPref("mapping:mapper"),face_id:"apns.face_id"==i,touch_id:"apns.touch_id"==i,domain:this.contentManager.domain,biometric_type:r,hash:l.SHA1("abine"+this.contentManager.domain),showMapper:this.contentManager.preferences.isMapper(),show_settings:!this.contentManager.preferences.getPref("account-settings-seen")},this.model.accounts.fetchLoginsByDomain(this.options.domain,e.bind(function(e){if(e||0==this.model.accounts.length)this.closePanel();else{this.numMenuOptions=this.model.accounts.length,this.model.hasBiometricAuth=!1;for(var n=0;n<this.numMenuOptions;n++)this.model.accounts.models[n].get("mfa")&&r&&(this.model.hasBiometricAuth=!0,s.setTimeout(function(){t.showFavIcon()},500)),this.bind("enter"+n,function(e,t){this.fillWithAccount(e,t)},this);this.render(),this.options.fillAccount&&this.fillWithAccount(null,null,this.options.fillAccount)}},this))},openEdit:function(e){e&&e.preventDefault();var n=t(e.target).closest("a").data("account");return r.webapp.openPage("/#/client/accounts/edit/"+n),this.closePanel(),!1},retryBiometricAuth:function(e,t){var n=this;s.clearTimeout(this.noResponseTimer),r.licenseModule.getGenericBiometricKey(null,function(a){a.success&&(n.biometricKey=a.key,n.sendBiometricAuthRequest(e,t))})},sendBiometricAuthRequest:function(){this.ignoreExplicitClose=!0;var e=this.biometricKey.split(":");if(e.length>2)return this.biometricKey=e[0]+":"+e[1],this.biometricToken=e[2],this.$("#biometricAuth").hide(),void this._fillAccount();this.$("#biometricAuth").show();var t=this.options.contentManager.messenger,n=this;n.$("#biometricInfo, #biometricAuth").show(),this.model.face_id?n.$("#biometricInfo").html(o.getText("mm_payment_helper_request_faceid_auth",[n.model.biometric_type])):this.model.touch_id?n.$("#biometricInfo").html(o.getText("mm_payment_helper_request_biometric_auth",[n.model.biometric_type])):n.$("#biometricInfo").html(o.getText("mm_payment_helper_request_phoneid_auth",[n.model.biometric_type])),n.$("#biometricError").hide(),n.autoResize(),this.biometricResponseId&&t.off(this.biometricResponseId);var a="biometric:auth:response:"+Math.random();s.clearTimeout(this.noResponseTimer),this.noResponseTimer=s.setTimeout(function(){n.$("#biometricInfo").text(o.getText("mm_payment_helper_biometric_no_response")),n.autoResize()},2e4),t.on(a,function(e){if(s.clearTimeout(n.noResponseTimer),!e.ack||!n.$("#masterPassStep").is(":visible")){if(n.$("#accountList, #masterPassStep").hide(),n.$("#biometricAuth").show(),e.ack)return n.$("#biometricInfo").show(),n.$("#biometricError").hide(),n.model.face_id?n.$("#biometricInfo").html(o.getText("mm_payment_helper_request_faceid_auth_ack",[n.model.biometric_type])):n.model.touch_id?n.$("#biometricInfo").html(o.getText("mm_payment_helper_request_biometric_auth_ack",[n.model.biometric_type])):n.$("#biometricInfo").html(o.getText("mm_payment_helper_request_phoneid_auth_ack",[n.model.biometric_type])),void n.autoResize();e.success?(n.biometricToken=e.token,n.$("#biometricAuth").hide(),n._fillAccount(),t.off(a),n.biometricResponseId=null):(n.$("#biometricInfo").hide(),n.$("#biometricError").text(e.error).show()),n.autoResize()}});var i={type:"login",responseId:a,key:this.biometricKey,domain:this.options.domain,account:this._account.get("label")||this._account.get("username")||this._account.get("email")};t.send("biometric:auth",i),this.biometricResponseId=a,this.autoResize()},masterPassAuth:function(e){e&&e.preventDefault(),s.clearTimeout(this.noResponseTimer),this.$("#biometricAuth").hide(),this.$("#masterPassStep").show(),this.autoResize()},verifyMasterPass:function(e){e&&e.preventDefault();var t=this;this.$("#masterPassErr").hide();var n=this.$("#password").val();if(0==n.length)return this.$("#masterPassErr").text(o.getText("mm_payment_helper_master_pass_invalid")).show(),void this.autoResize();var a="password:auth:response:"+Math.random(),i=this.options.contentManager.messenger;return i.on(a,function(e){t.$("#accountList, #biometricAuth").hide(),t.$("#masterPassStep").show(),e.success?(t.biometricToken=e.token,t.$("#masterPassStep").hide(),t._fillAccount(!0),i.off(a)):t.$("#masterPassErr").text(o.getText("mm_payment_helper_master_pass_invalid")).show(),i.off(a),t.autoResize()}),r.licenseModule.getGenericBiometricKey(null,function(e){e.success?(t.biometricKey=e.key,i.send("password:auth",{responseId:a,key:t.biometricKey,password:n,domain:t.options.domain})):t.$("#masterPassErr").text(o.getText("mm_payment_helper_master_pass_retry")).show(),t.autoResize()}),this.autoResize(),!1},fillWithAccount:function(n,a,i){n&&n.preventDefault();var s,l=this;if(!i){if(a||0==a){var d=e(this.el.children[0].children).filter(function(e){return t(e).is("a")&&!t(e).hasClass("disabled")});s=t(d[a]).data("account")}else s=t(n.target).closest("a").data("account");i=e.find(this.model.accounts.models,function(e){return e.get("id")==s})}return this._account=i,i.get("mfa")&&"biometric"==this.contentManager.preferences.getPref("masked_card_auth")?void r.licenseModule.getGenericBiometricKey(null,function(e){this.$("#accountList").hide(),e.success?(l.biometricKey=e.key,l.sendBiometricAuthRequest(n)):(l.$("#biometricAuth").show(),l.$("#biometricInfo").hide(),l.$("#biometricError").text(o.getText("mm_payment_helper_biometric_auth_disabled",[l.model.biometric_type])).show()),l.autoResize()}):void this._fillAccount(!0)},_fillAccount:function(e){var t=this,n=this._account,a=n.get("login_url");(!a||0==a.length||a!=this.contentManager.href&&this.contentManager.href.indexOf(a)==-1)&&n.set("login_url",this.contentManager.href),n.get("page_host")||n.set("page_host",this.contentManager.host);var i=n.get("times_used")||0;n.set("times_used",i+1),n.set("pushed",0),n.save(),this.contentManager.messenger.send("update:panelActivity:masked",{panelId:7000004});var r=n.get("email"),o=n.get("username"),l=n.get("password");o&&0!=o.length||(o=r),r&&0!=r.length||(r=o),e?(this.fillFields("login",{email:r,username:o,password:l},"login"),this.closePanel()):(this.ignoreExplicitClose=!1,this.$("#biometricAuth").hide(),this.$("#biometricSuccess").show(),s.setTimeout(function(){t.closePanel()},8e3),t.autoResize(),this.fillFields("login",{email:r,username:o,password:l,delay:!0},"login"))}});return d}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.address_helper_panel=e.template(function(e,t,n,a,i){function r(e,t){var a,i,r="";return r+='\n    <a href="#" class="mmKeyOption address" data-address="',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof a===_?a=a.call(e,{hash:{}}):a===f&&(a=g.call(e,"this.id",{hash:{}})),r+=b(a)+'"><div class="element" id="mask">\n        <span class="panelLeft full" title="',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"label"),typeof a===_?a=a.call(e,{hash:{}}):a===f&&(a=g.call(e,"this.label",{hash:{}})),r+=b(a)+'">\n            <img class="iconPos" src="',a="/pages/images/2015panels/address_green.png",m=n.assetUrl,i=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),a=typeof i===_?i.call(e,a,{hash:{}}):i===f?g.call(e,"assetUrl",a,{hash:{}}):i,r+=b(a)+'" style="width:42px;height:21px;"/>\n            ',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"fullLabel"),i=n["if"],h=u.program(2,s,t),h.hash={},h.fn=h,h.inverse=u.program(4,o,t),a=i.call(e,a,h),(a||0===a)&&(r+=a),r+="\n        </span>\n    </div></a>\n    "}function s(e){var t;return t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"fullLabel"),typeof t===_?t=t.call(e,{hash:{}}):t===f&&(t=g.call(e,"this.fullLabel",{hash:{}})),b(t)}function o(e){var t,a,i;return t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"label"),a="mm_address_helper_use",m=n.intl,i=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===_?i.call(e,a,t,{hash:{}}):i===f?g.call(e,"intl",a,t,{hash:{}}):i,b(t)}function l(e){var t,a,i="";return i+='\n      <a href="#" class="mmKeyOption addNew"><div class="element" id="mask">\n        <span class="panelLeft full">\n            <img class="iconPos" src="',t="/pages/images/2015panels/address_red.png",m=n.assetUrl,a=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===_?a.call(e,t,{hash:{}}):a===f?g.call(e,"assetUrl",t,{hash:{}}):a,i+=b(t)+'" style="width:42px;height:21px;"/>\n            ',t="mm_address_helper_add_new",m=n.intl,a=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===_?a.call(e,t,{hash:{}}):a===f?g.call(e,"intl",t,{hash:{}}):a,i+=b(t)+"\n        </span>\n      </div></a>\n    "}n=n||e.helpers,a=a||e.partials;var d,c,m,h,p="",u=this,_="function",g=n.helperMissing,f=void 0,b=this.escapeExpression;return p+='<div class="newpanel">\n    <div class="left-panel">\n    ',m=n.addresses,d=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"addresses"),c=n.each,h=u.program(1,r,i),h.hash={},h.fn=h,h.inverse=u.noop,d=c.call(t,d,h),(d||0===d)&&(p+=d),p+="\n    ",m=n.showAddNew,d=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"showAddNew"),c=n["if"],h=u.program(6,l,i),h.hash={},h.fn=h,h.inverse=u.noop,d=c.call(t,d,h),(d||0===d)&&(p+=d),p+="\n    ",d=t,d=u.invokePartial(a["common.auto_fill_with"],"common.auto_fill_with",d,n,a),(d||0===d)&&(p+=d),p+="\n    </div>\n    ",d=t,d=u.invokePartial(a["common.header"],"common.header",d,n,a),(d||0===d)&&(p+=d),p+="\n</div>"}),ABINE_DNTME.CompiledTemplates.address_helper_panel}),ABINE_DNTME.define("abine/views/addressHelperPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/intl","abine/proxies"],function(e,t,n,a,i,r,s){var o=i.extend({templateName:"address_helper_panel",events:{"click a.address":"fillWithAddress","click .help-link":"openHelp","click a.addNew":"addNewAddress"},openHelp:function(){s.webapp.openHelp("/faq/guides-autofillAddresses"),this.closePanel()},addNewAddress:function(){this.updatePanelActivity("closed",this.panelId,this.fieldId,!1),s.webapp.openPage("/#/client/address/add"),this.closePanel()},afterInitialize:function(){this.fieldId=this.options.fieldId,this.panelId=7000056,this.updatePanelActivity("impression",this.panelId,this.fieldId,!1),this.bindBaseEvents(),this.applyFadingStyle(),this.fadeIn(),this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.model={panelType:"address",addresses:new a.AddressCollection,mapper:!!this.contentManager.preferences.getPref("mapping:mapper"),showMapper:this.contentManager.preferences.isMapper(),show_settings:!this.contentManager.preferences.getPref("address-settings-seen")},this.model.addresses.fetchAll({success:e.bind(function(){if(0==this.model.addresses.length)this.closePanel();else{this.model.showAddNew=this.model.addresses.length<=1,this.numMenuOptions=this.model.addresses.length;for(var e=0;e<this.numMenuOptions;e++)"Masked Card"==this.model.addresses.models[e].get("label")&&(this.model.addresses.models[e].attributes.fullLabel=r.getText("mm_address_helper_abine_address")),this.bind("enter"+e,function(e,t){this.fillWithAddress(e,t)},this);this.render()}},this)})},fillWithAddress:function(n,a){n&&n.preventDefault();var i;if(a||0==a){var r=e(this.el.children[0].children).filter(function(e){return t(e).is("a")&&!t(e).hasClass("disabled")});i=t(r[a]).data("address")}else i=t(n.target).closest("a").data("address");var s=e.find(this.model.addresses.models,function(e){return e.get("id")==i});this.fillFields("address",s.toJSON(),"address"),"Masked Card"==s.get("label")?this.updatePanelActivity("masked",this.panelId,this.fieldId,!1):this.updatePanelActivity("discloses",this.panelId,this.fieldId,!1),this.closePanel()}});return o}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.autofillwith_helper_panel=e.template(function(e,t,n,a,i){function r(e){var t;return p=n.title,t=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"title"),typeof t===f?t=t.call(e,{hash:{}}):t===y&&(t=b.call(e,"title",{hash:{}})),t||0===t?t:""}function s(e){var t,a;return t="mm_auto_fill_with_header",p=n.intl,a=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===f?a.call(e,t,{hash:{}}):a===y?b.call(e,"intl",t,{hash:{}}):a,v(t)}function o(e,t){var a,i,r="";return r+='\n      <a href="#" class="mapField" data-idx="',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"idx"),typeof a===f?a=a.call(e,{hash:{}}):a===y&&(a=b.call(e,"this.idx",{hash:{}})),r+=v(a)+'">\n        <div class="element clearfix" id="mask">\n          <span class="panelLeft" style="',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"bolder"),i=n["if"],u=g.program(6,l,t),u.hash={},u.fn=u,u.inverse=g.noop,a=i.call(e,a,u),(a||0===a)&&(r+=a),r+='">\n            ',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"label"),typeof a===f?a=a.call(e,{hash:{}}):a===y&&(a=b.call(e,"this.label",{hash:{}})),(a||0===a)&&(r+=a),r+="\n          </span>\n          ",a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"hasChildren"),i=n["if"],u=g.program(8,d,t),u.hash={},u.fn=u,u.inverse=g.noop,a=i.call(e,a,u),(a||0===a)&&(r+=a),r+="\n        </div>\n      </a>\n    "}function l(){return"font-weight: bold;"}function d(){return'\n          <span class="panelRight" style="font-weight: bold;font-size:11pt;">&gt;</span>\n          '}function c(){return"display:none;"}n=n||e.helpers,a=a||e.partials;var m,h,p,u,_="",g=this,f="function",b=n.helperMissing,y=void 0,v=this.escapeExpression;return _+='<div class="panel">\n\n  <div class="step1">\n    <div class="info panelTitle" style="font-weight: bold;">\n      ',p=n.title,m=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"title"),h=n["if"],u=g.program(1,r,i),u.hash={},u.fn=u,u.inverse=g.program(3,s,i),m=h.call(t,m,u),(m||0===m)&&(_+=m),_+="\n    </div>\n    ",p=n.menu,m=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"menu"),h=n.each,u=g.program(5,o,i),u.hash={},u.fn=u,u.inverse=g.noop,m=h.call(t,m,u),(m||0===m)&&(_+=m),_+='\n  </div>\n  <div class="loading" style="text-align: center;padding:10px;',p=n.loading,m=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"loading"),h=n.unless,u=g.program(10,c,i),u.hash={},u.fn=u,u.inverse=g.noop,m=h.call(t,m,u),(m||0===m)&&(_+=m),_+='"><img src="',m="/pages/images/ajax_loader.gif",p=n.assetUrl,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),m=typeof h===f?h.call(t,m,{hash:{}}):h===y?b.call(t,"assetUrl",m,{hash:{}}):h,_+=v(m)+'"/></div>\n  <a href="#" class="mapFieldFooter">\n    <div class="element">\n      <span class="panelLeft advanced">\n        ',m="mm_auto_fill_with_advanced",p=n.intl,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),m=typeof h===f?h.call(t,m,{hash:{}}):h===y?b.call(t,"intl",m,{hash:{}}):h,_+=v(m)+' &rarr;\n      </span>\n      <span class="panelRight back" style="font-size: 10pt;">\n        &larr; ',m="mm_auto_fill_with_go_back",p=n.intl,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),m=typeof h===f?h.call(t,m,{hash:{}}):h===y?b.call(t,"intl",m,{hash:{}}):h,_+=v(m)+'\n      </span>\n    </div>\n  </a>\n  <div class="show-here" style="display: none;padding: 40px 5px;text-align: center">\n    Done!<br/>\n    You will see panels here.<br/><br/>\n    If you would like to turn on all auto-fill panels here,<br/>\n    <a href=# class="change-all">click here</a>\n  </div>\n  <div class="dont-show-here" style="display: none;padding: 40px 5px;text-align: center">\n    Done!<br/>\n    You won\'t see this panel here again.<br/><br/>\n    If you would like to turn off all auto-fill panels here,<br/>\n    <a href=# class="change-all">click here</a>\n  </div>\n  <div class="confirm" style="display: none;padding: 30px 5px;text-align: center">\n    Thanks!<br/>\n    <a href="#" class="done">Click here</a> to see your changes.<br/>\n    (if not, email blur-support@getabine.com)<br/><br/>\n    You have also helped improve Blur for the community.<br/>\n    <a href=# class="disable-feedback">Turn off this auto-fill feedback?</a>\n  </div>\n\n  <div class="report" style="display: none;text-align: center;padding-top:20px;">\n    <div class="report-form">\n    <div style="padding: 10px 0;">',m="mm_auto_fill_report_problem",p=n.intl,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),m=typeof h===f?h.call(t,m,{hash:{}}):h===y?b.call(t,"intl",m,{hash:{}}):h,_+=v(m)+'</div>\n    <form id="reportProblem">\n      <input id="name" type="text" placeholder="',m="mm_auto_fill_report_name",p=n.intl,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),m=typeof h===f?h.call(t,m,{hash:{}}):h===y?b.call(t,"intl",m,{hash:{}}):h,_+=v(m)+'" style="width: 90%;" required/>\n      <input id="email" type="text" placeholder="',m="mm_auto_fill_report_email",p=n.intl,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),m=typeof h===f?h.call(t,m,{hash:{}}):h===y?b.call(t,"intl",m,{hash:{}}):h,_+=v(m)+'" style="width: 90%;"/>\n      <textarea id="message" placeholder="',m="mm_auto_fill_report_message",p=n.intl,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),m=typeof h===f?h.call(t,m,{hash:{}}):h===y?b.call(t,"intl",m,{hash:{}}):h,_+=v(m)+'" style="width: 90%;height:100px;" required></textarea>\n      <input id="report" type="submit" value="',m="mm_auto_fill_report_submit",p=n.intl,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),m=typeof h===f?h.call(t,m,{hash:{}}):h===y?b.call(t,"intl",m,{hash:{}}):h,_+=v(m)+'"/>\n    </form>\n    </div>\n    <div class="report-success" style="display: none;padding: 30px 5px;text-align: center">\n      Thanks!<br/><br/>\n      You have also helped improve Blur for the community.<br/><br/><br/>\n    </div>\n  </div>\n\n  ',m=t,m=g.invokePartial(a["common.header"],"common.header",m,n,a),(m||0===m)&&(_+=m),_+="\n\n</div>"}),ABINE_DNTME.CompiledTemplates.autofillwith_helper_panel}),ABINE_DNTME.define("abine/views/autoFillWithPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/contentMessenger","abine/proxies","abine/intl","abine/responseCodes","abine/password"],function(e,t,n,a,i,r,s,o,l,d,c){var m=i.extend({templateName:"autofillwith_helper_panel",events:{"click .map":"map","click .mapField":"mapField","click .advanced":"advanced","click .panelTitle .formType":"changeFormType","click .back":"back","click .help-link":"openHelp","click .logo-link":"openHelp","click .change-all":"changeAll","click .done":"done","submit #reportProblem":"reportProblem","click .disable-feedback":"disableFeedback","click .close-link":"logClose"},logClose:function(){this.updatePanelActivity("closed",this.panelId,this.fieldId,!0)},openHelp:function(e){return!t(e.target).hasClass("num-trackers")&&(o.webapp.openHelp("/email"),void this.closePanel())},dataTypePanel:function(){return!1},disableFeedback:function(e){this.contentManager.preferences.setPref("disableMapFeedback","true"),this.done(e)},changeFormType:function(t){if(t.preventDefault(),this.showingFormTypes)return void this.back(t);this.showingFormTypes=!0;var n=this.options.formType;this.model.menu=new a.MappingMenuCollection;var i=[{label:"Change to Login Form",formType:"loginForm"},{label:"Change to Registraton Form",formType:"registrationForm"},{label:"Change to Checkout Form",formType:"checkoutForm"},{label:"Change to Address Form",formType:"addressForm"},{label:"Change to Other Form",formType:"otherForm"}],r=0;e.each(i,e.bind(function(e){n!=e.formType&&this.model.menu.add(new a.MappingMenu({label:e.label,action:"change_form_type",formType:e.formType,idx:r++}))},this)),this.render()},done:function(e){e.preventDefault();var t=this;r.setTimeout(function(){t.focusField(),t.closePanel()},500)},changeAll:function(e){e.preventDefault(),this.contentManager.showToolbarPanel({page:"accounts"}),this.closePanel()},reportProblem:function(e){e.preventDefault();var t={name:this.$("#name").val(),email:this.$("#email").val(),message:"Reported using mapping panel:\n\n"+this.$("#message").val(),addLookupMetaData:!0};this.$(".report-form, .report-success").toggle(),this.sendFeedbackEmail(t),this.autoResize();var n=this;r.setTimeout(function(){n.closePanel()},8e3)},map:function(e){e.preventDefault();for(var n=e.target;!t(n).data("type");)n=n.parentNode;var a=t(n).data("type");t(".step1",this.el).hide(),t(".step2",this.el).show(),t(".step2 ."+a+"Details",this.el).show(),this.trigger("resize")},back:function(e){if(e.preventDefault(),this.showingFormTypes)return delete this.showingFormTypes,this.setupModel(),void this.render();if("root"!=this.currentRoot){if(this.currentRoot.match(/.*\.[0-9]+$/)){var n=this.currentRoot.lastIndexOf("."),a=this.currentRoot.substring(n+1);this.currentRoot=this.currentRoot.substring(0,n),n=this.currentRoot.lastIndexOf("."),n!=-1&&(this.currentRoot=this.currentRoot.substring(0,n)+"."+a),this.currentRoot.match(/^root\.[0-9]+$/)&&(this.currentRoot="root")}else this.currentRoot=this.currentRoot.substring(0,this.currentRoot.lastIndexOf("."));return this.setupModel(),void this.render()}this.$(".step1").is(":visible")?(this.ignoreBlur(!1),this.focusField(),this.closePanel()):(t(".step2 .details",this.el).hide(),t(".step2",this.el).hide(),t(".step1",this.el).show(),this.trigger("resize"))},advanced:function(e){this.ignoreBlur(!0),e.preventDefault(),e.stopPropagation(),this.ignoreBlur(!1),this.options.contentManager.showMapForm(this.options),this.closePanel(e,!0),
this.trigger("remove")},blacklist:function(t){var n=this,i=new a.Blacklist({domain:this.contentManager.domain});i.fetchByDomain(!0,e.bind(function(){i.set(this.options.category,t),i.set("changed",this.options.category),i.save({},{success:function(){"card"==n.options.category&&(i.set("real_card",t),i.set("changed","real_card"),i.save()),n.contentManager.reloadPreference()}})},this))},mapField:function(e){e.preventDefault();for(var n=e.target;!t(n).hasClass("mapField");)n=n.parentNode;var a=t(n),i=a.data("idx"),r=this.model.menu.models[i];if(r.get("hasChildren"))return this.currentRoot=r.get("path"),this.setupModel(),void this.render();var s=r.get("action"),l=r.get("type"),d=r.get("formType"),c=!this.contentManager.preferences.getPref("disableMapFeedback"),m=null;if(this.$(".step1, .mapFieldFooter").hide(),"show_here"==s)return this.$(".show-here").show(),this.autoResize(),this.blacklist(!1),this.ignoreBlur(!0),void this.focusField();if("dont_show_here"==s)return this.$(".dont-show-here").show(),this.autoResize(),this.blacklist(!0),this.ignoreBlur(!0),void this.focusField();if("mask_email"==s)return this.fillFields("mapField",{dataType:"/contact/email",formType:null,noFocus:!0,right_click:!0}),void this.maskEmail();if("real_email"==s)this.fillFields("mapField",{dataType:"/contact/email",formType:null,noFocus:!0,right_click:!0}),m=this.allData.email;else if("strong_password"==s)this.fillFields("mapField",{dataType:l,formType:null,noFocus:!0,right_click:!0}),m=this.createPassword(l);else if("fill"==s)this.fillFields("mapField",{dataType:l,formType:d,noFocus:!0,right_click:!0}),m=r.get("value");else if("mask_card"==s);else if("show_list_accounts"==s)o.webapp.openPage("/#/accounts"),c=!1;else if("show_list_cards"==s)o.webapp.openPage("/#/real_cards"),c=!1;else if("show_list_addresses"==s)o.webapp.openPage("/#/address"),c=!1;else if("show_list_identities"==s)o.webapp.openPage("/#/identities"),c=!1;else{if("report_problem"==s)return void this.showReportProblem();if("change_form_type"==s)return delete this.showingFormTypes,this.ignoreBlur(!0),this.options.formType=d,this.fillFields("mapField",{dataType:this.options.fieldType,formType:d,noFocus:c,right_click:!0}),this.setupModel(),void this.render();"form_type"==s?this.fillFields("mapField",{dataType:this.options.fieldType,formType:d,noFocus:c,right_click:!0}):this.fillFields("mapField",{dataType:l,formType:this.options.formType,noFocus:c,right_click:!0})}return m?(this.fillFields("current",m),void this.closePanel()):void(c?(this.$(".confirm").show(),this.ignoreBlur(!0),this.focusField(),this.autoResize()):this.closePanel())},setupModel:function(){var e=this.options.fieldType,t=this.options.formType,n=new a.MappingMenuCollection,i=this.previousTitle||null;try{n.loadMenu(this.currentRoot,e,t,this.options.panelDisabledHere,this.allData),n.length>0&&null!=n.models[0].get("panelTitle")&&(this.previousTitle=i=n.models[0].get("panelTitle"))}catch(e){}this.model={iconClick:!!this.options.iconClick,menu:n,title:i}},maskEmail:function(){if(t(".step1").hide(),t(".loading").show(),this.primaryEmail){var n=this.primaryEmail.generateDisposable(this.options.domain,"dnt-panel");n.save({},{success:e.bind(function(){this.fillFields("current",n.getAddress(),{origin:"disposable",disposableGUID:n.get("guid")}),this.closePanel()},this),error:e.bind(function(){this.closePanel()},this)})}},showReportProblem:function(){t(".step1").hide(),t(".report").show(),this.autoResize()},createPassword:function(e){var t,n={"/password":"generateNoSpecialCharsPassword","/password/differentSpecialChars":"generateSpecialCharsPassword","/password/noSpecialChars":"generateNoSpecialCharsPassword","/password/noNumbers":"generateNoDigitsPassword"};return t=e in n?c[n[e]]():c.generateNoSpecialCharsPassword()},afterInitialize:function(){this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.numMenuOptions=3,this.currentRoot="root",this.bindBaseEvents(),this.applyFadingStyle(),this.fadeIn(),this.allData={account:new a.AccountCollection,address:new a.AddressCollection,card:new a.RealCardCollection,identity:new a.IdentityCollection,phone:new a.DisposablePhoneCollection,email:null};var t=new a.ShieldedPhoneCollection,n=this;r.setTimeout(function(){var i=new a.ShieldedEmailCollection;i.fetchAll({success:function(){i.length>0&&(n.allData.email=i.at(0).get("email"),n.primaryEmail=i.at(0)),n.allData.account.fetchLoginsByDomain(n.options.domain,function(){n.allData.address.fetchAll({success:function(){n.allData.address.remove(n.allData.address.at(n.allData.address.length-1)),n.allData.card.fetchAll({success:function(){n.allData.identity.fetchAll({success:function(){t.fetchAll({success:function(){n.allData.phone.fetchAll({success:function(){if(t.length>0&&t.models[0].get("country_code")){var i=t.models[0];i.set("type","real"),n.allData.phone.add(new a.DisposablePhone(i.toJSON()))}e.each(n.allData.identity.models,function(e){if(e.get("phone")&&e.get("phone").match(/^[0-9\+\s]+$/)){var t=e.get("phone").split(" ");n.allData.phone.add(new a.DisposablePhone({country_code:t[0].replace(/[^0-9]+/g,""),number:t[1].replace(/[^0-9]+/g,""),type:"real"}))}}),n.setupModel(),n.render()}})}})}})}})}})})}})},10),this.model={iconClick:!!this.options.iconClick,loading:!0,menu:[]},this.panelId=8000011,this.updatePanelActivity("impression",this.panelId),this.render()}});return m}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.autofill_helper_panel=e.template(function(e,t,n,a,i){function r(e,t){var a,i,r="";return r+='\n    <div style="padding-left: 10px;">\n      <b>',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"label"),typeof a===f?a=a.call(e,{hash:{}}):a===y&&(a=b.call(e,"this.label",{hash:{}})),r+=v(a)+"</b> ",a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"hasVisible"),i=n.unless,u=g.program(2,s,t),u.hash={},u.fn=u,u.inverse=g.noop,a=i.call(e,a,u),(a||0===a)&&(r+=a),r+='\n      <div style="padding-left: 10px;">',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"text"),p=n.nl2br,i=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"nl2br"),a=typeof i===f?i.call(e,a,{hash:{}}):i===y?b.call(e,"nl2br",a,{hash:{}}):i,(a||0===a)&&(r+=a),r+="</div>\n    </div>\n  "}function s(){return'<span style="color:orange;">(ensure these fields are visible)</span>'}function o(e,t){var a,i,r="";return r+='\n        <tr class="field ',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"canFill"),i=n["if"],u=g.program(5,l,t),u.hash={},u.fn=u,u.inverse=g.noop,a=i.call(e,a,u),(a||0===a)&&(r+=a),r+='" data-signature="',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"signature"),typeof a===f?a=a.call(e,{hash:{}}):a===y&&(a=b.call(e,"this.signature",{hash:{}})),r+=v(a)+'" data-type="',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"dataType"),typeof a===f?a=a.call(e,{hash:{}}):a===y&&(a=b.call(e,"this.dataType",{hash:{}})),r+=v(a)+'" ',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"canFill"),i=n.unless,u=g.program(7,d,t),u.hash={},u.fn=u,u.inverse=g.noop,a=i.call(e,a,u),(a||0===a)&&(r+=a),r+='>\n          <td>\n              <span class="lbl"></span><br/>\n              <span class="sign" title="',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"label"),typeof a===f?a=a.call(e,{hash:{}}):a===y&&(a=b.call(e,"this.label",{hash:{}})),r+=v(a)+'" style="font-size:8pt;color:Grey;">',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"shortLabel"),typeof a===f?a=a.call(e,{hash:{}}):a===y&&(a=b.call(e,"this.shortLabel",{hash:{}})),r+=v(a)+'</span>\n          </td>\n          <td><select class="fill-status">\n            <option value="">-- Please Select --</option>\n            <option value="ok">Filled Correctly</option>\n            <option value="empty" ',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"canFill"),i=n.unless,u=g.program(9,c,t),u.hash={},u.fn=u,u.inverse=g.noop,a=i.call(e,a,u),(a||0===a)&&(r+=a),r+='>Not Filled</option>\n            <option value="bad">Wrong Value</option>\n            <!--option value="isvisible">Field Invisible</option-->\n            <!--option value="mapping">Incorrect Mapping</option-->\n          </select></td>\n        </tr>\n      '}function l(){return"canFill"}function d(){return'style="display:none;"'}function c(){return"selected"}n=n||e.helpers,a=a||e.partials;var m,h,p,u,_="",g=this,f="function",b=n.helperMissing,y=void 0,v=this.escapeExpression;return _+='<div class="clearfix panel">\n\n  <div class="info" style="font-weight: bold;">Auto Fill Form</div>\n  <div style="display: none;">\n    ',m=t,m=g.invokePartial(a["common.form_types"],"common.form_types",m,n,a),(m||0===m)&&(_+=m),_+="\n    ",m=t,m=g.invokePartial(a["common.field_types"],"common.field_types",m,n,a),(m||0===m)&&(_+=m),_+='\n  </div>\n\n  <div class="fieldSet" style="margin-top: 5px;">',m="mm_map_form_type",p=n.intl,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),m=typeof h===f?h.call(t,m,{hash:{}}):h===y?b.call(t,"intl",m,{hash:{}}):h,_+=v(m)+': <span class="form-type"></span></div>\n\n  <div class="step1" style="">\n    <div style="text-decoration: underline">Sample data to fill:</div>\n  ',p=n.dummyData,m=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"dummyData"),h=n.each,u=g.program(1,r,i),u.hash={},u.fn=u,u.inverse=g.noop,m=h.call(t,m,u),(m||0===m)&&(_+=m),_+='\n  </table>\n  </div>\n  <div class="step2" style="display: none;border-top: 1px solid black;">\n    <div style="margin: 5px 0;font-weight: bold;">Please review all fields and give your feedback: <span class="allOk" style="font-weight: normal;color:blue;cursor:pointer;">[All OK]</span></div>\n    <div class="clearfix" style="max-height: 200px;overflow: scroll;padding-left: 10px;margin-right: 5px;border: 1px solid #fafafa">\n      <table>\n      ',p=n.fields,m=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"fields"),h=n.each,u=g.program(4,o,i),u.hash={},u.fn=u,u.inverse=g.noop,m=h.call(t,m,u),(m||0===m)&&(_+=m),_+='\n      </table>\n    </div>\n  </div>\n  <div class="fieldSet clearfix error" style="margin: 5px;text-align: center;color: red;display: none;"></div>\n  <div class="fieldSet clearfix progress-msg" style="margin: 5px;text-align: center;color: green;display: none;">\n    <img class="loading" src="',m="/pages/images/ajax_loader.gif",p=n.assetUrl,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),m=typeof h===f?h.call(t,m,{hash:{}}):h===y?b.call(t,"assetUrl",m,{hash:{}}):h,_+=v(m)+'"/>\n    Please wait...  Filling form with sample data.\n  </div>\n  <div class="fieldSet clearfix" style="margin: 5px;text-align: right;">\n    <div class="btn btn-primary fillBtn" style="margin-right:5px;">',m="mm_auto_fill_fill",p=n.intl,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),m=typeof h===f?h.call(t,m,{hash:{}}):h===y?b.call(t,"intl",m,{hash:{}}):h,_+=v(m)+'</div>\n    <div class="btn btn-info allFieldsBtn" style="margin-right:5px;display: none;">Show All Fields</div>\n    <div class="btn btn-primary saveBtn" style="margin-right:5px;display: none;">',m="mm_auto_fill_save",p=n.intl,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),m=typeof h===f?h.call(t,m,{hash:{}}):h===y?b.call(t,"intl",m,{hash:{}}):h,_+=v(m)+'</div>\n    <div class="btn cancel">',m="mm_map_form_cancel",p=n.intl,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),m=typeof h===f?h.call(t,m,{hash:{}}):h===y?b.call(t,"intl",m,{hash:{}}):h,_+=v(m)+'</div>\n  </div>\n\n  <div class="header" style="clear:both;">\n    <div class="logo-link">\n      <img class="logo" height="16px" width="17px" src="',m="/pages/images/dnt-ui-header-logo.png",p=n.assetUrl,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),m=typeof h===f?h.call(t,m,{hash:{}}):h===y?b.call(t,"assetUrl",m,{hash:{}}):h,_+=v(m)+'"/>\n      <span class="boldFont">Blur</span>\n    </div>\n    <div class="links-wrapper">\n      <div class="links close-link">\n        <img id="close" class="header-icon" src="',m="/pages/images/dnt-ui-header-close.png",p=n.assetUrl,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),m=typeof h===f?h.call(t,m,{hash:{}}):h===y?b.call(t,"assetUrl",m,{hash:{}}):h,_+=v(m)+'">\n      </div>\n      <div class="links help-link">\n        <img class="header-icon" src="',m="/pages/images/dnt-ui-header-help.png",p=n.assetUrl,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),m=typeof h===f?h.call(t,m,{hash:{}}):h===y?b.call(t,"assetUrl",m,{hash:{}}):h,_+=v(m)+'">\n      </div>\n    </div>\n  </div>\n\n</div>'}),ABINE_DNTME.CompiledTemplates.autofill_helper_panel}),ABINE_DNTME.define("abine/views/autoFillPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/contentMessenger","abine/proxies"],function(e,t,n,a,i,r,s,o){function l(e,t){var n="",a="";return e.match(/postal|city|state|country/)?(n="Address",a="address"):e.match(/financial/)?(n="Credit Card",a="payment"):e.match(/phone/)?(n="Phone",a="phone"):e.match(/email|username|password/)&&"loginForm"==t?(n="Login",a="login-no-submit"):e.match(/email/)?(n="Email",a="email"):e.match(/password/)&&(n="Password",a="password"),e.match(/home/)&&(n="Home "+n),e.match(/shipping/)&&(n="Shipping "+n),e.match(/billing/)&&(n="Billing "+n),e.match(/business/)&&(n="Business "+n),d[n]?"string"!=typeof d[n]&&e in d[n]?{group:n,value:d[n][e],type:a}:{group:n,value:d[n],type:a}:null}var d={Email:"email-reg@abine.com",Password:{"/password/login":"#password123#","/password":"#password123#","/password/differentSpecialChars":"password-123","/password/noSpecialChars":"password123","/password/noNumbers":"passwordNoNumber","/passwordold":"loginPassword"},Login:new a.Account({username:"JohnDoe11",email:"email-login@abine.com",password:"loginPassword"}),Phone:new a.DisposablePhone({country_code:"1",number:"6162223333"}),"Home Phone":new a.DisposablePhone({country_code:"1",number:"7173334444"}),"Work Phone":new a.DisposablePhone({country_code:"1",number:"5154445555"}),"Mobile Phone":new a.DisposablePhone({country_code:"1",number:"4145556666"}),"Fax Phone":new a.DisposablePhone({country_code:"1",number:"3136667777"}),"Credit Card":new a.RealCard({number:"4539443037367905",cvc:"432",expiry_month:"10",expiry_year:"2019",first_name:"Tom",last_name:"Jerry",type:"visa"}),Address:new a.Address({address1:"280 summer st",address2:"#123",city:"boston",state:"MA",zip:"02210",country:"US"}),"Billing Address":new a.Address({address1:"933 E. 56th St.",address2:"#234",city:"Chicago",state:"IL",zip:"60637",country:"US"}),"Shipping Address":new a.Address({address1:"174 W. 18th Ave.",address2:"#345",city:"Columbus",state:"OH",zip:"43210",country:"US"}),"Business Address":new a.Address({address1:"373 W. Geneva St.",address2:"#456",city:"Wms. Bay",state:"WI",zip:"53191",country:"US"}),"Home Address":new a.Address({address1:"JILA CB 440",address2:"#567",city:"Boulder",state:"CO",zip:"80309",country:"US"})},c=i.extend({templateName:"autofill_helper_panel",events:{"click .help-link":"openHelp","click .logo-link":"openHelp","click .close-link":"logClose","click .saveBtn":"save","click .allFieldsBtn":"showAllFields","click .allOk":"allOk","click .fillBtn":"fill","click .cancel":"cancel"},logClose:function(){this.closePanel()},cancel:function(){this.closePanel()},openHelp:function(e){return!t(e.target).hasClass("num-trackers")&&(o.webapp.openHelp("/email"),void this.closePanel())},showAllFields:function(){this.$(".field").show(),this.$(".allFieldsBtn").hide()},allOk:function(){this.$(".canFill .fill-status").val("ok")},fill:function(){var t=this;this.$(".progress-msg").show(),this.$(".fillBtn").hide(),t.autoResize(),e.async.forEachSeries(this.model.dummyData,function(n,a){var i=e.find(n.fields,function(e){return"select"!=e.type});t.options.contentManager.focusField(t.options.strategyId,i.signature),t.options.contentManager.fillFields(n.type,t.options.strategyId,i.signature,n.value),setTimeout(a,2e3)},function(){t.$(".progress-msg").hide(),t.$(".step2, .saveBtn, .allFieldsBtn").show(),t.autoResize()})},save:function(n){n.preventDefault(),this.$(".error").hide();var i={},r=!1;if(e.each(this.options.fields,function(e){i[e.signature]={signature:e.signature,label:e.label,data_type:e.dataType,can_fill:e.canFill,group:e.group}}),this.$(".field").each(e.bind(function(e,n){if(!r){var a=t(n).data("signature"),s=t("select",n).val();return""==s&&(s=null),s?void(i[a].status=s):(this.$(".error").text("Please set status for all fields.").show(),r=!0,this.$("select",n)[0].scrollIntoView(),void this.trigger("resize"))}},this)),!r){this.$(".saveBtn").hide(),this.$(".error").text("Please wait. Sending your feedback...").show(),this.autoResize();var s=this.contentManager;s.getValue("autofill.data",this.strategyId,this.fieldId,e.bind(function(t){var n=[],r={signature:this.model.signature,form_type:this.model.formType,domain:s.domain,url:s.href,mapper:s.preferences.getPref("autofill:mapper"),batch:s.preferences.getPref("autofill:batch"),external_id:s.preferences.getPref("autofill:form:id"),fields:n,status:"ok"};e.each(i,e.bind(function(e){t[e.signature]&&(e.value=t[e.signature].value,e.fill_type=t[e.signature].fillType),"ok"!=e.status&&e.can_fill&&(r.status="review"),n.push(e)},this));var o=new a.AutofillFeedback;o.save(r,{success:e.bind(function(){this.closePanel()},this)})},this))}},setupModel:function(){this.model={iconClick:!!this.options.iconClick,formType:this.options.formType,signature:this.options.formSignature,fields:this.options.fields}},afterInitialize:function(){var n=this;this.fieldId=this.options.fieldId,this.strategyId=this.options.strategyId,this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.applyFadingStyle(),this.fadeIn(),this.setupModel();var a=(this.contentManager.preferences.getPref("autofill:mapper"),this.options.fields),i={},r=[];this.model.dummyData=r,e.each(a,function(e){if(!e.dataType)return void(e.canFill=!1);var t=l(e.dataType,n.model.formType);if(!t)return void(e.canFill=!1);if(e.canFill=!0,e.group=t.group,t.group in i)i[t.group].fields.push(e),e.visible&&(i[t.group].hasVisible=!0);else{var a={label:t.group,type:t.type,text:"string"==typeof t.value?t.value:t.value.getFormattedText(),value:"string"==typeof t.value?t.value:t.value.attributes,fields:[e],hasVisible:e.visible};r.push(a),i[t.group]=a}}),this.on("render",e.bind(function(){var e=this.model.formType;this.$("#formType").val(e);var n=this;this.$(".field").hover(function(){var e=t(this).data("signature");n.addFieldBorder(e)},function(){var e=t(this).data("signature");n.removeFieldBorder(e)});var a={};this.$("select.fieldTypes option").each(function(e,t){a[t.value]=t.text}),this.$("#formType option").each(function(n,a){a.value==e&&t(".form-type").text(a.text)}),this.$(".field").each(function(e,n){var i=t(n).data("type");t("td span.lbl",n).text(a[i])})},this)),this.render()}});return c}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.mapform_helper_panel=e.template(function(e,t,n,a,i){function r(e){var t,i="";return i+='\n      <div class="field" style="margin-bottom: 5px;" data-signature="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"signature"),typeof t===u?t=t.call(e,{hash:{}}):t===g&&(t=_.call(e,"this.signature",{hash:{}})),i+=f(t)+'"\n           data-type="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"dataType"),typeof t===u?t=t.call(e,{hash:{}}):t===g&&(t=_.call(e,"this.dataType",{hash:{}})),i+=f(t)+'">\n        <span title="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"label"),typeof t===u?t=t.call(e,{hash:{}}):t===g&&(t=_.call(e,"this.label",{hash:{}})),i+=f(t)+'">',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"shortLabel"),typeof t===u?t=t.call(e,{hash:{}}):t===g&&(t=_.call(e,"this.shortLabel",{hash:{}})),i+=f(t)+"</span>\n        <br/>\n        ",t=e,t=p.invokePartial(a["common.field_types"],"common.field_types",t,n,a),(t||0===t)&&(i+=t),i+="\n      </div>\n    "}function s(){return'<a href="#" id="prev" title="Previous form"><<</a> &nbsp;&nbsp;&nbsp;'}function o(){return'<a href="#" id="next" title="Next form">>></a>'}n=n||e.helpers,a=a||e.partials;var l,d,c,m,h="",p=this,u="function",_=n.helperMissing,g=void 0,f=this.escapeExpression;return h+='<div class="clearfix panel">\n\n  <div class="info" style="font-weight: bold;">\n    ',l="mm_map_form_title",c=n.intl,d=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof d===u?d.call(t,l,{hash:{}}):d===g?_.call(t,"intl",l,{hash:{}}):d,h+=f(l)+'\n    <a href="https://dnt.abine.com/#/help/mapform" target="newtab">',l="mm_map_form_title_more_info",c=n.intl,d=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof d===u?d.call(t,l,{hash:{}}):d===g?_.call(t,"intl",l,{hash:{}}):d,h+=f(l)+'</a>\n  </div>\n\n  <div class="fieldSet" style="margin-top: 5px;">',l="mm_map_form_type",c=n.intl,d=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof d===u?d.call(t,l,{hash:{}}):d===g?_.call(t,"intl",l,{hash:{}}):d,h+=f(l)+"<br/>\n    ",l=t,l=p.invokePartial(a["common.form_types"],"common.form_types",l,n,a),(l||0===l)&&(h+=l),h+='\n  </div>\n\n  <div style="margin: 5px 0;font-weight: bold;">',l="mm_map_form_fields",c=n.intl,d=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof d===u?d.call(t,l,{hash:{}}):d===g?_.call(t,"intl",l,{hash:{}}):d,h+=f(l)+"</div>\n  <div>",l="mm_map_field_instructions",c=n.intl,d=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof d===u?d.call(t,l,{hash:{}}):d===g?_.call(t,"intl",l,{hash:{}}):d,h+=f(l)+'</div>\n  <div class="clearfix" style="max-height: 300px;overflow: scroll;padding-left: 10px;margin-right: 5px;border: 1px solid #fafafa">\n    ',c=n.fields,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"fields"),d=n.each,m=p.program(1,r,i),m.hash={},m.fn=m,m.inverse=p.noop,l=d.call(t,l,m),(l||0===l)&&(h+=l),h+='\n    <br/><br/><br/><br/><br/><br/><br/>\n  </div>\n  <div class="fieldSet clearfix error" style="margin: 5px;text-align: center;color: red;display: none;"></div>\n  <div class="fieldSet clearfix" style="margin: 5px;">\n    <div style="float:left">\n      ',c=n.prev,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"prev"),d=n["if"],m=p.program(3,s,i),m.hash={},m.fn=m,m.inverse=p.noop,l=d.call(t,l,m),(l||0===l)&&(h+=l),h+="\n      ",c=n.next,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"next"),d=n["if"],m=p.program(5,o,i),m.hash={},m.fn=m,m.inverse=p.noop,l=d.call(t,l,m),(l||0===l)&&(h+=l),h+='\n    </div>\n    <div style="float:right;">\n      <div class="btn btn-primary save" style="margin-right:5px;">',l="mm_map_form_save",c=n.intl,d=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof d===u?d.call(t,l,{hash:{}}):d===g?_.call(t,"intl",l,{hash:{}}):d,h+=f(l)+'</div>\n      <div class="btn cancel">',l="mm_map_form_cancel",c=n.intl,d=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof d===u?d.call(t,l,{hash:{}}):d===g?_.call(t,"intl",l,{hash:{}}):d,h+=f(l)+'</div>\n    </div>\n  </div>\n\n\n  <div class="header" style="clear:both;">\n    <div class="logo-link">\n      <img class="logo" height="16px" width="17px" src="',l="/pages/images/dnt-ui-header-logo.png",c=n.assetUrl,d=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),l=typeof d===u?d.call(t,l,{hash:{}}):d===g?_.call(t,"assetUrl",l,{hash:{}}):d,h+=f(l)+'"/>\n      <span class="boldFont">Blur</span>\n    </div>\n    <div class="links-wrapper">\n      <div class="links close-link">\n        <img id="close" class="header-icon" src="',l="/pages/images/dnt-ui-header-close.png",c=n.assetUrl,d=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),l=typeof d===u?d.call(t,l,{hash:{}}):d===g?_.call(t,"assetUrl",l,{hash:{}}):d,h+=f(l)+'">\n      </div>\n      <div class="links help-link">\n        <img class="header-icon" src="',l="/pages/images/dnt-ui-header-help.png",c=n.assetUrl,d=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),l=typeof d===u?d.call(t,l,{hash:{}}):d===g?_.call(t,"assetUrl",l,{hash:{}}):d,h+=f(l)+'">\n      </div>\n    </div>\n  </div>\n\n</div>'}),ABINE_DNTME.CompiledTemplates.mapform_helper_panel}),ABINE_DNTME.define("abine/views/mapFormPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/contentMessenger","abine/proxies"],function(e,t,n,a,i,r,s,o){var l=i.extend({templateName:"mapform_helper_panel",events:{"click .help-link":"openHelp","click .logo-link":"openHelp","click .close-link":"logClose","change #formType":"formTypeChanged","click #prev":"previousForm","click #next":"nextForm","click .save":"save","click .cancel":"cancel"},formTypeChanged:function(){var n=this.$("#formType").val(),a={loginForm:["person-grp","security-grp","combined-grp","phone-grp","card-grp","address-grp","date-grp"],registrationForm:["person-grp","security-grp","combined-grp","date-grp","phone-grp","address-grp","card-grp"],checkoutForm:["card-grp","address-grp","phone-grp","person-grp","security-grp","combined-grp","date-grp"],changePasswordForm:["security-grp","person-grp","combined-grp","date-grp","phone-grp","address-grp","card-grp"],"default":["person-grp","security-grp","combined-grp","phone-grp","card-grp","address-grp","date-grp"]},i=this.$(".fieldTypes");e.each(i,function(i){var r=t(i).val(),s=t(".start",i),o=a["default"];n in a&&(o=a[n]),e.each(o,function(n){var a=t("."+n,i);e.each(a,function(e){t(e).insertAfter(s),s=e})}),t(i).val(r)}),this.$("select.fieldTypes").chosen("destroy").chosen()},logClose:function(){this.updatePanelActivity("closed",this.panelId),this.closePanel()},cancel:function(){this.updatePanelActivity("closed",this.panelId),this.closePanel()},openHelp:function(e){return!t(e.target).hasClass("num-trackers")&&(o.webapp.openHelp("/email"),void this.closePanel())},save:function(n){n.preventDefault(),this.$(".error").hide();var a=this.$("#formType").val();if(""==a)return this.$("#formType")[0].scrollIntoView(),void this.$(".error").show();var i={},r=!1,s=0,o=0;if(this.$(".field").each(e.bind(function(e,n){if(!r){var l=t(n).data("signature"),d=t("select",n).val();if(""==d&&(d=null),!d&&"ignoreForm"!=a)return this.$(".error").text("Please set type for all fields.").show(),r=!0,this.$("select",n)[0].scrollIntoView(),void this.trigger("resize");d.match(/financial/)&&o++,d.match(/postal|city|state|country/i)&&s++,i[l]=d}},this)),!r){if("checkoutForm"==a&&s<3&&o<3)return this.$(".error").text("Checkout forms should have address and/or credit card fields.").show(),void this.trigger("resize");this.fillFields("mapForm",{formType:a,fieldTypes:i,mappingChanged:!0}),this.updatePanelActivity("masked",this.panelId),this.closePanel()}},setupModel:function(){var e=this.options.forms||[];this.forms=e,this.curIdx=e.indexOf(this.options.formId),this.model={iconClick:!!this.options.iconClick,formType:this.options.formType,fields:this.options.fields,prev:this.curIdx>0,next:this.curIdx+1<e.length}},previousForm:function(e){e.preventDefault(),this.options.contentManager.showMapForm({formId:this.forms[this.curIdx-1],forms:this.forms}),this.closePanel()},nextForm:function(e){e.preventDefault(),this.options.contentManager.showMapForm({formId:this.forms[this.curIdx+1],forms:this.forms}),this.closePanel()},afterInitialize:function(){this.fieldId=this.options.fieldId,this.strategyId=this.options.strategyId,this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.numMenuOptions=3,this.applyFadingStyle(),this.fadeIn(),this.panelId=9000011,this.updatePanelActivity("impression",this.panelId),this.setupModel();var n=this.contentManager.preferences.getPref("mapping:mapper");this.options.fields;this.on("render",e.bind(function(){var i=new a.MappedFormCollection({messenger:this.contentManager.messenger});i.fetchLocalAllByDomain(this.options.domain,e.bind(function(){var a=this.model.formType,r=this.options.formSignature;if(n){var s=e.find(i.models,function(e){return e.get("signature")==r});s||(this.$(".field").each(function(e,n){t(n).data("type","")}),a="")}this.$("#formType").val(a);var o=this;this.$(".field").hover(function(){var e=t(this).data("signature");o.addFieldBorder(e)},function(){var e=t(this).data("signature");o.removeFieldBorder(e)}),this.$(".field").each(function(e,n){var a=t(n).data("type");t("select",n).val(a)}),this.formTypeChanged()},this))},this)),this.render()}});return l}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.mapreview_helper_panel=e.template(function(e,t,n,a,i){function r(e,t){var a,i,r="";return r+="\n        <option ",u=n.verified,a=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"verified"),i=n["if"],_=f.program(2,s,t),_.hash={},_.fn=_,_.inverse=f.noop,a=i.call(e,a,_),(a||0===a)&&(r+=a),r+=' value="',u=n.mapping_signature,a=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"mapping_signature"),typeof a===b?a=a.call(e,{hash:{}}):a===v&&(a=y.call(e,"mapping_signature",{hash:{}})),r+=k(a)+'">\n          ',u=n.created_at,a=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"created_at"),typeof a===b?a=a.call(e,{hash:{}}):a===v&&(a=y.call(e,"created_at",{hash:{}})),r+=k(a)+" - ",u=n.num_mappers,a=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"num_mappers"),typeof a===b?a=a.call(e,{hash:{}}):a===v&&(a=y.call(e,"num_mappers",{hash:{}})),r+=k(a)+" mapper(s) ",u=n.verified,a=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"verified"),i=n["if"],_=f.program(4,o,t),_.hash={},_.fn=_,_.inverse=f.noop,a=i.call(e,a,_),(a||0===a)&&(r+=a),r+="\n          ",u=n.self,a=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"self"),i=n["if"],_=f.program(6,l,t),_.hash={},_.fn=_,_.inverse=f.noop,a=i.call(e,a,_),(a||0===a)&&(r+=a),r+="\n        </option>\n      "}function s(){return'style="color:green !important;font-weight: bold !important;"'}function o(){return" - approved"}function l(){return" - (you) "}function d(e){var t,i="";return i+='\n      <div class="field" style="margin-bottom: 5px;" data-signature="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"signature"),typeof t===b?t=t.call(e,{hash:{}}):t===v&&(t=y.call(e,"this.signature",{hash:{}})),i+=k(t)+'"\n           data-type="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"dataType"),typeof t===b?t=t.call(e,{hash:{}}):t===v&&(t=y.call(e,"this.dataType",{hash:{}})),i+=k(t)+'">\n        <span title="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"label"),typeof t===b?t=t.call(e,{hash:{}}):t===v&&(t=y.call(e,"this.label",{hash:{}})),i+=k(t)+'">',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"shortLabel"),typeof t===b?t=t.call(e,{hash:{}}):t===v&&(t=y.call(e,"this.shortLabel",{hash:{}})),i+=k(t)+"</span>\n        <br/>\n        ",t=e,t=f.invokePartial(a["common.field_types"],"common.field_types",t,n,a),(t||0===t)&&(i+=t),i+="\n      </div>\n    "}function c(){return'<a href="#" id="prev" title="Previous form"><<</a> &nbsp;&nbsp;&nbsp;'}function m(){return'<a href="#" id="next" title="Next form">>></a>'}n=n||e.helpers,a=a||e.partials;var h,p,u,_,g="",f=this,b="function",y=n.helperMissing,v=void 0,k=this.escapeExpression;return g+='<div class="clearfix panel">\n\n  <div class="info" style="font-weight: bold;">Review Form Mapping</div>\n\n  <div class="fieldSet" style="margin-top: 5px;">Select Mapping:<br/>\n    <select id="mapping">\n      <option value="">- create new -</option>\n      ',u=n.mappings,h=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"mappings"),p=n.each,_=f.program(1,r,i),_.hash={},_.fn=_,_.inverse=f.noop,h=p.call(t,h,_),(h||0===h)&&(g+=h),g+='\n    </select></div>\n\n  <div class="fieldSet" style="margin-top: 5px;">',h="mm_map_form_type",u=n.intl,p=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),h=typeof p===b?p.call(t,h,{hash:{}}):p===v?y.call(t,"intl",h,{hash:{}}):p,g+=k(h)+"<br/>\n    ",h=t,h=f.invokePartial(a["common.form_types"],"common.form_types",h,n,a),(h||0===h)&&(g+=h),g+='\n  </div>\n\n  <div style="margin: 5px 0;font-weight: bold;">',h="mm_map_form_fields",u=n.intl,p=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),h=typeof p===b?p.call(t,h,{hash:{}}):p===v?y.call(t,"intl",h,{hash:{}}):p,g+=k(h)+'</div>\n  <div class="clearfix" style="max-height: 300px;overflow: scroll;padding-left: 10px;">\n    ',u=n.fields,h=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"fields"),p=n.each,_=f.program(8,d,i),_.hash={},_.fn=_,_.inverse=f.noop,h=p.call(t,h,_),(h||0===h)&&(g+=h),g+='\n    <br/><br/><br/><br/><br/><br/><br/>\n  </div>\n  <div class="fieldSet clearfix" style="margin: 5px;">\n    <div style="float:left">\n      ',u=n.prev,h=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"prev"),p=n["if"],_=f.program(10,c,i),_.hash={},_.fn=_,_.inverse=f.noop,h=p.call(t,h,_),(h||0===h)&&(g+=h),g+="\n      ",u=n.next,h=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"next"),p=n["if"],_=f.program(12,m,i),_.hash={},_.fn=_,
_.inverse=f.noop,h=p.call(t,h,_),(h||0===h)&&(g+=h),g+='\n    </div>\n    <div style="float:right;">\n      <div class="btn btn-primary save" style="margin-right:5px;">Save and Approve</div>\n      <div class="btn cancel">',h="mm_map_form_cancel",u=n.intl,p=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),h=typeof p===b?p.call(t,h,{hash:{}}):p===v?y.call(t,"intl",h,{hash:{}}):p,g+=k(h)+'</div>\n    </div>\n  </div>\n\n  <div class="header" style="clear:both;">\n    <div class="logo-link">\n      <img class="logo" height="16px" width="17px" src="',h="/pages/images/dnt-ui-header-logo.png",u=n.assetUrl,p=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),h=typeof p===b?p.call(t,h,{hash:{}}):p===v?y.call(t,"assetUrl",h,{hash:{}}):p,g+=k(h)+'"/>\n      <span class="boldFont">Blur</span>\n    </div>\n    <div class="links-wrapper">\n      <div class="links close-link">\n        <img id="close" class="header-icon" src="',h="/pages/images/dnt-ui-header-close.png",u=n.assetUrl,p=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),h=typeof p===b?p.call(t,h,{hash:{}}):p===v?y.call(t,"assetUrl",h,{hash:{}}):p,g+=k(h)+'">\n      </div>\n      <div class="links help-link">\n        <img class="header-icon" src="',h="/pages/images/dnt-ui-header-help.png",u=n.assetUrl,p=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),h=typeof p===b?p.call(t,h,{hash:{}}):p===v?y.call(t,"assetUrl",h,{hash:{}}):p,g+=k(h)+'">\n      </div>\n    </div>\n  </div>\n\n</div>'}),ABINE_DNTME.CompiledTemplates.mapreview_helper_panel}),ABINE_DNTME.define("abine/views/mapReviewPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/contentMessenger","abine/proxies","abine/views/mapFormPanel"],function(e,t,n,a,i,r,s,o,l){var d=i.extend({templateName:"mapreview_helper_panel",events:{"click .help-link":"openHelp","click .logo-link":"openHelp","click .close-link":"logClose","click .save":"save","click #prev":"previousForm","click #next":"nextForm","click .cancel":"cancel","change #formType":"formTypeChanged","change #mapping":"mappingChanged"},logClose:function(){this.updatePanelActivity("closed",this.panelId),this.closePanel()},cancel:function(){this.updatePanelActivity("closed",this.panelId),this.closePanel()},openHelp:function(e){return!t(e.target).hasClass("num-trackers")&&(o.webapp.openHelp("/email"),void this.closePanel())},save:function(n){n.preventDefault();var a=(this.options.contentManager,this.fields,this.$("#formType").val()),i={};this.$(".field").each(e.bind(function(e,n){var a=t(n).data("signature"),r=t("select",n).val();""==r&&(r=null),i[a]=r},this)),this.fillFields("mapForm",{formType:a,fieldTypes:i,mappingChanged:!0,verified:!0}),this.updatePanelActivity("masked",this.panelId),this.closePanel()},setupModel:function(){var e=this.options.forms||[];this.forms=e,this.curIdx=e.indexOf(this.options.formId),this.model={iconClick:!!this.options.iconClick,formType:this.options.formType,fields:this.options.fields,prev:this.curIdx>0,next:this.curIdx+1<e.length,mappings:this.mappings}},previousForm:function(e){e.preventDefault(),this.options.contentManager.showMapForm({formId:this.forms[this.curIdx-1],forms:this.forms}),this.closePanel()},nextForm:function(e){e.preventDefault(),this.options.contentManager.showMapForm({formId:this.forms[this.curIdx+1],forms:this.forms}),this.closePanel()},mappingChanged:function(){var n=this.$("#mapping")[0].selectedIndex;if(n--,n>=0){var a=this.model.mappings[n];this.$("#formType").val(a.formType),this.$(".field").each(function(n,i){var r=t(i).data("signature"),s=e.find(a.fields,function(e){return e.signature==r});t("select",i)[0].selectedIndex=0,s&&t("select",i).val(s.dataType)})}else{this.fields;this.$("#formType").val(this.model.formType),this.$(".field").each(function(e,n){var a=t(n).data("type");t("select",n).val(a)})}this.formTypeChanged()},afterInitialize:function(){this.fieldId=this.options.fieldId,this.strategyId=this.options.strategyId,this.mappings=this.options.mappings,this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.numMenuOptions=3,this.applyFadingStyle(),this.fadeIn(),this.setupModel(),this.panelId=9000011,this.updatePanelActivity("impression",this.panelId);var n=this;this.on("render",e.bind(function(){this.$(".field").hover(function(){var e=t(this).data("signature");n.addFieldBorder(e)},function(){var e=t(this).data("signature");n.removeFieldBorder(e)}),this.model.mappings.length>0&&(this.$("#mapping")[0].selectedIndex=1),this.mappingChanged()},this)),this.render()}});return d.prototype.formTypeChanged=l.prototype.formTypeChanged,d}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.identity_helper_panel=e.template(function(e,t,n,a,i){function r(e){var t,a,i,r="";return r+='\n      <a href="#" class="mmKeyOption identity" data-id="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof t===f?t=t.call(e,{hash:{}}):t===y&&(t=b.call(e,"this.id",{hash:{}})),r+=v(t)+'">\n        <div class="element" id="mask">\n        <span class="panelLeft" title="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"label"),typeof t===f?t=t.call(e,{hash:{}}):t===y&&(t=b.call(e,"this.label",{hash:{}})),r+=v(t)+'">\n            <img class="iconPos" src="',t="/pages/images/2015panels/identity_green.png",p=n.assetUrl,a=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===f?a.call(e,t,{hash:{}}):a===y?b.call(e,"assetUrl",t,{hash:{}}):a,r+=v(t)+'"\n                 style="width:42px;height:21px;"/>\n          ',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"label"),a="mm_identity_helper_use",p=n.intl,i=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===f?i.call(e,a,t,{hash:{}}):i===y?b.call(e,"intl",a,t,{hash:{}}):i,r+=v(t)+'\n        </span>\n        <span class="panelRight">\n          <img class="loading" style="display:none;" src="',t="/pages/images/ajax_loader.gif",p=n.assetUrl,a=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===f?a.call(e,t,{hash:{}}):a===y?b.call(e,"assetUrl",t,{hash:{}}):a,r+=v(t)+'"/>\n        </span>\n        </div>\n      </a>\n    '}function s(e){var t,a,i="";return i+="\n          ",t="mm_identity_helper_customize",p=n.intl,a=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===f?a.call(e,t,{hash:{}}):a===y?b.call(e,"intl",t,{hash:{}}):a,i+=v(t)+"\n        "}function o(e){var t,a,i="";return i+="\n          <b>",t="mm_identity_helper_customize_pre_setup_1",p=n.intl,a=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===f?a.call(e,t,{hash:{}}):a===y?b.call(e,"intl",t,{hash:{}}):a,i+=v(t)+"</b> ",t="mm_identity_helper_customize_pre_setup_2",p=n.intl,a=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===f?a.call(e,t,{hash:{}}):a===y?b.call(e,"intl",t,{hash:{}}):a,i+=v(t)+"\n        "}function l(e,t){var a,i,r="";return r+="\n              ",p=n.masked,a=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"masked"),i=n.unless,u=g.program(8,d,t),u.hash={},u.fn=u,u.inverse=g.noop,a=i.call(e,a,u),(a||0===a)&&(r+=a),r+="\n            "}function d(e){var t,a="";return a+='\n              <option value="',p=n.id,t=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof t===f?t=t.call(e,{hash:{}}):t===y&&(t=b.call(e,"id",{hash:{}})),a+=v(t)+'">',p=n.label,t=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"label"),typeof t===f?t=t.call(e,{hash:{}}):t===y&&(t=b.call(e,"label",{hash:{}})),a+=v(t)+"</option>\n              "}function c(e){var t,a="";return a+='\n              <option value="',p=n.email,t=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),typeof t===f?t=t.call(e,{hash:{}}):t===y&&(t=b.call(e,"email",{hash:{}})),a+=v(t)+'">',p=n.email,t=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),typeof t===f?t=t.call(e,{hash:{}}):t===y&&(t=b.call(e,"email",{hash:{}})),a+=v(t)+"</option>\n            "}n=n||e.helpers,a=a||e.partials;var m,h,p,u,_="",g=this,f="function",b=n.helperMissing,y=void 0,v=this.escapeExpression;return _+='<div class="newpanel">\n  <div class="left-panel">\n      <span class="errorBtn disabled errorReportLink" style="display:none;cursor:pointer;"><div class="element">\n          <span class="panelLeft">\n              <a>',m="mm_email_helper_serverIsDown",p=n.intl,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),m=typeof h===f?h.call(t,m,{hash:{}}):h===y?b.call(t,"intl",m,{hash:{}}):h,_+=v(m)+'</a>\n          </span>\n          <span class="panelRight">\n              <a>',m="mm_email_helper_tryAgainLater",p=n.intl,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),m=typeof h===f?h.call(t,m,{hash:{}}):h===y?b.call(t,"intl",m,{hash:{}}):h,_+=v(m)+"</a>\n          </span>\n      </div></span>\n    ",p=n.identities,m=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"identities"),h=n.each,u=g.program(1,r,i),u.hash={},u.fn=u,u.inverse=g.noop,m=h.call(t,m,u),(m||0===m)&&(_+=m),_+='\n    <a href="#" class="mmKeyOption customize">\n      <div class="element" id="mask">\n      <span class="panelLeft">\n          <img class="iconPos" src="',m="/pages/images/2015panels/identity_green.png",p=n.assetUrl,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),m=typeof h===f?h.call(t,m,{hash:{}}):h===y?b.call(t,"assetUrl",m,{hash:{}}):h,_+=v(m)+'"\n               style="width:42px;height:21px;"/>\n        ',p=n.hasIdentities,m=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasIdentities"),h=n["if"],u=g.program(3,s,i),u.hash={},u.fn=u,u.inverse=g.program(5,o,i),m=h.call(t,m,u),(m||0===m)&&(_+=m),_+='\n      </span>\n      </div>\n    </a>\n\n    <div class="customizeDiv" style="display: none;">\n      <div class="identity-header">',m="mm_identity_helper_customize_title",p=n.intl,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),m=typeof h===f?h.call(t,m,{hash:{}}):h===y?b.call(t,"intl",m,{hash:{}}):h,_+=v(m)+'</div>\n      <div style="display:inline-block;vertical-align:top;padding-left: 15px;">\n        <div class="fieldset">\n          <label class="small"><input type="checkbox" id="has_address" value="1" checked/> <span>',m="mm_identity_helper_address",p=n.intl,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),m=typeof h===f?h.call(t,m,{hash:{}}):h===y?b.call(t,"intl",m,{hash:{}}):h,_+=v(m)+'</span></label>\n          <select id="address_id">\n            ',p=n.addresses,m=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"addresses"),h=n.each,u=g.program(7,l,i),u.hash={},u.fn=u,u.inverse=g.noop,m=h.call(t,m,u),(m||0===m)&&(_+=m),_+='\n          </select>\n        </div>\n        <div class="fieldset">\n          <label class="small"><input type="checkbox" id="has_email" value="1" checked/> <span>',m="mm_identity_helper_email",p=n.intl,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),m=typeof h===f?h.call(t,m,{hash:{}}):h===y?b.call(t,"intl",m,{hash:{}}):h,_+=v(m)+'</span></label>\n          <select id="email">\n            <option value="mask">',m="mm_identity_helper_email_mask",p=n.intl,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),m=typeof h===f?h.call(t,m,{hash:{}}):h===y?b.call(t,"intl",m,{hash:{}}):h,_+=v(m)+"</option>\n            ",p=n.email,m=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"email"),h=n["if"],u=g.program(10,c,i),u.hash={},u.fn=u,u.inverse=g.noop,m=h.call(t,m,u),(m||0===m)&&(_+=m),_+='\n          </select>\n        </div>\n        <div class="fieldset">\n          <label class="small"><input type="checkbox" id="has_phone" value="1" checked/> <span>',m="mm_identity_helper_phone",p=n.intl,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),m=typeof h===f?h.call(t,m,{hash:{}}):h===y?b.call(t,"intl",m,{hash:{}}):h,_+=v(m)+'</span></label>\n          <select id="phone">\n            <option value="mask">',m="mm_identity_helper_phone_mask",p=n.intl,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),m=typeof h===f?h.call(t,m,{hash:{}}):h===y?b.call(t,"intl",m,{hash:{}}):h,_+=v(m)+'</option>\n            <option value="real">',m="mm_identity_helper_phone_real",p=n.intl,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),m=typeof h===f?h.call(t,m,{hash:{}}):h===y?b.call(t,"intl",m,{hash:{}}):h,_+=v(m)+'</option>\n          </select>\n        </div>\n        <div class="fieldset">\n          <label class="full"><input type="checkbox" id="password" value="1" checked/> ',m="mm_identity_helper_password",p=n.intl,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),m=typeof h===f?h.call(t,m,{hash:{}}):h===y?b.call(t,"intl",m,{hash:{}}):h,_+=v(m)+'</label>\n        </div>\n        <div class="fieldset">\n          <label class="full"><input type="checkbox" id="card" value="1" checked/> ',m="mm_identity_helper_card",p=n.intl,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),m=typeof h===f?h.call(t,m,{hash:{}}):h===y?b.call(t,"intl",m,{hash:{}}):h,_+=v(m)+'</label>\n        </div>\n        <div class="fieldset">\n          <label class="small"><input type="checkbox" id="save" value="1" checked /> ',m="mm_identity_helper_save_identity",p=n.intl,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),m=typeof h===f?h.call(t,m,{hash:{}}):h===y?b.call(t,"intl",m,{hash:{}}):h,_+=v(m)+'</label>\n          <input type="text" id="idName" value="',p=n.uniqueName,m=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"uniqueName"),typeof m===f?m=m.call(t,{hash:{}}):m===y&&(m=b.call(t,"uniqueName",{hash:{}})),_+=v(m)+'" placeholder="',p=n.uniqueName,m=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"uniqueName"),typeof m===f?m=m.call(t,{hash:{}}):m===y&&(m=b.call(t,"uniqueName",{hash:{}})),_+=v(m)+'"/>\n        </div>\n      </div>\n      <div class="alert-error" style="display: none">',m="mm_identity_helper_save_identity_error",p=n.intl,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),m=typeof h===f?h.call(t,m,{hash:{}}):h===y?b.call(t,"intl",m,{hash:{}}):h,_+=v(m)+'</div>\n      <br/>\n      <input type="button" class="btn btn-primary fillCustomize" value="',m="mm_identity_helper_autofill_form",p=n.intl,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),m=typeof h===f?h.call(t,m,{hash:{}}):h===y?b.call(t,"intl",m,{hash:{}}):h,_+=v(m)+'"/>\n      <img class="loading" style="display:none;" src="',m="/pages/images/ajax_loader.gif",p=n.assetUrl,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),m=typeof h===f?h.call(t,m,{hash:{}}):h===y?b.call(t,"assetUrl",m,{hash:{}}):h,_+=v(m)+'"/>\n      <a href="#" id="more">',m="mm_identity_helper_more_options",p=n.intl,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),m=typeof h===f?h.call(t,m,{hash:{}}):h===y?b.call(t,"intl",m,{hash:{}}):h,_+=v(m)+"</a>\n    </div>\n    ",m=t,m=g.invokePartial(a["common.auto_fill_with"],"common.auto_fill_with",m,n,a),(m||0===m)&&(_+=m),_+="\n  </div>\n  ",m=t,m=g.invokePartial(a["common.header"],"common.header",m,n,a),(m||0===m)&&(_+=m),_+="\n</div>"}),ABINE_DNTME.CompiledTemplates.identity_helper_panel}),ABINE_DNTME.define("abine/views/identityHelperPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/intl","abine/proxies","abine/password"],function(e,t,n,a,i,r,s,o){function l(){for(var e=[],t="0123456789ABCDEF",n=0;n<32;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);e[12]="4",e[16]=t.substr(3&e[16]|8,1);var a=e.join("");return a}var d=i.extend({templateName:"identity_helper_panel",events:{"click a.identity":"fillWithIdentity","click .help-link":"openHelp","click a.customize":"customize","change select":"valueChanged","click .errorReportLink":"makeErrorReport","change #idName":"valueChanged","click #more":"moreOptions","click .fillCustomize":"fillCustomize"},makeErrorReport:function(){s.webapp.openHelp(""),this.closePanel()},openHelp:function(){s.webapp.openHelp("/faq/guides-autofillIdentities"),this.closePanel()},moreOptions:function(){s.webapp.openPage("#/client/identities/add"),this.closePanel()},valueChanged:function(e){t("input[type=checkbox]",t(e.target).parent()).prop("checked",!0)},afterInitialize:function(){this.fieldId=this.options.fieldId,this.panelId=7000061,this.updatePanelActivity("impression",this.panelId,this.fieldId,!1),this.bindBaseEvents(),this.applyFadingStyle(),this.fadeIn(),this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.model={panelType:"identity",identities:new a.IdentityCollection,addresses:new a.AddressCollection,emails:[],phones:[],mapper:!!this.contentManager.preferences.getPref("mapping:mapper"),showMapper:this.contentManager.preferences.isMapper(),show_settings:!this.contentManager.preferences.getPref("identity-settings-seen")};var t=new a.ShieldedEmailCollection;t.fetchAll({success:e.bind(function(){t.length>0&&(this.primaryEmail=t.at(0),this.model.email=this.primaryEmail.get("email")),this.model.addresses.fetchAll({success:e.bind(function(){this.model.addresses.each(function(e){"Masked Card"==e.get("label")&&e.set("masked",!0)}),this.model.identities.fetchAll({success:e.bind(function(){this.numMenuOptions=this.model.identities.length,this.model.hasIdentities=this.numMenuOptions>0;for(var t=0;t<this.numMenuOptions;t++)this.bind("enter"+t,function(e,t){this.fillWithIdentity(e,t)},this);for(var n=r.getText("mm_identity_helper_save_identity_placeholder")+" ",a=1;;){var i=e.find(this.model.identities.models,function(e){return e.get("label").toLowerCase()==(n+a).toLowerCase()});if(!i)break;a++}this.model.uniqueName=n+a,this.render()},this)})},this)})},this)})},customize:function(){this.ignoreExplicitClose=!0,this.ignoreBlur(!0),this.$(".customizeDiv").show(),this.$(".mmKeyOption").hide(),this.autoResize()},fillCustomize:function(){function t(){var e=this.$("a.customize");e.data("id",n.id),i.fillWithIdentity({target:e[0]},null,n)}var n={};this.$("#has_address")[0].checked&&(n.address_id=this.$("#address_id").val(),n.address=e.find(this.model.addresses.models,function(e){return e.id==n.address_id}).toJSON()),this.$("#has_email")[0].checked?n.email=this.$("#email").val():n.email="none",this.$("#has_phone")[0].checked?n.phone=this.$("#phone").val():n.phone="none",this.$("#password")[0].checked&&(n.password="strong"),this.$("#card")[0].checked&&(n.card="mask"),n=new a.Identity(n);var i=this;if(this.$(".alert-error").hide(),this.$("#save")[0].checked){if(""==this.$("#idName").val())return this.$(".alert-error").show(),void this.autoResize();this.$(".customizeDiv .loading").show(),n.set("label",this.$("#idName").val()),n.save({},{success:t})}else n.id=l(),t()},fillWithIdentity:function(n,i,r){n&&n.preventDefault&&n.preventDefault();var s;if(i||0==i){var l=e(this.el.children[0].children).filter(function(e){return t(e).is("a")&&!t(e).hasClass("disabled")});s=t(l[i]).data("id")}else s=t(n.target).closest("a").data("id");r=r||e.find(this.model.identities.models,function(e){return e.get("id")==s}),t("a.mmKeyOption",this.el).each(function(e,n){t(n).data("id")==r.id&&t("img.loading",n).show()}),r=r.toJSON();var d=this;e.async.series([function(t){if("mask"==r.email){var n=e.find(d.options.allDataTypes,function(e){return e.match(/email/i)});if(n&&d.primaryEmail){delete r.email;var a=d.primaryEmail.generateDisposable(d.options.domain,"identity-panel");return void a.save({},{success:function(){r.masked_email=a.getAddress(),t()},error:function(){d.$(".errorBtn").show(),d.$(".loading").hide(),d.autoResize()}})}delete r.email}else r.email&&"none"!=r.email||delete r.email;t()},function(e){if("mask"==r.phone){var t=new a.ShieldedPhoneCollection;return void t.fetchAll({success:function(){if(t.length>0&&t.at(0).get("country_code")){var n=t.at(0),a=n.generateDisposable();a.save({filling:!0},{success:function(){r.phone=a.toJSON(),e()},error:function(){e()}})}else delete r.phone,e()}})}if("real"==r.phone){var t=new a.ShieldedPhoneCollection;return void t.fetchAll({success:function(){t.length>0&&t.at(0).get("country_code")?r.phone=t.at(0).toJSON():delete r.phone,e()}})}if(r.phone&&"none"!=r.phone){var n=r.phone.split(" ");r.phone={country_code:n[0].substr(1),number:n[1]}}else delete r.phone;e()},function(e){"strong"==r.password?r.password=o.generateNoSpecialCharsPassword():delete r.password,e()}],function(){r.address?r.address&&(r.first_name||r.last_name||(r.address.first_name&&(r.first_name=r.address.first_name),r.address.last_name&&(r.last_name=r.address.last_name)),delete r.address.first_name,delete r.address.last_name):delete r.address,r.card&&"none"!=r.card||delete r.card,d.fillFields("identity",r,"identity"),d.updatePanelActivity("masked",d.panelId,d.fieldId,!1),d.closePanel()})}});return d}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("notification_helper.card",e.template(function(e,t,n){n=n||e.helpers;var a,i,r,s="",o="function",l=n.helperMissing,d=void 0,c=this.escapeExpression;return s+='<div class="body-notification outerCard opaque" data-id="',r=n.id,a=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"id"),typeof a===o?a=a.call(t,{hash:{}}):a===d&&(a=l.call(t,"id",{hash:{}})),s+=c(a)+'" data-pos="',r=n.card_position,a=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"card_position"),typeof a===o?a=a.call(t,{hash:{}}):a===d&&(a=l.call(t,"card_position",{hash:{}})),s+=c(a)+'">\n  <div class="creditcardfont" style="color:rgb(80,80,80);width:336px;margin:auto;">\n    <div class="innerCard set-brand ',r=n.brand,a=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"brand"),typeof a===o?a=a.call(t,{hash:{}}):a===d&&(a=l.call(t,"brand",{hash:{}})),s+=c(a)+'"\n         style="background-image: url(pages/images/credit_cards/',r=n.brand,a=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"brand"),typeof a===o?a=a.call(t,{hash:{}}):a===d&&(a=l.call(t,"brand",{hash:{}})),s+=c(a)+'.png);">\n\n      <div class="cardNumber">',r=n.getSeparatedCardNumber,a=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getSeparatedCardNumber"),typeof a===o?a=a.call(t,{hash:{}}):a===d&&(a=l.call(t,"getSeparatedCardNumber",{hash:{}})),s+=c(a)+'</div>\n      <div class="cardExpiration">',a="mm_payment_helper_expDate",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+' <span class="expiration">',r=n.getExpiry,a=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getExpiry"),typeof a===o?a=a.call(t,{hash:{}}):a===d&&(a=l.call(t,"getExpiry",{hash:{}})),s+=c(a)+'</span>\n      </div>\n      <div class="cardCVC">',a="mm_payment_helper_cvc",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+' <span class="cvc">',r=n.getCVC,a=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getCVC"),typeof a===o?a=a.call(t,{hash:{}}):a===d&&(a=l.call(t,"getCVC",{hash:{}})),s+=c(a)+'</span></div>\n      <div class="cardName">',r=n.first_name,a=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"first_name"),typeof a===o?a=a.call(t,{hash:{}}):a===d&&(a=l.call(t,"first_name",{hash:{}})),s+=c(a)+" ",r=n.last_name,a=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"last_name"),typeof a===o?a=a.call(t,{hash:{}}):a===d&&(a=l.call(t,"last_name",{hash:{}})),s+=c(a)+"</div>\n    </div>\n  </div>\n</div>"}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("notification_helper.card_actions",e.template(function(e,t,n){n=n||e.helpers;var a,i,r,s="",o="function",l=n.helperMissing,d=void 0,c=this.escapeExpression;return s+='<div style="height:60px;font-size:12px;" class="actions-short">\n  <div style="float:left;">\n    <div style="text-align:center;">Made a mistake?</div>\n    <div style="text-align:center;padding-bottom:5px;">\n      <input type="button" id="getRefund" class="btn btn-primary" style="text-align:center;font-size:12px"\n             value="Close Card and Get Refund"/>\n    </div>\n  </div>\n  <div style="float:right;">\n    <div style="text-align:center;">Need some help?</div>\n    <div style="text-align:center;padding-bottom:5px;">\n      <input type="button" id="chatNow" class="btn btn-primary" style="text-align:center;font-size:12px"\n             value="Contact Blur Support Team"/>\n    </div>\n  </div>\n</div>\n<div style="font-size:12px;display: none;" class="actions-tall">\n  <div style="clear:both;text-align: center;">\n    <div style="text-align:center;" class="refund-status"><img class="loading" src="',a="/pages/images/ajax_loader.gif",r=n.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"assetUrl",a,{hash:{}}):i,s+=c(a)+'"/> Closing card.  Please wait...</div>\n  </div>\n  <div style="clear:both;margin-top:20px;">\n    <div style="text-align:center;">Need some help?</div>\n    <div style="text-align:center;padding-bottom:5px;">\n      <input type="button" id="chatNow" class="btn btn-primary" style="text-align:center;font-size:12px"\n             value="Contact Blur Support Team"/>\n    </div>\n  </div>\n</div>'}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("notification_helper.card_address",e.template(function(e,t,n){n=n||e.helpers;var a,i,r,s="",o="function",l=n.helperMissing,d=void 0,c=this.escapeExpression;return s+='<div style="margin: 10px 25px;text-align:center;">\n  <div style="margin:10px 0px 5px 0px;font-size:15;color:#921111;">\n    ',a="mm_payment_helper_help_1_1",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+" <b>",a="mm_payment_helper_help_1_2",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+'</b>:\n  </div>\n</div>\n<div id="addressAndArrows" style="height:90px;">\n  <div style="float:left;margin-left:20px;margin-top:20px;">\n    <img src="',a="/pages/images/2015panels/arrow_pointing_right.png",r=n.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"assetUrl",a,{hash:{}}):i,s+=c(a)+'"/>\n  </div>\n  <div style="float:left;text-align:center;font-weight:bold;font-size:13pt;line-height:130%;width:250px;">\n    <span style="font-size:12pt;">(',a="mm_notification_helper_anyName",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+')</span><br/>\n    280 SUMMER STREET<br/>\n    BOSTON MA 02210\n  </div>\n  <div style="float:left;margin-top:20px;">\n    <img src="',a="/pages/images/2015panels/arrow_pointing_left.png",r=n.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"assetUrl",a,{hash:{}}):i,s+=c(a)+'"/>\n  </div>\n</div>'}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("notification_helper.login_register_form",e.template(function(e,t,n){n=n||e.helpers;var a,i,r,s="",o="function",l=n.helperMissing,d=void 0,c=this.escapeExpression;return s+='<span id="register-dialog" style="display:none;">\n <div class="body-notification"><img src="',a="/images/Icon.png",r=n.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"assetUrl",a,{hash:{}}):i,s+=c(a)+'"/>\n   <span class="signin-content" style="display:none;">',a="mm_notification_helper_login_to_blur",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+'</span>\n   <span class="register-content" style="display:none;">',a="mm_notification_helper_finish_blur_setup",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+'</span>\n </div>\n  <div class="login_form">\n    <div id="welcome-message" style="margin:0px 35px;">\n      <span class="signin-content"  style="display:none;">',r=n.login_content,a=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"login_content"),r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+'</span>\n      <span class="register-content" style="display:none;">',r=n.register_content,a=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"register_content"),r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+'</span>\n    </div>\n\n    <div id="error" style="display:none;color:red;text-transform:none;"></div>\n    <div id="progress-section" style="display:none;margin-top:10px;">\n      <div class="progress progress-striped active">\n        <div class="bar bar-info" style="width: 100%;"></div>\n      </div>\n      <div class="loading-message" style="text-transform:none;"></div>\n    </div>\n\n    <div id="form-div">\n      <div id="register-form" style="display:none;">\n        <div style="clear:both;display:block;width:0px;max-width:0px;height:0px;max-height:0px;overflow:hidden;opacity:0;"\n             class="autofill-grabber"><input type="text" autocomplete="off" id="login_email" tabindex="-1"><input type="password" autocomplete="off" id="login_password" tabindex="-1">\n        </div>\n        <input id="register-protect-email" type="text" value="',r=n.email,a=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"email"),typeof a===o?a=a.call(t,{hash:{}}):a===d&&(a=l.call(t,"email",{hash:{}})),s+=c(a)+'" style="width:230px;height:25;margin:10px 10px 5px 10px;" placeholder="',a="mm_dntme_enter_email_simple",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+'"/><br/>\n        <input id="register-password-field" type="password" style="width:230px;height:25;margin:5px 10px 10px 10px;" placeholder="',a="mm_dntme_enter_password_simple",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+'"/>\n        <input id="register-confirm-password-field" type="password" style="width:230px;height:25;margin:5px 10px 10px 10px;" placeholder="Confirm password"/>\n        <div style="margin:10px 0px;">\n          <input type="button" id="register" class="btn btn-primary" value=\'',a="mm_dntme_create_account",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+'\' style="margin-right: 10px;"/>or<a href="" id="signin-link" style="margin-left: 10px;">',a="mm_dntme_sign_in",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+'</a>\n        </div>\n      </div>\n\n      <div id="signin-form" style="display:none;">\n        <div id="login-section">\n          <div style="clear:both;display:block;width:0px;max-width:0px;height:0px;max-height:0px;overflow:hidden;opacity:0;"\n               class="autofill-grabber"><input type="text" autocomplete="off" id="login_email" tabindex="-1"><input type="password" autocomplete="off" id="login_password" tabindex="-1">\n          </div>\n          <input id="signin-protect-email" type="text" value="',r=n.oldEmail,a=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"oldEmail"),typeof a===o?a=a.call(t,{hash:{}}):a===d&&(a=l.call(t,"oldEmail",{hash:{}})),s+=c(a)+'" style="width:230px;height:25;margin:10px 10px 5px 10px;" placeholder="',a="mm_dntme_enter_email_simple",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+'"/><br/>\n          <input id="signin-password-field" type="password" style="width:230px;height:25;margin:5px 10px 10px 10px;" placeholder="',a="mm_dntme_enter_password_simple",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+'"/>\n        </div>\n        <div id="mfa-section" style="display:none;">\n          <input type="text" id="mfa-code-field" style="width:140px;height:28px;margin:10px 5px" name="mfa_code" placeholder="Authentication Code" />\n        </div>\n        <div style="margin-top:5px;">\n          <input type="button" id="login" class="btn btn-success" value=\'',a="mm_dntme_sign_in",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+'\' style="margin-right: 10px;"/>or<a href="" id="register-link" style="margin-left: 10px;">',a="mm_dntme_create_an_account",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,
s+=c(a)+'</a>\n        </div>\n        <div style="margin:10px 0px;">\n          <a href="" id="forgotPassword">',a="mm_dntme_forgot_my_password",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+"</a><br/>\n        </div>\n      </div>\n\n    </div>\n\n  </div>\n</span>"}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("notification_helper.masked_card",e.template(function(e,t,n){n=n||e.helpers;var a,i,r,s="",o="function",l=n.helperMissing,d=void 0,c=this.escapeExpression;return s+='<div class="body-notification outerCard" style="margin-top: 0px;">\n  <div id="maskedCard" class="creditcardfont">\n    <div style="background-repeat:no-repeat;background-size:100%;height:181px;background-image:url(\'',a="/pages/images/2015panels/masked_card_blank.png",r=n.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"assetUrl",a,{hash:{}}):i,s+=c(a)+'\');">\n      <br style="clear:both;"/>\n      <div style="text-align:right;margin-right:20px;color:white;">\n        <span style="font-family:\'Open Sans\', \'Helvetica Neue\', Arial, sans-serif !important;font-weight:bold;font-size:24pt;" id="originalValue">',r=n.getOriginalValue,a=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getOriginalValue"),typeof a===o?a=a.call(t,{hash:{}}):a===d&&(a=l.call(t,"getOriginalValue",{hash:{}})),s+=c(a)+"</span>\n        <br/>\n        <span style=\"font-family:'Open Sans', 'Helvetica Neue', Arial, sans-serif !important;font-size:11pt;\">",a="mm_notification_helper_at",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+"&nbsp;</span><span id=\"domain\" style=\"font-family:'Open Sans', 'Helvetica Neue', Arial, sans-serif !important;font-weight:bold;font-size:11pt;\">",r=n.getDomain,a=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getDomain"),typeof a===o?a=a.call(t,{hash:{}}):a===d&&(a=l.call(t,"getDomain",{hash:{}})),s+=c(a)+'</span>\n      </div>\n      <div style="text-align:center;margin-top:5px;color:white;">\n        <h3 id="cardNumber" style="font-family:\'Open Sans\', \'Helvetica Neue\', Arial, sans-serif !important;font-weight:lighter;">',r=n.getSeparatedCardNumber,a=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getSeparatedCardNumber"),typeof a===o?a=a.call(t,{hash:{}}):a===d&&(a=l.call(t,"getSeparatedCardNumber",{hash:{}})),s+=c(a)+"</h3>\n      </div>\n      <div style=\"font-size:15px;color:white;margin-left:25px;font-family:'Open Sans', 'Helvetica Neue', Arial, sans-serif !important;font-weight:bold;\">\n        <span style=\"float:left;\">",a="mm_payment_helper_expDate",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+' <span id="expiration">',r=n.getExpiry,a=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getExpiry"),typeof a===o?a=a.call(t,{hash:{}}):a===d&&(a=l.call(t,"getExpiry",{hash:{}})),s+=c(a)+'</span></span> <span style="float:right;margin-right:115px;"> ',a="mm_payment_helper_cvc",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+' <span id="cvc">',r=n.getCVC,a=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getCVC"),typeof a===o?a=a.call(t,{hash:{}}):a===d&&(a=l.call(t,"getCVC",{hash:{}})),s+=c(a)+"</span></span>\n      </div>\n    </div>\n  </div>\n</div>"}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_card_declined_notification=e.template(function(e,t,n,a,i){function r(e){var t,a="";return a+="\n      ",d=n.declined,t=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"declined"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"description"),typeof t===p?t=t.call(e,{hash:{}}):t===_&&(t=u.call(e,"declined.description",{hash:{}})),a+=g(t)+"\n    "}function s(){return"\n      Looks like this merchant can't or won't process this card.\n      <ul>\n        <li>Make sure you used \"Abine address\".</li>\n        <li>Make sure the expiry dates and CVV was filled correctly.</li>\n        <li>Masked cards work only with US merchants.</li>\n      </ul>\n      If that does not help, close it, and use an alternative. Sorry!\n    "}n=n||e.helpers,a=a||e.partials;var o,l,d,c,m="",h=this,p="function",u=n.helperMissing,_=void 0,g=this.escapeExpression;return m+='<div class="panel">\n  <!-- Default header (actually footer) for the panels -->\n  <div class="header" id="default-header" style="border-top: 0px solid;">\n    <div class="logo-link">\n      <img style="width:63px;height:16px;" src="',o="/pages/images/blur_logo_ext_window.png",d=n.assetUrl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"assetUrl",o,{hash:{}}):l,m+=g(o)+'"/>\n    </div>\n    <div class="links-wrapper">\n      <div class="newlinks close-link">\n        <img id="close" class="close-notification" src="',o="/pages/images/2015panels/panel_xclose.png",d=n.assetUrl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"assetUrl",o,{hash:{}}):l,m+=g(o)+'"/>\n      </div>\n    </div>\n  </div>\n\n  <div style="margin:10px -5px 10px -10px;padding:5px 20px;" class="alert-error">\n    <div style="font-size: 14pt;font-weight: bold;margin-bottom:5px;">',d=n.declined,o=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"declined"),o=null===o||void 0===o||o===!1?o:ABINE_DNTME.Duckbone.Handlebars.getAttr(o,"title"),typeof o===p?o=o.call(t,{hash:{}}):o===_&&(o=u.call(t,"declined.title",{hash:{}})),m+=g(o)+"</div>\n    ",d=n.declined,o=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"declined"),o=null===o||void 0===o||o===!1?o:ABINE_DNTME.Duckbone.Handlebars.getAttr(o,"description"),l=n["if"],c=h.program(1,r,i),c.hash={},c.fn=c,c.inverse=h.program(3,s,i),o=l.call(t,o,c),(o||0===o)&&(m+=o),m+="\n  </div>\n\n  ",o=t,o=h.invokePartial(a["notification_helper.masked_card"],"notification_helper.masked_card",o,n,a),(o||0===o)&&(m+=o),m+="\n  ",o=t,o=h.invokePartial(a["notification_helper.card_address"],"notification_helper.card_address",o,n,a),(o||0===o)&&(m+=o),m+="\n  ",o=t,o=h.invokePartial(a["notification_helper.card_actions"],"notification_helper.card_actions",o,n,a),(o||0===o)&&(m+=o),m+="\n\n</div>"}),ABINE_DNTME.CompiledTemplates.notification_helper_card_declined_notification}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_change_password=e.template(function(e,t,n){n=n||e.helpers;var a,i,r,s="",o="function",l=n.helperMissing,d=void 0,c=this.escapeExpression;return s+='<div class="panel">\n  <div class="close-notification">\n      <span class="notf-close-icon" id="paneHover"><img class="close-image" src="',a="/pages/images/manage/dd_close_icon.png",r=n.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"assetUrl",a,{hash:{}}):i,s+=c(a)+'"/></span>\n  </div>\n  <div class="body-notification"><img src="',a="/images/Icon.png",r=n.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"assetUrl",a,{hash:{}}):i,s+=c(a)+'"/>',a="mm_notification_helper_change_password_msg",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+'</div>\n  <input type="button" class="btn done" id="ignore" style="width:40%;text-align:center;" value="',a="mm_notification_helper_ignore",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+'" />\n  <input type="button" class="btn btn-success done" id="save" style="width:35%;text-align:center;" value="',a="mm_notification_helper_save_login",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+'" />\n  <div class="links settings-link" data-highlight="rememberaccounts" title="',a="mm_notification_helper_settings",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+'">\n      <img class="header-icon" src="',a="/pages/images/dnt-ui-header-settings.png",r=n.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"assetUrl",a,{hash:{}}):i,s+=c(a)+'">\n  </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.notification_helper_change_password}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_checkout_growl_notification=e.template(function(e,t,n,a,i){function r(e,t){var a,i,r="";return r+="\n      ",p=n.isOfferCard,a=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"isOfferCard"),i=n["if"],u=g.program(2,s,t),u.hash={},u.fn=u,u.inverse=g.noop,a=i.call(e,a,u),(a||0===a)&&(r+=a),r+="\n\n      ",p=n.isRealCard,a=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"isRealCard"),i=n["if"],u=g.program(4,o,t),u.hash={},u.fn=u,u.inverse=g.noop,a=i.call(e,a,u),(a||0===a)&&(r+=a),r+="\n\n      ",p=n.isOldMaskedCard,a=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"isOldMaskedCard"),i=n["if"],u=g.program(6,l,t),u.hash={},u.fn=u,u.inverse=g.noop,a=i.call(e,a,u),(a||0===a)&&(r+=a),r+="\n\n      ",p=n.isNewMaskedCard,a=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"isNewMaskedCard"),i=n["if"],u=g.program(8,d,t),u.hash={},u.fn=u,u.inverse=g.noop,a=i.call(e,a,u),(a||0===a)&&(r+=a),r+="\n\n      ",p=n.isNewRealCard,a=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"isNewRealCard"),i=n["if"],u=g.program(10,c,t),u.hash={},u.fn=u,u.inverse=g.noop,a=i.call(e,a,u),(a||0===a)&&(r+=a),r+="\n\n    "}function s(e){var t,a="";return a+='\n        <div class="body-notification outerCard opaque" data-id="',p=n.id,t=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof t===f?t=t.call(e,{hash:{}}):t===y&&(t=b.call(e,"id",{hash:{}})),a+=v(t)+'" data-pos="',p=n.card_position,t=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"card_position"),typeof t===f?t=t.call(e,{hash:{}}):t===y&&(t=b.call(e,"card_position",{hash:{}})),a+=v(t)+'">\n          <div class="creditcardfont" style="color:rgb(80,80,80);width:336px;margin:auto;">\n            <div class="innerCard ',p=n.brand,t=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"brand"),typeof t===f?t=t.call(e,{hash:{}}):t===y&&(t=b.call(e,"brand",{hash:{}})),a+=v(t)+'_offer"\n                 style="background-image: url(pages/images/credit_cards/',p=n.brand,t=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"brand"),typeof t===f?t=t.call(e,{hash:{}}):t===y&&(t=b.call(e,"brand",{hash:{}})),a+=v(t)+'_offer.png);">\n            </div>\n          </div>\n        </div>\n      '}function o(e){var t,a,i="";return i+='\n        <div class="body-notification outerCard opaque" data-id="',p=n.id,t=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof t===f?t=t.call(e,{hash:{}}):t===y&&(t=b.call(e,"id",{hash:{}})),i+=v(t)+'" data-pos="',p=n.card_position,t=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"card_position"),typeof t===f?t=t.call(e,{hash:{}}):t===y&&(t=b.call(e,"card_position",{hash:{}})),i+=v(t)+'">\n          <div class="creditcardfont" style="color:rgb(80,80,80);width:336px;margin:auto;">\n            <div class="innerCard set-brand ',p=n.brand,t=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"brand"),typeof t===f?t=t.call(e,{hash:{}}):t===y&&(t=b.call(e,"brand",{hash:{}})),i+=v(t)+'"\n                 style="background-image: url(pages/images/credit_cards/',p=n.brand,t=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"brand"),typeof t===f?t=t.call(e,{hash:{}}):t===y&&(t=b.call(e,"brand",{hash:{}})),i+=v(t)+'.png);">\n\n              <div class="cardNumber">',p=n.getSeparatedMaskedCardNumber,t=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getSeparatedMaskedCardNumber"),typeof t===f?t=t.call(e,{hash:{}}):t===y&&(t=b.call(e,"getSeparatedMaskedCardNumber",{hash:{}})),i+=v(t)+'</div>\n              <div class="cardExpiration">',t="mm_payment_helper_expDate",p=n.intl,a=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===f?a.call(e,t,{hash:{}}):a===y?b.call(e,"intl",t,{hash:{}}):a,i+=v(t)+' <span class="expiration">',p=n.getMaskedExpiry,t=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getMaskedExpiry"),typeof t===f?t=t.call(e,{hash:{}}):t===y&&(t=b.call(e,"getMaskedExpiry",{hash:{}})),i+=v(t)+'</span>\n              </div>\n              <div class="cardCVC">',t="mm_payment_helper_cvc",p=n.intl,a=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===f?a.call(e,t,{hash:{}}):a===y?b.call(e,"intl",t,{hash:{}}):a,i+=v(t)+' <span class="cvc">',p=n.getMaskedVerification,t=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getMaskedVerification"),typeof t===f?t=t.call(e,{hash:{}}):t===y&&(t=b.call(e,"getMaskedVerification",{hash:{}})),i+=v(t)+'</span></div>\n              <div class="cardName">',p=n.first_name,t=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"first_name"),typeof t===f?t=t.call(e,{hash:{}}):t===y&&(t=b.call(e,"first_name",{hash:{}})),i+=v(t)+" ",p=n.last_name,t=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"last_name"),typeof t===f?t=t.call(e,{hash:{}}):t===y&&(t=b.call(e,"last_name",{hash:{}})),i+=v(t)+"</div>\n            </div>\n          </div>\n        </div>\n      "}function l(e){var t,a="";return a+='\n          <div class="body-notification outerCard opaque" data-id="',p=n.id,t=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof t===f?t=t.call(e,{hash:{}}):t===y&&(t=b.call(e,"id",{hash:{}})),a+=v(t)+'" data-pos="',p=n.card_position,t=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"card_position"),typeof t===f?t=t.call(e,{hash:{}}):t===y&&(t=b.call(e,"card_position",{hash:{}})),a+=v(t)+'">\n              <div class="creditcardfont" style="color:rgb(80,80,80);width:336px;margin:auto;">\n                  <div class="innerCard set-brand ',p=n.brand,t=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"brand"),typeof t===f?t=t.call(e,{hash:{}}):t===y&&(t=b.call(e,"brand",{hash:{}})),a+=v(t)+'"\n                       style="background-image: url(pages/images/masked_card_existing_blank.png);">\n                      <div class="dateCreatedText" style="color:white;font-family:\'Open-sans\',sans-serif;font-size:14px;left:172px;position:relative;top:60px;">Date Created:</div>\n                      <div class="dateCreated" style="top:70px;position:relative;color:white;font-family:\'Open-Sans\',sans-serif;font-size:15px;font-weight:600;left:172px;">',p=n.getCreatedDate,t=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getCreatedDate"),typeof t===f?t=t.call(e,{hash:{}}):t===y&&(t=b.call(e,"getCreatedDate",{hash:{}})),a+=v(t)+'</div>\n                      <div class="amountRemainingText" style="top:80px;position:relative;color:white;font-family:\'Open-Sans\',sans-serif;font-size:14px;left:172px;">Amount Remaining:</div>\n                      <div class="amountRemaining" style="top:90px;position:relative;color:white;font-family:\'Open-Sans\',sans-serif;font-size:15px;font-weight:600;left:172px;">',p=n.getOriginalValue,t=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getOriginalValue"),typeof t===f?t=t.call(e,{hash:{}}):t===y&&(t=b.call(e,"getOriginalValue",{hash:{}})),a+=v(t)+"</div>\n                  </div>\n              </div>\n          </div>\n      "}function d(e){var t,a="";return a+='\n        <div class="body-notification outerCard opaque" data-id="',p=n.id,t=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof t===f?t=t.call(e,{hash:{}}):t===y&&(t=b.call(e,"id",{hash:{}})),a+=v(t)+'" data-pos="',p=n.card_position,t=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"card_position"),typeof t===f?t=t.call(e,{hash:{}}):t===y&&(t=b.call(e,"card_position",{hash:{}})),a+=v(t)+'">\n          <div class="creditcardfont" style="color:rgb(80,80,80);width:336px;margin:auto;">\n            <div class="innerCard ',p=n.brand,t=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"brand"),typeof t===f?t=t.call(e,{hash:{}}):t===y&&(t=b.call(e,"brand",{hash:{}})),a+=v(t)+'"\n                 style="background-image: url(pages/images/credit_cards/masked_card.png);">\n            </div>\n          </div>\n        </div>\n      '}function c(e){var t,a="";return a+='\n        <div class="body-notification outerCard opaque" data-id="',p=n.id,t=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof t===f?t=t.call(e,{hash:{}}):t===y&&(t=b.call(e,"id",{hash:{}})),a+=v(t)+'" data-pos="',p=n.card_position,t=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"card_position"),typeof t===f?t=t.call(e,{hash:{}}):t===y&&(t=b.call(e,"card_position",{hash:{}})),a+=v(t)+'">\n          <div class="creditcardfont" style="color:rgb(80,80,80);width:336px;margin:auto;">\n            <div class="innerCard ',p=n.brand,t=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"brand"),typeof t===f?t=t.call(e,{hash:{}}):t===y&&(t=b.call(e,"brand",{hash:{}})),a+=v(t)+'"\n                 style="background-image: url(pages/images/credit_cards/add_card.png);">\n            </div>\n          </div>\n        </div>\n      '}n=n||e.helpers;var m,h,p,u,_="",g=this,f="function",b=n.helperMissing,y=void 0,v=this.escapeExpression;return _+='<div class="wallet">\n  <div class="newlinks settings-link">\n    <img id="settings" class="settings-notification" src="',m="/pages/images/settings_gear_stroke.png",p=n.assetUrl,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),m=typeof h===f?h.call(t,m,{hash:{}}):h===y?b.call(t,"assetUrl",m,{hash:{}}):h,_+=v(m)+'">\n  </div>\n  <div class="newlinks close-link">\n    <img id="close" class="close-notification" src="',m="/pages/images/x_close_stroke.png",p=n.assetUrl,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),m=typeof h===f?h.call(t,m,{hash:{}}):h===y?b.call(t,"assetUrl",m,{hash:{}}):h,_+=v(m)+'">\n  </div>\n  <div id="card-container" style="min-height:230px;position:relative;">\n    ',p=n.allCards,m=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"allCards"),h=n.each,u=g.program(1,r,i),u.hash={},u.fn=u,u.inverse=g.noop,m=h.call(t,m,u),(m||0===m)&&(_+=m),_+="\n\n  </div>\n</div>"}),ABINE_DNTME.CompiledTemplates.notification_helper_checkout_growl_notification}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_detailed_email=e.template(function(e,t,n){n=n||e.helpers;var a,i,r,s="",o="function",l=n.helperMissing,d=void 0,c=this.escapeExpression;return s+='<div class="panel">\n    <div class="close-notification">\n        <span class="notf-close-icon"><img class="close-image" src="',a="/pages/images/manage/dd_close_icon.png",r=n.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"assetUrl",a,{hash:{}}):i,s+=c(a)+'"/></span>\n    </div>\n    <div class="body-notification"><img src="',a="/images/Icon.png",r=n.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"assetUrl",a,{hash:{}}):i,s+=c(a)+'"/>\n        <span class="boldFont">Blur</span>\n    </div>\n    <div class="title">\n        ',a="mm_notification_helper_what_happened_to_email_1",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+"<br/>",a="mm_notification_helper_what_happened_to_email_2",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+"\n    </div>\n    <ol>\n        <li>\n            <b>",r=n.domain,a=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"domain"),typeof a===o?a=a.call(t,{hash:{}}):a===d&&(a=l.call(t,"domain",{hash:{}})),s+=c(a)+"</b> ",a="mm_notification_helper_will_email_to",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+" <b>",r=n.disposable,a=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"disposable"),typeof a===o?a=a.call(t,{hash:{}}):a===d&&(a=l.call(t,"disposable",{hash:{}})),s+=c(a)+'</b>.\n            <a href="#" class="learn-more">',a="mm_notification_helper_learn_more",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+"</a>.\n        </li>\n        <li>\n            ",a="mm_notification_helper_email_forward_to",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+" <b>",r=n.real,a=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"real"),typeof a===o?a=a.call(t,{hash:{}}):a===d&&(a=l.call(t,"real",{hash:{}})),s+=c(a)+"</b>.\n        </li>\n        <li>\n            ",a="mm_notification_helper_block_them_1",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+" <b>",r=n.domain,a=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"domain"),typeof a===o?a=a.call(t,{hash:{}}):a===d&&(a=l.call(t,"domain",{hash:{}})),s+=c(a)+"</b> ",a="mm_notification_helper_block_them_2",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+" <span id='here'>",a="mm_notification_helper_block_them_3",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+'</span>.\n        </li>\n    </ol>\n        <input type="button" class="btn btn-success done" style="width:25%;text-align:center;" value="',a="mm_notification_helper_got_it",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+'" />\n        <a href="#" class="learn-more" style="width:25%;text-align:center;">',a="mm_notification_helper_learn_more",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+"</a>.\n    </div>\n</div>"}),ABINE_DNTME.CompiledTemplates.notification_helper_detailed_email}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_expire_notify=e.template(function(e,t,n){n=n||e.helpers;var a,i,r,s="",o="function",l=n.helperMissing,d=void 0,c=this.escapeExpression;return s+='<div class="panel">\n    <div style="border-bottom:2px solid #3d7dcb;">\n        <div class="close-notification">\n            <span class="notf-close-icon"><img class="close-image" src="',a="/pages/images/manage/dd_close_icon.png",r=n.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"assetUrl",a,{hash:{}}):i,s+=c(a)+'"/></span>\n        </div>\n        <div class="body-notification"><img src="',a="/images/Icon.png",r=n.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"assetUrl",a,{hash:{}}):i,s+=c(a)+'"/>\n            <div class="boldFont" style="margin-left:55px;">',a="mm_notification_helper_expire_notify_title_1",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+"<br/>",a="mm_notification_helper_expire_notify_title_2",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+'</div>\n        </div>\n    </div>\n    <div>\n        <p style="text-align:left;margin:10px;"><strong>',a="mm_notification_helper_expire_notify_body_1",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+"<br/><br/>",a="mm_notification_helper_expire_notify_body_2",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+'</strong></p>\n    </div>\n    <div>\n        <input type="button" id="learn" class="btn btn-success done" style="width:75%;text-align:center;background:green;" value="',a="mm_notification_helper_learn_more_premium",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+'" />\n    </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.notification_helper_expire_notify}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_expire_warning=e.template(function(e,t,n){n=n||e.helpers;var a,i,r,s="",o="function",l=n.helperMissing,d=void 0,c=this.escapeExpression;return s+='<div class="panel">\n    <div style="border-bottom:2px solid #3d7dcb;">\n        <div class="close-notification">\n            <span class="notf-close-icon"><img class="close-image" src="',a="/pages/images/manage/dd_close_icon.png",r=n.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"assetUrl",a,{hash:{}}):i,s+=c(a)+'"/></span>\n        </div>\n        <div class="body-notification"><img src="',a="/images/Icon.png",r=n.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"assetUrl",a,{hash:{}}):i,s+=c(a)+'"/>\n            <div class="boldFont" style="margin-left:55px;">',a="mm_notification_helper_expire_warning_title_1",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+"<br/>",a="mm_notification_helper_expire_warning_title_2",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+'</div>\n        </div>\n    </div>\n    <div>\n        <p style="text-align:left;margin:10px;"><strong>',a="mm_notification_helper_expire_warning_body",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+'</strong></p>\n    </div>\n    <div>\n        <input type="button" id="learn" class="btn btn-success done" style="width:75%;text-align:center;background:green;" value="',a="mm_notification_helper_learn_more_premium",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+'" />\n    </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.notification_helper_expire_warning}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_failed_login=e.template(function(e,t,n,a){n=n||e.helpers,a=a||e.partials;var i,r,s,o="",l=this,d="function",c=n.helperMissing,m=void 0,h=this.escapeExpression;return o+='<div class="panel">\n    <div class="body-notification">\n    <span id="save-password-dialog">\n      <div style="cursor:default;">\n          <div style="font-weight:bold;">',i="mm_notification_helper_failed_login_unsuccessful",s=n.intl,r=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof r===d?r.call(t,i,{hash:{}}):r===m?c.call(t,"intl",i,{hash:{}}):r,o+=h(i)+'</div>\n          <div style="font-weight:normal;">',i="mm_notification_helper_possible_saved",s=n.intl,r=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof r===d?r.call(t,i,{hash:{}}):r===m?c.call(t,"intl",i,{hash:{}}):r,o+=h(i)+'</div>\n          <div style="cursor:pointer;"><a id="update-account">',i="mm_notification_helper_failed_update_here",s=n.intl,r=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof r===d?r.call(t,i,{hash:{}}):r===m?c.call(t,"intl",i,{hash:{}}):r,o+=h(i)+'</a></div>\n      </div>\n    </span>\n    </div>\n\n    <!-- Default header (actually footer) for the panels -->\n    <div style="position:absolute;right:0;bottom:5px;top:0;">\n        ',i=t,i=l.invokePartial(a["common.header"],"common.header",i,n,a),(i||0===i)&&(o+=i),o+="\n    </div>\n</div>"}),ABINE_DNTME.CompiledTemplates.notification_helper_failed_login}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_growl=e.template(function(e,t,n,a,i){function r(e,t){var a,i,r="";return r+='\n            <div id="',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof a===_?a=a.call(e,{hash:{}}):a===f&&(a=g.call(e,"this.id",{hash:{}})),r+=b(a)+'" style="',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"height"),i=n["if"],h=u.program(2,s,t),h.hash={},h.fn=h,h.inverse=u.noop,a=i.call(e,a,h),(a||0===a)&&(r+=a),a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"has_action"),i=n["if"],h=u.program(4,o,t),h.hash={},h.fn=h,h.inverse=u.program(6,l,t),a=i.call(e,a,h),(a||0===a)&&(r+=a),r+='" class="panelSection ',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"class_name"),typeof a===_?a=a.call(e,{hash:{}}):a===f&&(a=g.call(e,"this.class_name",{hash:{}})),r+=b(a)+'">\n              ',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"body"),typeof a===_?a=a.call(e,{hash:{}}):a===f&&(a=g.call(e,"this.body",{hash:{}})),(a||0===a)&&(r+=a),r+="\n            </div>\n        "}function s(e){var t,n="";return n+="height:",t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"height"),typeof t===_?t=t.call(e,{hash:{}}):t===f&&(t=g.call(e,"this.height",{hash:{}})),n+=b(t)+";"}function o(){return"cursor:pointer;"}function l(){return"cursor: default;"}n=n||e.helpers;var d,c,m,h,p="",u=this,_="function",g=n.helperMissing,f=void 0,b=this.escapeExpression;return p+='<div class="panel">\n    <div class="settings">\n      ',d="mm_dntme_settings",m=n.intl,c=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),d=typeof c===_?c.call(t,d,{hash:{}}):c===f?g.call(t,"intl",d,{hash:{}}):c,p+=b(d)+'\n    </div>\n    <div class="close-notification">\n        <span class="notf-close-icon"><img class="close-image" src="',d="/pages/images/manage/dd_close_icon.png",m=n.assetUrl,c=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),d=typeof c===_?c.call(t,d,{hash:{}}):c===f?g.call(t,"assetUrl",d,{hash:{}}):c,p+=b(d)+'"/></span>\n    </div>\n    <div class="body-notification"><img src="',d="/images/Icon.png",m=n.assetUrl,c=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),d=typeof c===_?c.call(t,d,{hash:{}}):c===f?g.call(t,"assetUrl",d,{hash:{}}):c,p+=b(d)+'"/>\n      ',d="mm_notification_helper_growl",m=n.intl,c=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),d=typeof c===_?c.call(t,d,{hash:{}}):c===f?g.call(t,"intl",d,{hash:{}}):c,p+=b(d)+'\n    </div>\n    <div style="text-align:left;padding-bottom:5px;">\n      <div class="dynamicPanels">\n        ',m=n.panelSections,d=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"panelSections"),c=n.each,h=u.program(1,r,i),h.hash={},h.fn=h,h.inverse=u.noop,d=c.call(t,d,h),(d||0===d)&&(p+=d),p+="\n      </div>\n    </div>\n</div>"}),ABINE_DNTME.CompiledTemplates.notification_helper_growl}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_panel=e.template(function(e,t,n){n=n||e.helpers;var a,i,r,s="",o="function",l=n.helperMissing,d=void 0,c=this.escapeExpression;return s+='<div class="panel">\n  <div class="close-notification">\n      <span class="notf-close-icon" id="paneHover"><img class="close-image" src="',a="/pages/images/manage/dd_close_icon.png",r=n.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"assetUrl",a,{hash:{}}):i,s+=c(a)+'"/></span>\n  </div>\n  <div class="body-notification"><img src="',a="/images/Icon.png",r=n.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"assetUrl",a,{hash:{}}):i,
s+=c(a)+'"/>',r=n.msg,a=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"msg"),typeof a===o?a=a.call(t,{hash:{}}):a===d&&(a=l.call(t,"msg",{hash:{}})),(a||0===a)&&(s+=a),s+="</div>\n</div>"}),ABINE_DNTME.CompiledTemplates.notification_helper_panel}),ABINE_DNTME.define("abine/views/notificationPanel",["documentcloud/underscore","jquery","duckbone/core","abine/views/panelBase","abine/timer","abine/contentMessenger","abine/assets","abine/responseCodes","abine/intl","abine/proxies","models"],function(e,t,n,a,i,r,s,o,l,d,c){var m=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i,h=a.extend({templateName:"notification_helper_panel",events:{mouseover:"onHover",mouseout:"onHoverEnd",click:"clicked"},afterInitialize:function(){this.messenger=this.options.contentManager.messenger,this.targetId=this.options.notification.targetId?this.options.notification.targetId:"",this.targetUrl=this.options.notification.targetUrl,this.applyFadingStyle(),this.fadeIn(),this.model={get:e.bind(function(e){return this.options.notification[e]},this)},this.render(),this.startFadeOut()},openSettings:function(e){var n=t(e.target).data("highlight")||t(e.target).parent().data("highlight");this.options.contentManager.showToolbarPanel({page:"settings",highlight:n}),this.closePanel()},closeNotification:function(e){e&&e.preventDefault(),this.panelId&&this.options.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove")},clicked:function(e){return"close-notification"==e.target.className||"notf-close-icon"==e.target.className||"close-image"==e.target.className?(this.stopFadeOut(),void this.closePanel()):(this.getContentMessenger(),this.messenger.send("window:createTab",{url:this.targetUrl}),this.stopFadeOut(),void this.closePanel())},onHoverEnd:function(){this.startFadeOut()},onHover:function(){t(this.el).find("div.close-notification").show(),this.stopFadeOut()},openDashboard:function(){return d.webapp.openDashboard(),!1},applyCardStyles:function(){var e=this.model.get("styles");if(e&&e.base){var n=this.$("."+this.model.get("brand"));n.css(e.base),e.number&&t(".cardNumber",n).css(e.number),e.name&&t(".cardName",n).css(e.name),e.expiry&&t(".cardExpiration",n).css(e.expiry),e.cvc&&t(".cardCVC",n).css(e.cvc)}},startFadeOut:function(){this.options.notification.neverFade||(this.stopFadeOut(),this.fadeOutTimer=i.setTimeout(e.bind(function(){this.fadeOutTimer&&this.fadeOut()},this),this.options.timeout))},stopFadeOut:function(){this.fadeOutTimer&&(i.clearTimeout(this.fadeOutTimer),this.fadeOutTimer=null)},forgotPassword:function(e){e.preventDefault(),d.webapp.openForgotPassword(),this.trigger("close")},toggleSigninOrRegister:function(e){e.preventDefault(),this.$("#signin-form").is(":visible")?(this.$("#signin-form, .signin-content").hide(),this.$("#register-form, .register-content").show()):(this.$("#register-form, .register-content").hide(),this.$("#signin-form, .signin-content").show()),this.trigger("resize")},login:function(n){function a(e,n){try{h.get(0).ownerDocument&&(t(".loading-message",h).text(l.getText("mm_loading_display_login")),e<n&&(p=i.setTimeout(function(){a(e+1,n)},500)))}catch(e){}}n&&n.preventDefault();var r=this.$("#signin-protect-email").val(),s=this.$("#signin-password-field").val(),o=this.$("#error");if(o.hide(),!r.match(m))return this.$("#welcome-message").hide(),o.text(l.getText("mm_dntme_invalid_email")).show(),void this.trigger("resize");if(0==s.length)return this.$("#welcome-message").hide(),o.text(l.getText("mm_dntme_invalid_password")).show(),void this.trigger("resize");var c={email:r,password:s,mfa_code:this.$("#mfa-code-field").val()},h=this.$("#progress-section");h.height(this.$("#form-div").height()-10);var p=null;a(0,20),h.show(),this.$("#form-div").hide(),d.licenseModule.login(c,e.bind(function(t,n){this.processRegistration(t,n,c,e.bind(function(e){i.clearTimeout(p),h.hide(),e||(this.loginSuccess(),this.closePanel())},this))},this)),this.trigger("resize")},register:function(n){function a(e,n){try{p.get(0).ownerDocument&&(t(".loading-message",p).text(l.getText("mm_loading_display_register_use"+Math.floor(e/10))),e<n&&(u=i.setTimeout(function(){a(e+1,n)},500)))}catch(e){}}n&&n.preventDefault(),this.$("#welcome-message").show();var r=this.$("#register-protect-email").val(),s=this.$("#register-password-field").val(),o=this.$("#register-confirm-password-field").val(),c=this.$("#error");if(c.hide(),!r.match(m))return this.$("#welcome-message").hide(),c.text(l.getText("mm_dntme_invalid_email")).show(),void this.trigger("resize");if(0==s.length)return this.$("#welcome-message").hide(),c.text(l.getText("mm_dntme_invalid_password")).show(),void this.trigger("resize");if(o!=s)return this.$("#welcome-message").hide(),c.text(l.getText("mm_dntme_invalid_password_confirmation")).show(),void this.trigger("resize");var h={email:r,password:s,password_hint:l.getText("mm_pwhint_default"),register_type:"dnt_password_panel",send_password_email:!1},p=this.$("#progress-section");p.height(this.$("#form-div").height()-10);var u=null;a(0,40),p.show(),this.$("#form-div").hide(),d.licenseModule.register(h,e.bind(function(t,n){this.processRegistration(t,n,h,e.bind(function(e){i.clearTimeout(u),p.hide(),e||(this.$("#register-dialog").hide(),this.registerSuccess(),this.$("#post-signin-dialog").show())},this))},this)),this.trigger("resize")},postRegisterOk:function(e){e&&e.preventDefault(),this.trigger("remove")},processRegistration:function(t,n,a,i){if(t){var r=l.getText("mm_dntme_register_error"),s=t.responseJSON&&t.responseJSON.data?t.responseJSON.data.errors:null;"invalid email address"==t.responseJSON.error_code?r=l.getText("mm_dntme_invalid_email_server_error"):"wrong password"==t.responseJSON.error_code?r=l.getText("mm_dntme_wrong_password"):"no account found for email"==t.responseJSON.error_code?r=l.getText("mm_dntme_wrong_email"):"version not allowed"==t.responseJSON.error_code?r=l.getText("mm_dntme_version_not_allowed"):"account has been locked"==t.responseJSON.error_code?r=l.getText("mm_dntme_account_locked"):t.responseJSON.error_code==o.SCHEDULED_DOWNTIME?r=l.getText("mm_dntme_server_maintenance"):t.responseJSON.error_code==o.MFA_CODE_REQUIRED?(r="You have enabled 2-factor authentication.  Please enter authentication code below:",this.$("#login-section, #progress-section").hide(),this.$("#form-div, #mfa-section").show()):s&&s.email&&("has already been taken"==s.email[0]?r=l.getText("mm_dntme_duplicate_email",[a.email]):"was used for MaskMe Heavy"==s.email[0]&&(r=l.getText("mm_dntme_version_not_allowed"))),this.$("#error").html(r).show(),t.responseJSON&&t.responseJSON.data&&1==t.responseJSON.data.generated_password&&this.$("#error #loginButton").click(e.bind(function(e){return d.webapp.openPasswordSetupPage(a.email),e.preventDefault(),!1},this)),this.$("#error #retryEmail, #error #loginButton").click(e.bind(this.retryEmail,this)),this.$("#error #dnt2upgrade").click(d.webapp.openDnt2UpgradePage),this.trigger("resize"),i(r)}else this.trigger("refresh-preferences"),i()},retryEmail:function(e){e&&e.preventDefault(),this.$("#error, #progress-section").hide(),this.$("#register-dialog, #form-div").show(),this.trigger("render")}}),p=h.extend({templateName:"notification_helper_paymentsr2_card_notification",afterInitialize:function(){this.applyFadingStyle(),this.fadeIn();var e=this.options.notification;this.model=new c.DisposableCard(e.model.maskedCard),this.model.bitcoinFunded="bitcoin"==this.model.get("payment_source"),this.model.detailed=e.detailed,this.panelId=4000004,e.model.declined&&(this.templateName="notification_helper_card_declined_notification",this.model.declined=e.model.declined,this.panelId=4000009),this.options.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render()},clicked:function(t){return t&&t.preventDefault(),"faq"==t.target.id?(this.options.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId}),d.webapp.openFAQ("card")):"chatNow"==t.target.id?(this.options.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),d.securityManager.openWindow("https://a3.websitealive.com/623/rRouter.asp?infocapture_ids=259,260&infocapture_values=|&groupid=623&wsa_custom0=notification&wsa_custom1=&websiteid=0&departmentid=3140&dl=blur",400,400)):"close-notification"==t.target.className||"notf-close-icon"==t.target.className||"close-image"==t.target.className?(this.options.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove")):"cardDashboard"==t.target.id?d.webapp.openPage("/#/client/card/"+this.model.get("guid")):"getRefund"==t.target.id?(this.$(".actions-short").hide(),this.$(".actions-tall").show(),this.autoResize(),this.model.save({purpose:"deactivate"},{success:e.bind(function(){"success"==this.model.get("status")?this.$(".refund-status").text("This Masked Card has been closed. Open transactions on this card are being reviewed to determine your refund amount."):this.$(".refund-status").text("There was an error closing this Masked Card.  Please contact support."),this.autoResize()},this)})):"logo-link"!=t.target.className&&"logo-link"!=t.target.parentNode.className||d.webapp.openDashboard(),!1}}),u=h.extend({templateName:"notification_helper_real_card_notification",afterInitialize:function(){this.applyFadingStyle(),this.fadeIn(),this.model=new c.RealCard(this.options.notification.model.maskedCard),this.model.detailed=this.options.notification.detailed,this.panelId=4000007,this.options.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render(),this.applyCardStyles()},clicked:function(e){return e&&e.preventDefault(),"faq"==e.target.id?(this.options.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId}),d.webapp.openFAQ("card")):"chatNow"==e.target.id?(this.options.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),d.securityManager.openWindow("https://a3.websitealive.com/623/rRouter.asp?infocapture_ids=259,260&infocapture_values=|&groupid=623&wsa_custom0=notification&wsa_custom1=&websiteid=0&departmentid=3140&dl=blur",400,400)):"close-notification"==e.target.className||"notf-close-icon"==e.target.className||"close-image"==e.target.className?(this.options.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove")):"cardDashboard"==e.target.id?d.webapp.openPage("/#/client/cards"):"getRefund"==e.target.id?d.webapp.openPage("/#/client/cards"):"logo-link"!=e.target.className&&"logo-link"!=e.target.parentNode.className||d.webapp.openDashboard(),!1}}),_=h.extend({templateName:"notification_helper_checkout_growl_notification",events:{"click .outerCard":"cardClicked","click .settings-notification":"openSettings","click .close-link":"closeNotification"},resetCards:function(t){var n=t.collection,a=t.maskedCards,i=1,r=[];n.forEach(e.bind(function(e){e.card_position=i,r.push(new c.RealCard(e)),i++},this)),a&&a.forEach(e.bind(function(e){e.card_position=i,e.brand="old_masked_card",e.cardType="old_masked_card",r.push(new c.DisposableCard(e)),i++},this)),this.model.offerOnly||(r.push(new c.RealCard({id:"new_real_card",cardType:"new_real_card",brand:"new_real_card",card_position:i})),r.push(new c.RealCard({id:"new_masked_card",cardType:"new_masked_card",brand:"new_masked_card",card_position:i+1}))),this.collection.reset(r)},setBrandStyles:function(){e.each(this.collection.models,e.bind(function(e){var n=e.get("styles");if(n&&n.base){var a=this.$("."+e.get("brand"));a.css(n.base),n.number&&t(".cardNumber",a).css(n.number),n.name&&t(".cardName",a).css(n.name),n.expiry&&t(".cardExpiration",a).css(n.expiry),n.cvc&&t(".cardCVC",a).css(n.cvc)}},this))},afterInitialize:function(){this.applyFadingStyle(),this.fadeIn(),this.contentManager=this.options.contentManager;var n=this.options.notification.payload;this.options.strategyId=n.strategyId,this.options.fieldId=n.fieldId,this.options.fieldType=n.fieldType,this.model=new c.RealCard(this.options.notification.model.maskedCard),this.model.detailed=this.options.notification.detailed,this.collection=new c.RealCardCollection,this.model.attributes.allCards=this.collection,this.model.offerOnly=this.options.notification.offerOnly,this.resetCards(this.options.notification),this.panelId=4000008,this.options.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.model.offersOnly||(d.licenseModule.logCheckout({method:"growl",merchant:this.contentManager.domain,shown:1,amount:this.options.amount}),this.options.messenger.on("entity:changed:RealCard",e.debounce(e.bind(function(){var n=new c.RealCardCollection;n.fetchAllForDomain(this.options.notification.domain,e.bind(function(){this.options.notification.collection.length!=n.length&&(this.options.notification.collection=n,this.resetCards(n),this.render(),this.setBrandStyles(),this.$(".outerCard").each(e.bind(function(e,n){t(n).addClass("pos-"+(e+1))},this)))},this))},this),1e3)));var a=!!e.find(this.collection.models,function(e){return"offer"==e.get("cardType")});a&&d.licenseModule.logCheckout({method:"offer",merchant:this.contentManager.domain,shown:1,amount:this.options.amount}),this.render();var r=0;i.setTimeout(e.bind(function(){this.setBrandStyles(),this.$(".outerCard").each(e.bind(function(n,a){i.setTimeout(e.bind(function(){t(a).addClass("pos-"+(n+1))},this),r),r+=300},this));var n=t(this.el),a=this.collection.length;n.height(n.height()+15*a),n.width(n.width()+15*(a>=3?a-3:0)),this.autoResize({extraWidth:15*(a>=3?a-3:0)})},this),0),i.setTimeout(e.bind(function(){this.$(".outerCard").removeClass("opaque")},this),5e3),this.contentManager.messenger.on("panel:closed",e.bind(function(){t(".outerCard").removeClass("biometric")},this))},cardClicked:function(n){for(var a=t(n.target);!a.hasClass("outerCard");)a=t(a[0].parentNode);if(a.hasClass("pos-1"))return void this.fillRealCard(a.data("id"),a);for(var r=this.collection.length,s=parseInt(a.data("pos")),o=1;o<s;o++)i.setTimeout(e.bind(function(){t(".outerCard").each(function(e,n){var a=parseInt(t(n).data("pos"));t(n).removeClass("pos-"+a).removeClass("biometric"),a>1?a-=1:a=r,t(n).addClass("pos-"+a).data("pos",a)})},this),50*o)},fillRealCard:function(e,t){var n=null;this.model.attributes.allCards.each(function(t){t.get("id")==e&&(n=t)}),"new_real_card"==n.get("cardType")?d.webapp.openPage("/#/client/real_cards/add"):"new_masked_card"==n.get("cardType")?(d.licenseModule.logCheckout({method:"growl",merchant:this.contentManager.domain,clicked:1,amount:this.options.amount}),this.focusFieldWithIntent({step:"new_card"})):"offer"==n.get("cardType")?(d.licenseModule.logCheckout({method:"offer",merchant:this.contentManager.domain,clicked:1,amount:this.options.amount}),d.webapp.openPage(n.get("url"))):("biometric"==this.contentManager.preferences.getPref("masked_card_auth")&&t.addClass("biometric"),d.licenseModule.logCheckout({method:"growl",merchant:this.contentManager.domain,clicked:1,amount:this.options.amount}),this.focusFieldWithIntent({step:"fill_card",id:n.get("id")}))}}),g=h.extend({templateName:"notification_helper_expire_notify",afterInitialize:function(){this.applyFadingStyle(),this.fadeIn(),this.model={get:e.bind(function(e){return this.options.notification[e]},this)},this.panelId=5000008,this.options.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render()},clicked:function(e){e.preventDefault(),"learn"==e.target.id?(this.options.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),d.securityManager.openPage("#premium"),this.trigger("remove")):e.target.className.match(/close-notification|notf-close-icon|close-image|done/i)&&(this.options.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove"))}}),f=h.extend({templateName:"notification_helper_expire_warning",afterInitialize:function(){this.applyFadingStyle(),this.fadeIn(),this.model={get:e.bind(function(e){return this.options.notification[e]},this)},this.panelId=5000009,this.options.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render()},clicked:function(e){e.preventDefault(),"learn"==e.target.id?(this.options.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),d.securityManager.openPage("#premium"),this.trigger("remove")):e.target.className.match(/close-notification|notf-close-icon|close-image|done/i)&&(this.options.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove"))}}),b=h.extend({templateName:"notification_helper_detailed_email",afterInitialize:function(){this.applyFadingStyle(),this.fadeIn(),this.model={get:e.bind(function(e){return this.options.notification[e]},this)},this.panelId="email"==this.options.notification.type?1000002:5000002,this.options.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render()},clicked:function(e){e.preventDefault(),"here"==e.target.id?(this.options.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId}),d.securityManager.openPage("#emails/guide"),this.trigger("remove")):e.target.className.match(/close-notification|notf-close-icon|close-image|done/i)?(this.options.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove")):e.target.className.match(/learn-more/)&&(this.options.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),d.securityManager.openPage("#dashboard/guide"),this.trigger("remove"))}}),y=h.extend({templateName:"notification_helper_growl",events:{mouseover:"onHover",mouseout:"onHoverEnd","click .panelSection":"performActions","click .close-notification":"logClose","click .settings":"showSettings"},afterInitialize:function(){this.applyFadingStyle(),this.fadeIn(),this.contentManager=this.options.contentManager,this.options.dynamicPanel=this.options.notification.dynamicPanel,this.model={dynamicPanel:this.options.dynamicPanel},this.setupDynamicPanel(),this.model.panelSections=this.panelSections,this.render()},logClose:function(){this.contentManager.messenger.send("update:panelActivity:closed",{panelId:this.options.dynamicPanel.id}),this.trigger("remove")},showSettings:function(){this.contentManager.showToolbarPanel({page:"settings"})}}),v=h.extend({templateName:"notification_helper_save_login",events:{mouseover:"onHover",mouseout:"onHoverEnd","click .close-notification":"logClose","click .close-link":"logClose","click .settings-link":"openWebappSettings","click .dashboard":"openDashboard","click .b-link":"openDashboard","click .help-link":"openFaq","click #save, #save-unregistered":"save","click #always-save-accounts-checkbox":"alwaysSave","click #register":"register","click #login":"login","click #forgotPassword":"forgotPassword","click #register-link, #signin-link":"toggleSigninOrRegister","click #never, #never-unregistered":"never","click #ok-post-register":"postRegisterOk"},openDashboard:function(){d.webapp.openPage("/#dashboard"),this.trigger("remove")},openWebappSettings:function(){d.webapp.openPage("/#settings"),this.trigger("remove")},openFaq:function(){d.webapp.openPage("/#help/faq/faq-passwordManager"),this.trigger("remove")},afterInitialize:function(){i.setTimeout(e.bind(function(){this.contentManager.messenger.send("background:notification:clear")},this),5e3),this.contentManager=this.options.contentManager,this.model=this.options.notification.account,this.model.oldEmail=this.contentManager.preferences.getPref("oldEmail"),this.model.loginNotLock=this.contentManager.preferences.getPref("loginNotLock"),this.model.locked=this.contentManager.isLocked(),this.model.unregistered=(!this.model.oldEmail||this.model.loginNotLock)&&this.model.locked,this.model.login_content="mm_notification_helper_securely_save_login",this.model.register_content="mm_notification_helper_securely_save_create",this.panelId=this.model.locked?9000002:6000002,this.model.unregistered?this.contentManager.preferences.isPrefTrue("isBlurUpgrade")||(this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render()):(this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render())},logClose:function(){this.contentManager.messenger.send("background:notification:clear"),this.contentManager.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove")},alwaysSave:function(){this.model.alwaysSaveAccounts=!0,this.save()},save:function(){this.contentManager.messenger.send("background:notification:clear"),this.contentManager.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),this.contentManager.isLocked()?(this.on("refresh-preferences",e.bind(function(){this.contentManager.preferences.fetchAll()},this)),this.$("#save-password-dialog, #save-password-dialog-unregistered").hide(),this.$("#register-dialog").show(),this.model.oldEmail?(this.$("#signin-form").show(),this.$(".signin-content").show()):(this.$("#register-form").show(),this.$(".register-content").show()),this.contentManager.messenger.send("update:panelActivity:impression",{panelId:7000011}),this.trigger("resize")):(this.contentManager.messenger.send("background:save:account",this.model),this.trigger("remove"))},loginSuccess:function(){this.contentManager.messenger.send("update:panelActivity:masked",{panelId:7000011}),this.contentManager.messenger.send("background:save:or:update:account",this.model)},registerSuccess:function(){this.contentManager.messenger.send("update:panelActivity:disclosed",{panelId:7000011}),this.contentManager.messenger.send("background:save:account",this.model)},never:function(){this.contentManager.messenger.send("background:notification:clear"),this.contentManager.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId});var e=new c.Blacklist;e.save({domain:this.model.domain,changed:"save_account",save_account:!0}),this.trigger("remove")}}),k=h.extend({templateName:"notification_helper_save_card",events:{mouseover:"onHover",mouseout:"onHoverEnd","click .close-notification":"logClose","click .close-link":"logClose","click .close-image":"logClose","click .settings-link":"openWebappSettings","click .dashboard":"openDashboard","click .b-link":"openDashboard","click .help-link":"openFaq","click .editAndSave":"editAndSave","click #save, #save-unregistered":"save","click #always-save-cards-checkbox":"alwaysSave","click #register":"register","click #login":"login","click #forgotPassword":"forgotPassword","click #register-link, #signin-link":"toggleSigninOrRegister","click #never, #never-unregistered":"never","click #ok-post-register":"postRegisterOk"},openDashboard:function(){d.webapp.openPage("/#dashboard"),this.trigger("remove")},openWebappSettings:function(){d.webapp.openPage("/#settings"),this.trigger("remove")},openFaq:function(){d.webapp.openPage("/#help/faq/faq-passwordManager"),this.trigger("remove")},afterInitialize:function(){i.setTimeout(e.bind(function(){this.contentManager.messenger.send("background:notification:clear")},this),5e3),this.contentManager=this.options.contentManager,this.card=this.options.notification.card,this.model=new c.RealCard(this.options.notification.card),this.model.domain=this.contentManager.domain,this.model.oldEmail=this.contentManager.preferences.getPref("oldEmail"),this.model.loginNotLock=this.contentManager.preferences.getPref("loginNotLock"),this.model.locked=this.contentManager.isLocked(),this.model.unregistered=(!this.model.oldEmail||this.model.loginNotLock)&&this.model.locked,this.model.login_content="mm_notification_helper_securely_save_cards_login",this.model.register_content="mm_notification_helper_securely_save_cards_register",this.model.set("type",this.card.card_type);var t=this.card.issuedto;if(t){var n=t.split(" ");this.model.set("first_name",n[0]),n.length>0&&this.model.set("last_name",n[1])}this.panelId=this.model.locked?9000012:6000012,this.model.unregistered?this.contentManager.preferences.isPrefTrue("isBlurUpgrade")||(this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render()):(this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render()),this.applyCardStyles()},logClose:function(){this.contentManager.messenger.send("background:notification:clear"),this.contentManager.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove")},alwaysSave:function(){this.card.alwaysSaveCards=!0,this.save()},editAndSave:function(e){e.preventDefault();var t=btoa(JSON.stringify({first_name:this.model.get("first_name"),last_name:this.model.get("last_name"),number:this.model.get("number"),expiry_month:this.model.get("expiry_month"),expiry_year:this.model.get("expiry_year"),cvc:this.model.get("cvc"),type:this.model.get("type"),brand:this.model.get("brand")}));d.webapp.openPage("/#/real_cards/edit_save/"+t),this.contentManager.messenger.send("update:panelActivity:impression",{panelId:9000013}),this.trigger("remove")},save:function(){this.contentManager.messenger.send("background:notification:clear"),this.contentManager.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),this.$("#reg-info, #save, #never, #always-save-cards-checkbox").hide(),this.contentManager.isLocked()?(this.on("refresh-preferences",e.bind(function(){this.contentManager.preferences.fetchAll()},this)),this.$("#save-password-dialog, #save-password-dialog-unregistered").hide(),this.$("#register-dialog").show(),this.model.oldEmail?(this.$("#signin-form").show(),this.$(".signin-content").show()):(this.$("#register-form").show(),this.$(".register-content").show()),this.contentManager.messenger.send("update:panelActivity:impression",{panelId:7000011}),this.trigger("resize")):this.saveCard()},saveCard:function(){this.contentManager.messenger.send("background:save:card",this.card),this.$("#save-card-dialog-unregistered, #save-card-dialog").hide(),this.$("#post-save-dialog").show(),this.trigger("resize"),i.setTimeout(e.bind(function(){this.trigger("remove")},this),5e3)},loginSuccess:function(){this.contentManager.messenger.send("update:panelActivity:masked",{panelId:7000011}),this.contentManager.messenger.send("background:save:or:update:card",this.card)},registerSuccess:function(){this.contentManager.messenger.send("update:panelActivity:disclosed",{panelId:7000011}),this.contentManager.messenger.send("background:save:card",this.card)},never:function(){this.contentManager.messenger.send("background:notification:clear"),this.contentManager.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId});var e=new c.Blacklist;e.save({domain:this.model.domain,changed:"save_card",save_card:!0}),this.trigger("remove")}}),w=h.extend({templateName:"notification_helper_failed_login",events:{mouseover:"onHover",mouseout:"onHoverEnd","click .close-link":"logClose","click .b-link":"openDashboard","click #update-account":"openWebappAccounts"},afterInitialize:function(){i.setTimeout(e.bind(function(){this.contentManager.messenger.send("background:notification:clear")},this),3e3),this.panelId=6000005,this.contentManager=this.options.contentManager,this.model=this.options.notification.account,this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render()},logClose:function(){this.contentManager.messenger.send("background:notification:clear"),this.contentManager.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove")},openWebappAccounts:function(){this.contentManager.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),d.webapp.openAccounts(this.model.domain),this.trigger("remove")},ignore:function(){this.contentManager.messenger.send("background:notification:clear"),this.contentManager.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId}),this.trigger("remove")}}),E=h.extend({templateName:"notification_helper_password_with_no_login",afterInitialize:function(){i.setTimeout(e.bind(function(){this.contentManager.messenger.send("background:notification:clear")},this),3e3),this.panelId=6000004,this.contentManager=this.options.contentManager,this.model=this.options.notification.account,this.model.loginAccounts=new c.AccountCollection,this.model.loginAccounts.fetchAllByDomain(this.model.domain,e.bind(function(e){e||0==this.model.loginAccounts.length?this.closePanel():(this.model.userOrEmailOnlyAccounts=this.model.loginAccounts.filter(function(e){return e.get("username")||e.get("email")}),this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render())},this))},clicked:function(t){if(t&&t.preventDefault(),"saveLoginWithPassword"==t.target.id){this.options.messenger.send("update:panelActivity:masked",{panelId:this.panelId});var n,a="";this.$("#input-custom-login").is(":visible")?a=this.$("#custom-username").val():(a=this.$("#select-login option:selected").text(),n=this.$("#select-login option:selected").attr("accountId"));var i;try{if(n){i=this.model.loginAccounts.filter(function(e){return e.get("id")==n})[0];var r=this.model.loginAccounts.filter(e.bind(function(e){return e.get("password")==this.model.password},this))[0];i.set("password",this.model.password),this.contentManager.messenger.send("background:save:account",i.toJSON()),r.set("pushed",0),r.destroy()}else i=this.model.loginAccounts.filter(e.bind(function(e){return e.get("password")==this.model.password},this))[0],i.set("username",a),this.contentManager.messenger.send("background:save:account",i.toJSON())}catch(e){}this.contentManager.messenger.send("background:notification:clear"),this.trigger("remove")}else"close-notification"==t.target.className||"notf-close-icon"==t.target.className||"close-image"==t.target.className||"dismiss"==t.target.id?(this.options.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove")):"icon-edit"==t.target.className&&("show-dropdown-edit"==t.target.id?(this.$("#input-custom-login").hide(),this.$("#select-login").show()):(this.$("#input-custom-login").show(),this.$("#select-login").hide()));return!1}}),A=h.extend({templateName:"notification_helper_change_password",events:{mouseover:"onHover",mouseout:"onHoverEnd","click .close-notification":"logClose","click .settings-link":"openSettings","click #save":"save","click #ignore":"ignore"},afterInitialize:function(){this.applyFadingStyle(),this.fadeIn(),i.setTimeout(e.bind(function(){this.contentManager.messenger.send("background:notification:clear")},this),3e3),this.panelId=6000003,this.contentManager=this.options.contentManager,this.model=this.options.notification.account,this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render()},logClose:function(){this.contentManager.messenger.send("background:notification:clear"),this.contentManager.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove")},save:function(){this.contentManager.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),this.contentManager.messenger.send("background:save:account",this.model),this.contentManager.messenger.send("background:notification:clear"),this.trigger("remove")},ignore:function(){this.contentManager.messenger.send("background:notification:clear"),this.contentManager.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId}),this.trigger("remove")}});return{NotificationPanelView:h,CardNotificationPanelView:p,RealCardNotificationPanelView:u,SaveCardNotificationPanelView:k,CheckoutGrowlNotificationPanelView:_,DetailedEmailNotificationPanelView:b,ExpireWarningNotificationPanelView:f,ExpireNotifyNotificationPanelView:g,GrowlNotificationPanelView:y,SaveLoginNotificationPanelView:v,FailedLoginNotificationPanelView:w,PasswordWithNoLoginNotificationPanelView:E,ChangePasswordNotificationPanelView:A}}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_password_with_no_login=e.template(function(e,t,n,a,i){function r(e,t){var a,i,r="";return r+='\n            <div id="select-login" style="margin-bottom:1em">\n                <span style="display:block;margin-bottom:.5em;color:#848484;font-weight:bold;font-size:1.2em;">',a="mm_notification_helper_email_address_username",p=n.intl,i=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===f?i.call(e,a,{hash:{}}):i===y?b.call(e,"intl",a,{hash:{}}):i,r+=v(a)+'</span>\n                    <select style="width:90%;">\n                      ',p=n.userOrEmailOnlyAccounts,a=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"userOrEmailOnlyAccounts"),i=n.each,u=g.program(2,s,t),u.hash={},u.fn=u,u.inverse=g.noop,a=i.call(e,a,u),
(a||0===a)&&(r+=a),r+='\n                    </select>\n                    <i class="icon-edit" id="show-custom-edit" style="cursor:pointer;"></i>\n            </div>\n            '}function s(e,t){var a,i,r="";return r+='\n                          <option accountId="',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof a===f?a=a.call(e,{hash:{}}):a===y&&(a=b.call(e,"this.id",{hash:{}})),r+=v(a)+'">',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"username"),i=n["if"],u=g.program(3,o,t),u.hash={},u.fn=u,u.inverse=g.program(5,l,t),a=i.call(e,a,u),(a||0===a)&&(r+=a),r+="</option>\n                      "}function o(e){var t;return t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"username"),typeof t===f?t=t.call(e,{hash:{}}):t===y&&(t=b.call(e,"this.username",{hash:{}})),v(t)}function l(e){var t;return t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),typeof t===f?t=t.call(e,{hash:{}}):t===y&&(t=b.call(e,"this.email",{hash:{}})),v(t)}function d(){return'"display:none;"'}function c(){return'<i class="icon-edit" id="show-dropdown-edit" style="cursor:pointer;"></i>'}n=n||e.helpers;var m,h,p,u,_="",g=this,f="function",b=n.helperMissing,y=void 0,v=this.escapeExpression;return _+='<div class="panel">\n    <div class="close-notification">\n        <span class="notf-close-icon" id="paneHover">\n            <img class="close-image" src="',m="/pages/images/manage/dd_close_icon.png",p=n.assetUrl,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),m=typeof h===f?h.call(t,m,{hash:{}}):h===y?b.call(t,"assetUrl",m,{hash:{}}):h,_+=v(m)+'"/>\n        </span>\n    </div>\n\n    <div class="body-notification" style="color:#1e91da;">\n        <img src="',m="/images/Icon.png",p=n.assetUrl,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),m=typeof h===f?h.call(t,m,{hash:{}}):h===y?b.call(t,"assetUrl",m,{hash:{}}):h,_+=v(m)+'" style="height: 4.5em;margin-top: .3em;"/>\n        <div style="position: relative;bottom: 3.7em;left: 5.5em;">\n            <span style="font-size:1.6em">',m="mm_notification_helper_new_password_created",p=n.intl,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),m=typeof h===f?h.call(t,m,{hash:{}}):h===y?b.call(t,"intl",m,{hash:{}}):h,_+=v(m)+'</span>\n            </br>\n            <span style="font-size:1.2em">',m="mm_dntme_at",p=n.intl,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),m=typeof h===f?h.call(t,m,{hash:{}}):h===y?b.call(t,"intl",m,{hash:{}}):h,_+=v(m)+" ",p=n.domain,m=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"domain"),typeof m===f?m=m.call(t,{hash:{}}):m===y&&(m=b.call(t,"domain",{hash:{}})),_+=v(m)+'</span>\n        </div>\n    </div>\n\n    <hr style="position:relative;top:-4em;border-top: 2px solid #1e91da;width:104.5%;margin-left:-1em;"/>\n    \n    <div class="dropdown-section" style="text-align: left;margin-left: 2em;">\n        <div style="margin-top: -5em;margin-bottom:1em">\n           <span style="display:block;margin-bottom:.5em;color:#848484;font-weight:bold;font-size:1.2em;">',m="mm_notification_helper_password",p=n.intl,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),m=typeof h===f?h.call(t,m,{hash:{}}):h===y?b.call(t,"intl",m,{hash:{}}):h,_+=v(m)+'</span>\n           <span style="font-weight:bold;font-size:1.6em;">',p=n.password,m=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"password"),typeof m===f?m=m.call(t,{hash:{}}):m===y&&(m=b.call(t,"password",{hash:{}})),_+=v(m)+"</span>\n        </div>\n        <div>\n            ",p=n.loginAccounts,m=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"loginAccounts"),h=n["if"],u=g.program(1,r,i),u.hash={},u.fn=u,u.inverse=g.noop,m=h.call(t,m,u),(m||0===m)&&(_+=m),_+='\n        </div>\n        <div id="input-custom-login" style=',p=n.loginAccounts,m=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"loginAccounts"),h=n["if"],u=g.program(7,d,i),u.hash={},u.fn=u,u.inverse=g.noop,m=h.call(t,m,u),(m||0===m)&&(_+=m),_+='>\n            <span style="display:block;margin-bottom:.5em;color:#848484;font-weight:bold;font-size:1.2em;">',m="mm_notification_helper_email_address_username",p=n.intl,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),m=typeof h===f?h.call(t,m,{hash:{}}):h===y?b.call(t,"intl",m,{hash:{}}):h,_+=v(m)+'</span>\n            <input style="width:90%;" type="text" id="custom-username"/>\n                ',p=n.loginAccounts,m=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"loginAccounts"),h=n["if"],u=g.program(9,c,i),u.hash={},u.fn=u,u.inverse=g.noop,m=h.call(t,m,u),(m||0===m)&&(_+=m),_+='\n        </div>\n    </div>\n    <div class="button-section">\n        <input type="button" id="saveLoginWithPassword" class="btn btn-primary" style="text-align:center;width:95%;background:green;font-size:1.5em;line-height: 1.5em;" value="Save Login & Password" />\n        </br>\n        <input type="button" id="dismiss" class="btn btn-primary" style="text-align:center;margin:1em;width:25%;background:gray;font-size:1.5em;line-height: 1.5em;" value="Cancel" />\n    </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.notification_helper_password_with_no_login}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_paymentsr2_card_notification=e.template(function(e,t,n,a,i){function r(e){var t,a,i,r="";return r+="\n      ",p=n.getOriginalValue,t=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getOriginalValue"),a="mm_payment_helper_help_bitcoin",p=n.intl,i=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===f?i.call(e,a,t,{hash:{}}):i===y?b.call(e,"intl",a,t,{hash:{}}):i,r+=v(t)+"\n    "}function s(e,t){var a,i,r="";return r+="\n      ",p=n.company,a=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"company"),i=n["if"],u=g.program(4,o,t),u.hash={},u.fn=u,u.inverse=g.program(6,l,t),a=i.call(e,a,u),(a||0===a)&&(r+=a),r+="\n    "}function o(e){var t,a,i,r="";return r+="\n        ",p=n.getOriginalValue,t=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getOriginalValue"),a="mm_payment_helper_help_company",p=n.intl,i=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===f?i.call(e,a,t,{hash:{}}):i===y?b.call(e,"intl",a,t,{hash:{}}):i,r+=v(t)+"\n      "}function l(e,t){var a,i,r="";return r+="\n        ",p=n.isAch,a=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"isAch"),i=n["if"],u=g.program(7,d,t),u.hash={},u.fn=u,u.inverse=g.program(9,c,t),a=i.call(e,a,u),(a||0===a)&&(r+=a),r+="\n      "}function d(e){var t,a,i,r="";return r+="\n          ",t="mm_payment_helper_help_2_1",p=n.intl,a=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===f?a.call(e,t,{hash:{}}):a===y?b.call(e,"intl",t,{hash:{}}):a,r+=v(t)+"\n          <b>",p=n.getTotalCharge,t=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getTotalCharge"),a="mm_payment_helper_help_2_2",p=n.intl,i=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===f?i.call(e,a,t,{hash:{}}):i===y?b.call(e,"intl",a,t,{hash:{}}):i,r+=v(t)+"</b> ",t="mm_payment_helper_help_2_3_ach",p=n.intl,a=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===f?a.call(e,t,{hash:{}}):a===y?b.call(e,"intl",t,{hash:{}}):a,r+=v(t)+"\n        "}function c(e){var t,a,i,r="";return r+="\n          ",t="mm_payment_helper_help_2_1",p=n.intl,a=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===f?a.call(e,t,{hash:{}}):a===y?b.call(e,"intl",t,{hash:{}}):a,r+=v(t)+"\n          <b>",p=n.getTotalCharge,t=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getTotalCharge"),a="mm_payment_helper_help_2_2",p=n.intl,i=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===f?i.call(e,a,t,{hash:{}}):i===y?b.call(e,"intl",a,t,{hash:{}}):i,r+=v(t)+"</b> ",t="mm_payment_helper_help_2_3",p=n.intl,a=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===f?a.call(e,t,{hash:{}}):a===y?b.call(e,"intl",t,{hash:{}}):a,r+=v(t)+"\n        "}n=n||e.helpers,a=a||e.partials;var m,h,p,u,_="",g=this,f="function",b=n.helperMissing,y=void 0,v=this.escapeExpression;return _+='<div class="panel">\n  <!-- Default header (actually footer) for the panels -->\n  <div class="header" id="default-header" style="border-top: 0px solid;">\n    <div class="logo-link">\n      <img style="width:63px;height:16px;" src="',m="/pages/images/blur_logo_ext_window.png",p=n.assetUrl,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),m=typeof h===f?h.call(t,m,{hash:{}}):h===y?b.call(t,"assetUrl",m,{hash:{}}):h,_+=v(m)+'"/>\n    </div>\n    <div class="links-wrapper">\n      <div class="newlinks close-link">\n        <img id="close" class="close-notification" src="',m="/pages/images/2015panels/panel_xclose.png",p=n.assetUrl,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),m=typeof h===f?h.call(t,m,{hash:{}}):h===y?b.call(t,"assetUrl",m,{hash:{}}):h,_+=v(m)+'"/>\n      </div>\n    </div>\n  </div>\n\n  <div style="background-color:#3497db;color:white;padding-left:10px;margin-left:-10px;margin-right:-10px;padding-right:10px;">\n    <h3>New Masked Card Created</h3></div>\n  <div style="margin: 10px 15px;text-align:center;">\n    ',p=n.bitcoinFunded,m=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"bitcoinFunded"),h=n["if"],u=g.program(1,r,i),u.hash={},u.fn=u,u.inverse=g.program(3,s,i),m=h.call(t,m,u),(m||0===m)&&(_+=m),_+="\n\n  </div>\n\n  ",m=t,m=g.invokePartial(a["notification_helper.masked_card"],"notification_helper.masked_card",m,n,a),(m||0===m)&&(_+=m),_+="\n  ",m=t,m=g.invokePartial(a["notification_helper.card_address"],"notification_helper.card_address",m,n,a),(m||0===m)&&(_+=m),_+="\n  ",m=t,m=g.invokePartial(a["notification_helper.card_actions"],"notification_helper.card_actions",m,n,a),(m||0===m)&&(_+=m),_+="\n\n</div>"}),ABINE_DNTME.CompiledTemplates.notification_helper_paymentsr2_card_notification}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_real_card_notification=e.template(function(e,t,n,a,i){function r(e,t){var a,i,r="";return r+='\n    <div class="card-address" style="text-align:center;">\n      <div style="color:#4594E1">\n        <span style="font-size:12pt;">Billing Address</span>\n      </div>\n      <div style="color:#353535">\n        <span style="font-size:11pt;">',d=n.getAddress1,a=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress1"),typeof a===p?a=a.call(e,{hash:{}}):a===_&&(a=u.call(e,"getAddress1",{hash:{}})),r+=g(a)+"</span>\n        <br/>\n          ",d=n.getAddress2,a=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress2"),i=n["if"],c=h.program(2,s,t),c.hash={},c.fn=c,c.inverse=h.noop,a=i.call(e,a,c),(a||0===a)&&(r+=a),r+='\n        <span style="font-size:11pt;">',d=n.getCityState,a=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getCityState"),typeof a===p?a=a.call(e,{hash:{}}):a===_&&(a=u.call(e,"getCityState",{hash:{}})),r+=g(a)+'</span>\n        <br/>\n        <span style="font-size:11pt;">',d=n.getPostal,a=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getPostal"),typeof a===p?a=a.call(e,{hash:{}}):a===_&&(a=u.call(e,"getPostal",{hash:{}})),r+=g(a)+"</span>\n        <br/>\n      </div>\n    </div>\n"}function s(e){var t,a="";return a+='\n            <span style="font-size:11pt;">',d=n.getAddress2,t=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress2"),typeof t===p?t=t.call(e,{hash:{}}):t===_&&(t=u.call(e,"getAddress2",{hash:{}})),a+=g(t)+"</span>\n            <br/>\n          "}n=n||e.helpers,a=a||e.partials;var o,l,d,c,m="",h=this,p="function",u=n.helperMissing,_=void 0,g=this.escapeExpression;return m+='<div class="panel">\n  <div>\n    <span style="float:left; color:#4594E1;font-size:17px;margin-top:3px;margin-left:3px;">Auto-Fill Credit Card</span>\n    <div class="newheader" style="float:right;">\n      <div class="newlinks close-link">\n        <img id="close" class="close-notification" src="',o="/pages/images/2015panels/panel_xclose.png",d=n.assetUrl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"assetUrl",o,{hash:{}}):l,m+=g(o)+'">\n      </div>\n    </div>\n    <p style="height:20px;"></p>\n  </div>\n  ',o=t,o=h.invokePartial(a["notification_helper.card"],"notification_helper.card",o,n,a),(o||0===o)&&(m+=o),m+="\n  <p></p>\n",d=n.getAddress,o=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getAddress"),l=n["if"],c=h.program(1,r,i),c.hash={},c.fn=c,c.inverse=h.noop,o=l.call(t,o,c),(o||0===o)&&(m+=o),m+="\n  <!-- Default header (actually footer) for the panels -->\n</div>"}),ABINE_DNTME.CompiledTemplates.notification_helper_real_card_notification}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_save_card=e.template(function(e,t,n,a,i){function r(e){var t,i,r="";return r+='\n    <span id="save-card-dialog-unregistered">\n      <div style="margin-right:10px;">\n        ',t=e,t=h.invokePartial(a["notification_helper.card"],"notification_helper.card",t,n,a),(t||0===t)&&(r+=t),r+='\n        <div class="body-notification" style="font-size:12px;text-align:center;">',t="mm_notification_helper_save_card_blur_is_the_best",d=n.intl,i=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===p?i.call(e,t,{hash:{}}):i===_?u.call(e,"intl",t,{hash:{}}):i,r+=g(t)+'</div>\n        <div style="margin:10px 30px;font-size:12px;" id="reg-info">\n          ',t="mm_notification_helper_save_card_would_you_like",d=n.intl,i=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===p?i.call(e,t,{hash:{}}):i===_?u.call(e,"intl",t,{hash:{}}):i,r+=g(t)+'\n          <div style="margin-top:10px;">\n            <input type="button" class="btn done" id="never-unregistered" style="text-align:center;" value="',t="mm_notification_helper_never",d=n.intl,i=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===p?i.call(e,t,{hash:{}}):i===_?u.call(e,"intl",t,{hash:{}}):i,r+=g(t)+'" />\n            <input type="button" class="btn btn-success done" id="save-unregistered" style="text-align:center;" value="',t="mm_notification_helper_save_this_card",d=n.intl,i=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===p?i.call(e,t,{hash:{}}):i===_?u.call(e,"intl",t,{hash:{}}):i,r+=g(t)+'" />\n          </div>\n        </div>\n      </div>\n    </span>\n  '}function s(e){var t,i,r="";return r+='\n    <span id="save-card-dialog">\n      <div>\n        ',t=e,t=h.invokePartial(a["notification_helper.card"],"notification_helper.card",t,n,a),(t||0===t)&&(r+=t),r+='\n        <a class="editAndSave clearfix" href="#">',t="mm_notification_helper_save_card_edit_and_save",d=n.intl,i=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===p?i.call(e,t,{hash:{}}):i===_?u.call(e,"intl",t,{hash:{}}):i,r+=g(t)+'</a>\n          <div class="btn btn-primary done" id="save" style="padding:10px;font-size:25px;text-align:center;margin:5px;margin-top:10px;width: 80%;"><img src="',t="/pages/images/2015panels/save_account_check.png",d=n.assetUrl,i=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof i===p?i.call(e,t,{hash:{}}):i===_?u.call(e,"assetUrl",t,{hash:{}}):i,r+=g(t)+'">',t="mm_notification_helper_save_this_card",d=n.intl,i=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===p?i.call(e,t,{hash:{}}):i===_?u.call(e,"intl",t,{hash:{}}):i,r+=g(t)+'</div><br>\n          <a class="done" id="never" style="text-decoration:underline;text-align:center;margin:5px;color:darkgrey;">',t="mm_notification_helper_never_for_this_site",d=n.intl,i=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===p?i.call(e,t,{hash:{}}):i===_?u.call(e,"intl",t,{hash:{}}):i,r+=g(t)+'</a>\n          <strong><a class="done" id="always-save-cards-checkbox" style="text-decoration:underline;text-align:center;margin:5px;color:#3398db;">',t="mm_notification_helper_always_save_cards",d=n.intl,i=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===p?i.call(e,t,{hash:{}}):i===_?u.call(e,"intl",t,{hash:{}}):i,r+=g(t)+"</a></strong>\n      </div>\n    </span>\n  "}n=n||e.helpers,a=a||e.partials;var o,l,d,c,m="",h=this,p="function",u=n.helperMissing,_=void 0,g=this.escapeExpression;return m+='<div class="panel">\n  <div class="body-notification" style="cursor: default;">\n    <img src="',o="/images/Icon.png",d=n.assetUrl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"assetUrl",o,{hash:{}}):l,m+=g(o)+'"/>\n    <span class="boldFont">',o="mm_notification_helper_save_card_title",d=n.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"intl",o,{hash:{}}):l,m+=g(o)+'</span>\n    <img class="close-image" src="',o="/pages/images/manage/dd_close_icon.png",d=n.assetUrl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"assetUrl",o,{hash:{}}):l,m+=g(o)+'"/>\n  </div>\n\n  ',d=n.unregistered,o=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"unregistered"),l=n["if"],c=h.program(1,r,i),c.hash={},c.fn=c,c.inverse=h.program(3,s,i),o=l.call(t,o,c),(o||0===o)&&(m+=o),m+="\n\n  ",o=t,o=h.invokePartial(a["notification_helper.login_register_form"],"notification_helper.login_register_form",o,n,a),(o||0===o)&&(m+=o),m+='\n\n  <span id="post-signin-dialog" style="display:none;">\n    <div class="body-notification"><img src="',o="/images/Icon.png",d=n.assetUrl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"assetUrl",o,{hash:{}}):l,m+=g(o)+'"/>',o="mm_notification_helper_card_saved",d=n.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"intl",o,{hash:{}}):l,m+=g(o)+"</div>\n    <div>\n      ",o="mm_notification_helper_save_card_protect_now",d=n.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"intl",o,{hash:{}}):l,m+=g(o)+'\n    </div>\n    <div style="margin:10px 0px;">\n      <input type="button" id="ok-post-register" class="btn btn-success" style="margin-right:5px" value=\'',o="mm_dntme_ok",d=n.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"intl",o,{hash:{}}):l,m+=g(o)+'\'/>\n      <a href=\'https://link.abine.com/learnmore-cards\' target="_blank" id="learn-more-post-register" class="btn btn-primary">',o="mm_dntme_learn_more",d=n.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"intl",o,{hash:{}}):l,m+=g(o)+'</a>\n    </div>\n\n  </span>\n  <span id="post-save-dialog" style="display:none;">\n    <div class="body-notification"><img src="',o="/images/Icon.png",d=n.assetUrl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"assetUrl",o,{hash:{}}):l,m+=g(o)+'"/>',o="mm_notification_helper_card_saved",d=n.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"intl",o,{hash:{}}):l,m+=g(o)+"</div>\n    <div>\n      ",o="mm_notification_helper_save_card_protect_now",d=n.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"intl",o,{hash:{}}):l,m+=g(o)+"\n    </div>\n  </span>\n</div>"}),ABINE_DNTME.CompiledTemplates.notification_helper_save_card}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_save_login=e.template(function(e,t,n,a,i){function r(e){var t,a,i="";return i+='\n    <span id="save-password-dialog-unregistered">\n      <div style="float:left;margin-top:20px;margin-right:5px;">\n        <img src="',t="pages/images/dnt_blur_growl_blur_logo2.png",d=n.assetUrl,a=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===p?a.call(e,t,{hash:{}}):a===_?u.call(e,"assetUrl",t,{hash:{}}):a,i+=g(t)+'"/>\n      </div>\n      <div style="margin-right:10px;">\n        <div class="body-notification" style="font-size:12px;">',t="mm_notification_helper_save_login_blur_is_the_best",d=n.intl,a=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===p?a.call(e,t,{hash:{}}):a===_?u.call(e,"intl",t,{hash:{}}):a,i+=g(t)+'</div>\n        <div style="margin:10px 30px;font-size:12px;">\n          ',t="mm_notification_helper_save_login_would_you_like",d=n.intl,a=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===p?a.call(e,t,{hash:{}}):a===_?u.call(e,"intl",t,{hash:{}}):a,i+=g(t)+'\n          <div style="margin-top:10px;">\n            <input type="button" class="btn done" id="never-unregistered" style="text-align:center;" value="',t="mm_notification_helper_never",d=n.intl,a=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===p?a.call(e,t,{hash:{}}):a===_?u.call(e,"intl",t,{hash:{}}):a,i+=g(t)+'" />\n            <input type="button" class="btn btn-success done" id="save-unregistered" style="text-align:center;" value="',t="mm_notification_helper_save_login",d=n.intl,a=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===p?a.call(e,t,{hash:{}}):a===_?u.call(e,"intl",t,{hash:{}}):a,i+=g(t)+'" />\n          </div>\n        </div>\n      </div>\n     <div class="links settings-link" data-highlight="rememberaccounts" title="',t="mm_notification_helper_settings",d=n.intl,a=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===p?a.call(e,t,{hash:{}}):a===_?u.call(e,"intl",t,{hash:{}}):a,i+=g(t)+'">\n          <img class="header-icon" src="',t="/pages/images/dnt-ui-header-settings.png",d=n.assetUrl,a=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===p?a.call(e,t,{hash:{}}):a===_?u.call(e,"assetUrl",t,{hash:{}}):a,i+=g(t)+'">\n      </div>\n    </span>\n  '}function s(e){var t,i,r="";return r+='\n    <span id="save-password-dialog">\n      <div>\n          <div class="btn btn-primary done" id="save" style="padding:10px;font-size:25px;text-align:center;margin:5px;margin-top:10px;width: 80%;"><img src="',t="/pages/images/2015panels/save_account_check.png",d=n.assetUrl,i=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof i===p?i.call(e,t,{hash:{}}):i===_?u.call(e,"assetUrl",t,{hash:{}}):i,r+=g(t)+'">',t="mm_notification_helper_save_this_password",d=n.intl,i=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===p?i.call(e,t,{hash:{}}):i===_?u.call(e,"intl",t,{hash:{}}):i,r+=g(t)+'</div><br>\n          <a class="done" id="never" style="text-decoration:underline;text-align:center;margin:5px;color:darkgrey;">',t="mm_notification_helper_never_for_this_site",d=n.intl,i=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===p?i.call(e,t,{hash:{}}):i===_?u.call(e,"intl",t,{hash:{}}):i,r+=g(t)+'</a>\n          <strong><a class="done" id="always-save-accounts-checkbox" style="text-decoration:underline;text-align:center;margin:5px;color:#3398db;">',t="mm_notification_helper_always_save_passwords",d=n.intl,i=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===p?i.call(e,t,{hash:{}}):i===_?u.call(e,"intl",t,{hash:{}}):i,r+=g(t)+'</a></strong>\n      </div>\n    </span>\n    <!-- Default header (actually footer) for the panels -->\n  <div style="position:absolute;right:0;bottom:5px;top:0;">\n      ',t=e,t=h.invokePartial(a["common.header"],"common.header",t,n,a),(t||0===t)&&(r+=t),r+="\n    </div>\n  "}n=n||e.helpers,a=a||e.partials;var o,l,d,c,m="",h=this,p="function",u=n.helperMissing,_=void 0,g=this.escapeExpression;return m+='<div class="panel">\n  <div class="close-notification">\n      <img style="margin-top:1.2em;" src="',o="/images/blur_xclose.png",d=n.assetUrl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"assetUrl",o,{hash:{}}):l,m+=g(o)+'"/>\n  </div>\n\n  ',d=n.unregistered,o=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"unregistered"),l=n["if"],c=h.program(1,r,i),c.hash={},c.fn=c,c.inverse=h.program(3,s,i),o=l.call(t,o,c),(o||0===o)&&(m+=o),m+="\n\n  ",o=t,o=h.invokePartial(a["notification_helper.login_register_form"],"notification_helper.login_register_form",o,n,a),(o||0===o)&&(m+=o),m+='\n\n  <span id="post-signin-dialog" style="display:none;">\n    <div class="body-notification"><img src="',o="/images/Icon.png",d=n.assetUrl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"assetUrl",o,{hash:{}}):l,m+=g(o)+'"/>',o="mm_notification_helper_password_saved",d=n.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"intl",o,{hash:{}}):l,m+=g(o)+"</div>\n    <div>\n      ",o="mm_notification_helper_blur_will_now_protect",d=n.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"intl",o,{hash:{}}):l,m+=g(o)+'\n    </div>\n    <div style="margin:10px 0px;">\n      <input type="button" id="ok-post-register" class="btn btn-success" style="margin-right:5px" value=\'',o="mm_dntme_ok",d=n.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"intl",o,{hash:{}}):l,m+=g(o)+'\'/>\n      <a href=\'https://link.abine.com/learnmore-passwords\' target="_blank" id="learn-more-post-register" class="btn btn-primary">',o="mm_dntme_learn_more",d=n.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"intl",o,{hash:{}}):l,m+=g(o)+"</a>\n    </div>\n\n  </span>\n\n\n</div>"}),ABINE_DNTME.CompiledTemplates.notification_helper_save_login}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("payment_helper.company_cards",e.template(function(e,t,n,a,i){function r(e){var t,a,i="";return i+='\n      <a href="#" class="mmKeyOption">\n        <div class="element otherred" id="createCompanyCard">\n          <span class="panelLeft">\n              <img class="iconPos" src="',t="/pages/images/2015panels/card_green.png",l=n.assetUrl,a=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===h?a.call(e,t,{hash:{}}):a===u?p.call(e,"assetUrl",t,{hash:{}}):a,i+=_(t)+'" style="width:43px;height:21px;"/>\n            ',t="mm_payment_helper_company_create",l=n.intl,a=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===h?a.call(e,t,{hash:{}}):a===u?p.call(e,"intl",t,{hash:{}}):a,i+=_(t)+"\n          </span>\n        </div>\n      </a>\n"}n=n||e.helpers;var s,o,l,d,c="",m=this,h="function",p=n.helperMissing,u=void 0,_=this.escapeExpression;return c+="\n<!-- If Company Cards available-->\n",l=n.hasCompanyCards,s=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasCompanyCards"),o=n["if"],d=m.program(1,r,i),d.hash={},d.fn=d,d.inverse=m.noop,s=o.call(t,s,d),(s||0===s)&&(c+=s),c}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("payment_helper.disposable_cards",e.template(function(e,t,n,a,i){function r(e,t){var a,i,r="";return r+="\n  ",d=n.disposableCards,a=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"disposableCards"),i=n.each,c=h.program(2,s,t),c.hash={},c.fn=c,c.inverse=h.noop,a=i.call(e,a,c),(a||0===a)&&(r+=a),r+="\n"}function s(e){var t,a,i="";return i+='\n    <a href="#" data-cardid="',d=n.id,t=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof t===p?t=t.call(e,{hash:{}}):t===_&&(t=u.call(e,"id",{hash:{}})),i+=g(t)+'" class="mmKeyOption usedCard">\n      <div class="element othergreen" id="mask">\n        <span class="panelLeft">\n          <img class="iconPos" src="',t="/pages/images/2015panels/card_green.png",d=n.assetUrl,a=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===p?a.call(e,t,{hash:{}}):a===_?u.call(e,"assetUrl",t,{hash:{}}):a,i+=g(t)+'"\n               style="width:43px;height:21px;"/>\n          ',t="mm_payment_helper_useCardEnding",d=n.intl,a=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===p?a.call(e,t,{hash:{}}):a===_?u.call(e,"intl",t,{hash:{}}):a,i+=g(t)+" ",t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getLastFour"),typeof t===p?t=t.call(e,{hash:{}}):t===_&&(t=u.call(e,"this.getLastFour",{hash:{}})),i+=g(t)+'\n        </span>\n        <span class="panelRight">\n          <span class="overflowText">',d=n.getOriginalValue,t=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getOriginalValue"),typeof t===p?t=t.call(e,{hash:{}}):t===_&&(t=u.call(e,"getOriginalValue",{hash:{}})),i+=g(t)+" ",t="mm_payment_helper_card",d=n.intl,a=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===p?a.call(e,t,{hash:{}}):a===_?u.call(e,"intl",t,{hash:{}}):a,i+=g(t)+"</span>\n        </span>\n      </div>\n    </a>\n  "}n=n||e.helpers;var o,l,d,c,m="",h=this,p="function",u=n.helperMissing,_=void 0,g=this.escapeExpression;return m+="<!-- If Masked Cards already exist for this domain -->\n",d=n.disposableCards,o=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"disposableCards"),l=n["if"],c=h.program(1,r,i),c.hash={},c.fn=c,c.inverse=h.noop,o=l.call(t,o,c),(o||0===o)&&(m+=o),m}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("payment_helper.inline_faq",e.template(function(e,t,n){n=n||e.helpers;var a,i,r,s="",o="function",l=n.helperMissing,d=void 0,c=this.escapeExpression;return s+='<div id="inlineFaq" class="left-panel" style="display:none;margin-bottom:15px;">\n<div class=\'faqGotIt\' style="cursor:pointer;margin-left:10px;margin-top:5px;color:#555;font-weight:bold;"><img src="',a="/pages/images/2015panels/back_arrow.png",r=n.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"assetUrl",a,{hash:{}}):i,s+=c(a)+'"/>&nbsp;&nbsp;&nbsp;&nbsp;Go Back</div>\n<div class="payments-header" style="text-align:center;">\n  ',a="mm_payment_helper_safestWayTitle",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+"\n</div>\n<div style=\"margin: 0px 15px;\">\n  <div class='faq-question-header'>",a="mm_payment_helper_inlineFaqWhatAre",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+"</div>\n  <div class='faq-body'>\n    ",a="mm_payment_helper_inlineFaqMaskedCardsAre",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+"\n  </div>\n  <div class='faq-question-header'>",a="mm_payment_helper_inlineFaqAreThereAdditional",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+"</div>\n  <div class='faq-body'>\n    ",a="mm_payment_helper_inlineFaqAdditionalFees",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+"\n  </div>\n  <div class='faq-question-header'>",a="mm_payment_helper_inlineFaqWhatIfIDont",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+"</div>\n  <div class='faq-body'>\n    ",a="mm_payment_helper_inlineFaqClose_1",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+" <a href='#' id='viewCardsDashboard'>",a="mm_payment_helper_inlineFaqClose_2",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+"</a>\n  </div>\n  <div style=\"text-align: center;margin:5px 0px;\">\n    <input type=\"button\" id='faqCardLink' class='btn btn-primary' value='",a="mm_payment_helper_link",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+"'/>\n    <input type=\"button\" class='faqGotIt btn btn-success' value='",a="mm_payment_helper_inlineFaqGotIt",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+"'/>\n  </div>\n</div>\n</div>"}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("payment_helper.mask_my_card",e.template(function(e,t,n,a,i){function r(e,t){var a,i,r="";return r+='\n        <a href="#" data-cardid="',c=n.id,a=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof a===u?a=a.call(e,{hash:{}}):a===g&&(a=_.call(e,"id",{hash:{}})),r+=f(a)+'" class="mmKeyOption">\n            <div class="element othergreen" id="protect-my-card-btn">\n                  <span class="panelLeft">\n                    <img class="iconPos" src="',
a="/pages/images/2015panels/card_green.png",c=n.assetUrl,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),a=typeof i===u?i.call(e,a,{hash:{}}):i===g?_.call(e,"assetUrl",a,{hash:{}}):i,r+=f(a)+'" style="width:43px;height:21px;"/>\n                    ',a="mm_payment_helper_create_new_masked_card",c=n.intl,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===u?i.call(e,a,{hash:{}}):i===g?_.call(e,"intl",a,{hash:{}}):i,r+=f(a)+"\n                  </span>\n            </div>\n        </a>\n\n    ",c=n.entitledToPhone,a=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"entitledToPhone"),i=n["if"],m=p.program(2,s,t),m.hash={},m.fn=m,m.inverse=p.noop,a=i.call(e,a,m),(a||0===a)&&(r+=a),r+="\n    "}function s(e,t){var a,i,r="";return r+="\n        ",c=n.hasAuthorizedCoinbase,a=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"hasAuthorizedCoinbase"),i=n["if"],m=p.program(3,o,t),m.hash={},m.fn=m,m.inverse=p.noop,a=i.call(e,a,m),(a||0===a)&&(r+=a),r+="\n    "}function o(e){var t,a,i="";return i+='\n            <a href="#" data-cardid="',c=n.id,t=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof t===u?t=t.call(e,{hash:{}}):t===g&&(t=_.call(e,"id",{hash:{}})),i+=f(t)+'" class="mmKeyOption">\n                <div class="element othergreen" id="protect-my-card-bitcoin-btn">\n                <span class="panelLeft">\n                    <img class="iconPos" src="',t="/pages/images/maskcard-icon-bitcoin.png",c=n.assetUrl,a=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===u?a.call(e,t,{hash:{}}):a===g?_.call(e,"assetUrl",t,{hash:{}}):a,i+=f(t)+'"/>\n                    ',t="mm_payment_helper_create_new_masked_card",c=n.intl,a=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===u?a.call(e,t,{hash:{}}):a===g?_.call(e,"intl",t,{hash:{}}):a,i+=f(t)+'\n                </span>\n                 <span class="panelRight">\n                    <span class="overflowText">(bitcoin)</span>\n                </span>\n                </div>\n            </a>\n        '}n=n||e.helpers,a=a||e.partials;var l,d,c,m,h="",p=this,u="function",_=n.helperMissing,g=void 0,f=this.escapeExpression;return h+='<div class="payments-step" id="panelOptions">\n    ',c=n.cardDisabled,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"cardDisabled"),d=n.unless,m=p.program(1,r,i),m.hash={},m.fn=m,m.inverse=p.noop,l=d.call(t,l,m),(l||0===l)&&(h+=l),h+="\n\n    ",l=t,l=p.invokePartial(a["payment_helper.disposable_cards"],"payment_helper.disposable_cards",l,n,a),(l||0===l)&&(h+=l),h+="\n    ",l=t,l=p.invokePartial(a["payment_helper.company_cards"],"payment_helper.company_cards",l,n,a),(l||0===l)&&(h+=l),h+="\n    ",l=t,l=p.invokePartial(a["payment_helper.real_cards"],"payment_helper.real_cards",l,n,a),(l||0===l)&&(h+=l),h+="\n</div>"}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("payment_helper.no_card_on_file",e.template(function(e,t,n,a,i){function r(e){var t,a,i="";return i+='\n        <input id="autoEmail" type="text" placeholder="',t="mm_payment_helper_email",l=n.intl,a=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===h?a.call(e,t,{hash:{}}):a===u?p.call(e,"intl",t,{hash:{}}):a,i+=_(t)+'">\n      '}n=n||e.helpers;var s,o,l,d,c="",m=this,h="function",p=n.helperMissing,u=void 0,_=this.escapeExpression;return c+='<div id="register" class="payments-step" style="display: none;">\n  <div class="payments-header">',s="mm_payment_helper_card_complete_title",l=n.intl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof o===h?o.call(t,s,{hash:{}}):o===u?p.call(t,"intl",s,{hash:{}}):o,c+=_(s)+'</div>\n\n  <div style="width:610px;" id="billingInfoForm">\n    <div style="width:49%;display:inline-block;vertical-align:top;">\n\n      <input id="autoFname" type="text" placeholder="',s="mm_payment_helper_first_name",l=n.intl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof o===h?o.call(t,s,{hash:{}}):o===u?p.call(t,"intl",s,{hash:{}}):o,c+=_(s)+'">\n      <input id="autoLname" type="text" placeholder="',s="mm_payment_helper_last_name",l=n.intl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof o===h?o.call(t,s,{hash:{}}):o===u?p.call(t,"intl",s,{hash:{}}):o,c+=_(s)+'">\n\n      <input id="autoAddress" type="text" placeholder="',s="mm_payment_helper_address",l=n.intl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof o===h?o.call(t,s,{hash:{}}):o===u?p.call(t,"intl",s,{hash:{}}):o,c+=_(s)+'">\n      <input id="autoApt" data-optional="yes" type="text" placeholder="',s="mm_payment_helper_apt",l=n.intl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof o===h?o.call(t,s,{hash:{}}):o===u?p.call(t,"intl",s,{hash:{}}):o,c+=_(s)+'">\n\n      <input id="autoCity" type="text" placeholder="',s="mm_payment_helper_city",l=n.intl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof o===h?o.call(t,s,{hash:{}}):o===u?p.call(t,"intl",s,{hash:{}}):o,c+=_(s)+'">\n      <select id="autoStateUS"><option value="">Select State</option><option value="">------------</option><option value="AK">Alaska</option><option value="AL">Alabama</option><option value="AP">Armed Forces Pacific</option><option value="AR">Arkansas</option><option value="AS">American Samoa</option><option value="AZ">Arizona</option><option value="CA">California</option><option value="CO">Colorado</option><option value="CT">Connecticut</option><option value="DC">District of Columbia</option><option value="DE">Delaware</option><option value="FL">Florida</option><option value="FM">Federated States of Micronesia</option><option value="GA">Georgia</option><option value="GU">Guam</option><option value="HI">Hawaii</option><option value="IA">Iowa</option><option value="ID">Idaho</option><option value="IL">Illinois</option><option value="IN">Indiana</option><option value="KS">Kansas</option><option value="KY">Kentucky</option><option value="LA">Louisiana</option><option value="MA">Massachusetts</option><option value="MD">Maryland</option><option value="ME">Maine</option><option value="MH">Marshall Islands</option><option value="MI">Michigan</option><option value="MN">Minnesota</option><option value="MO">Missouri</option><option value="MP">Northern Mariana Islands</option><option value="MS">Mississippi</option><option value="MT">Montana</option><option value="NC">North Carolina</option><option value="ND">North Dakota</option><option value="NE">Nebraska</option><option value="NH">New Hampshire</option><option value="NJ">New Jersey</option><option value="NM">New Mexico</option><option value="NV">Nevada</option><option value="NY">New York</option><option value="OH">Ohio</option><option value="OK">Oklahoma</option><option value="OR">Oregon</option><option value="PA">Pennsylvania</option><option value="PR">Puerto Rico</option><option value="PW">Palau</option><option value="RI">Rhode Island</option><option value="SC">South Carolina</option><option value="SD">South Dakota</option><option value="TN">Tennessee</option><option value="TX">Texas</option><option value="UT">Utah</option><option value="VA">Virginia</option><option value="VI">Virgin Islands</option><option value="VT">Vermont</option><option value="WA">Washington</option><option value="WV">West Virginia</option><option value="WI">Wisconsin</option><option value="WY">Wyoming</option></select>\n      <input id="autoState" type="text" placeholder="',s="mm_payment_helper_state",l=n.intl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof o===h?o.call(t,s,{hash:{}}):o===u?p.call(t,"intl",s,{hash:{}}):o,c+=_(s)+'" style="display:none;">\n      <input id="autoZip" type="text" placeholder="',s="mm_payment_helper_zip",l=n.intl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof o===h?o.call(t,s,{hash:{}}):o===u?p.call(t,"intl",s,{hash:{}}):o,c+=_(s)+'">\n\n      <select id="autoCountry"><option value="">Select Country</option><option value="">--------------</option><option value="AF">Afghanistan</option><option value="AL">Albania</option><option value="DZ">Algeria</option><option value="AS">American Samoa</option><option value="AD">Andorra</option><option value="AO">Angola</option><option value="AI">Anguilla</option><option value="AQ">Antarctica</option><option value="AG">Antigua and Barbuda</option><option value="AR">Argentina</option><option value="AM">Armenia</option><option value="AW">Aruba</option><option value="AC">Ascension Island</option><option value="AU">Australia</option><option value="AT">Austria</option><option value="AZ">Azerbaijan</option><option value="BS">Bahamas</option><option value="BH">Bahrain</option><option value="BD">Bangladesh</option><option value="BB">Barbados</option><option value="BE">Belgium</option><option value="BZ">Belize</option><option value="BJ">Benin</option><option value="BM">Bermuda</option><option value="BT">Bhutan</option><option value="BO">Bolivia</option><option value="BA">Bosnia and Herzegovina</option><option value="BW">Botswana</option><option value="BV">Bouvet Island</option><option value="BR">Brazil</option><option value="BQ">British Antarctic Territory</option><option value="IO">British Indian Ocean Territory</option><option value="VG">British Virgin Islands</option><option value="BN">Brunei</option><option value="BG">Bulgaria</option><option value="BF">Burkina Faso</option><option value="BI">Burundi</option><option value="KH">Cambodia</option><option value="CM">Cameroon</option><option value="CA">Canada</option><option value="IC">Canary Islands</option><option value="CT">Canton and Enderbury Islands</option><option value="CV">Cape Verde</option><option value="KY">Cayman Islands</option><option value="CF">Central African Republic</option><option value="EA">Ceuta and Melilla</option><option value="TD">Chad</option><option value="CL">Chile</option><option value="CN">China</option><option value="CX">Christmas Island</option><option value="CP">Clipperton Island</option><option value="CC">Cocos [Keeling] Islands</option><option value="CO">Colombia</option><option value="KM">Comoros</option><option value="CD">Congo [DRC]</option><option value="CK">Cook Islands</option><option value="CR">Costa Rica</option><option value="HR">Croatia</option><option value="CU">Cuba</option><option value="CY">Cyprus</option><option value="CZ">Czech Republic</option><option value="DK">Denmark</option><option value="DG">Diego Garcia</option><option value="DJ">Djibouti</option><option value="DM">Dominica</option><option value="DO">Dominican Republic</option><option value="NQ">Dronning Maud Land</option><option value="TL">East Timor</option><option value="EC">Ecuador</option><option value="EG">Egypt</option><option value="SV">El Salvador</option><option value="EE">Estonia</option><option value="ET">Ethiopia</option><option value="FK">Falkland Islands [Islas Malvinas]</option><option value="FO">Faroe Islands</option><option value="FJ">Fiji</option><option value="FI">Finland</option><option value="FR">France</option><option value="GF">French Guiana</option><option value="PF">French Polynesia</option><option value="TF">French Southern Territories</option><option value="FQ">French Southern and Antarctic Territories</option><option value="GA">Gabon</option><option value="GM">Gambia</option><option value="GE">Georgia</option><option value="DE">Germany</option><option value="GH">Ghana</option><option value="GI">Gibraltar</option><option value="GR">Greece</option><option value="GL">Greenland</option><option value="GD">Grenada</option><option value="GP">Guadeloupe</option><option value="GU">Guam</option><option value="GT">Guatemala</option><option value="GG">Guernsey</option><option value="GW">Guinea-Bissau</option><option value="GY">Guyana</option><option value="HT">Haiti</option><option value="HM">Heard Island and McDonald Islands</option><option value="HN">Honduras</option><option value="HK">Hong Kong</option><option value="HU">Hungary</option><option value="IS">Iceland</option><option value="IN">India</option><option value="ID">Indonesia</option><option value="IE">Ireland</option><option value="IM">Isle of Man</option><option value="IL">Israel</option><option value="IT">Italy</option><option value="JM">Jamaica</option><option value="JP">Japan</option><option value="JE">Jersey</option><option value="JT">Johnston Island</option><option value="JO">Jordan</option><option value="KZ">Kazakhstan</option><option value="KE">Kenya</option><option value="KI">Kiribati</option><option value="KW">Kuwait</option><option value="KG">Kyrgyzstan</option><option value="LA">Laos</option><option value="LV">Latvia</option><option value="LS">Lesotho</option><option value="LY">Libya</option><option value="LI">Liechtenstein</option><option value="LT">Lithuania</option><option value="LU">Luxembourg</option><option value="MO">Macau</option><option value="MK">Macedonia [FYROM]</option><option value="MG">Madagascar</option><option value="MW">Malawi</option><option value="MY">Malaysia</option><option value="MV">Maldives</option><option value="ML">Mali</option><option value="MT">Malta</option><option value="MH">Marshall Islands</option><option value="MQ">Martinique</option><option value="MR">Mauritania</option><option value="MU">Mauritius</option><option value="YT">Mayotte</option><option value="FX">Metropolitan France</option><option value="MX">Mexico</option><option value="FM">Micronesia</option><option value="MI">Midway Islands</option><option value="MD">Moldova</option><option value="MC">Monaco</option><option value="MN">Mongolia</option><option value="ME">Montenegro</option><option value="MS">Montserrat</option><option value="MA">Morocco</option><option value="MZ">Mozambique</option><option value="NA">Namibia</option><option value="NR">Nauru</option><option value="NP">Nepal</option><option value="NL">Netherlands</option><option value="AN">Netherlands Antilles</option><option value="NT">Neutral Zone</option><option value="NC">New Caledonia</option><option value="NZ">New Zealand</option><option value="NI">Nicaragua</option><option value="NE">Niger</option><option value="NG">Nigeria</option><option value="NU">Niue</option><option value="NF">Norfolk Island</option><option value="VD">North Vietnam</option><option value="MP">Northern Mariana Islands</option><option value="NO">Norway</option><option value="OM">Oman</option><option value="QO">Outlying Oceania</option><option value="PC">Pacific Islands Trust Territory</option><option value="PK">Pakistan</option><option value="PW">Palau</option><option value="PS">Palestinian Territories</option><option value="PA">Panama</option><option value="PZ">Panama Canal Zone</option><option value="PY">Paraguay</option><option value="YD">People\'s Democratic Republic of Yemen</option><option value="PE">Peru</option><option value="PH">Philippines</option><option value="PN">Pitcairn Islands</option><option value="PL">Poland</option><option value="PT">Portugal</option><option value="PR">Puerto Rico</option><option value="QA">Qatar</option><option value="RO">Romania</option><option value="RU">Russia</option><option value="RW">Rwanda</option><option value="RE">R&eacute;union</option><option value="BL">Saint Barth&eacute;lemy</option><option value="SH">Saint Helena</option><option value="KN">Saint Kitts and Nevis</option><option value="LC">Saint Lucia</option><option value="MF">Saint Martin</option><option value="PM">Saint Pierre and Miquelon</option><option value="VC">Saint Vincent and the Grenadines</option><option value="WS">Samoa</option><option value="SM">San Marino</option><option value="SA">Saudi Arabia</option><option value="SN">Senegal</option><option value="RS">Serbia</option><option value="CS">Serbia and Montenegro</option><option value="SC">Seychelles</option><option value="SL">Sierra Leone</option><option value="SG">Singapore</option><option value="SK">Slovakia</option><option value="SI">Slovenia</option><option value="SB">Solomon Islands</option><option value="ZA">South Africa</option><option value="GS">South Georgia and the South Sandwich Islands</option><option value="KR">South Korea</option><option value="ES">Spain</option><option value="LK">Sri Lanka</option><option value="SR">Suriname</option><option value="SJ">Svalbard and Jan Mayen</option><option value="SZ">Swaziland</option><option value="SE">Sweden</option><option value="CH">Switzerland</option><option value="ST">S&atilde;o Tom&eacute; and Pr&iacute;ncipe</option><option value="TW">Taiwan</option><option value="TJ">Tajikistan</option><option value="TZ">Tanzania</option><option value="TH">Thailand</option><option value="TG">Togo</option><option value="TK">Tokelau</option><option value="TO">Tonga</option><option value="TT">Trinidad and Tobago</option><option value="TA">Tristan da Cunha</option><option value="TN">Tunisia</option><option value="TR">Turkey</option><option value="TM">Turkmenistan</option><option value="TC">Turks and Caicos Islands</option><option value="TV">Tuvalu</option><option value="UM">U.S. Minor Outlying Islands</option><option value="PU">U.S. Miscellaneous Pacific Islands</option><option value="VI">U.S. Virgin Islands</option><option value="UG">Uganda</option><option value="UA">Ukraine</option><option value="AE">United Arab Emirates</option><option value="GB">United Kingdom</option><option value="US" selected="selected">United States</option><option value="UY">Uruguay</option><option value="UZ">Uzbekistan</option><option value="VU">Vanuatu</option><option value="VA">Vatican City</option><option value="VE">Venezuela</option><option value="VN">Vietnam</option><option value="WK">Wake Island</option><option value="WF">Wallis and Futuna</option><option value="EH">Western Sahara</option><option value="YE">Yemen</option><option value="ZM">Zambia</option><option value="AX">&Aring;land Islands</option></select>\n    </div>\n\n    <div style="width:49%;display:inline-block;vertical-align:top;">\n\n      <input id="autoCardNumber" type="text" placeholder="',s="mm_payment_helper_credit_card_number",l=n.intl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof o===h?o.call(t,s,{hash:{}}):o===u?p.call(t,"intl",s,{hash:{}}):o,c+=_(s)+'">\n      <input id="autoCardCvv" type="text" placeholder="',s="mm_payment_helper_cvv",l=n.intl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof o===h?o.call(t,s,{hash:{}}):o===u?p.call(t,"intl",s,{hash:{}}):o,c+=_(s)+'">\n\n\n      <select id="autoCardMonth"><option value="1">01 - January</option><option value="2">02 - February</option><option value="3">03 - March</option><option value="4">04 - April</option><option value="5">05 - May</option><option value="6">06 - June</option><option value="7">07 - July</option><option value="8">08 - August</option><option value="9">09 - September</option><option value="10">10 - October</option><option value="11">11 - November</option><option value="12">12 - December</option></select>\n      <select id="autoCardYear"><option name="2015" selected>2015</option><option name="2016">2016</option><option name="2017">2017</option><option name="2018">2018</option><option name="2019">2019</option><option name="2020">2020</option><option name="2021">2021</option><option name="2022">2022</option><option name="2023">2023</option><option name="2014">2024</option></select>\n\n      ',l=n.hasRegistered,s=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasRegistered"),o=n.unless,d=m.program(1,r,i),d.hash={},d.fn=d,d.inverse=m.noop,s=o.call(t,s,d),(s||0===s)&&(c+=s),c+='\n      <button class="btn btn-primary" id="registerAndMask" style="position:relative;bottom:-15;">\n        <div>Protect My Card</div>\n      </button>\n\n    </div>\n\n    <div class="alert-error submit-error" style="display: none"></div>\n    <div class="progress" style="display: none;text-align: center;margin-bottom:0px;">please wait...</div>\n  </div>\n</div>'}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("payment_helper.protect_my_card",e.template(function(e,t,n,a,i){function r(e,t){var a,i,r="";return r+="\n      ",c=n.firstFiveCards,a=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"firstFiveCards"),i=n["if"],m=p.program(2,s,t),m.hash={},m.fn=m,m.inverse=p.program(4,o,t),a=i.call(e,a,m),(a||0===a)&&(r+=a),r+="\n    "}function s(e){var t,a,i="";return i+='\n      <div class="payments-header">\n        ',t="mm_payment_helper_safestWayTitle",c=n.intl,a=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===u?a.call(e,t,{hash:{}}):a===g?_.call(e,"intl",t,{hash:{}}):a,i+=f(t)+'\n      </div>\n\n      <div class="payments-protect-card-body">\n        ',t="mm_payment_helper_protectYourCardInFew",c=n.intl,a=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===u?a.call(e,t,{hash:{}}):a===g?_.call(e,"intl",t,{hash:{}}):a,i+=f(t)+'\n      </div>\n      <input type="button" id="protect-my-card-btn" class="btn btn-primary" value="Protect My Card" style="margin: -10px 0px 13px 0px;"/>\n      <div id="inlineFaqLink" class="links help-link" style="display:inline-block;padding-bottom:5px;cursor:pointer;">\n        <img id="help" class="header-icon" src="',t="/pages/images/dnt-ui-header-help.png",c=n.assetUrl,a=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===u?a.call(e,t,{hash:{}}):a===g?_.call(e,"assetUrl",t,{hash:{}}):a,i+=f(t)+'" style="width:19px;margin-left:8px;">\n      </div>\n      '}function o(e){var t,a,i="";return i+='\n      <a href="#" data-cardid="',c=n.id,t=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof t===u?t=t.call(e,{hash:{}}):t===g&&(t=_.call(e,"id",{hash:{}})),i+=f(t)+'" class="mmKeyOption">\n        <div class="element othergreen" id="protect-my-card-btn">\n          <span class="panelLeft">\n            <img class="iconPos" src="',t="/pages/images/2015panels/card_green.png",c=n.assetUrl,a=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===u?a.call(e,t,{hash:{}}):a===g?_.call(e,"assetUrl",t,{hash:{}}):a,i+=f(t)+'" style="width:43px;height:21px;"/>\n            ',t="mm_payment_helper_create_new_masked_card",c=n.intl,a=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===u?a.call(e,t,{hash:{}}):a===g?_.call(e,"intl",t,{hash:{}}):a,i+=f(t)+"\n          </span>\n        </div>\n      </a>\n      "}n=n||e.helpers,a=a||e.partials;var l,d,c,m,h="",p=this,u="function",_=n.helperMissing,g=void 0,f=this.escapeExpression;return h+='<div class="payments-step" id="panelOptions">\n    ',c=n.cardDisabled,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"cardDisabled"),d=n.unless,m=p.program(1,r,i),m.hash={},m.fn=m,m.inverse=p.noop,l=d.call(t,l,m),(l||0===l)&&(h+=l),h+="\n    ",l=t,l=p.invokePartial(a["payment_helper.disposable_cards"],"payment_helper.disposable_cards",l,n,a),(l||0===l)&&(h+=l),h+="\n    ",l=t,l=p.invokePartial(a["payment_helper.company_cards"],"payment_helper.company_cards",l,n,a),(l||0===l)&&(h+=l),h+="\n    ",l=t,l=p.invokePartial(a["payment_helper.real_cards"],"payment_helper.real_cards",l,n,a),(l||0===l)&&(h+=l),h+="\n</div>"}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("payment_helper.real_cards",e.template(function(e,t,n,a,i){function r(e,t){var a,i,r="";return r+="\n  ",p=n.realCardDisabled,a=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"realCardDisabled"),i=n.unless,u=g.program(2,s,t),u.hash={},u.fn=u,u.inverse=g.noop,a=i.call(e,a,u),(a||0===a)&&(r+=a),r+="\n"}function s(e,t){var a,i,r="";return r+="\n    ",p=n.realCards,a=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"realCards"),i=n.each,u=g.program(3,o,t),u.hash={},u.fn=u,u.inverse=g.program(6,d,t),a=i.call(e,a,u),(a||0===a)&&(r+=a),r+="\n    ",p=n.realCards,a=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"realCards"),a=null===a||void 0===a||a===!1?a:ABINE_DNTME.Duckbone.Handlebars.getAttr(a,"length"),i=n["if"],u=g.program(8,c,t),u.hash={},u.fn=u,u.inverse=g.noop,a=i.call(e,a,u),(a||0===a)&&(r+=a),r+="\n  "}function o(e,t){var a,i,r="";return r+='\n      <a href="#" data-cardid="',p=n.id,a=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof a===f?a=a.call(e,{hash:{}}):a===y&&(a=b.call(e,"id",{hash:{}})),r+=v(a)+'" class="mmKeyOption usedCard">\n        <div class="element" id="disclose">\n          <span class="panelLeft" style="width:80%;overflow:hidden;display: inline-block;height:30px;text-wrap:suppress;word-wrap:break-word;">\n              <img class="iconPos" src="',a="/pages/images/2015panels/card_red_arrow.png",p=n.assetUrl,i=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),a=typeof i===f?i.call(e,a,{hash:{}}):i===y?b.call(e,"assetUrl",a,{hash:{}}):i,r+=v(a)+'" style="width:15px;height:21px;margin-right:0;"/>\n              <img class="iconPos" src="',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getTypeImage"),typeof a===f?a=a.call(e,{hash:{}}):a===y&&(a=b.call(e,"this.getTypeImage",{hash:{}})),r+=v(a)+'" style="width:32px;height:32px;margin-left: -4px;"/>\n            ',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getLabelOrLastFour"),typeof a===f?a=a.call(e,{hash:{}}):a===y&&(a=b.call(e,"this.getLabelOrLastFour",{hash:{}})),r+=v(a)+"\n          </span>\n          ",a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"labelChangeRequired"),i=n["if"],u=g.program(4,l,t),u.hash={},u.fn=u,u.inverse=g.noop,a=i.call(e,a,u),(a||0===a)&&(r+=a),r+="\n        </div>\n      </a>\n    "}function l(e){var t,a,i="";return i+='\n          <span class="panelRight edit_name" style="width:18%;">\n            <span class="overflowText" style="text-transform: none;">',t="mm_payment_helper_edit_name",p=n.intl,a=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===f?a.call(e,t,{hash:{}}):a===y?b.call(e,"intl",t,{hash:{}}):a,i+=v(t)+"</span>\n          </span>\n          "}function d(e){var t,a,i="";return i+='\n      <a href="#" class="mmKeyOption useMyCard">\n        <div class="element" id="disclose">\n          <span class="panelLeft">\n              <img class="iconPos" src="',t="/pages/images/2015panels/card_red.png",p=n.assetUrl,a=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===f?a.call(e,t,{hash:{}}):a===y?b.call(e,"assetUrl",t,{hash:{}}):a,i+=v(t)+'" style="width:43px;height:21px;"/>\n            ',t="mm_payment_helper_useMyCard",p=n.intl,a=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===f?a.call(e,t,{hash:{}}):a===y?b.call(e,"intl",t,{hash:{}}):a,i+=v(t)+"\n          </span>\n        </div>\n      </a>\n    "}function c(e){var t,a,i="";return i+='\n          <a href="#" class="mmKeyOption useMyCard">\n            <div class="element" id="disclose">\n              <span class="panelLeft">\n                  <img class="iconPos" src="',t="/pages/images/2015panels/card_red.png",p=n.assetUrl,a=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===f?a.call(e,t,{hash:{}}):a===y?b.call(e,"assetUrl",t,{hash:{}}):a,i+=v(t)+'" style="width:43px;height:21px;"/>\n                ',t="mm_payment_helper_addOrEdit",p=n.intl,a=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===f?a.call(e,t,{hash:{}}):a===y?b.call(e,"intl",t,{hash:{}}):a,i+=v(t)+"\n              </span>\n            </div>\n          </a>\n    "}n=n||e.helpers,a=a||e.partials;var m,h,p,u,_="",g=this,f="function",b=n.helperMissing,y=void 0,v=this.escapeExpression;return _+="\n<!-- If Real Cards to fill-->\n",p=n.canShowRealCards,m=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"canShowRealCards"),h=n["if"],u=g.program(1,r,i),u.hash={},u.fn=u,u.inverse=g.noop,m=h.call(t,m,u),(m||0===m)&&(_+=m),_+="\n\n",m=t,m=g.invokePartial(a["common.auto_fill_with"],"common.auto_fill_with",m,n,a),(m||0===m)&&(_+=m),_}))}),ABINE_DNTME.define("abine/views/paymentHelperPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/views/loading_display","abine/contentMessenger","abine/intl","abine/responseCodes","abine/config","abine/proxies"],function(e,t,n,a,i,r,s,o,l,d,c,m){function h(e){for(var t=0,n=!1,a=e.length-1;a>=0;a--,n=!n){var i=parseInt(e.charAt(a));n&&(i*=2,i>9&&(i-=9)),t+=i}return t%10==0}function p(e,t){t=t||"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!-$#%^@";for(var n="",a=0;a<e;a++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}var u=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i,_=/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|6(?:011|5[0-9]{2})[0-9]{12}|(?:2131|1800|35\d{3})\d{11})$/i,g=[{regex:/^4[0-9]{12}(?:[0-9]{3})?$/,spacing:[4,4,4]},{regex:/^5[1-5][0-9]{14}$/,spacing:[4,4,4]},{regex:/^3[47][0-9]{13}$/,spacing:[4,6]},{regex:/^3(?:0[0-5]|[68][0-9])[0-9]{11}$/,spacing:[4,6]},{regex:/^6(?:011|5[0-9]{2})[0-9]{12}$/,spacing:[4,4,4]},{regex:/^(?:2131|1800|35\d{3})\d{11}$/,spacing:[4,4,4]}],f={"/financial/creditcard/number/part1":"part1","/financial/creditcard/number/part2":"part2","/financial/creditcard/number/part3":"part3","/financial/creditcard/number/part4":"part4","/financial/creditcard/number":"number","/financial/creditcard/type":"type","/financial/creditcard/issuedto":"issuedto","/financial/creditcard/expirymonth":"expirymonth","/financial/creditcard/expiryyear":"expiryyear","/financial/creditcard/verification":"cvv","/contact/postaladdress/billing":"address1","/contact/postaladdressAdditional/billing":"address2","/contact/state/billing":"state","/contact/state/code/billing":"state","/contact/city/billing":"city","/contact/country/billing":"country","/contact/postalcode/billing":"zip","/contact/postaladdress":"address1","/contact/postaladdressAdditional":"address2","/contact/state":"state","/contact/state/code":"state","/contact/city":"city","/contact/country":"country","/contact/postalcode":"zip","/nameperson/last":"lname","/nameperson/first":"fname","/nameperson/full":"name"},b=i.extend({templateName:"payment_helper_paymentsr3_card_money",events:{"click .whatIsThisLink":"openMaskedCardsIn30","mousedown a.disposableCard":"verifyCardRequest","click #registerAndMask":"registerAndMask","mousedown a.usedCard":"fillWithUsedCard","click a.useMyCard":"openAddCard","click a.getStarted":"getStarted","click a.setupCard":"getStartedWithPayments","click .panelSection":"performActions","click #createCard":"createCard","click #cancelCardCreate":"cancelCardCreate","click #confirmCardCreate":"confirmCardCreate","click #useMaskedCard":"fillWithDisposableCard","click #linkToErrorReport":"makeErrorReport","click .maskedCardErrorSupport":"makeErrorReport","click #registerHelp span":"openCardFAQ","change #autoCountry":"countryChanged","mousedown .subscription-option":"subscriptionClicked","click .chatNow":"chatNow","click .close-link":"logClose","click .edit_name":"openEditCard","click .cash-for-cards-webapp-faq":"openCashForCardsFaq","click #createCompanyCard":"createCompanyCard","click #protect-my-card-btn":"verifyCardRequest","click #protect-my-card-bitcoin-btn":"verifyCardRequestBtc","click #inlineFaqLink":"openInlineFAQ","click #faqCardLink":"openCardFAQWebapp","click .faqGotIt":"faqGotIt","click #viewCardsDashboard":"openCardsDashboard","click #masterPassAuth":"masterPassAuth","click #retryBiometricAuth":"retryBiometricAuth","submit form.unlock":"verifyMasterPass","click #upgradeToPremiumCheckboxDiv":"upgradeToPremiumCheckboxClicked"},billingInfoViewExtraWidth:215,createCompanyCard:function(e){this.model.companyRequest=!0,this.verifyCardRequest(e)},upgradeToPremiumCheckboxClicked:function(){this.$("#upgradeToPremium").is(":checked")?this.model.upgradeToPremium=!0:this.model.upgradeToPremium=!1,this.ignoreBlur(!0)},openInlineFAQ:function(){this.ignoreBlur(!0);var e={extraWidth:this.$("#register").is(":visible")?this.billingInfoViewExtraWidth*-1:null,extraHeight:this.$("#register").is(":visible")?40:null};this.$(".normal-flow").hide(),this.$("#inlineFaq").show(),this.autoResize(e)},openCardFAQWebapp:function(){m.webapp.openPage("#help/faq/faq-maskedCards"),this.closePanel()},openAddCard:function(){this.updatePanelActivity("impression",this.clickedAutofillRealCardWhenNoCardExistsPanelId,this.fieldId,!1),this.model.realCards&&this.model.realCards.length>0?m.webapp.openPage("/#real_cards"):m.webapp.openPage("/#real_cards/add"),this.closePanel()},openEditCard:function(e){for(var n,a=e.currentTarget;!n&&a;)n=t(a).data("cardid"),a=a.parentNode;return n&&(m.webapp.openPage("/#real_cards/edit/"+n),this.closePanel()),e.preventDefault(),!1},faqGotIt:function(){this.ignoreBlur(!1),this.$("#inlineFaq").hide(),this.$(".normal-flow").show();var e={extraWidth:this.$("#register").is(":visible")?this.billingInfoViewExtraWidth:null};this.autoResize(e),this.$("#cardAmount").focus()},openCardsDashboard:function(e){e.preventDefault(),m.webapp.openPage("/#/client/cards")},logClose:function(){this.updatePanelActivity("closed",this.panelId,this.fieldId,!0)},chatNow:function(e){
e.preventDefault(),m.securityManager.openWindow("https://a3.websitealive.com/623/rRouter.asp?infocapture_ids=259,260&infocapture_values=|&groupid=623&wsa_custom0=card-error&wsa_custom1=&websiteid=0&departmentid=3140&dl=blur",400,400)},openMaskedCardsIn30:function(e){return m.webapp.openFAQ("card"),this.closePanel(),e.preventDefault(),!1},openCardFAQ:function(e){return m.webapp.openFAQ("card","freefor30"),e.preventDefault(),!1},chatNow:function(e){e.preventDefault(),m.securityManager.openWindow("https://a3.websitealive.com/623/rRouter.asp?infocapture_ids=259,260&infocapture_values=|&groupid=623&wsa_custom0=card-error&wsa_custom1=&websiteid=0&departmentid=3140&dl=blur",400,400)},getStartedWithPayments:function(e){e&&e.preventDefault(),this.updatePanelActivity("masked",this.panelId,this.fieldId,!0),m.webapp.openCards(),this.closePanel(e)},subscriptionClicked:function(){this.$("#cardAmount").unbind("blur.dntme")},openCashForCardsFaq:function(e){return m.webapp.openCashForCardsFaq(),e.preventDefault(),!1},countryChanged:function(e){"US"==t(e.target).val()?(this.$("#autoStateUS").show(),this.$("#autoState").hide()):(this.$("#autoState").show(),this.$("#autoStateUS").hide())},cardNumberFocus:function(e){var n=t(e.target);n.val(n.val().replace(/[^0-9]+/g,""))},cardNumberBlur:function(n){var a=t(n.target),i=a.val().replace(/[^0-9]+/g,"");e.each(g,function(t){if(i.match(t.regex)){var n=0,a="";e.each(t.spacing,function(e){a+=i.substr(n,e)+" ",n+=e}),a+=i.substr(n),i=a}}),a.val(i)},makeErrorReport:function(e){return e&&e.preventDefault(),m.webapp.openHelp(),!1},refreshLastFourShieldedCardNumber:function(){m.licenseModule.refreshLastFourCardDigits({},e.bind(function(e,t){!e&&t&&t.last_four&&(this.model.primaryCard.set("last_four",t.last_four),this.$("#last4").text(t.last_four))},this))},convertCentsToString:function(e){return"$"+(e/100).toFixed(2)},processError:function(e){this.$("#loadingMaskedCard").hide();var n=this;"recurly disabled"==e.errorCode?(this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_recurly_disabled")),this.$("#maskedCardErrorMsg #recurly-disabled").click(function(e){return m.webapp.openPage("#premium/setup/stripe"),n.closePanel(e),!1})):e.errorCode==d.NO_BILLING_ACCOUNT_FOR_USER_ERROR_CODE||e.errorCode==d.BILLING_FAILED_ERROR_CODE?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_billing")):e.errorCode==d.BILLING_DECLINED_ERROR_CODE?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_declined")):e.errorCode==d.BILLING_COMPANY_FAILED_ERROR_CODE?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_company_declined")):e.errorCode==d.NO_CARDS_AVAILABLE_ERROR_CODE||e.errorCode==d.PROVIDER_READ_FAILED_ERROR_CODE||e.errorCode==d.PROVIDER_CARD_CREATION_FAILED_ERROR_CODE?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_provider")):e.errorCode==d.REQUESTED_AMOUNT_OVER_LIMIT_ERROR_CODE?"verified"==e.responseJSON.data.category?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_validation_verified",[this.convertCentsToString(e.responseJSON.data.min),this.convertCentsToString(e.responseJSON.data.max)])):this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_validation_max",[this.convertCentsToString(e.responseJSON.data.max),c.protocol+c.webAppHost+"/#/client/cards/verify"])):e.errorCode==d.REQUESTED_AMOUNT_BELOW_MINIMUM_ERROR_CODE?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_validation_min",[this.convertCentsToString(e.responseJSON.data.min)])):e.errorCode==d.REQUEST_ALREADY_EXISTS_ERROR_CODE||e.errorCode==d.NO_CARD_FOUND_ERROR_CODE||e.errorCode==d.NO_BILLING_TRANSACTION_FOUND_ERROR_CODE?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_abine")):e.errorCode==d.REFUND_FAILED_ERROR_CODE?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_refund")):e.errorCode==d.GLOBAL_SOFT_LIMIT_REACHED?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_global_limit")):e.errorCode==d.FRAUD_SOFT_LIMIT_REACHED?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_soft_limit",[c.protocol+c.webAppHost+"/#/client/cards/verify"])):e.errorCode==d.FRAUD_HARD_LIMIT_REACHED?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_hard_limit")):e.errorCode==d.FRAUD_VERIFIED_SOFT_LIMIT_REACHED?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_verified_soft_limit")):e.errorCode==d.FRAUD_HIGH_RISK_COUNTRY_ERROR_CODE?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_high_risk_country")):e.errorCode==d.GREY_LISTED_ERROR_CODE?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_grey_listed",[c.protocol+c.webAppHost+"/#/client/cards/verify"])):e.errorCode==d.BILLING_IN_NON_US_ERROR_CODE?t(this.el).find("#maskedCardErrorMsg").html(l.getText("mm_payment_helper_non_us1",[ABINE_DNTME.config.protocol+ABINE_DNTME.config.webAppHost+"/#/phones"])):e.errorCode==d.DUPLICATE_CARD_ERROR_CODE?t(this.el).find("#maskedCardErrorMsg").html(l.getText("mm_payment_error_duplicate_card_ban")):e.errorCode==d.BANNED_DOMAIN_ERROR_CODE?t(this.el).find("#maskedCardErrorMsg").html(l.getText("mm_payment_error_banned_domain",[this.options.domain])):e.errorCode==d.REJECTED_DOMAIN_ERROR_CODE?t(this.el).find("#maskedCardErrorMsg").html(l.getText("mm_payment_error_rejected_domain",[this.options.domain])):e.errorCode==d.SERVICE_UNAVAILABLE_ERROR?t(this.el).find("#maskedCardErrorMsg").html(l.getText("mm_dntme_service_unavailable")):e.errorCode==d.SCHEDULED_DOWNTIME?t(this.el).find("#maskedCardErrorMsg").html(l.getText("mm_dntme_server_maintenance")):e.errorCode==d.BIOMETRIC_AUTH_FAILED?t(this.el).find("#maskedCardErrorMsg").html(l.getText("mm_dntme_server_biometric_auth_failed")):this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error")),this.$("#maskedCardErrorMsg a[target=_blank]").click(function(e){return m.webapp.openPage(e.target.href.substr(e.target.href.indexOf("#"))),e.preventDefault(),!1}),this.$("#maskedCardView, #maskedCardError, #maskedCardErrorMsg").show()},masterPassAuth:function(e){e&&e.preventDefault(),r.clearTimeout(this.noResponseTimer),this.$("#biometricAuth").hide(),this.$("#masterPassStep").show(),this.autoResize()},verifyMasterPass:function(e){e&&e.preventDefault();var t=this;this.$("#masterPassErr").hide();var n=this.$("#password").val();if(0==n.length)return this.$("#masterPassErr").text(l.getText("mm_payment_helper_master_pass_invalid")).show(),void this.autoResize();var i="password:auth:response:"+Math.random(),r=this.options.contentManager.messenger;return r.on(i,function(e){t.$("#newMaskedCard, #confirmAmountView, #register, #biometricAuth").hide(),t.$("#masterPassStep").show(),e.success?(t.biometricToken=e.token,t.$("#masterPassStep").hide(),t._maskedCardAuth?t._confirmCardCreate():t._fillWithUsedCard(),r.off(i)):t.$("#masterPassErr").text(l.getText("mm_payment_helper_master_pass_invalid")).show(),r.off(i),t.autoResize()}),m.licenseModule.getGenericBiometricKey(null,function(e){e.success?(t.biometricKey=e.key,r.send("password:auth",{responseId:i,key:t.biometricKey,password:n,domain:t.options.domain,amount:a.DisposableCard.convertStringToCents(this.amount)})):t.$("#masterPassErr").text(l.getText("mm_payment_helper_master_pass_retry")).show()}),this.autoResize(),!1},confirmCardCreate:function(e,t){this.biometricKey?(t=t||{},this.$("#newMaskedCard, #confirmAmountView, #register").hide(),this._maskedCardAuth=!0,this.sendBiometricAuthRequest(e,t),this.autoResize()):this._confirmCardCreate(e,t)},retryBiometricAuth:function(e,t){var n=this;r.clearTimeout(this.noResponseTimer),m.licenseModule.getGenericBiometricKey(null,function(a){a.success&&(n.biometricKey=a.key,n.sendBiometricAuthRequest(e,t))})},sendBiometricAuthRequest:function(e,t){this.ignoreExplicitClose=!0;var n=this.biometricKey.split(":");if(n.length>2)return this.biometricKey=n[0]+":"+n[1],this.biometricToken=n[2],this.$("#biometricAuth").hide(),void(this._maskedCardAuth?this._confirmCardCreate(e,t):this._fillWithUsedCard());this.$("#biometricAuth").show();var i=this.options.contentManager.messenger,s=this;s.$("#biometricInfo, #biometricAuth").show(),this.model.face_id?s.$("#biometricInfo").html(l.getText("mm_payment_helper_request_faceid_auth",[s.model.biometric_type])):s.$("#biometricInfo").html(l.getText("mm_payment_helper_request_biometric_auth",[s.model.biometric_type])),s.$("#biometricError").hide(),s.autoResize(),this.biometricResponseId&&i.off(this.biometricResponseId);var o="biometric:auth:response:"+Math.random();r.clearTimeout(this.noResponseTimer),this.noResponseTimer=r.setTimeout(function(){s.$("#biometricInfo").text(l.getText("mm_payment_helper_biometric_no_response")),s.autoResize()},2e4),i.on(o,function(n){if(r.clearTimeout(s.noResponseTimer),!n.ack||!s.$("#masterPassStep").is(":visible")){if(s.$("#newMaskedCard, #confirmAmountView, #register, #masterPassStep").hide(),s.$("#biometricAuth").show(),n.ack)return s.$("#biometricInfo").show(),s.$("#biometricError").hide(),s.model.face_id?s.$("#biometricInfo").html(l.getText("mm_payment_helper_request_faceid_card_auth_ack",[s.model.biometric_type])):s.$("#biometricInfo").html(l.getText("mm_payment_helper_request_biometric_card_auth_ack",[s.model.biometric_type])),void s.autoResize();n.success?(s.biometricToken=n.token,s.$("#biometricAuth").hide(),s._maskedCardAuth?s._confirmCardCreate(e,t):s._fillWithUsedCard(),i.off(o),s.biometricResponseId=null):(s.$("#biometricInfo").hide(),s.$("#biometricError").text(n.error).show()),s.autoResize()}});var d={type:"card",responseId:o,key:this.biometricKey,domain:this.options.domain};if(this._maskedCardAuth)d.amount=a.DisposableCard.convertStringToCents(this.amount);else{var c=this.getMatchingCard(this._selectedCardId);d.number=c.get("number").substr(-4)}i.send("biometric:auth",d),this.biometricResponseId=o,this.autoResize()},_confirmCardCreate:function(e,t){if(t=t||{},!this.cardBeingCreated){if(!this.model.entitledToPhone&&this.model.upgradeToPremium&&!t.upgraded&&!this.model.companyRequest)return void this.setupSubscription("annual");this.cardBeingCreated=!0,this.biometricKey&&this.biometricToken&&m.memoryStore.set("biometricKeyToken",this.biometricKey+":"+this.biometricToken),this.model.maskedCard=new a.DisposableCard({domain:this.options.domain,biometricKey:this.biometricKey,biometricToken:this.biometricToken,amount:a.DisposableCard.convertStringToCents(this.amount),shielded_card_id:this.model.companyRequest?null:this.model.primaryCard.id,company:this.model.companyRequest,payment_method:this.model.useBitcoin?"bitcoin":"creditcard"}),this.model.maskedCard.set("source","dnt-panel"),this.model.maskedCard.bind("sync:success",function(){this.updatePanelActivity("impression",this.createCardSuccessfullViewPanelId,this.fieldId,!1),this.trigger("render"),this.cardBeingCreated=!1,this.$("#loadingMaskedCard").hide(),this.$("#cardNumber").text(this.model.maskedCard.getPrettyNumber()),this.$("#expiration").text(this.model.maskedCard.getExpiry()),this.$("#cvc").text(this.model.maskedCard.getCVC()),this.$("#domain").text(this.model.maskedCard.getDomain()),this.$("#originalValue").text(this.model.maskedCard.getOriginalValue()),this.$("#maskedCardView").show(),this.$("#maskedCard").show(),this.trigger("render")},this),this.model.maskedCard.bind("sync:error",function(e){this.updatePanelActivity("impression",this.createCardFailedViewPanelId,this.fieldId,!1),this.processError(e),this.trigger("render")},this),this.$("#newMaskedCard, #confirmAmountView, #register").hide(),this.loadingDisplay=new s({customMessages:["mm_loading_display_Crunching","mm_loading_display_Clouds","mm_loading_display_Tubes","mm_loading_display_HangOn","mm_loading_display_Whoops_Panel"],interval:6e3,el:this.$("#loadingMaskedCard"),pageName:"card_create_panel"}),this.$("#loadingMaskedCard").show(),this.trigger("render"),this.ignoreExplicitClose=!0,this.model.maskedCard.save()}},cancelCardCreate:function(){this.$("#confirmAmountView").hide(),this.$("#newMaskedCard").show(),this.ignoreBlur(!1),this.$("#cardAmount").focus(),this.trigger("render")},createCard:function(t){t&&t.preventDefault();var n,i=/[^\d\.]/g;n=this.$("#cardAmount").val(),n=n.replace(i,""),n=parseFloat(parseFloat(n).toFixed(2)),isNaN(n)?(this.$("#amountError").html(l.getText("mm_payment_error_validation_input")),this.trigger("render")):(this.$("#amountError").html(""),this.amount=n,this.model.primaryCard||this.model.companyRequest?m.paymentsModule.retrieveCardFee({requested_amount:a.DisposableCard.convertStringToCents(n),card_use:this.model.companyRequest?"company":"personal"},e.bind(function(e,t){this.$("#processingRequestView").hide(),e?(this.processError(e),this.trigger("render")):(t&&t.fee&&t.fee.total_fee?(this.model.total_fee=t.fee.total_fee,this.model.billing_account_type=t.billing_account_type):this.model.total_fee=0,this.model.primaryCard||this.model.companyRequest?this.model.entitledToPhone||this.model.upgradeToPremium||this.model.hasFreeCards||this.model.isFreeTrial?this.showConfirmAmountView():this.model.hasFreeCards||(this.$("#amountError").html(l.getText("mm_payment_helper_outOfCardsCheck")),this.trigger("render")):this.showBillingInfoView())},this)):this.showBillingInfoView())},showConfirmAmountView:function(){this.updatePanelActivity("impression",this.showConfirmAmountViewPanelId,this.fieldId,!1);var e={extraWidth:this.$("#register").is(":visible")?this.billingInfoViewExtraWidth*-1:null,extraHeight:this.$("#register").is(":visible")?40:null};this.$(".payments-step").hide(),this.model.entitledToPhone||!this.model.upgradeToPremium||this.model.companyRequest?this.model.companyRequest?this.$("#confirmRegularMsg").html(l.getText("mm_payment_helper_company_willBeCharged")):this.model.useBitcoin?this.$("#confirmRegularMsg").html(l.getText("mm_payment_helper_paymentsr2_willBeChargedBitcoin")):"credit_card"==this.model.billing_account_type?this.$("#confirmRegularMsg").html(l.getText("mm_payment_helper_paymentsr2_willBeCharged_1",this.model.companyRequest?"XXXX":this.model.primaryCard.getLastFour())+" <span class='confirmAmount'></span> "+l.getText("mm_payment_helper_paymentsr2_willBeCharged_2")):this.$("#confirmRegularMsg").html(l.getText("mm_payment_helper_paymentsr2_willBeChargedAch",this.model.companyRequest?"XXXX":this.model.primaryCard.getLastFour())+" <span class='confirmAmount'></span> "+l.getText("mm_payment_helper_paymentsr2_willBeCharged_2")):this.$("#confirmRegularMsg").html(l.getText("mm_payment_helper_paymentsr2_willBeChargedUpgradePremium",this.model.companyRequest?"XXXX":this.model.primaryCard.getLastFour())),this.$(".confirmAmount").text(this.convertCentsToString(Number(a.DisposableCard.convertStringToCents(this.amount))+Number(this.model.total_fee))),this.$("#confirmAmountView").show(),this.ignoreBlur(!0),this.ignoreExplicitClose=!0,this.focusField(),this.autoResize(e)},verifyCardRequestBtc:function(e){this.model.useBitcoin=!0,this.verifyCardRequest(e)},verifyCardRequest:function(t){if(!this.model.useBitcoin&&!this.model.companyRequest&&!this.model.primaryCard&&"stripe"==this.model.billing_manager)return void m.webapp.openPage("#premium");this.ignoreBlur(!0);var n=new Date,a=n.getMonth()+1,i=n.getFullYear();this.$("#autoCardMonth").val(a),this.$("#autoCardYear").val(i),t&&t.preventDefault(),this.$("#processingRequestView").show(),this.$("#panelOptions").hide(),this.ignoreExplicitClose=!0;var r={domain:this.options.domain};this.model.companyRequest&&(r.company=!0),m.paymentsModule.verifyCardRequest(r,e.bind(function(t,n){t?(this.$("#processingRequestView").hide(),this.processError(t),this.trigger("render")):(n&&n.key&&(this.biometricKey=n.key),this.model.hasRegistered&&!this.model.entitledToPhone?m.paymentsModule.retrieveCardFee({requested_amount:0},e.bind(function(e,t){this.$("#processingRequestView").hide(),e?(this.processError(e),this.trigger("render")):(t.card_credit&&t.card_credit.free_cards&&t.card_credit.free_cards>0&&(this.model.hasFreeCards=!0),this.showNewMaskedCardView())},this)):(this.$("#processingRequestView").hide(),this.showNewMaskedCardView()))},this)),this.autoResize()},showNewMaskedCardView:function(n){n&&n.preventDefault(),this.model.companyRequest&&t("#upgradeToPremiumCheckboxDiv").hide(),this.updatePanelActivity("masked",this.panelId,this.fieldId,!0),this.$("#panelOptions").hide(),this.$("#newMaskedCard").show(),this.model.hasRegistered&&(this.model.hasFreeCards||(this.$("#upgradeToPremium").prop("checked",!0),this.model.upgradeToPremium=!0)),this.ignoreBlur(!0),this.ignoreExplicitClose=!0,this.updatePanelActivity("impression",this.showCollectMaskedCardAmountViewPanelId,this.fieldId,!1),this.trigger("render"),r.setTimeout(e.bind(function(){this.$("#cardAmount").focus(),this.bindPanelTextInput(this.$("#cardAmount")),r.setTimeout(e.bind(function(){this.ignoreBlur(!1)},this),50)},this),500)},cleanupPanel:function(){},canShowAutoPremiumPanel:function(){return this.fieldType.indexOf("/financial/creditcard/number")!=-1},refreshUserInput:function(){var n=this.model.userInput;if(e.each(this.options.fields,e.bind(function(e){var a=e.dataType;if(a){var i=t(e.element).val();if(i&&""!=i)for(var r=0;r<2;r++)a in f&&(!n[f[a]]||""==n[f[a]]||0==r)&&(n[f[a]]=i),a=a.substr(0,a.lastIndexOf("/"))}},this)),n.part1&&""!=n.part1&&(n.number=n.part1+n.part2+n.part3+n.part4),n.number&&(n.number=n.number.replace(/[^0-9]+/g,""),n.last4=n.number.substr(n.number.length-4)),n.name&&""!=n.name||(n.name=n.issuedto),n.name&&""!=n.name||(n.name=n.fname),!n.lname||""==n.lname){var a=n.name;if(a&&""!=a){var i=n.name.split(/\s+/);i.length>0&&(n.fname=i[0],n.lname=i[1])}}n.fname&&n.lname&&(n.fname=n.fname.replace(n.lname,"").replace(/^[\s]+]|[\s]+$/g,"")),n.country&&n.country.match(/USA|United[\s]*States/i)&&(n.country="US"),n.expirymonth&&(n.expirymonth=parseInt(n.expirymonth.replace(/[^0-9]+/g,"")))},afterInitialize:function(){this.options.entitledToPhone&&(this.templateName="payment_helper_paymentsr2_panel"),this.strategyId=this.options.strategyId,this.fieldId=this.options.fieldId,this.fieldType=this.options.fieldType,this.numMenuOptions=2,this.bindBaseEvents(),this.applyFadingStyle(),this.fadeIn(),this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.on("remove",e.bind(function(){this.biometricResponseId&&this.messenger.off(this.biometricResponseId)},this));var t=this.contentManager.preferences.getPref("biometric_type"),n="fingerprint";"apns.face_id"==t?n="Face ID":"apns.touch_id"==t&&(n="Touch ID"),this.model={panelType:"card",primaryCard:!1,authToken:this.options.authToken,hasRegistered:this.options.hasRegistered,isFreeTrial:this.options.entitledToPayments&&!this.options.entitledToPhone,entitledToPayments:this.options.entitledToPayments,cardNotSetup:this.contentManager.preferences.getPref("cardNotSetup"),hasEnabledPayments:this.options.hasEnabledPayments,hasAuthorizedCoinbase:this.options.hasAuthorizedCoinbase,entitledToPhone:this.options.entitledToPhone,canShowRealCards:this.contentManager.preferences.getSplitTest("wallet01")!=d.SPLIT_WALLET_OFF,cardDisabled:this.options.cardDisabled,realCardDisabled:this.options.realCardDisabled,mapper:!!this.contentManager.preferences.getPref("mapping:mapper"),face_id:"apns.face_id"==t,touch_id:"apns.face_id"!=t,biometric_type:n,showMapper:this.contentManager.preferences.isMapper(),show_settings:!this.contentManager.preferences.getPref("card-settings-seen"),hasCompanyCards:this.contentManager.preferences.getPref("hasCompanyCards"),firstFiveCards:parseInt(this.contentManager.preferences.getPref("countCardNotifications")||0)<5};var i=this;m.securityManager.getBillingManager(function(e){i.model.billing_manager=e});var s=this.contentManager.preferences.getPref("hasEnabledPayments");this.model.shieldedCard=new a.ShieldedCardCollection,this.panelId=8000006,this.maskedCardFirstStepPanelId=8000026,this.showCollectMaskedCardAmountViewPanelId=8000036,this.showConfirmAmountViewPanelId=8000046,this.createCardSuccessfullViewPanelId=8000056,this.createCardFailedViewPanelId=8000066,this.usedMaskedCardPanelId=8000076,this.usedAutofillMaskedCardViewPanelId=8000086,this.usedAutofillRealCardViewPanelId=8000096,this.showCollectBillingInfoViewPanelId=7000016,this.addingBillingInfoSuccessfullViewPanelId=7000026,this.addingBillingInfoFailedViewPanelId=7000036,this.clickedAutofillRealCardWhenNoCardExistsPanelId=7000046,this.updatePanelActivity("impression",this.maskedCardFirstStepPanelId,this.fieldId,!1),this.model.realCards=new a.RealCardCollection,this.model.realCards.fetchAll({success:e.bind(function(){this.model.hasRegistered?this.model.shieldedCard.fetchAll({success:e.bind(function(){this.model.shieldedCard.length>0&&(this.model.primaryCard=this.model.shieldedCard.at(0)),this.model.disposableCards=new a.DisposableCardCollection,this.model.disposableCards.fetchAllByDomain(this.options.domain,e.bind(function(){if(m.memoryStore.get("cardgrowl"+this.options.strategyId,e.bind(function(e){this.showCardGrowl(e)},this)),this.model.primaryCard){if(this.refreshLastFourShieldedCardNumber(),this.updatePanelActivity("impression",this.panelId,this.fieldId,!0),!s)return void this.closePanel();this.bind("enter0",this.verifyCardRequest,this),e.each(this.model.disposableCards.models,function(e,t){this.bind("enter"+(t+1),function(t){this.fillWithUsedCard(t,e.get("id"))},this)},this),this.render(),this.checkCallFromNotification()}else this.options.dynamicPanel?(this.model.dynamicPanel=this.options.dynamicPanel,this.setupDynamicPanel(),this.model.panelSections=this.panelSections,this.panelId=this.model.dynamicPanel.id,this.updatePanelActivity("impression",this.panelId,this.fieldId,!0),this.render()):(this.updatePanelActivity("impression",this.panelId,this.fieldId,!0),this.render(),this.checkCallFromNotification())},this))},this)}):(this.updatePanelActivity("impression",this.panelId,this.fieldId,!0),this.render(),this.checkCallFromNotification())},this)}),this.options.fromContextMenu&&(this.ignoreBlur(!0),r.setTimeout(e.bind(function(){this.verifyCardRequest()},this),100)),this.contentManager.closeToolbarPanel()},checkCallFromNotification:function(){this.options.params?(this.panelReason="growl","new_card"==this.options.params.step?this.verifyCardRequest():"fill_card"==this.options.params.step&&this.fillWithUsedCard(null,this.options.params.id)):(this.panelReason="panel",m.licenseModule.logCheckout({method:this.panelReason,merchant:this.contentManager.domain,shown:1,amount:this.options.amount}))},beforeRemove:function(){this.options.params&&this.contentManager.messenger.sendToCS(this.options.params.frameId,"panel:closed")},showCardGrowl:function(e){var t=this.getMatchingCard(e);if(t){var n="realCard"==t.storageEntity,a=t.toJSON();t.get("address")&&(a.address=t.get("address")),this.options.contentManager.showNotification({msg:"",targetUrl:ABINE_DNTME.config.protocol+ABINE_DNTME.config.webAppHost+"/#/cards",targetId:"",model:{maskedCard:a},height:260,neverFade:!0,type:n?"real_card":"card"})}},showBillingInfoView:function(){this.updatePanelActivity("impression",this.showCollectBillingInfoViewPanelId,this.fieldId,!1),this.$(".payments-step").hide(),this.$("#register").show(),this.ignoreBlur(!0),this.options.entitledToPhone?this.trigger("render"):this.trigger("render",{extraWidth:this.billingInfoViewExtraWidth})},registerAndMask:function(n){n&&n.preventDefault();var a=!1,i=this.$("#register input,#register select");e.each(i,function(e){var e=t(e);e.is(":visible")&&""==e.val()&&!e.data("optional")?(e.addClass("error"),a||e.focus(),a=!0):e.removeClass("error")});var r=this.$("#autoCardNumber").val().replace(/[^0-9]+/g,"");if(!r.match(_)||!h(r)||"552942"==r.substring(0,6))return this.$("#autoCardNumber").addClass("error").focus(),this.$(".alert-error").text(l.getText("mm_payment_helper_valid_card_number")).show(),void this.autoResize();if("US"!=this.$("#autoCountry").val())return this.$("#autoCountry").addClass("error").focus(),this.$(".alert-error").text(l.getText("mm_payment_helper_non_us3")).show(),void this.autoResize();if(a)return this.$(".alert-error").text(l.getText("mm_payment_helper_fill_all_required")).show(),void this.autoResize();if(this.model.hasRegistered)this.setupSubscription();else{if(!this.$("#autoEmail").val().match(u))return this.$(".alert-error").text(l.getText("mm_dntme_invalid_email")).show(),void this.autoResize();this.setupUser()}},setupUser:function(){var t=this.$("#autoEmail").val(),n=p(6),a={email:t,password:n,password_hint:l.getText("mm_pwhint_default"),generated_password:!0,register_type:"dnt_card_panel"};this.showProgress(),m.licenseModule.register(a,e.bind(function(t,n){this.processRegistration(t,n,a,e.bind(function(e){e||this.setupSubscription()},this))},this)),this.autoResize()},setupSubscription:function(t){t=t||"two_dollars",this.$("#autoEmail").hide();var n=this.$("#autoState").val();"US"==this.$("#autoCountry").val()&&(n=this.$("#autoStateUS").val());var a=this.$("#autoCardNumber").val().replace(/[^0-9]+/g,"");if("552942"==a.substring(0,6))return this.$(".alert-error").text(l.getText("mm_payment_helper_valid_card_number")).show(),void this.autoResize();this.$(".alert-error").hide(),this.showProgress();var i,r=!!this.model.primaryCard;i=r?{first_name:this.model.primaryCard.get("first_name"),last_name:this.model.primaryCard.get("last_name")}:{first_name:this.$("#autoFname").val(),last_name:this.$("#autoLname").val(),address1:this.$("#autoAddress").val(),state:n,city:this.$("#autoCity").val(),zip:this.$("#autoZip").val(),country:this.$("#autoCountry").val(),number:a,year:this.$("#autoCardYear").val(),month:this.$("#autoCardMonth").val(),verification_value:this.$("#autoCardCvv").val()},m.licenseModule.subscribe(i,t,"dntme_payment_helper",e.bind(function(n,a){this.processSubscription(n,a,i,e.bind(function(n){this.hideProgress(),n||(this.updatePanelActivity("disclosed",this.panelId,this.fieldId,!0),this.model.shieldedCard.fetchAll({success:e.bind(function(){this.model.shieldedCard.length>0&&(this.model.primaryCard=this.model.shieldedCard.at(0)),"two_dollars"==t?"total_fee"in this.model?this.showConfirmAmountView():this.createCard():this.confirmCardCreate(null,{upgraded:!0})},this)}))},this))},this))},showProgress:function(){this.$(".progress").show(),this.$("#register input, #register select, #register button, #confirmAmountView input").attr("disabled","disabled"),this.autoResize()},hideProgress:function(){this.$(".progress").hide(),this.$("#register input, #register select, #register button, #confirmAmountView input").removeAttr("disabled"),this.autoResize()},processRegistration:function(t,n,a,i){if(t){var r=l.getText("mm_payment_helper_register_error"),s=t.responseJSON&&t.responseJSON.data?t.responseJSON.data.errors:null;"invalid email address"==t.responseJSON.error_code?r=l.getText("mm_payment_helper_invalid_email_server_error"):s&&s.email&&("has already been taken"==s.email[0]?r=l.getText("mm_payment_helper_duplicate_email",[a.email]):"was used for MaskMe Heavy"==s.email[0]&&(r=l.getText("mm_payment_helper_version_not_allowed"))),this.$(".alert-error").html(r).show(),this.$(".alert-error #loginButton").click(e.bind(this.openLoginPage,this)),this.$(".alert-error #dnt2upgrade").click(e.bind(this.openDnt2UpgradePage,this)),this.autoResize(),i(r)}else this.contentManager.preferences.fetchAll(),this.model.hasRegistered=!0,i()},processSubscription:function(e,t,n,a){if(e){this.updatePanelActivity("impression",this.addingBillingInfoFailedViewPanelId,this.fieldId,!1);var i=t.errors.base;this.$(".alert-error").text(i[0]).show(),this.autoResize(),a(e)}else this.updatePanelActivity("impression",this.addingBillingInfoSuccessfullViewPanelId,this.fieldId,!1),this.contentManager.preferences.fetchAll(),a()},fillWithDisposableCard:function(e){e&&e.preventDefault(),this.updatePanelActivity("impression",this.usedMaskedCardPanelId,this.fieldId,!1);var t=this.model.maskedCard.toJSON();this.fillFields("payment",t,"payment"),this.options.contentManager.showNotification({msg:"<h4 style='display:inline;'>Masked Card</h4><div style='text-align:center;'><div>"+this.model.maskedCard.get("type")+"</div><div>"+this.model.maskedCard.get("number")+"</div><div>"+this.model.maskedCard.getExpiry()+"</div><div>"+this.model.maskedCard.getCVC()+"</div></div>",targetUrl:ABINE_DNTME.config.protocol+ABINE_DNTME.config.webAppHost+"/#/cards",targetId:"",model:{maskedCard:t},height:260,neverFade:!0,type:"card"}),this.closePanel()},setupCard:function(e){this.getContentMessenger(),this.messenger.send("window:createTab",{localUrl:"pages/index.html#payments"}),this.closePanel(e)},fillWithUsedCard:function(e,n){if(!e||(e.preventDefault(),!e.target.className.match(/overflow|right/i)))if("undefined"==typeof n?this._selectedCardId=t(e.currentTarget).data("cardid"):this._selectedCardId=n,"panel"==this.panelReason&&m.licenseModule.logCheckout({method:this.panelReason,merchant:this.contentManager.domain,clicked:1,amount:this.options.amount}),"biometric"==this.contentManager.preferences.getPref("masked_card_auth")){m.licenseModule.logCheckout({method:this.panelReason,merchant:this.contentManager.domain,biometric:1,amount:this.options.amount}),this.$("#panelOptions").hide(),this._maskedCardAuth=!1;var a=this;m.licenseModule.getGenericBiometricKey(null,function(t){t.success?(a.biometricKey=t.key,a.sendBiometricAuthRequest(e,options)):(a.$("#biometricAuth").show(),a.$("#biometricInfo").hide(),a.$("#biometricError").text(l.getText("mm_payment_helper_biometric_auth_disabled",[a.model.biometric_type])).show(),a.autoResize())})}else this._fillWithUsedCard()},getMatchingCard:function(t){var n;return this.model.disposableCards&&(n=e.find(this.model.disposableCards.models,function(e){if(e.id==t)return!0})),n||(n=e.find(this.model.realCards.models,function(e){if(e.id==t)return!0})),n},_fillWithUsedCard:function(){this.biometricKey&&this.biometricToken&&m.memoryStore.set("biometricKeyToken",this.biometricKey+":"+this.biometricToken),this.updatePanelActivity("masked",this.panelId,this.fieldId,!0);var e=this._selectedCardId,t=this.getMatchingCard(e),n="realCard"==t.storageEntity;if(n){var a=t.get("type");t.get("brand")&&t.get("brand").indexOf("generic")==-1&&(a=t.get("brand")),this.updatePanelActivity("impression",this.usedAutofillRealCardViewPanelId,this.fieldId,!1)}else{var a="masked";this.updatePanelActivity("impression",this.usedAutofillMaskedCardViewPanelId,this.fieldId,!1)}var i=t.toJSON();t.get("address")&&(i.address=t.get("address")),this.logged||(this.logged=!0,m.licenseModule.logCheckout({method:this.panelReason,merchant:this.contentManager.domain,success:1,filled:a,amount:this.options.amount})),this.fillFields("payment",i,"payment"),this.options.contentManager.showNotification({msg:"",targetUrl:ABINE_DNTME.config.protocol+ABINE_DNTME.config.webAppHost+"/#/cards",targetId:"",model:{maskedCard:i},height:260,neverFade:!0,type:n?"real_card":"card"}),this.closePanel()}});return b}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.payment_helper_paymentsr2_panel=e.template(function(e,t,n,a,i){function r(e){var t,i="";return i+="\n      ",t=e,t=p.invokePartial(a["payment_helper.mask_my_card"],"payment_helper.mask_my_card",t,n,a),(t||0===t)&&(i+=t),i+="\n    "}function s(e){var t,i="";return i+="\n      ",t=e,t=p.invokePartial(a["payment_helper.protect_my_card"],"payment_helper.protect_my_card",t,n,a),(t||0===t)&&(i+=t),i+="\n    "}n=n||e.helpers,a=a||e.partials;var o,l,d,c,m,h="",p=this,u="function",_=n.helperMissing,g=void 0,f=this.escapeExpression;return h+='<div class="newpanel">\n  <span class="normal-flow">\n  <div class="left-panel">\n\n  <!--Protect My Card Step 1-->\n    ',c=n.hasAuthorizedCoinbase,o=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasAuthorizedCoinbase"),l=n["if"],m=p.program(1,r,i),m.hash={},m.fn=m,m.inverse=p.program(3,s,i),o=l.call(t,o,m),(o||0===o)&&(h+=o),h+='\n  <!-- End Step 1 -->\n\n  <!--Protect My Card Step 2 Enter Card Amount -->\n  <div id="newMaskedCard" class="payments-step" style="display:none;">\n    <div class="payments-header">\n      ',o="mm_payment_helper_safestWayTitle",c=n.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===u?l.call(t,o,{hash:{}}):l===g?_.call(t,"intl",o,{hash:{}}):l,h+=f(o)+'\n    </div>\n    <div class="payments-how-much-text" style="margin-bottom: 5px;">\n      ',o="mm_payment_helper_howMuch",c=n.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===u?l.call(t,o,{hash:{}}):l===g?_.call(t,"intl",o,{hash:{}}):l,h+=f(o)+'\n    </div>\n\n    <div>\n      <span class="input-prepend" style="margin: 10px 10px 20px -20px;">\n        <span class="add-on" style="font-size:38px;line-height:40px;height:40px;">$</span>\n        <input maxlength="7" class="span2" id="cardAmount" type="text" placeholder="0.00"/>\n      </span>\n\n      <input type="button" id="createCard" style="font-size:16px;padding:10px 20px;margin-bottom:16px;" value="Finish Up" class="btn btn-primary" />\n      <span id="amountError" style="display:block;margin:-10px 0px 10px 0px;line-height:11px;font-size:10px;color:red;"></span>\n    </div>\n  </div>\n  <!-- End Step 2 Enter Card Amount -->\n\n  <div id="processingRequestView" style="display:none;height: 50px;margin: 20px;">\n    ',
o="mm_payment_helper_please_wait",c=n.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===u?l.call(t,o,{hash:{}}):l===g?_.call(t,"intl",o,{hash:{}}):l,h+=f(o)+'\n  </div>\n\n  <div id="loadingMaskedCard" style="height:50px;display:none;text-align:center;padding:10px;">\n  </div>\n\n  <!-- No Card On File -->\n  <div id="register" class="payments-step" style="display: none;padding: 10px;">\n    ',o="mm_payment_error_card_not_setup",c=n.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===u?l.call(t,o,{hash:{}}):l===g?_.call(t,"intl",o,{hash:{}}):l,(o||0===o)&&(h+=o),h+='\n  </div>\n  <!-- End No Card On File -->\n\n  <!-- Step 3 Confirmation -->\n  <div class="payments-step" id="confirmAmountView" style="display:none;">\n    <div class="payments-header">\n      ',o="mm_payment_helper_finishUpTitle",c=n.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===u?l.call(t,o,{hash:{}}):l===g?_.call(t,"intl",o,{hash:{}}):l,h+=f(o)+'\n    </div>\n    <div class="payments-confirm-card-body" style="text-align:center;margin:5px 30px;">\n      <span>',o="mm_payment_helper_paymentsr2_ready",c=n.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===u?l.call(t,o,{hash:{}}):l===g?_.call(t,"intl",o,{hash:{}}):l,h+=f(o)+'</span>\n      <h5 id="confirmRegularMsg">\n        ',c=n.primaryCard,o=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"primaryCard"),o=null===o||void 0===o||o===!1?o:ABINE_DNTME.Duckbone.Handlebars.getAttr(o,"getLastFour"),l="mm_payment_helper_paymentsr2_willBeCharged_1",c=n.intl,d=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof d===u?d.call(t,l,o,{hash:{}}):d===g?_.call(t,"intl",l,o,{hash:{}}):d,h+=f(o)+"<span class='confirmAmount'></span> ",o="mm_payment_helper_paymentsr2_willBeCharged_2",c=n.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===u?l.call(t,o,{hash:{}}):l===g?_.call(t,"intl",o,{hash:{}}):l,h+=f(o)+'\n      </h5>\n      <div style="text-align:center;margin-bottom:10px;">\n          <input type="button" value="Confirm" id="confirmCardCreate" class="btn btn-primary" style="margin-bottom:3px;padding:8px 40px;"/>\n      </div>\n    </div>\n  </div>\n  <!-- End Step 3 Confirmation -->\n\n  ',o=t,o=p.invokePartial(a["common.biometric_auth"],"common.biometric_auth",o,n,a),(o||0===o)&&(h+=o),h+='\n\n\n  <!-- Step 4 Use Card -->\n    <span id="maskedCardView" style="display:none;">\n        <div id="maskedCardError" style="display:none;text-align:center;padding:10px;">\n            <div id="maskedCardErrorMsg" class="alert alert-error">\n\n            </div>\n            <div style="text-align:center;padding:10px 0 5px 0;">\n                <input type="button" id="chatNow" class="btn btn-primary chatNow" style="width:90%;text-align:center;" value="',o="mm_notification_helper_chatNow",c=n.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===u?l.call(t,o,{hash:{}}):l===g?_.call(t,"intl",o,{hash:{}}):l,h+=f(o)+'" />\n            </div>            \n        </div>\n        <div id="maskedCard" class="creditcardfont" style="color:rgb(80,80,80);width:336px;margin:auto;padding:10px;display:none;">\n          <div style="background-repeat:no-repeat;background-size:100%;height:181px;background-image:url(\'',o="/pages/images/2015panels/masked_card_blank.png",c=n.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===u?l.call(t,o,{hash:{}}):l===g?_.call(t,"assetUrl",o,{hash:{}}):l,h+=f(o)+'\');">\n              <br style="clear:both;"/>\n              <div style="text-align:right;margin-right:20px;color:white;">\n                  <span style="font-family:\'Open Sans\', \'Helvetica Neue\', Arial, sans-serif !important;font-weight:bold;font-size:24pt;" id="originalValue">',c=n.getOriginalValue,o=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getOriginalValue"),typeof o===u?o=o.call(t,{hash:{}}):o===g&&(o=_.call(t,"getOriginalValue",{hash:{}})),h+=f(o)+"</span>\n                  <br/>\n                  <span style=\"font-family:'Open Sans', 'Helvetica Neue', Arial, sans-serif !important;font-size:11pt;\">",o="mm_notification_helper_at",c=n.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===u?l.call(t,o,{hash:{}}):l===g?_.call(t,"intl",o,{hash:{}}):l,h+=f(o)+"&nbsp;</span><span id=\"domain\" style=\"font-family:'Open Sans', 'Helvetica Neue', Arial, sans-serif !important;font-weight:bold;font-size:11pt;\">",c=n.getDomain,o=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getDomain"),typeof o===u?o=o.call(t,{hash:{}}):o===g&&(o=_.call(t,"getDomain",{hash:{}})),h+=f(o)+'</span>\n              </div>\n              <div style="text-align:center;margin-top:5px;color:white;">\n                  <h3 id="cardNumber" style="font-family:\'Open Sans\', \'Helvetica Neue\', Arial, sans-serif !important;font-weight:lighter;">',c=n.getSeparatedCardNumber,o=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getSeparatedCardNumber"),typeof o===u?o=o.call(t,{hash:{}}):o===g&&(o=_.call(t,"getSeparatedCardNumber",{hash:{}})),h+=f(o)+"</h3>\n              </div>\n              <div style=\"font-size:15px;color:white;margin-left:25px;font-family:'Open Sans', 'Helvetica Neue', Arial, sans-serif !important;font-weight:bold;\">\n                  <span style=\"float:left;\">",o="mm_payment_helper_expDate",c=n.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===u?l.call(t,o,{hash:{}}):l===g?_.call(t,"intl",o,{hash:{}}):l,h+=f(o)+' <span id="expiration">',c=n.getExpiry,o=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getExpiry"),typeof o===u?o=o.call(t,{hash:{}}):o===g&&(o=_.call(t,"getExpiry",{hash:{}})),h+=f(o)+'</span></span> <span style="float:right;margin-right:115px;"> ',o="mm_payment_helper_cvc",c=n.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===u?l.call(t,o,{hash:{}}):l===g?_.call(t,"intl",o,{hash:{}}):l,h+=f(o)+' <span id="cvc">',c=n.getCVC,o=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getCVC"),typeof o===u?o=o.call(t,{hash:{}}):o===g&&(o=_.call(t,"getCVC",{hash:{}})),h+=f(o)+'</span></span>\n              </div>\n          </div>\n          <div style="text-align:center;margin-top:5px;">\n            <input type="button" value="',o="mm_payment_helper_useMyMasked",c=n.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===u?l.call(t,o,{hash:{}}):l===g?_.call(t,"intl",o,{hash:{}}):l,h+=f(o)+'" class="btn btn-primary" id="useMaskedCard" />\n          </div>\n        </div>\n        <div id="dummyCard" class="creditcardfont" style="color:rgb(80,80,80);width:336px;margin:auto;padding:10px;display:none;">\n            <div id="dummyCardTitle" style="display: none;font-family: arial, sans-serif;">',o="mm_payment_helper_dummy_card_ready",c=n.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===u?l.call(t,o,{hash:{}}):l===g?_.call(t,"intl",o,{hash:{}}):l,h+=f(o)+'</div>\n            <img class="dummyCardImg" src="',o="/pages/images/masked_card_gold.png",c=n.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===u?l.call(t,o,{hash:{}}):l===g?_.call(t,"assetUrl",o,{hash:{}}):l,h+=f(o)+'"/>\n        </div>\n    </span>\n\n  <!-- End Step 4 -->\n  </div>\n\n  </span>\n  <!-- End Normal Flow -->\n\n  <!-- Default header (actually footer) for the panels -->\n  ',o=t,o=p.invokePartial(a["common.header"],"common.header",o,n,a),(o||0===o)&&(h+=o),h+="\n\n  <!-- end Default header (actually footer) -->\n\n  <!-- Inline FAQ Panel -->\n  ",o=t,o=p.invokePartial(a["payment_helper.inline_faq"],"payment_helper.inline_faq",o,n,a),(o||0===o)&&(h+=o),h+="\n  <!-- end Inline FAQ Panel -->\n\n</div>\n"}),ABINE_DNTME.CompiledTemplates.payment_helper_paymentsr2_panel}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.payment_helper_paymentsr3_card_money=e.template(function(e,t,n,a,i){function r(e){var t,i="";return i+="\n      ",t=e,t=h.invokePartial(a["payment_helper.mask_my_card"],"payment_helper.mask_my_card",t,n,a),(t||0===t)&&(i+=t),i+="\n    "}function s(e){var t,i="";return i+="\n      ",t=e,t=h.invokePartial(a["payment_helper.protect_my_card"],"payment_helper.protect_my_card",t,n,a),(t||0===t)&&(i+=t),i+="\n    "}n=n||e.helpers,a=a||e.partials;var o,l,d,c,m="",h=this,p="function",u=n.helperMissing,_=void 0,g=this.escapeExpression;return m+='<div class="newpanel">\n  <span class="normal-flow">\n  <div class="left-panel">\n  <div id="processingRequestView" style="display:none;height: 50px;margin: 20px;">\n    ',o="mm_payment_helper_please_wait",d=n.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"intl",o,{hash:{}}):l,m+=g(o)+'\n  </div>\n\n  <div id="loadingMaskedCard" style="display:none;height:50px;text-align:center;padding:10px;">\n  </div>\n\n  <!-- Card Money Step 1-->\n    ',d=n.hasAuthorizedCoinbase,o=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasAuthorizedCoinbase"),l=n["if"],c=h.program(1,r,i),c.hash={},c.fn=c,c.inverse=h.program(3,s,i),o=l.call(t,o,c),(o||0===o)&&(m+=o),m+='\n  <!-- End Step 1 -->\n\n  <!--Protect My Card Step 2 Enter Card Amount -->\n  <div id="newMaskedCard" class="payments-step" style="display:none;">\n    <div class="payments-header">\n      ',o="mm_payment_helper_safestWayTitle",d=n.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"intl",o,{hash:{}}):l,m+=g(o)+'\n    </div>\n    <div class="payments-how-much-text" style="margin-bottom: 5px;">\n      ',o="mm_payment_helper_howMuch",d=n.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"intl",o,{hash:{}}):l,m+=g(o)+'\n    </div>\n\n    <div>\n      <span class="input-prepend" style="margin: 10px 10px 20px -20px;">\n        <span class="add-on" style="font-size:38px;line-height:40px;height:40px;">$</span>\n        <input maxlength="7" class="span2" id="cardAmount" type="text" placeholder="0.00"/>\n      </span>\n\n      <input type="button" id="createCard" style="font-size:16px;padding:10px 20px;margin-bottom:16px;" value="Finish Up" class="btn btn-primary" />\n      <span id="amountError" style="display:block;margin:-10px 0px 10px 0px;line-height:11px;font-size:10px;color:red;"></span>\n    </div>\n    <div id="upgradeToPremiumCheckboxDiv" class="checkbox" style="width:300px;margin:0px 10px 10px 20px;">\n      <!-- default values and text changed in panel.js depending on card money/has free cards/if registered/premium states -->\n      <label id="upgradeToPremiumCheckboxLabel" class="alert-success" style="font-size:12px;"><input type="checkbox" id="upgradeToPremium"/>',o="mm_payment_helper_goPremiumCheckboxLabel",d=n.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"intl",o,{hash:{}}):l,m+=g(o)+"</label>\n    </div>\n  </div>\n  <!-- End Step 2 Enter Card Amount -->\n\n  <!-- Card Money Step No Card On File -->\n  ",o=t,o=h.invokePartial(a["payment_helper.no_card_on_file"],"payment_helper.no_card_on_file",o,n,a),(o||0===o)&&(m+=o),m+='\n  <!-- End Step Card Money No Card On File -->\n\n  <!-- Step 3 Confirmation -->\n  <div class="payments-step" id="confirmAmountView" style="display:none;">\n    <div class="payments-header">\n      ',o="mm_payment_helper_finishUpTitle",d=n.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"intl",o,{hash:{}}):l,m+=g(o)+'\n    </div>\n    <div class="payments-confirm-card-body" style="text-align:center;margin:5px 30px;">\n      <span>',o="mm_payment_helper_paymentsr2_ready",d=n.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"intl",o,{hash:{}}):l,m+=g(o)+'</span>\n      <h5 id="confirmRegularMsg"></h5>\n      <div style="text-align:center;margin-bottom:10px;">\n          <input type="button" value="Confirm" id="confirmCardCreate" class="btn btn-primary" style="margin-bottom:3px;padding:8px 40px;"/>\n      </div>\n    </div>\n    <div class="alert-error submit-error" style="display: none"></div>\n    <div class="progress" style="display: none;text-align: center;margin-bottom:0px;">please wait...</div>\n  </div>\n  <!-- End Step 3 Confirmation -->\n\n  ',o=t,o=h.invokePartial(a["common.biometric_auth"],"common.biometric_auth",o,n,a),(o||0===o)&&(m+=o),m+='\n\n  <!-- Step 4 Use Card -->\n  <span id="maskedCardView" style="display:none;">\n      <div id="maskedCardError" style="text-align:center;padding:10px;display:none;">\n        <div id="maskedCardErrorMsg" class="alert alert-error"></div>\n        <div style="text-align:center;padding:10px 0 5px 0;">\n          <input type="button" id="chatNow" class="btn btn-primary chatNow" style="width:90%;text-align:center;" value="',o="mm_notification_helper_chatNow",d=n.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"intl",o,{hash:{}}):l,m+=g(o)+'" />\n        </div>\n      </div>\n      <div id="maskedCard" class="creditcardfont" style="color:rgb(80,80,80);width:336px;margin:auto;padding:10px;display:none;">\n        <div style="background-repeat:no-repeat;background-size:100%;height:181px;background-image:url(\'',o="/pages/images/2015panels/masked_card_blank.png",d=n.assetUrl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"assetUrl",o,{hash:{}}):l,m+=g(o)+'\');">\n            <br style="clear:both;"/>\n            <div style="text-align:right;margin-right:20px;color:white;">\n                <span style="font-family:\'Open Sans\', \'Helvetica Neue\', Arial, sans-serif !important;font-weight:bold;font-size:24pt;" id="originalValue">',d=n.getOriginalValue,o=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getOriginalValue"),typeof o===p?o=o.call(t,{hash:{}}):o===_&&(o=u.call(t,"getOriginalValue",{hash:{}})),m+=g(o)+"</span>\n                <br/>\n                <span style=\"font-family:'Open Sans', 'Helvetica Neue', Arial, sans-serif !important;font-size:11pt;\">",o="mm_notification_helper_at",d=n.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"intl",o,{hash:{}}):l,m+=g(o)+"&nbsp;</span><span id=\"domain\" style=\"font-family:'Open Sans', 'Helvetica Neue', Arial, sans-serif !important;font-weight:bold;font-size:11pt;\">",d=n.getDomain,o=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getDomain"),typeof o===p?o=o.call(t,{hash:{}}):o===_&&(o=u.call(t,"getDomain",{hash:{}})),m+=g(o)+'</span>\n            </div>\n            <div style="text-align:center;margin-top:5px;color:white;">\n                <h3 id="cardNumber" style="font-family:\'Open Sans\', \'Helvetica Neue\', Arial, sans-serif !important;font-weight:lighter;">',d=n.getSeparatedCardNumber,o=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getSeparatedCardNumber"),typeof o===p?o=o.call(t,{hash:{}}):o===_&&(o=u.call(t,"getSeparatedCardNumber",{hash:{}})),m+=g(o)+"</h3>\n            </div>\n            <div style=\"font-size:15px;color:white;margin-left:25px;font-family:'Open Sans', 'Helvetica Neue', Arial, sans-serif !important;font-weight:bold;\">\n                <span style=\"float:left;\">",o="mm_payment_helper_expDate",d=n.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"intl",o,{hash:{}}):l,m+=g(o)+' <span id="expiration">',d=n.getExpiry,o=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getExpiry"),typeof o===p?o=o.call(t,{hash:{}}):o===_&&(o=u.call(t,"getExpiry",{hash:{}})),m+=g(o)+'</span></span> <span style="float:right;margin-right:115px;"> ',o="mm_payment_helper_cvc",d=n.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"intl",o,{hash:{}}):l,m+=g(o)+' <span id="cvc">',d=n.getCVC,o=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getCVC"),typeof o===p?o=o.call(t,{hash:{}}):o===_&&(o=u.call(t,"getCVC",{hash:{}})),m+=g(o)+'</span></span>\n            </div>\n        </div>\n        <div style="text-align:center;margin-top:5px;">\n          <input type="button" value="',o="mm_payment_helper_useMyMasked",d=n.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"intl",o,{hash:{}}):l,m+=g(o)+'" class="btn btn-primary" id="useMaskedCard" />\n        </div>\n      </div>\n  </span>\n  <!-- End Step 4 -->\n\n   </div>\n  </span>\n  <!-- Default header (actually footer) for the panels -->\n   ',o=t,o=h.invokePartial(a["common.header"],"common.header",o,n,a),(o||0===o)&&(m+=o),m+="\n\n  <!-- end Default header (actually footer) -->\n  <!-- End Normal Flow -->\n\n  <!-- Inline FAQ Panel -->\n    ",o=t,o=h.invokePartial(a["payment_helper.inline_faq"],"payment_helper.inline_faq",o,n,a),(o||0===o)&&(m+=o),m+="\n  <!-- end Inline FAQ Panel -->\n\n</div>"}),ABINE_DNTME.CompiledTemplates.payment_helper_paymentsr3_card_money}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.password_helper_panel=e.template(function(e,t,n,a){n=n||e.helpers,a=a||e.partials;var i,r,s,o="",l=this,d="function",c=n.helperMissing,m=void 0,h=this.escapeExpression;return o+='<div class="newpanel">\n    <div class="left-panel">\n    <!-- Generate Password -->\n    <a href="#" class="mmKeyOption password strongPassword lessOptions"><div class="element mask" id="pass">\n      <span class="panelLeft">\n        <img class="iconPos" src="',i="/pages/images/2015panels/pass_green.png",s=n.assetUrl,r=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),i=typeof r===d?r.call(t,i,{hash:{}}):r===m?c.call(t,"assetUrl",i,{hash:{}}):r,o+=h(i)+'"/>\n        ',i="mm_password_helper_generateStrong",s=n.intl,r=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof r===d?r.call(t,i,{hash:{}}):r===m?c.call(t,"intl",i,{hash:{}}):r,o+=h(i)+'\n      </span>\n    </div></a>\n    <a href="#" class="mmKeyOption password lessOptions"><div class="element otherblue" style="margin-bottom:5px;" id="options">\n      <span>\n        <img class="iconPos" src="',i="/pages/images/2015panels/pass_blue.png",s=n.assetUrl,r=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),i=typeof r===d?r.call(t,i,{hash:{}}):r===m?c.call(t,"assetUrl",i,{hash:{}}):r,o+=h(i)+'"/>\n        ',i="mm_new_password_helper_generate",s=n.intl,r=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof r===d?r.call(t,i,{hash:{}}):r===m?c.call(t,"intl",i,{hash:{}}):r,o+=h(i)+'\n      </span>\n    </div></a>\n    <!-- more options -->\n    <div class="password moreOptions" style="display:none;text-align:center;">\n        <div style="margin-top:10px;">\n            <input type="text" id="password-input" style="height:25px;"/>&nbsp;&nbsp;<img style="cursor:pointer;vertical-align:top;margin-top:4px;" id="refresh-password" src="',i="pages/images/pass_gen_refresh.png",s=n.assetUrl,r=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),i=typeof r===d?r.call(t,i,{hash:{}}):r===m?c.call(t,"assetUrl",i,{hash:{}}):r,o+=h(i)+'"/>\n        </div>\n        <div>\n            <label for="length">',i="mm_new_password_helper_length",s=n.intl,r=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof r===d?r.call(t,i,{hash:{}}):r===m?c.call(t,"intl",i,{hash:{}}):r,o+=h(i)+'&nbsp;&nbsp;<input id="length" type="range" min="6" max="25" value="10" step="1"/>&nbsp;&nbsp;<span id="pw-length-number" style="color:#168AD3;">10</span></label>\n        </div>\n        <div style="margin-top:10px;" class="clearfix">\n            <div style="width:40%;float:left;">\n                <label for="numbers"><input id="numbers" type="checkbox" checked/>&nbsp;&nbsp;',i="mm_new_password_helper_numbers",s=n.intl,r=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof r===d?r.call(t,i,{hash:{}}):r===m?c.call(t,"intl",i,{hash:{}}):r,o+=h(i)+'</label>\n            </div>\n            <div style="width:50%;float:left;">\n                <label for="special"><input id="special" type="checkbox" checked/>&nbsp;&nbsp;',i="mm_new_password_helper_special",s=n.intl,r=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof r===d?r.call(t,i,{hash:{}}):r===m?c.call(t,"intl",i,{hash:{}}):r,o+=h(i)+'</label>\n            </div>\n        </div>\n    <div style="margin-top:10px;margin-bottom:10px;">\n      <input type="button" id="fillIt" class="btn btn-success done" style="background:#168AD3;" value="',i="mm_new_password_helper_save",s=n.intl,r=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof r===d?r.call(t,i,{hash:{}}):r===m?c.call(t,"intl",i,{hash:{}}):r,o+=h(i)+'"/>\n    </div>\n    </div>\n    ',i=t,i=l.invokePartial(a["common.auto_fill_with"],"common.auto_fill_with",i,n,a),(i||0===i)&&(o+=i),o+="\n    </div>\n    ",i=t,i=l.invokePartial(a["common.header"],"common.header",i,n,a),(i||0===i)&&(o+=i),o+="\n\n</div>\n"}),ABINE_DNTME.CompiledTemplates.password_helper_panel}),ABINE_DNTME.define("abine/views/passwordHelperPanel",["documentcloud/underscore","jquery","duckbone/core","abine/views/panelBase","abine/password","abine/timer","abine/proxies"],function(e,t,n,a,i,r,s){var o=a.extend({templateName:"password_helper_panel",events:{"click .panelSection":"performActions","click #options":"showOptions","click a.strongPassword":"fillWithStrongPassword","click #differentSpecialChars":"fillWithDifferentSpecialChars","click #noSpecialChars":"fillWithNoSpecialChars","click #noNumbers":"fillWithNoNumbers","click #faqLink":"openHelp","click a.getStarted":"getStarted","click .close-header":"logClose","click #refresh-password":"generatePasswordOption","click #fillIt":"fillWithOptionPassword","change #length":"updateLengthNumber","change #numbers":"generatePasswordOption","click #special":"generatePasswordOption"},logClose:function(){this.updatePanelActivity("closed",this.panelId,this.fieldId,!0)},openHelp:function(){s.webapp.openHelp("/faq/guides-blurPasswordManager"),this.closePanel()},afterInitialize:function(){this.fieldId=this.options.fieldId,this.strategyId=this.options.strategyId,this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.numMenuOptions=1,this.bindBaseEvents(),this.applyFadingStyle(),this.fadeIn(),this.model={panelType:"password",hasRegistered:this.options.hasRegistered,dynamicPanel:this.options.dynamicPanel,mapper:!!this.contentManager.preferences.getPref("mapping:mapper"),showMapper:this.contentManager.preferences.isMapper(),show_settings:!this.contentManager.preferences.getPref("password-settings-seen")},this.options.dynamicPanel&&(this.setupDynamicPanel(),this.model.panelSections=this.panelSections),this.contentManager.loadUserPreferences(e.bind(function(){this.model.hasRegistered=!!this.contentManager.preferences.getPref("hasRegistered"),this.model.hasRegistered?(this.updatePanelActivity("impression",2000001,this.fieldId,!0),this.bind("enter0",function(e){this.fillWithStrongPassword(e)})):this.model.dynamicPanel?this.updatePanelActivity("closed",this.model.dynamicPanel.id,this.fieldId,!0):this.bind("enter0",function(e){this.getStarted(e)},this),this.render()},this))},showOptions:function(n){n&&n.preventDefault(),this.ignoreBlur(!0),this.generatePasswordOption(n),t(".moreOptions",this.el).show(),t(".lessOptions",this.el).hide(),this.trigger("render"),r.setTimeout(e.bind(function(){this.focusField(),r.setTimeout(e.bind(function(){this.ignoreBlur(!1)},this),500)},this),100)},generatePasswordOption:function(){var e=this.$("#length").val(),n=this.$("#numbers").prop("checked"),a=this.$("#special").prop("checked");t("#password-input",this.el).val(i.generateNewOptionsPassword(e,n,a))},updateLengthNumber:function(){var e=parseInt(this.$("#length").val());this.$("#pw-length-number").text(e),this.generatePasswordOption()},fillPassword:function(e,t){e&&e.preventDefault(),this.updatePanelActivity("masked",2000001,this.fieldId,!0);var n="/password"==this.options.fieldType;this.fillFields("password",t,{origin:"strong",exactTypeMatch:n}),this.closePanel()},fillWithOptionPassword:function(e){var n=t("#password-input",this.el).val();this.fillPassword(e,n)},fillWithStrongPassword:function(e){var t={"/password":"generateNoSpecialCharsPassword","/password/differentSpecialChars":"generateSpecialCharsPassword","/password/noSpecialChars":"generateNoSpecialCharsPassword","/password/noNumbers":"generateNoDigitsPassword"},n="";n=this.options.fieldType in t?i[t[this.options.fieldType]]():i.generateNoSpecialCharsPassword(),this.fillPassword(e,n)},fillWithDifferentSpecialChars:function(e){s.licenseModule.logPasswordFillData({choice:"differentSpecialChars",domain:this.contentManager.domain}),this.fillPassword(e,i.generateSpecialCharsPassword())},fillWithNoSpecialChars:function(e){s.licenseModule.logPasswordFillData({choice:"noSpecialChars",domain:this.contentManager.domain}),this.fillPassword(e,i.generateNoSpecialCharsPassword())},fillWithNoNumbers:function(e){s.licenseModule.logPasswordFillData({choice:"noNumbers",domain:this.contentManager.domain}),this.fillPassword(e,i.generateNoDigitsPassword())}});return o}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.phone_helper_panel=e.template(function(e,t,n,a,i){function r(e,t){var a,i,r="";return r+="\n          ",v=n.primaryPhone,a=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"primaryPhone"),a=null===a||void 0===a||a===!1?a:ABINE_DNTME.Duckbone.Handlebars.getAttr(a,"isValidated"),i=n["if"],k=E.program(2,s,t),k.hash={},k.fn=k,k.inverse=E.program(7,d,t),a=i.call(e,a,k),(a||0===a)&&(r+=a),r+='\n          <!--Disclose My Phone-->\n          <a href="#" class="mmKeyOption primaryPhone"><div class="element" id="disclose">\n              <span class="panelLeft">\n                  <img class="iconPos" src="',a="/pages/images/2015panels/phone_red.png",v=n.assetUrl,i=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),a=typeof i===A?i.call(e,a,{hash:{}}):i===T?N.call(e,"assetUrl",a,{hash:{}}):i,r+=D(a)+'"/>\n                  ',a="mm_phone_helper_disclosePhone",v=n.intl,i=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===A?i.call(e,a,{hash:{}}):i===T?N.call(e,"intl",a,{hash:{}}):i,r+=D(a)+" ",v=n.primaryPhone,a=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"primaryPhone"),a=null===a||void 0===a||a===!1?a:ABINE_DNTME.Duckbone.Handlebars.getAttr(a,"getPrettyNumber"),typeof a===A?a=a.call(e,{hash:{}}):a===T&&(a=N.call(e,"primaryPhone.getPrettyNumber",{hash:{}})),r+=D(a)+"\n              </span>\n          </div></a>\n    "}function s(e,t){var a,i,r="";return r+="\n              ",v=n.disposablePhone,a=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"disposablePhone"),a=null===a||void 0===a||a===!1?a:ABINE_DNTME.Duckbone.Handlebars.getAttr(a,"released"),i=n["if"],k=E.program(3,o,t),k.hash={},k.fn=k,k.inverse=E.program(5,l,t),a=i.call(e,a,k),(a||0===a)&&(r+=a),r+="\n          "}function o(e){var t,a,i="";return i+='\n                <!--Error Handling-->\n                <div id="error" class="element" style="display:none">\n                  <span class="message">',t="mm_phone_helper_restore_failed",v=n.intl,a=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===A?a.call(e,t,{hash:{}}):a===T?N.call(e,"intl",t,{hash:{}}):a,i+=D(t)+'</span>\n                </div>\n\n                <!--Get New Mask Phone-->\n                <a href="#" class="mmKeyOption disposablePhone"><div class="element" id="mask">\n                  <span class="panelLeft">\n                      <img class="iconPos" src="',t="/pages/images/2015panels/phone_green.png",v=n.assetUrl,a=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===A?a.call(e,t,{hash:{}}):a===T?N.call(e,"assetUrl",t,{hash:{}}):a,i+=D(t)+'"/>\n                      <span class="msg">',t="mm_phone_helper_newMaskPhone",v=n.intl,a=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===A?a.call(e,t,{hash:{}}):a===T?N.call(e,"intl",t,{hash:{}}):a,i+=D(t)+'</span>\n                  </span>\n                  <span class="panelRight">\n                    <img class="loading" style="display:none;" src="',t="/pages/images/ajax_loader.gif",v=n.assetUrl,a=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===A?a.call(e,t,{hash:{}}):a===T?N.call(e,"assetUrl",t,{hash:{}}):a,i+=D(t)+'"/>\n                  </span>\n                </div></a>\n              '}function l(e){var t,a,i="";return i+='\n                <!--Mask My Phone-->\n                <a href="#" class="mmKeyOption disposablePhone"><div class="element" id="mask">\n                  <span class="panelLeft">\n                      <img class="iconPos" src="',t="/pages/images/2015panels/phone_green.png",v=n.assetUrl,a=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===A?a.call(e,t,{hash:{}}):a===T?N.call(e,"assetUrl",t,{hash:{}}):a,i+=D(t)+'"/>\n                    ',t="mm_phone_helper_maskPhone",v=n.intl,a=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===A?a.call(e,t,{hash:{}}):a===T?N.call(e,"intl",t,{hash:{}}):a,i+=D(t)+'\n                  </span>\n                  <span class="panelRight">\n                      <span class="overflowText">',v=n.disposablePhone,t=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"disposablePhone"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getPrettyNumber"),typeof t===A?t=t.call(e,{hash:{}}):t===T&&(t=N.call(e,"disposablePhone.getPrettyNumber",{hash:{}})),i+=D(t)+"</span>\n                  </span>\n                </div></a>\n              "}function d(e){var t,a,i="";return i+='\n              <!-- Setup your Masked Phone -->\n              <a href="#" class="mmKeyOption setupPhone"><div class="element" id="mask">\n                  <span class="panelLeft">\n                      ',t="mm_phone_helper_pleaseValidate",v=n.intl,a=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===A?a.call(e,t,{hash:{}}):a===T?N.call(e,"intl",t,{hash:{}}):a,i+=D(t)+"\n                  </span>\n              </div></a>\n          "}function c(e,t){var a,i,r="";return r+="\n\n        ",v=n.dynamicPanel,a=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"dynamicPanel"),i=n["if"],k=E.program(10,m,t),k.hash={},k.fn=k,k.inverse=E.program(13,p,t),a=i.call(e,a,k),(a||0===a)&&(r+=a),r+="\n    "}function m(e,t){var a,i,r="";return r+="\n            ",v=n.panelSections,a=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"panelSections"),i=n.each,k=E.program(11,h,t),k.hash={},k.fn=k,k.inverse=E.noop,a=i.call(e,a,k),(a||0===a)&&(r+=a),r+="\n        "}function h(e){var t,n="";return n+='\n                <div id="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof t===A?t=t.call(e,{hash:{}}):t===T&&(t=N.call(e,"this.id",{hash:{}})),n+=D(t)+'" style="height:',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"height"),typeof t===A?t=t.call(e,{hash:{}}):t===T&&(t=N.call(e,"this.height",{hash:{}})),n+=D(t)+'" class="panelSection ',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"class_name"),typeof t===A?t=t.call(e,{hash:{}}):t===T&&(t=N.call(e,"this.class_name",{hash:{}})),n+=D(t)+'">\n                    ',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"body"),typeof t===A?t=t.call(e,{hash:{}}):t===T&&(t=N.call(e,"this.body",{hash:{}})),(t||0===t)&&(n+=t),n+="\n                </div>\n            "}function p(e,t){var a,i,r="";return r+="\n            ",v=n.entitledToPhone,a=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"entitledToPhone"),i=n["if"],k=E.program(14,u,t),k.hash={},k.fn=k,k.inverse=E.program(16,_,t),a=i.call(e,a,k),(a||0===a)&&(r+=a),r+="\n        "}function u(e){var t,a,i="";return i+='\n                <a href="#" class="mmKeyOption upgradeToPhone">\n                    <div class="element" id="mask">\n                        <span class="panelLeft">\n                            ',t="mm_phone_helper_setupMasked",v=n.intl,a=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===A?a.call(e,t,{hash:{}}):a===T?N.call(e,"intl",t,{hash:{}}):a,i+=D(t)+"\n                        </span>\n                    </div>\n                </a>\n            "}function _(e){var t,a,i="";return i+='\n                <a href="#" class="mmKeyOption upgradeToPhone">\n                    <div class="element" id="mask">\n                        <span class="panelLeft" style="width:100%;">\n                            ',t="mm_phone_helper_upgradeMaskedPhone",v=n.intl,a=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===A?a.call(e,t,{
hash:{}}):a===T?N.call(e,"intl",t,{hash:{}}):a,i+=D(t)+"\n                        </span>\n                    </div>\n                </a>\n            "}function g(e){var t,a,i="";return i+='\n            <a href="#" class="mmKeyOption alternatePhone" data-number="+',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"country_code"),typeof t===A?t=t.call(e,{hash:{}}):t===T&&(t=N.call(e,"this.country_code",{hash:{}})),i+=D(t)+" ",t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"number"),typeof t===A?t=t.call(e,{hash:{}}):t===T&&(t=N.call(e,"this.number",{hash:{}})),i+=D(t)+'"><div class="element" id="disclose">\n              <span class="panelLeft">\n                  <img class="iconPos" src="',t="/pages/images/2015panels/phone_red.png",v=n.assetUrl,a=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===A?a.call(e,t,{hash:{}}):a===T?N.call(e,"assetUrl",t,{hash:{}}):a,i+=D(t)+'"/>\n                  ',t="mm_phone_helper_disclosePhone",v=n.intl,a=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===A?a.call(e,t,{hash:{}}):a===T?N.call(e,"intl",t,{hash:{}}):a,i+=D(t)+" ",t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getPrettyNumber"),typeof t===A?t=t.call(e,{hash:{}}):t===T&&(t=N.call(e,"this.getPrettyNumber",{hash:{}})),i+=D(t)+"\n              </span>\n            </div></a>\n        "}function f(e){var t,i="";return i+="\n        ",t=e,t=E.invokePartial(a["common.header"],"common.header",t,n,a),(t||0===t)&&(i+=t),i+="\n    "}n=n||e.helpers,a=a||e.partials;var b,y,v,k,w="",E=this,A="function",N=n.helperMissing,T=void 0,D=this.escapeExpression;return w+='<div class="newpanel">\n    <div class="left-panel">\n    ',v=n.primaryPhone,b=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"primaryPhone"),y=n["if"],k=E.program(1,r,i),k.hash={},k.fn=k,k.inverse=E.program(9,c,i),b=y.call(t,b,k),(b||0===b)&&(w+=b),w+="\n        <!--Alternate Phones from identities -->\n        ",v=n.alternatePhones,b=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"alternatePhones"),y=n.each,k=E.program(18,g,i),k.hash={},k.fn=k,k.inverse=E.noop,b=y.call(t,b,k),(b||0===b)&&(w+=b),w+="\n    </div>\n    ",b=t,b=E.invokePartial(a["common.auto_fill_with"],"common.auto_fill_with",b,n,a),(b||0===b)&&(w+=b),w+="\n\n    ",v=n.dynamicPanel,b=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"dynamicPanel"),y=n.unless,k=E.program(20,f,i),k.hash={},k.fn=k,k.inverse=E.noop,b=y.call(t,b,k),(b||0===b)&&(w+=b),w+="\n\n</div>"}),ABINE_DNTME.CompiledTemplates.phone_helper_panel}),ABINE_DNTME.define("abine/views/phoneHelperPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/intl"],function(e,t,n,a,i,r,s,o){var l=i.extend({templateName:"phone_helper_panel",events:{"click a.primaryPhone":"fillWithPrimaryPhone","click a.alternatePhone":"fillWithAlternatePhone","click a.disposablePhone":"fillWithDisposablePhone","click a.getStarted":"getStarted","click a.setupPhone":"setupPhone","click a.upgradeToPhone":"getStartedWithPhone","click .panelSection":"performActions","click .help-link":"openHelp","click .close-link":"logClose"},logClose:function(){this.updatePanelActivity("closed",this.panelId,this.fieldId,!0)},getStartedWithPhone:function(e){e&&e.preventDefault(),this.updatePanelActivity("masked",this.panelId,this.fieldId,!0),s.webapp.openPhones(),this.closePanel(e)},openHelp:function(){s.webapp.openHelp("/phone"),this.closePanel()},setupPhone:function(e){s.webapp.openPhones(),this.closePanel(e),e.preventDefault()},afterInitialize:function(){this.fieldId=this.options.fieldId,this.strategyId=this.options.strategyId,this.numMenuOptions=2,this.bindBaseEvents(),this.applyFadingStyle(),this.fadeIn(),this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.model={panelType:"phone",primaryPhone:!1,disposablePhone:!1,alternatePhones:new a.ShieldedCardCollection,hasRegistered:this.options.hasRegistered,entitledToPhone:this.options.entitledToPhone,mapper:!!this.contentManager.preferences.getPref("mapping:mapper"),showMapper:this.contentManager.preferences.isMapper(),show_settings:!this.contentManager.preferences.getPref("phone-settings-seen")},this.contentManager.loadUserPreferences(e.bind(function(){this.model.hasRegistered=!!this.contentManager.preferences.getPref("hasRegistered"),this.model.shieldedPhones=new a.ShieldedPhoneCollection,this.model.shieldedPhones.bind("sync:success",function(){if(this.model.shieldedPhones.length>0&&(this.model.primaryPhone=this.model.shieldedPhones.at(0),this.model.primaryPhone.get("number")||(this.model.primaryPhone=null),e.each(this.model.shieldedPhones.models,e.bind(function(e){e.get("identity")&&this.model.alternatePhones.add(e)},this))),this.model.primaryPhone){if(this.panelId=3000001,this.updatePanelActivity("impression",this.panelId,this.fieldId,!0),this.model.primaryPhone.isValidated()){var t=this.model.primaryPhone.generateDisposable();t.save({},{success:e.bind(function(){this.model.disposablePhone=t,this.render()},this)}),this.bind("enter0",this.fillWithDisposablePhone,this)}else this.bind("enter0",this.setupPhone,this);this.bind("enter1",this.fillWithPrimaryPhone,this)}else if(this.options.dynamicPanel)this.model.dynamicPanel=this.options.dynamicPanel,this.setupDynamicPanel(),this.model.panelSections=this.panelSections,this.panelId=this.model.dynamicPanel.id,this.updatePanelActivity("impression",this.panelId,this.fieldId,!0);else{if(!this.model.entitledToPhone&&0==this.model.alternatePhones.length)return void this.closePanel();this.panelId=7000001,this.updatePanelActivity("impression",this.panelId,this.fieldId,!0),this.bind("enter0",this.getStartedWithPhone,this)}this.render()},this),this.model.shieldedPhones.fetchAll()},this))},fillWithPrimaryPhone:function(e){e&&e.preventDefault(),this.updatePanelActivity("disclosed",this.panelId,this.fieldId,!0),this.fillFields("phone",this.model.primaryPhone.toJSON(),"primary"),this.closePanel()},fillWithAlternatePhone:function(n){n&&n.preventDefault();for(var a=null,i=n.target;!a;)a=t(i).data("number"),i=i.parentNode;var r=e.find(this.model.alternatePhones.models,function(e){return a=="+"+e.get("country_code")+" "+e.get("number")});this.updatePanelActivity("disclosed",this.panelId,this.fieldId,!0),this.fillFields("phone",r.toJSON(),"primary"),this.closePanel()},fillWithDisposablePhone:function(t){t&&t.preventDefault(),this.ignoreBlur(!0),this.$(".loading").show(),this.$(".disposablePhone .msg").text(o.getText("mm_phone_helper_restore_progress")),this.contentManager.messenger.send("update:panelActivity:masked",{panelId:this.panelId});var n=this.model.primaryPhone.generateDisposable();n.save({filling:!0},{success:e.bind(function(){this.fillFields("phone",n.toJSON(),"disposable"),this.closePanel()},this),error:e.bind(function(){this.$(".disposablePhone").hide(),this.$("#error").show(),this.trigger("resize")},this)})}});return l}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.changepassword_helper_login_panel=e.template(function(e,t,n,a,i){function r(e){var t,a,i="";return i+='\n    <!-- Login Emails -->\n    <a href="#" class="mmKeyOption account" data-account="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof t===h?t=t.call(e,{hash:{}}):t===u&&(t=p.call(e,"this.id",{hash:{}})),i+=_(t)+'"><div class="element" id="mask">\n        <span class="panelLeft" title="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress"),typeof t===h?t=t.call(e,{hash:{}}):t===u&&(t=p.call(e,"this.getAddress",{hash:{}})),i+=_(t)+'">\n            <img class="iconPos" src="',t="/pages/images/2015panels/pass_green.png",l=n.assetUrl,a=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===h?a.call(e,t,{hash:{}}):a===u?p.call(e,"assetUrl",t,{hash:{}}):a,i+=_(t)+'"/>\n            ',t="mm_cp_login_helper_use",l=n.intl,a=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===h?a.call(e,t,{hash:{}}):a===u?p.call(e,"intl",t,{hash:{}}):a,i+=_(t)+" ",t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress"),typeof t===h?t=t.call(e,{hash:{}}):t===u&&(t=p.call(e,"this.getAddress",{hash:{}})),i+=_(t)+'\n        </span>\n        <span class="panelRight">\n            <span class="overflowText">',t="mm_email_helper_created",l=n.intl,a=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===h?a.call(e,t,{hash:{}}):a===u?p.call(e,"intl",t,{hash:{}}):a,i+=_(t)+" ",t="createdAt",l=n.live_timestamp,a=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"live_timestamp"),t=typeof a===h?a.call(e,t,{hash:{}}):a===u?p.call(e,"live_timestamp",t,{hash:{}}):a,i+=_(t)+"</span>\n        </span>\n    </div></a>\n    "}n=n||e.helpers,a=a||e.partials;var s,o,l,d,c="",m=this,h="function",p=n.helperMissing,u=void 0,_=this.escapeExpression;return c+='<div class="newpanel">\n    <div class="left-panel">\n    ',l=n.accounts,s=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"accounts"),o=n.each,d=m.program(1,r,i),d.hash={},d.fn=d,d.inverse=m.noop,s=o.call(t,s,d),(s||0===s)&&(c+=s),c+="\n    </div>\n    ",s=t,s=m.invokePartial(a["common.header"],"common.header",s,n,a),(s||0===s)&&(c+=s),c+="\n</div>"}),ABINE_DNTME.CompiledTemplates.changepassword_helper_login_panel}),ABINE_DNTME.define("abine/views/changePasswordHelperPanel",["documentcloud/underscore","jquery","duckbone/core","abine/views/panelBase","abine/password","abine/timer","abine/proxies"],function(e,t,n,a,i,r,s){var o=a.extend({templateName:"changepassword_helper_password_panel",events:{"click .panelSection":"performActions","click #options":"showOptions","click a.strongPassword":"fillWithStrongPassword","click #differentSpecialChars":"fillWithDifferentSpecialChars","click #noSpecialChars":"fillWithNoSpecialChars","click #noNumbers":"fillWithNoNumbers","click #faqLink":"openHelp","click a.getStarted":"getStarted","click .close-header":"logClose","click #refresh-password":"generatePasswordOption","click #fillIt":"fillWithOptionPassword","change #length":"updateLengthNumber","change #numbers":"generatePasswordOption","click #special":"generatePasswordOption"},logClose:function(){this.updatePanelActivity("closed",this.panelId,this.fieldId,!0)},openHelp:function(){s.webapp.openHelp("/faq/guides-blurPasswordManager"),this.closePanel()},afterInitialize:function(){this.fieldId=this.options.fieldId,this.strategyId=this.options.strategyId,this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.numMenuOptions=1,this.bindBaseEvents(),this.applyFadingStyle(),this.fadeIn(),this.model={panelType:"password",hasRegistered:this.options.hasRegistered,dynamicPanel:this.options.dynamicPanel,show_settings:!this.contentManager.preferences.getPref("password-settings-seen")},this.options.dynamicPanel&&(this.setupDynamicPanel(),this.model.panelSections=this.panelSections),this.contentManager.loadUserPreferences(e.bind(function(){this.model.hasRegistered=!!this.contentManager.preferences.getPref("hasRegistered"),this.model.hasRegistered?(this.updatePanelActivity("impression",2000001,this.fieldId,!0),this.bind("enter0",function(e){this.fillWithStrongPassword(e)})):this.model.dynamicPanel?this.updatePanelActivity("closed",this.model.dynamicPanel.id,this.fieldId,!0):this.bind("enter0",function(e){this.getStarted(e)},this),this.render()},this))},showOptions:function(n){n&&n.preventDefault(),this.ignoreBlur(!0),this.generatePasswordOption(n),t(".moreOptions",this.el).show(),t(".lessOptions",this.el).hide(),this.trigger("render"),r.setTimeout(e.bind(function(){this.focusField(),r.setTimeout(e.bind(function(){this.ignoreBlur(!1)},this),500)},this),100)},generatePasswordOption:function(){var e=this.$("#length").val(),n=this.$("#numbers").prop("checked"),a=this.$("#special").prop("checked");t("#password-input",this.el).val(i.generateNewOptionsPassword(e,n,a))},updateLengthNumber:function(){var e=parseInt(this.$("#length").val());this.$("#pw-length-number").text(e),this.generatePasswordOption()},fillPassword:function(e,t){e&&e.preventDefault(),this.updatePanelActivity("masked",2000001,this.fieldId,!0),this.fillFields("password",t,{origin:"strong",exactTypeMatch:!0}),this.closePanel()},fillWithOptionPassword:function(e){var n=t("#password-input",this.el).val();this.fillPassword(e,n)},fillWithStrongPassword:function(e){var t={"/password":i.generateRandomPassword,"/password/differentSpecialChars":i.generateSpecialCharsPassword,"/password/noSpecialChars":i.generateNoSpecialCharsPassword,"/password/noNumbers":i.generateNoDigitsPassword};if(this.fieldType in t)var n=t[this.fieldType]();else var n=i.generateNoSpecialCharsPassword();this.fillPassword(e,n)},fillWithDifferentSpecialChars:function(e){s.licenseModule.logPasswordFillData({choice:"differentSpecialChars",domain:this.contentManager.domain}),this.fillPassword(e,i.generateSpecialCharsPassword())},fillWithNoSpecialChars:function(e){s.licenseModule.logPasswordFillData({choice:"noSpecialChars",domain:this.contentManager.domain}),this.fillPassword(e,i.generateNoSpecialCharsPassword())},fillWithNoNumbers:function(e){s.licenseModule.logPasswordFillData({choice:"noNumbers",domain:this.contentManager.domain}),this.fillPassword(e,i.generateNoDigitsPassword())}});return o}),ABINE_DNTME.define("abine/views/changePasswordLoginHelperPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/proxies"],function(e,t,n,a,i,r){var s=i.extend({templateName:"changepassword_helper_login_panel",events:{"click a.account":"fillWithAccount","click .help-link":"openHelp"},openHelp:function(){r.webapp.openHelp("/faq/guides-blurPasswordManager"),this.closePanel()},afterInitialize:function(){this.fieldId=this.options.fieldId,this.strategyId=this.options.strategyId,this.bindBaseEvents(),this.applyFadingStyle(),this.fadeIn(),this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.model={panelType:"account",accounts:new a.AccountCollection,show_settings:!this.contentManager.preferences.getPref("account-settings-seen")},this.model.accounts.fetchLoginsByDomain(this.options.domain,e.bind(function(e){if(e||0==this.model.accounts.length)this.closePanel();else{this.numMenuOptions=this.model.accounts.length;for(var t=0;t<this.numMenuOptions;t++)this.bind("enter"+t,function(e,t){this.fillWithAccount(e,t)},this);this.render()}},this))},fillWithAccount:function(n,a){n&&n.preventDefault();var i;if(a||0==a){var r=e(this.el.children[0].children).filter(function(e){return t(e).is("a")&&!t(e).hasClass("disabled")});i=t(r[a]).data("account")}else i=t(n.target).closest("a").data("account");var s=e.find(this.model.accounts.models,function(e){return e.get("id")==i});this.contentManager.messenger.send("update:panelActivity:masked",{panelId:7000004});var o=s.get("email"),l=s.get("username"),d=s.get("password");l&&0!=l.length||(l=o),o&&0!=o.length||(o=l),this.fillFields("login",{email:o,username:l,password:d,accountId:s.id},"changepassword"),this.closePanel()}});return s}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.changepassword_helper_password_panel=e.template(function(e,t,n,a){n=n||e.helpers,a=a||e.partials;var i,r,s,o="",l=this,d="function",c=n.helperMissing,m=void 0,h=this.escapeExpression;return o+='<div class="newpanel">\n    <!-- Generate Password -->\n    <div class="left-panel">\n    <a href="#" class="mmKeyOption password strongPassword lessOptions"><div class="element mask" id="pass">\n      <span class="panelLeft">\n        <img class="iconPos" src="',i="/pages/images/2015panels/pass_green.png",s=n.assetUrl,r=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),i=typeof r===d?r.call(t,i,{hash:{}}):r===m?c.call(t,"assetUrl",i,{hash:{}}):r,o+=h(i)+'"/>\n        ',i="mm_password_helper_generateStrong",s=n.intl,r=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof r===d?r.call(t,i,{hash:{}}):r===m?c.call(t,"intl",i,{hash:{}}):r,o+=h(i)+'\n      </span>\n      </div>\n    </a>\n    <a href="#" class="mmKeyOption password lessOptions"><div class="element mask" id="options">\n      <span>\n        <img class="iconPos" src="',i="/pages/images/2015panels/pass_green.png",s=n.assetUrl,r=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),i=typeof r===d?r.call(t,i,{hash:{}}):r===m?c.call(t,"assetUrl",i,{hash:{}}):r,o+=h(i)+'" style="width:37px;height:21px;"/>\n        ',i="mm_new_password_helper_generate",s=n.intl,r=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof r===d?r.call(t,i,{hash:{}}):r===m?c.call(t,"intl",i,{hash:{}}):r,o+=h(i)+'\n      </span>\n    </div></a>\n    <!-- more options -->\n    <div class="password moreOptions" style="display:none;text-align:center;">\n        <div style="margin-top:10px;">\n            <input type="text" id="password-input" style="height:25px;"/>&nbsp;&nbsp;<img style="cursor:pointer;vertical-align:top;margin-top:4px;" id="refresh-password" src="',i="pages/images/pass_gen_refresh.png",s=n.assetUrl,r=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),i=typeof r===d?r.call(t,i,{hash:{}}):r===m?c.call(t,"assetUrl",i,{hash:{}}):r,o+=h(i)+'"/>\n        </div>\n        <div>\n            <label for="length">',i="mm_new_password_helper_length",s=n.intl,r=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof r===d?r.call(t,i,{hash:{}}):r===m?c.call(t,"intl",i,{hash:{}}):r,o+=h(i)+'&nbsp;&nbsp;<input id="length" type="range" min="6" max="25" value="10" step="1"/>&nbsp;&nbsp;<span id="pw-length-number" style="color:#168AD3;">10</span></label>\n        </div>\n        <div>\n            <div style="width:50%;float:left;">\n                <label for="numbers"><input id="numbers" type="checkbox" checked/>&nbsp;&nbsp;',i="mm_new_password_helper_numbers",s=n.intl,r=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof r===d?r.call(t,i,{hash:{}}):r===m?c.call(t,"intl",i,{hash:{}}):r,o+=h(i)+'</label>\n            </div>\n            <div style="width:50%;float:right;">\n                <label for="special"><input id="special" type="checkbox" checked/>&nbsp;&nbsp;',i="mm_new_password_helper_special",s=n.intl,r=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof r===d?r.call(t,i,{hash:{}}):r===m?c.call(t,"intl",i,{hash:{}}):r,o+=h(i)+'</label>\n            </div>\n        </div>\n        <div style="margin-top:10px;margin-bottom:10px;">\n            <input type="button" id="fillIt" class="btn btn-success done" style="background:#168AD3;" value="',i="mm_new_password_helper_save",s=n.intl,r=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof r===d?r.call(t,i,{hash:{}}):r===m?c.call(t,"intl",i,{hash:{}}):r,o+=h(i)+'"/>\n        </div>\n    </div>\n    </div>\n    ',i=t,i=l.invokePartial(a["common.header"],"common.header",i,n,a),(i||0===i)&&(o+=i),o+="\n</div>"}),ABINE_DNTME.CompiledTemplates.changepassword_helper_password_panel}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_blur_panel=e.template(function(e,t,n){n=n||e.helpers;var a,i,r,s="",o="function",l=n.helperMissing,d=void 0,c=this.escapeExpression;return s+='<div class="panel compact">\n    <div class="content-wrap">\n        <div style="background:linear-gradient(45deg,#25519c,#46c8f9);text-align:center;">\n             <div class="links-wrapper">\n              <div class="links close-link" style="padding:5px;">\n                <img id="close" height="12px" width="12px" class="header-icon" src="',a="/pages/images/dnt_blur_growl_xclose.png",r=n.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"assetUrl",a,{hash:{}}):i,s+=c(a)+'">\n              </div>\n            </div>\n            <div style="padding-top:30px;padding-bottom:10px;">\n                <img class="thing" src="',a="/pages/images/dnt_blur_growl_dnt_logo.png",r=n.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"assetUrl",a,{hash:{}}):i,s+=c(a)+'"/>\n            </div>\n            <div style="padding:0px;">\n                <p style="color:white;font-size:20px;">',a="mm_dntme_blur_isnow",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+'</p>\n            </div>\n            <div style="padding:5px;">\n                <img class="thing" src="',a="/pages/images/blur_growl.png",r=n.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"assetUrl",a,{hash:{}}):i,s+=c(a)+'"/>\n            </div>\n            <div style="padding:10px;">\n                <p style="color:white;font-size:20px;">',a="mm_dntme_blur_passwords",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+"<br>",a="mm_dntme_blur_privacy",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+'</p>\n            </div>\n            <div class="btn" style="margin-bottom:30px;background:#fff;box-shadow:0 2px 0 0 darkblue;">\n                <a id="seeBlur" href="#" style="color:#25519c;font-size:20px;line-height:1.5em;font-weight:bold;">',a="mm_dntme_blur_new",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+"</a>\n            </div>\n        </div>\n    </div>\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_blur_panel}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_a=e.template(function(e,t,n){n=n||e.helpers;var a,i,r,s="",o="function",l=n.helperMissing,d=void 0,c=this.escapeExpression;return s+='<div class="panel compact">\n    <div class="content-wrap">\n        <div class="page-content clearfix">\n            <div class="links close-link"></div>\n            <div class="one">',a="pageContent",r=n.child,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"child",a,{hash:{}}):i,s+=c(a)+'</div>\n            <div class="header-settings-link settings-link">\n                <img class="logo compact" src="',a="/pages/images/dnt-ui-header-settings-grey.png",r=n.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"assetUrl",a,{hash:{}}):i,s+=c(a)+'"/>\n            </div>\n        </div>\n    </div>\n    <div class="footer clearfix">\n        <div class="premium-a-link">\n            <img src="',a="pages/images/dnt-ui-footer-new.png",r=n.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"assetUrl",a,{hash:{}}):i,s+=c(a)+'"/>\n            ',a="mm_dntme_new_premium_added",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+'\n        </div>\n    </div>\n    <div class="header dntme">\n        <div class="logo-link">\n          <img class="logo" height="16px" width="17px" src="',a="/pages/images/dnt-ui-header-logo.png",r=n.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"assetUrl",a,{hash:{}}):i,s+=c(a)+'"/>\n          <span class="boldFont">Blur</span>\n        </div>\n    </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_a}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_b=e.template(function(e,t,n){n=n||e.helpers;var a,i,r,s="",o="function",l=n.helperMissing,d=void 0,c=this.escapeExpression;return s+='<div class="panel compact">\n    <div class="content-wrap">\n        <div class="page-content clearfix">\n            <div class="links close-link"></div>\n            <div class="one">',a="pageContent",r=n.child,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"child",a,{hash:{}}):i,s+=c(a)+'</div>\n            <div class="header-settings-link settings-link">\n                <img class="logo compact" src="',a="/pages/images/dnt-ui-header-settings.png",r=n.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"assetUrl",a,{hash:{}}):i,s+=c(a)+'"/>\n            </div>\n        </div>\n    </div>\n    <div class="footer clearfix">\n        <div class="premium-b-link">\n            <img src="',a="pages/images/dnt-ui-footer-heart.png",r=n.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"assetUrl",a,{hash:{}}):i,s+=c(a)+'"/>\n          ',a="mm_dntme_support_online_privacy",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+'\n        </div>\n    </div>\n    <div class="header dntme">\n        <div class="logo-link">\n          <img class="logo" height="16px" width="17px" src="',a="/pages/images/dnt-ui-header-logo.png",r=n.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"assetUrl",a,{hash:{}}):i,s+=c(a)+'"/>\n          <span class="boldFont">Blur</span>\n        </div>\n    </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_b}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_c=e.template(function(e,t,n){n=n||e.helpers;var a,i,r,s="",o="function",l=n.helperMissing,d=void 0,c=this.escapeExpression;return s+='<div class="panel compact">\n    <div class="content-wrap">\n        <div class="page-content clearfix">\n            <div class="one">',a="pageContent",r=n.child,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"child",a,{hash:{}}):i,s+=c(a)+'</div>\n        </div>\n    </div>\n    <div class="header dntme clearfix">\n        <div class="logo-link-compact">\n          <img class="logo" height="13px" width="13px" src="',a="/pages/images/dnt-ui-header-logo.png",r=n.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"assetUrl",a,{hash:{}}):i,s+=c(a)+'"/>\n          <span class="boldFont">Blur</span>\n        </div>\n        <div class="links-wrapper">\n          <div class="links close-link">\n            <img id="close" height="12px" width="12px" class="header-icon" src="',a="/pages/images/dnt-ui-header-close.png",r=n.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"assetUrl",a,{hash:{}}):i,s+=c(a)+'">\n          </div>\n        </div>\n    </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_c}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_d=e.template(function(e,t,n,a,i){function r(e){var t,a,i="";return i+='\n        <div class="header" id="complete-setup-div" style="text-align:center;margin-bottom:10px;"><input type="button" id="complete-setup" class="btn btn-primary" value=\'',t="mm_dntme_complete_setup_button",l=n.intl,a=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===h?a.call(e,t,{hash:{}}):a===u?p.call(e,"intl",t,{hash:{}}):a,i+=_(t)+"'/></div>\n    "}n=n||e.helpers;var s,o,l,d,c="",m=this,h="function",p=n.helperMissing,u=void 0,_=this.escapeExpression;return c+='<div class="panel compact">\n    <div class="content-wrap">\n        <div class="page-content clearfix">\n            <div class="one">',s="pageContent",l=n.child,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),s=typeof o===h?o.call(t,s,{hash:{}}):o===u?p.call(t,"child",s,{hash:{}}):o,c+=_(s)+"</div>\n        </div>\n    </div>\n    ",l=n.registered,s=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"registered"),o=n.unless,d=m.program(1,r,i),d.hash={},d.fn=d,d.inverse=m.noop,s=o.call(t,s,d),(s||0===s)&&(c+=s),c+='\n    <div class="header dntme clearfix">\n        <div class="logo-link-compact">\n          <img class="logo" height="13px" width="13px" src="',s="/pages/images/dnt-ui-header-logo.png",l=n.assetUrl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),s=typeof o===h?o.call(t,s,{hash:{}}):o===u?p.call(t,"assetUrl",s,{hash:{}}):o,c+=_(s)+'"/>\n          <span class="boldFont">Blur</span>\n        </div>\n        <div class="links-wrapper">\n          <div class="links close-link">\n            <img id="close" height="12px" width="12px" class="header-icon" src="',s="/pages/images/dnt-ui-header-close.png",l=n.assetUrl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),s=typeof o===h?o.call(t,s,{hash:{}}):o===u?p.call(t,"assetUrl",s,{hash:{}}):o,c+=_(s)+'">\n          </div>\n        </div>\n    </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_d}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_e=e.template(function(e,t,n,a,i){function r(e,t){var a,i,r="";return r+="\n        ",d=n.notNow,a=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"notNow"),i=n.unless,c=h.program(2,s,t),c.hash={},c.fn=c,c.inverse=h.noop,a=i.call(e,a,c),(a||0===a)&&(r+=a),r+="\n    "}function s(e){var t,a,i="";return i+='\n            <div class="header" id="complete-setup-div" style="text-align:center;margin-bottom:90px;">\n                <div id="welcome-message" style="text-transform:none;">',t="mm_dntme_join_and_protect_1",d=n.intl,a=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===p?a.call(e,t,{hash:{}}):a===_?u.call(e,"intl",t,{hash:{}}):a,i+=g(t)+"<br/>",t="mm_dntme_join_and_protect_2",d=n.intl,a=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===p?a.call(e,t,{hash:{}}):a===_?u.call(e,"intl",t,{hash:{}}):a,i+=g(t)+'</div>\n                <div id="error" style="display:none;color:red;text-transform:none;"></div>\n                <div id="progress-section" style="display:none">\n                    <div class="progress progress-striped active">\n                        <div class="bar bar-info" style="width: 100%;"></div>\n                    </div>\n                    <div class="loading-message" style="text-transform:none;"></div>\n                </div>\n                <div id="form-div">\n                <input class="span2" id="protect-email" type="text" style="width:130px;height:25px;margin:10px;" placeholder="',t="mm_dntme_enter_email_simple",d=n.intl,a=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===p?a.call(e,t,{hash:{}}):a===_?u.call(e,"intl",t,{hash:{}}):a,i+=g(t)+'"/>\n                <input type="button" id="not-now" class="btn" value=\'',t="mm_dntme_intrusive_not_now",d=n.intl,a=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===p?a.call(e,t,{hash:{}}):a===_?u.call(e,"intl",t,{hash:{}}):a,i+=g(t)+'\'/>\n                <input type="button" id="submit-email" class="btn btn-primary" value=\'',t="mm_dntme_intrusive_submit",d=n.intl,a=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===p?a.call(e,t,{hash:{}}):a===_?u.call(e,"intl",t,{hash:{}}):a,i+=g(t)+"'/>\n                </div>\n            </div>\n        "}n=n||e.helpers;var o,l,d,c,m="",h=this,p="function",u=n.helperMissing,_=void 0,g=this.escapeExpression;return m+='<div class="panel compact">\n    <div class="content-wrap">\n        <div class="page-content clearfix">\n            <div class="one">',o="pageContent",d=n.child,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"child",o,{hash:{}}):l,m+=g(o)+"</div>\n        </div>\n    </div>\n    ",d=n.registered,o=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"registered"),l=n.unless,c=h.program(1,r,i),c.hash={},c.fn=c,c.inverse=h.noop,o=l.call(t,o,c),(o||0===o)&&(m+=o),m+='\n    <div class="header dntme clearfix">\n        <div class="logo-link-compact">\n          <img class="logo" height="13px" width="13px" src="',o="/pages/images/dnt-ui-header-logo.png",
d=n.assetUrl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"assetUrl",o,{hash:{}}):l,m+=g(o)+'"/>\n          <span class="boldFont">Blur</span>\n        </div>\n        <div class="links-wrapper">\n          <div class="links close-link">\n            <img id="close" height="12px" width="12px" class="header-icon" src="',o="/pages/images/dnt-ui-header-close.png",d=n.assetUrl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"assetUrl",o,{hash:{}}):l,m+=g(o)+'">\n          </div>\n        </div>\n    </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_e}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_f=e.template(function(e,t,n,a,i){function r(e,t){var a,i,r="";return r+="\n        ",d=n.notNow,a=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"notNow"),i=n.unless,c=h.program(2,s,t),c.hash={},c.fn=c,c.inverse=h.noop,a=i.call(e,a,c),(a||0===a)&&(r+=a),r+="\n    "}function s(e){var t,a,i="";return i+='\n            <div class="header" id="complete-setup-div" style="text-align:center;margin-bottom:110px;">\n                <div id="welcome-message" style="text-transform:none;">',t="mm_dntme_complete_setup",d=n.intl,a=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===p?a.call(e,t,{hash:{}}):a===_?u.call(e,"intl",t,{hash:{}}):a,i+=g(t)+'</div>\n                <div id="error" style="display:none;color:red;text-transform:none;"></div>\n                <div id="progress-section" style="display:none">\n                    <div class="progress progress-striped active">\n                        <div class="bar bar-info" style="width: 100%;"></div>\n                    </div>\n                    <div class="loading-message" style="text-transform:none;"></div>\n                </div>\n                <div id="form-div">\n                <input class="span2" id="protect-email" type="text" style="width:130px;height:25px;margin:10px 10px 5px 10px;" placeholder="',t="mm_dntme_enter_email_simple",d=n.intl,a=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===p?a.call(e,t,{hash:{}}):a===_?u.call(e,"intl",t,{hash:{}}):a,i+=g(t)+'"/>\n                <input class="span2" id="password-field" type="password" style="width:130px;height:25px;margin:5px 10px 10px 10px;" placeholder="',t="mm_dntme_enter_password_simple",d=n.intl,a=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===p?a.call(e,t,{hash:{}}):a===_?u.call(e,"intl",t,{hash:{}}):a,i+=g(t)+'"/>\n                <input type="button" id="submit-email" class="btn btn-primary" value=\'',t="mm_dntme_intrusive_register",d=n.intl,a=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===p?a.call(e,t,{hash:{}}):a===_?u.call(e,"intl",t,{hash:{}}):a,i+=g(t)+"'/>\n                </div>\n            </div>\n        "}n=n||e.helpers;var o,l,d,c,m="",h=this,p="function",u=n.helperMissing,_=void 0,g=this.escapeExpression;return m+='<div class="panel compact">\n    <div class="content-wrap">\n        <div class="page-content clearfix">\n            <div class="one">',o="pageContent",d=n.child,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"child",o,{hash:{}}):l,m+=g(o)+"</div>\n        </div>\n    </div>\n    ",d=n.registered,o=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"registered"),l=n.unless,c=h.program(1,r,i),c.hash={},c.fn=c,c.inverse=h.noop,o=l.call(t,o,c),(o||0===o)&&(m+=o),m+='\n    <div class="header dntme clearfix">\n        <div class="logo-link-compact">\n          <img class="logo" height="13px" width="13px" src="',o="/pages/images/dnt-ui-header-logo.png",d=n.assetUrl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"assetUrl",o,{hash:{}}):l,m+=g(o)+'"/>\n          <span class="boldFont">Blur</span>\n        </div>\n        <div class="links-wrapper">\n          <div class="links close-link">\n            <img id="close" height="12px" width="12px" class="header-icon" src="',o="/pages/images/dnt-ui-header-close.png",d=n.assetUrl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"assetUrl",o,{hash:{}}):l,m+=g(o)+'">\n          </div>\n        </div>\n    </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_f}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_medal=e.template(function(e,t,n){n=n||e.helpers;var a,i,r,s="",o="function",l=n.helperMissing,d=void 0,c=this.escapeExpression;return s+='<div class="panel compact">\n    <div class="content-wrap">\n        <div class="page-content clearfix">\n            <div class="links close-link"></div>\n            <div class="one">',a="pageContent",r=n.child,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"child",a,{hash:{}}):i,s+=c(a)+'</div>\n            <div class="header-settings-link settings-link">\n                <img class="logo compact" src="',a="/pages/images/dnt-ui-header-settings-grey.png",r=n.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"assetUrl",a,{hash:{}}):i,s+=c(a)+'"/>\n            </div>\n        </div>\n    </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_medal}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_weekly_report=e.template(function(e,t,n){n=n||e.helpers;var a,i,r,s="",o="function",l=n.helperMissing,d=void 0,c=this.escapeExpression;return s+='<div class="panel compact">\n    <div class="content-wrap">\n        <div class="page-content clearfix">\n            <div class="links close-link"></div>\n            <div class="one">',a="pageContent",r=n.child,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"child",a,{hash:{}}):i,s+=c(a)+'</div>\n            <div class="header-settings-link settings-link">\n                <img class="logo compact" src="',a="/pages/images/dnt-ui-header-settings-grey.png",r=n.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"assetUrl",a,{hash:{}}):i,s+=c(a)+'"/>\n            </div>\n        </div>\n    </div>\n    <div class="footer weeklyReport clearfix">\n        <img src="',a="pages/images/dnt-ui-weekly-report.png",r=n.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"assetUrl",a,{hash:{}}):i,s+=c(a)+'"/>\n        <span></span>',a="mm_dntme_weekly_report_title",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+" &rarr;\n    </div>\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_weekly_report}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_accounts=e.template(function(e,t,n,a,i){function r(){return"off"}function s(e){var t,a,i="";return i+='"',t="mm_dntme_help_what_will_happen_on_rememberaccounts",D=n.intl,a=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===B?a.call(e,t,{hash:{}}):a===P?S.call(e,"intl",t,{hash:{}}):a,i+=x(t)+'"'}function o(e){var t,a,i="";return i+='"',t="mm_dntme_help_what_will_happen_off_rememberaccounts",D=n.intl,a=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===B?a.call(e,t,{hash:{}}):a===P?S.call(e,"intl",t,{hash:{}}):a,i+=x(t)+'"'}function l(){return"off"}function d(){return"on"}function c(){return"off"}function m(e){var t,a,i="";return i+='"',t="mm_dntme_help_what_will_happen_on_helpmelogin",D=n.intl,a=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===B?a.call(e,t,{hash:{}}):a===P?S.call(e,"intl",t,{hash:{}}):a,i+=x(t)+'"'}function h(e){var t,a,i="";return i+='"',t="mm_dntme_help_what_will_happen_off_helpmelogin",D=n.intl,a=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===B?a.call(e,t,{hash:{}}):a===P?S.call(e,"intl",t,{hash:{}}):a,i+=x(t)+'"'}function p(){return"off"}function u(){return"on"}function _(){return"off"}function g(e){var t,a,i="";return i+='"',t="mm_dntme_help_what_will_happen_on_submit_account",D=n.intl,a=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===B?a.call(e,t,{hash:{}}):a===P?S.call(e,"intl",t,{hash:{}}):a,i+=x(t)+'"'}function f(e){var t,a,i="";return i+='"',t="mm_dntme_help_what_will_happen_off_submit_account",D=n.intl,a=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===B?a.call(e,t,{hash:{}}):a===P?S.call(e,"intl",t,{hash:{}}):a,i+=x(t)+'"'}function b(){return"off"}function y(){return"on"}function v(){return"off"}function k(e){var t,a,i="";return i+='"',t="mm_dntme_help_what_will_happen_on_suggeststrongpassword",D=n.intl,a=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===B?a.call(e,t,{hash:{}}):a===P?S.call(e,"intl",t,{hash:{}}):a,i+=x(t)+'"'}function w(e){var t,a,i="";return i+='"',t="mm_dntme_help_what_will_happen_off_suggeststrongpassword",D=n.intl,a=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===B?a.call(e,t,{hash:{}}):a===P?S.call(e,"intl",t,{hash:{}}):a,i+=x(t)+'"'}function E(){return"off"}function A(){return"on"}n=n||e.helpers;var N,T,D,M,I="",C=this,B="function",S=n.helperMissing,P=void 0,x=this.escapeExpression;return I+='<div id="account" class="clearfix setting-row ',D=n.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"accountOff"),T=n["if"],M=C.program(1,r,i),M.hash={},M.fn=M,M.inverse=C.noop,N=T.call(t,N,M),(N||0===N)&&(I+=N),I+='" data-type="blacklist" data-name="save_account">\n  <div class="message" style="width:160px;" title=',D=n.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"accountOff"),T=n["if"],M=C.program(3,s,i),M.hash={},M.fn=M,M.inverse=C.program(5,o,i),N=T.call(t,N,M),(N||0===N)&&(I+=N),I+=">",N="mm_dntme_accounts_save_account",D=n.intl,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),N=typeof T===B?T.call(t,N,{hash:{}}):T===P?S.call(t,"intl",N,{hash:{}}):T,I+=x(N)+'</div>\n  <div class="word switch ',D=n.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"accountOff"),T=n["if"],M=C.program(7,l,i),M.hash={},M.fn=M,M.inverse=C.program(9,d,i),N=T.call(t,N,M),(N||0===N)&&(I+=N),I+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',N="mm_dntme_for_this_site",D=n.intl,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),N=typeof T===B?T.call(t,N,{hash:{}}):T===P?S.call(t,"intl",N,{hash:{}}):T,I+=x(N)+'</div>\n</div>\n\n<div id="account" class="clearfix setting-row ',D=n.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"loginOff"),T=n["if"],M=C.program(11,c,i),M.hash={},M.fn=M,M.inverse=C.noop,N=T.call(t,N,M),(N||0===N)&&(I+=N),I+='" data-type="blacklist" data-name="account">\n  <div class="message" style="width:160px;" title=',D=n.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"loginOff"),T=n["if"],M=C.program(13,m,i),M.hash={},M.fn=M,M.inverse=C.program(15,h,i),N=T.call(t,N,M),(N||0===N)&&(I+=N),I+=">",N="mm_dntme_accounts_help_login",D=n.intl,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),N=typeof T===B?T.call(t,N,{hash:{}}):T===P?S.call(t,"intl",N,{hash:{}}):T,I+=x(N)+'</div>\n  <div class="word switch ',D=n.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"loginOff"),T=n["if"],M=C.program(17,p,i),M.hash={},M.fn=M,M.inverse=C.program(19,u,i),N=T.call(t,N,M),(N||0===N)&&(I+=N),I+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',N="mm_dntme_for_this_site",D=n.intl,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),N=typeof T===B?T.call(t,N,{hash:{}}):T===P?S.call(t,"intl",N,{hash:{}}):T,I+=x(N)+'</div>\n</div>\n\n<div id="submit_account" class="clearfix setting-row ',D=n.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"submitAccountOff"),T=n["if"],M=C.program(21,_,i),M.hash={},M.fn=M,M.inverse=C.noop,N=T.call(t,N,M),(N||0===N)&&(I+=N),I+='" data-type="blacklist" data-name="submit_account">\n  <div class="message" style="width:160px;" title=',D=n.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"submitAccountOff"),T=n["if"],M=C.program(23,g,i),M.hash={},M.fn=M,M.inverse=C.program(25,f,i),N=T.call(t,N,M),(N||0===N)&&(I+=N),I+=">",N="mm_dntme_accounts_submit_account",D=n.intl,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),N=typeof T===B?T.call(t,N,{hash:{}}):T===P?S.call(t,"intl",N,{hash:{}}):T,I+=x(N)+'</div>\n  <div class="word switch ',D=n.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"submitAccountOff"),T=n["if"],M=C.program(27,b,i),M.hash={},M.fn=M,M.inverse=C.program(29,y,i),N=T.call(t,N,M),(N||0===N)&&(I+=N),I+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',N="mm_dntme_for_this_site",D=n.intl,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),N=typeof T===B?T.call(t,N,{hash:{}}):T===P?S.call(t,"intl",N,{hash:{}}):T,I+=x(N)+'</div>\n</div>\n\n<div id="password" class="clearfix setting-row ',D=n.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"passwordOff"),T=n["if"],M=C.program(31,v,i),M.hash={},M.fn=M,M.inverse=C.noop,N=T.call(t,N,M),(N||0===N)&&(I+=N),I+='" data-type="blacklist" data-name="password">\n  <div class="message" style="width:160px;" title=',D=n.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"passwordOff"),T=n["if"],M=C.program(33,k,i),M.hash={},M.fn=M,M.inverse=C.program(35,w,i),N=T.call(t,N,M),(N||0===N)&&(I+=N),I+=">",N="mm_dntme_accounts_password",D=n.intl,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),N=typeof T===B?T.call(t,N,{hash:{}}):T===P?S.call(t,"intl",N,{hash:{}}):T,I+=x(N)+'</div>\n  <div class="word switch ',D=n.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"passwordOff"),T=n["if"],M=C.program(37,E,i),M.hash={},M.fn=M,M.inverse=C.program(39,A,i),N=T.call(t,N,M),(N||0===N)&&(I+=N),I+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',N="mm_dntme_for_this_site",D=n.intl,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),N=typeof T===B?T.call(t,N,{hash:{}}):T===P?S.call(t,"intl",N,{hash:{}}):T,I+=x(N)+"</div>\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_accounts}),ABINE_DNTME.define("abine/views/accountsDashboard",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/views/pageTracker","abine/views/settingsChanged","abine/views/dntmePageBase","abine/timer"],function(e,t,n,a,i,r,s,o,l,d,c){var m=d.extend({templateName:"dntme_dashboard_accounts",events:{"click .setting-row":"toggleSwitch","click .more-settings":"showSettings","click .go-back":"goBack","click a.accountsDashboard":"accountsDashboard"},afterInitialize:function(){if(this.doc=this.el.document,this.options.highlight){var t=this.$("#"+this.options.highlight);t&&t[0]&&(t[0].scrollIntoView(),t.addClass("highlight"))}this.options.timeout&&c.setTimeout(e.bind(function(){this.trigger("close")},this),this.options.timeout)},goBack:function(){this.trigger("change-dashboard","dashboard")},accountsDashboard:function(e){e.preventDefault(),s.webapp.openAccounts(),this.trigger("close")},createChildren:function(){return this.children={},this.children}});return m}),ABINE_DNTME.define("abine/views/dashboard",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/views/pageTracker","abine/intl","abine/timer","abine/responseCodes","abine/views/settingsDashboard"],function(e,t,n,a,i,r,s,o,l,d,c,m){var h=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i,p=n.View.extend({tagName:"div",templateName:"dntme_dashboard_login",afterInitialize:function(){this.doc=this.el.ownerDocument;var e=this;d.setTimeout(function(){e.trigger("mask-passwords")},100)}}),u=n.View.extend({tagName:"div",templateName:"dntme_dashboard_main_grid",afterInitialize:function(){this.doc=this.el.ownerDocument}}),_=n.View.extend({tagName:"div",templateName:"dntme_dashboard_main",className:"dntme_dashboard",events:{"click .show-details":"showChildDashboard","click #register":"register","click #login":"login","submit #frm":"loginOrRegister","click #forgotPassword":"forgotPassword","click #whySignIn":"whySignIn","click .cell":"showChildDashboard","click .main-tracker-title":"showChildDashboard","click #switchLogin":"switchLogin","click #accountSwitch":"triggerSettings","click #walletSwitch":"triggerSettings","click #maskingSwitch":"triggerSettings","click #trackingSwitch":"triggerSettings"},showInlineSettings:function(e,n){t(".mobileCell, .syncCell, .dntme_dntStats",this.el.ownerDocument).hide(),t(".trackingCell, .maskingCell",this.el.ownerDocument).removeClass("b"),this.$("#inline-site-settings").show(),this.settingsView?(this.settingsView.options.highlight=e,this.settingsView.options.switchTo=n,this.settingsView.reload()):(this.settingsView=this.getInlineSettings(e,n),delete this.options.highlight)},getInlineSettings:function(t,n){var a=this.model,i=this.globalData,r=new m({el:this.$("#inline-site-settings")[0],inline:!0,tabData:a,globalData:i,doc:this.el.ownerDocument,messenger:this.messenger,highlight:t,contentManager:this.contentManager,settingsView:"site-settings",switchTo:n});return r.transferEvents(["resize","max-height"],this),a.on("settings-changed",e.debounce(e.bind(function(){this.model.fetch({success:e.bind(function(){this.children.mainGrid.render()},this)})},this),500)),r},triggerSettings:function(n){for(var a="off",i=n.target;!t(i).data("group");)i=i.parentNode;if(this.$(i).hasClass("on")&&(a="on"),!t(i).data("changing"))return t(i).data("changing",!0),t(".knob",i).animate({marginLeft:"on"==a?0:20},e.bind(function(){t(i).removeData("changing"),t(i).toggleClass("on").toggleClass("off")})),this.showInlineSettings(t(i).data("group"),a),n.preventDefault(),!1},afterInitialize:function(){this.toolBarPanelId=7000066,this.messenger.send("update:panelActivity:impression",{panelId:this.toolBarPanelId}),this.model.get("loggedIn")?this.messenger.send("update:panelActivity:masked",{panelId:this.toolBarPanelId}):this.messenger.send("update:panelActivity:disclosed",{panelId:this.toolBarPanelId}),this.doc=this.el.ownerDocument,this.messenger=this.options.messenger,this.contentManager=this.options.contentManager,t("#protect-email, #password-field",this.el).css("height","25px"),this.options.highlight&&(this.model.get("loggedIn")?r.setTimeout(e.bind(function(){this.showInlineSettings(this.options.highlight,"no-switch"),delete this.options.highlight},this),500):delete this.options.highlight)},switchLogin:function(e){e.preventDefault(),t(".lockBit",this.el).hide(),t("#login",this.el).val(l.getText("mm_dntme_sign_in")),t(".loginBit",this.el).show(),t("#protect-email",this.el).val(""),this.contentManager.preferences.removePref("oldEmail"),this.contentManager.preferences.setPref("loginNotLock","true")},whySignIn:function(e){e.preventDefault(),this.trigger("change-dashboard","login_help")},showChildDashboard:function(e){e.preventDefault();var n=t(e.target).data("dashboard");return n||(n=t(e.target.parentNode).data("dashboard")),"anywhere"==n?(this.model.get("hasMobileApp")||s.webapp.openDntAnywhere(),void this.trigger("close")):"accounts"==n?void this.accountsDashboard():"masking"==n?void this.maskingDashboard():"wallet"==n?void this.walletDashboard():void this.trigger("change-dashboard",n)},accountsDashboard:function(){s.webapp.openAccounts(),this.trigger("close")},maskingDashboard:function(){s.webapp.openMasking(),this.trigger("close")},walletDashboard:function(){s.webapp.openWallet(),this.trigger("close")},forgotPassword:function(e){e.preventDefault(),this.messenger.send("update:panelActivity:closed",{panelId:this.toolBarPanelId}),s.webapp.openForgotPassword(),this.trigger("close")},loginOrRegister:function(e){this.model.get("email")?this.login(e):this.register(e)},login:function(n){function a(e,n){try{p.get(0).ownerDocument&&(t(".loading-message",p).text(l.getText("mm_loading_display_login")),e<n&&(u=d.setTimeout(function(){a(e+1,n)},500)))}catch(e){}}n&&n.preventDefault(),this.trigger("ignore-blur",!0);var i=this.$("#protect-email").val(),r=this.$("#password-field").val(),o=this.$("#mfa-code-field").val(),c=this.$("#error");if(c.hide(),!i.match(h))return this.$("#welcome-message").hide(),c.text(l.getText("mm_dntme_invalid_email")).show(),this.trigger("resize"),void this.trigger("ignore-blur",!1);if(0==r.length)return this.$("#welcome-message").hide(),c.text(l.getText("mm_dntme_invalid_password")).show(),this.trigger("resize"),void this.trigger("ignore-blur",!1);var m={email:i,password:r,mfa_code:o},p=this.$("#progress-section");p.height(this.$("#form-div").height()-10);var u=null;a(0,20),p.show(),this.$("#form-div").hide(),s.licenseModule.login(m,e.bind(function(t,n){this.trigger("ignore-blur",!1),this.processRegistration(t,n,m,e.bind(function(e){d.clearTimeout(u),p.hide(),e||(this.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),this.$("#complete-setup-div").hide(),this.trigger("change-dashboard","dashboard"))},this))},this)),this.trigger("resize")},register:function(n){function a(e,n){try{m.get(0).ownerDocument&&(t(".loading-message",m).text(l.getText("mm_loading_display_register_use"+Math.floor(e/10))),e<n&&(p=d.setTimeout(function(){a(e+1,n)},500)))}catch(e){}}n&&n.preventDefault(),this.trigger("ignore-blur",!0),this.$("#welcome-message").show();var i=this.$("#protect-email").val(),r=this.$("#password-field").val(),o=this.$("#error");if(o.hide(),!i.match(h))return this.$("#welcome-message").hide(),o.text(l.getText("mm_dntme_invalid_email")).show(),this.trigger("resize"),void this.trigger("ignore-blur",!1);if(0==r.length)return this.$("#welcome-message").hide(),o.text(l.getText("mm_dntme_invalid_password")).show(),this.trigger("resize"),void this.trigger("ignore-blur",!1);var c={email:i,password:r,password_hint:l.getText("mm_pwhint_default"),register_type:"dnt_panel",send_password_email:!1},m=this.$("#progress-section");m.height(this.$("#form-div").height()-10);var p=null;a(0,40),m.show(),this.$("#form-div").hide(),s.licenseModule.register(c,e.bind(function(t,n){this.trigger("ignore-blur",!1),this.processRegistration(t,n,c,e.bind(function(e){d.clearTimeout(p),m.hide(),e||(this.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),this.$("#complete-setup-div").hide(),d.setTimeout(function(){s.webapp.openTour()},1e3),this.trigger("close"))},this))},this)),this.trigger("resize")},processRegistration:function(t,n,a,i){if(t){this.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId});var r=l.getText("mm_dntme_register_error"),o=t.responseJSON&&t.responseJSON.data?t.responseJSON.data.errors:null;"invalid email address"==t.responseJSON.error_code?r=l.getText("mm_dntme_invalid_email_server_error"):"mfa code required"==t.responseJSON.error_code?(r="You have enabled 2-factor authentication.  Please enter authentication code below:",this.$("#login-section").hide(),this.$("#mfa-section").show(),this.$("#error, #progress-section").hide(),this.$("#complete-setup-div, #form-div").show(),this.trigger("render")):"wrong password"==t.responseJSON.error_code?r=l.getText("mm_dntme_wrong_password"):"no account found for email"==t.responseJSON.error_code?r=l.getText("mm_dntme_wrong_email"):"version not allowed"==t.responseJSON.error_code?r=l.getText("mm_dntme_version_not_allowed"):"account has been locked"==t.responseJSON.error_code?r=l.getText("mm_dntme_account_locked"):t.responseJSON.error_code==c.SCHEDULED_DOWNTIME?r=l.getText("mm_dntme_server_maintenance"):o&&o.email&&("has already been taken"==o.email[0]?r=l.getText("mm_dntme_duplicate_email",[a.email]):"was used for MaskMe Heavy"==o.email[0]&&(r=l.getText("mm_dntme_version_not_allowed"))),this.$("#error").html(r).show(),t.responseJSON&&t.responseJSON.data&&1==t.responseJSON.data.generated_password&&this.$("#error #loginButton").click(e.bind(function(e){return s.webapp.openPasswordSetupPage(a.email),e.preventDefault(),!1},this)),this.$("#error #retryEmail, #error #loginButton").click(e.bind(this.retryEmail,this)),this.$("#error #dnt2upgrade").click(s.webapp.openDnt2UpgradePage),this.trigger("resize"),i(r)}else this.trigger("refresh-preferences"),i()},retryEmail:function(e){e&&e.preventDefault(),this.$("#error, #progress-section").hide(),this.$("#complete-setup-div, #form-div").show(),this.trigger("render")},createChildren:function(){return this.children={trackersTitle:new o.TitleView({model:this.model,doc:this.el.ownerDocument}),mainGrid:new u({model:this.model,doc:this.el.ownerDocument})},this.globalData=this.globalData||new a.GlobalData({messenger:this.options.messenger}),this.model.showSettings&&(this.settingsView=this.getInlineSettings(this.options.highlight,"no-switch"),delete this.options.highlight),this.children.trackersTitle.transferEvents(["open:understanding:tracker"],this),this.model.get("loggedIn")||(this.model.get("email")?this.panelId=2000011:this.panelId=3000011,this.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.children.loginSection=new p({model:this.model,doc:this.el.ownerDocument}),this.children.loginSection.transferEvents(["mask-passwords"],this)),this.children}});return _}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_ignore_settings=e.template(function(e,t,n,a,i){function r(e,t){var a,i,r="";return r+=' \n  <div id="bl-save_account-region" class="ignore-region" style="max-height:185px;overflow: scroll;">\n    ',ae=n.blacklistCollection,a=ae||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),i=n.each,ie=se.program(2,s,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,a=i.call(e,a,ie),(a||0===a)&&(r+=a),r+='\n  </div>\n  <div id="bl-account-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',ae=n.blacklistCollection,a=ae||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),i=n.each,ie=se.program(8,c,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,a=i.call(e,a,ie),(a||0===a)&&(r+=a),r+='\n  </div>\n  <div id="bl-submit_account-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',ae=n.blacklistCollection,a=ae||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),i=n.each,ie=se.program(14,u,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,a=i.call(e,a,ie),(a||0===a)&&(r+=a),r+='\n  </div>\n  <div id="bl-save_card-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',ae=n.blacklistCollection,a=ae||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),i=n.each,ie=se.program(20,b,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,a=i.call(e,a,ie),(a||0===a)&&(r+=a),r+='\n  </div>\n  <div id="bl-identity-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',ae=n.blacklistCollection,a=ae||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),i=n.each,ie=se.program(26,w,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,a=i.call(e,a,ie),(a||0===a)&&(r+=a),r+='\n  </div>\n  <div id="bl-tracker-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',ae=n.blacklistCollection,a=ae||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),i=n.each,ie=se.program(32,T,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,a=i.call(e,a,ie),(a||0===a)&&(r+=a),r+='\n  </div>\n  <div id="bl-address-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',ae=n.blacklistCollection,a=ae||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),i=n.each,ie=se.program(38,C,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,a=i.call(e,a,ie),(a||0===a)&&(r+=a),r+='\n  </div>\n  <div id="bl-card-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',ae=n.blacklistCollection,a=ae||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),i=n.each,ie=se.program(44,x,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,a=i.call(e,a,ie),(a||0===a)&&(r+=a),r+='\n  </div>\n  <div id="bl-email-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',ae=n.blacklistCollection,a=ae||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),i=n.each,ie=se.program(50,q,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,a=i.call(e,a,ie),(a||0===a)&&(r+=a),r+='\n  </div>\n  <div id="bl-password-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',ae=n.blacklistCollection,a=ae||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),i=n.each,ie=se.program(56,F,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,a=i.call(e,a,ie),(a||0===a)&&(r+=a),r+='\n  </div>\n  <div id="bl-phone-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',ae=n.blacklistCollection,a=ae||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),i=n.each,ie=se.program(62,$,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,a=i.call(e,a,ie),(a||0===a)&&(r+=a),r+='\n  </div>\n    <div id="bl-real_card-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',ae=n.blacklistCollection,a=ae||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),i=n.each,ie=se.program(68,Z,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,a=i.call(e,a,ie),(a||0===a)&&(r+=a),r+='\n  </div>\n  <div class="blacklist-entry blacklist-empty" style="margin-left:2em;display:none">',a="mm_dntme_settings_ignore_no_results",ae=n.intl,i=ae||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===oe?i.call(e,a,{hash:{}}):i===de?le.call(e,"intl",a,{hash:{}}):i,r+=ce(a)+'. <a href="#" class="clear-blacklist-search">',a="mm_dntme_settings_ignore_clear_search",ae=n.intl,i=ae||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===oe?i.call(e,a,{hash:{}}):i===de?le.call(e,"intl",a,{hash:{}}):i,r+=ce(a)+'</a></div>\n  </br>\n  <input style="margin-left:3em;height:2.5em" type="text" id="blacklist-search" placeholder="Search">\n  <div style="margin-left:6em;display:none" id="blacklist-no-entry">',a="mm_dntme_settings_ignore_no_web",ae=n.intl,i=ae||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===oe?i.call(e,a,{hash:{}}):i===de?le.call(e,"intl",a,{hash:{}}):i,r+=ce(a)+"</div>\n  "}function s(e,t){var a,i,r="";return r+="\n      ",a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"save_account"),i=n["if"],ie=se.program(3,o,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,a=i.call(e,a,ie),(a||0===a)&&(r+=a),r+="\n    "}function o(e,t){var a,i,r="";return r+='<div class="container-',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.domain",{hash:{}})),r+=ce(a)+' blacklist-entry setting-row" data-name="save_account" data-type="blacklist" data-domain="',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.domain",{hash:{}})),r+=ce(a)+'" data-id="',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof a===oe?a=a.call(e,{hash:{}
}):a===de&&(a=le.call(e,"this.id",{hash:{}})),r+=ce(a)+'">\n        <div class="message">',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.domain",{hash:{}})),r+=ce(a)+'</div>\n        <div class="word switch ',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"save_account"),i=n["if"],ie=se.program(4,l,t),ie.hash={},ie.fn=ie,ie.inverse=se.program(6,d,t),a=i.call(e,a,ie),(a||0===a)&&(r+=a),r+='" style="float:right;"\n        >\n          <div class="knob"></div>\n        </div>\n      </div>'}function l(){return"off"}function d(){return"on"}function c(e,t){var a,i,r="";return r+="\n      ",a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"account"),i=n["if"],ie=se.program(9,m,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,a=i.call(e,a,ie),(a||0===a)&&(r+=a),r+="\n    "}function m(e,t){var a,i,r="";return r+='<div class="container-',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.domain",{hash:{}})),r+=ce(a)+' blacklist-entry setting-row" data-name="account" data-type="blacklist" data-domain="',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.domain",{hash:{}})),r+=ce(a)+'" data-id="',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.id",{hash:{}})),r+=ce(a)+'">\n        <div class="message">',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.domain",{hash:{}})),r+=ce(a)+'</div>\n        <div class="word switch ',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"account"),i=n["if"],ie=se.program(10,h,t),ie.hash={},ie.fn=ie,ie.inverse=se.program(12,p,t),a=i.call(e,a,ie),(a||0===a)&&(r+=a),r+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function h(){return"off"}function p(){return"on"}function u(e,t){var a,i,r="";return r+="\n      ",a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"submit_account"),i=n["if"],ie=se.program(15,_,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,a=i.call(e,a,ie),(a||0===a)&&(r+=a),r+="\n    "}function _(e,t){var a,i,r="";return r+='<div class="container-',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.domain",{hash:{}})),r+=ce(a)+' blacklist-entry setting-row" data-name="submit_account" data-type="blacklist" data-domain="',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.domain",{hash:{}})),r+=ce(a)+'" data-id="',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.id",{hash:{}})),r+=ce(a)+'">\n        <div class="message">',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.domain",{hash:{}})),r+=ce(a)+'</div>\n        <div class="word switch ',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"submit_account"),i=n["if"],ie=se.program(16,g,t),ie.hash={},ie.fn=ie,ie.inverse=se.program(18,f,t),a=i.call(e,a,ie),(a||0===a)&&(r+=a),r+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function g(){return"off"}function f(){return"on"}function b(e,t){var a,i,r="";return r+="\n      ",a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"save_card"),i=n["if"],ie=se.program(21,y,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,a=i.call(e,a,ie),(a||0===a)&&(r+=a),r+="\n    "}function y(e,t){var a,i,r="";return r+='<div class="container-',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.domain",{hash:{}})),r+=ce(a)+' blacklist-entry setting-row" data-name="save_card" data-type="blacklist" data-domain="',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.domain",{hash:{}})),r+=ce(a)+'" data-id="',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.id",{hash:{}})),r+=ce(a)+'">\n        <div class="message">',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.domain",{hash:{}})),r+=ce(a)+'</div>\n        <div class="word switch ',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"save_card"),i=n["if"],ie=se.program(22,v,t),ie.hash={},ie.fn=ie,ie.inverse=se.program(24,k,t),a=i.call(e,a,ie),(a||0===a)&&(r+=a),r+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function v(){return"off"}function k(){return"on"}function w(e,t){var a,i,r="";return r+="\n      ",a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"identity"),i=n["if"],ie=se.program(27,E,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,a=i.call(e,a,ie),(a||0===a)&&(r+=a),r+="\n    "}function E(e,t){var a,i,r="";return r+='<div class="container-',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.domain",{hash:{}})),r+=ce(a)+' blacklist-entry setting-row" data-name="identity" data-type="blacklist" data-domain="',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.domain",{hash:{}})),r+=ce(a)+'" data-id="',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.id",{hash:{}})),r+=ce(a)+'">\n        <div class="message">',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.domain",{hash:{}})),r+=ce(a)+'</div>\n        <div class="word switch ',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"identity"),i=n["if"],ie=se.program(28,A,t),ie.hash={},ie.fn=ie,ie.inverse=se.program(30,N,t),a=i.call(e,a,ie),(a||0===a)&&(r+=a),r+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function A(){return"off"}function N(){return"on"}function T(e,t){var a,i,r="";return r+="\n      ",a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"tracker"),i=n["if"],ie=se.program(33,D,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,a=i.call(e,a,ie),(a||0===a)&&(r+=a),r+="\n    "}function D(e,t){var a,i,r="";return r+='<div class="container-',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.domain",{hash:{}})),r+=ce(a)+' blacklist-entry setting-row" data-name="tracker" data-type="blacklist" data-domain="',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.domain",{hash:{}})),r+=ce(a)+'" data-id="',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.id",{hash:{}})),r+=ce(a)+'">\n        <div class="message">',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.domain",{hash:{}})),r+=ce(a)+'</div>\n        <div class="word switch ',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"tracker"),i=n["if"],ie=se.program(34,M,t),ie.hash={},ie.fn=ie,ie.inverse=se.program(36,I,t),a=i.call(e,a,ie),(a||0===a)&&(r+=a),r+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function M(){return"off"}function I(){return"on"}function C(e,t){var a,i,r="";return r+="\n      ",a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"address"),i=n["if"],ie=se.program(39,B,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,a=i.call(e,a,ie),(a||0===a)&&(r+=a),r+="\n    "}function B(e,t){var a,i,r="";return r+='<div class="container-',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.domain",{hash:{}})),r+=ce(a)+' blacklist-entry setting-row" data-name="address" data-type="blacklist" data-domain="',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.domain",{hash:{}})),r+=ce(a)+'" data-id="',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.id",{hash:{}})),r+=ce(a)+'">\n        <div class="message">',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.domain",{hash:{}})),r+=ce(a)+'</div>\n        <div class="word switch ',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"address"),i=n["if"],ie=se.program(40,S,t),ie.hash={},ie.fn=ie,ie.inverse=se.program(42,P,t),a=i.call(e,a,ie),(a||0===a)&&(r+=a),r+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function S(){return"off"}function P(){return"on"}function x(e,t){var a,i,r="";return r+="\n      ",a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"card"),i=n["if"],ie=se.program(45,z,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,a=i.call(e,a,ie),(a||0===a)&&(r+=a),r+="\n    "}function z(e,t){var a,i,r="";return r+='<div class="container-',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.domain",{hash:{}})),r+=ce(a)+' blacklist-entry setting-row" data-name="card" data-type="blacklist" data-domain="',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.domain",{hash:{}})),r+=ce(a)+'" data-id="',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.id",{hash:{}})),r+=ce(a)+'">\n        <div class="message">',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.domain",{hash:{}})),r+=ce(a)+'</div>\n        <div class="word switch ',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"card"),i=n["if"],ie=se.program(46,H,t),ie.hash={},ie.fn=ie,ie.inverse=se.program(48,O,t),a=i.call(e,a,ie),(a||0===a)&&(r+=a),r+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function H(){return"off"}function O(){return"on"}function q(e,t){var a,i,r="";return r+="\n      ",a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),i=n["if"],ie=se.program(51,j,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,a=i.call(e,a,ie),(a||0===a)&&(r+=a),r+="\n    "}function j(e,t){var a,i,r="";return r+='<div class="container-',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.domain",{hash:{}})),r+=ce(a)+' blacklist-entry setting-row" data-name="email" data-type="blacklist" data-domain="',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.domain",{hash:{}})),r+=ce(a)+'" data-id="',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.id",{hash:{}})),r+=ce(a)+'">\n        <div class="message">',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.domain",{hash:{}})),r+=ce(a)+'</div>\n        <div class="word switch ',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),i=n["if"],ie=se.program(52,R,t),ie.hash={},ie.fn=ie,ie.inverse=se.program(54,U,t),a=i.call(e,a,ie),(a||0===a)&&(r+=a),r+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function R(){return"off"}function U(){return"on"}function F(e,t){var a,i,r="";return r+="\n      ",a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"password"),i=n["if"],ie=se.program(57,L,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,a=i.call(e,a,ie),(a||0===a)&&(r+=a),r+="\n    "}function L(e,t){var a,i,r="";return r+='<div class="container-',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.domain",{hash:{}})),r+=ce(a)+' blacklist-entry setting-row" data-name="password" data-type="blacklist" data-domain="',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.domain",{hash:{}})),r+=ce(a)+'" data-id="',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.id",{hash:{}})),r+=ce(a)+'">\n        <div class="message">',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.domain",{hash:{}})),r+=ce(a)+'</div>\n        <div class="word switch ',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"password"),i=n["if"],ie=se.program(58,V,t),ie.hash={},ie.fn=ie,ie.inverse=se.program(60,W,t),a=i.call(e,a,ie),(a||0===a)&&(r+=a),r+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function V(){return"off"}function W(){return"on"}function $(e,t){var a,i,r="";return r+="\n      ",a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"phone"),i=n["if"],ie=se.program(63,G,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,a=i.call(e,a,ie),(a||0===a)&&(r+=a),r+="\n    "}function G(e,t){var a,i,r="";return r+='<div class="container-',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.domain",{hash:{}})),r+=ce(a)+' blacklist-entry setting-row" data-name="phone" data-type="blacklist" data-domain="',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.domain",{hash:{}})),r+=ce(a)+'" data-id="',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.id",{hash:{}})),r+=ce(a)+'">\n        <div class="message">',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.domain",{hash:{}})),r+=ce(a)+'</div>\n        <div class="word switch ',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"phone"),i=n["if"],ie=se.program(64,K,t),ie.hash={},ie.fn=ie,ie.inverse=se.program(66,J,t),a=i.call(e,a,ie),(a||0===a)&&(r+=a),r+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function K(){return"off"}function J(){return"on"}function Z(e,t){var a,i,r="";return r+="\n      ",a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"real_card"),i=n["if"],ie=se.program(69,Y,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,a=i.call(e,a,ie),(a||0===a)&&(r+=a),r+="\n    "}function Y(e,t){var a,i,r="";return r+='<div class="container-',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.domain",{hash:{}})),r+=ce(a)+' blacklist-entry setting-row" data-name="real_card" data-type="blacklist" data-domain="',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.domain",{hash:{}})),r+=ce(a)+'" data-id="',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.id",{hash:{}})),r+=ce(a)+'">\n        <div class="message">',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof a===oe?a=a.call(e,{hash:{}}):a===de&&(a=le.call(e,"this.domain",{hash:{}})),r+=ce(a)+'</div>\n        <div class="word switch ',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"real_card"),i=n["if"],ie=se.program(70,X,t),ie.hash={},ie.fn=ie,ie.inverse=se.program(72,Q,t),a=i.call(e,a,ie),(a||0===a)&&(r+=a),r+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function X(){return"off"}function Q(){return"on"}function ee(e){var t,a,i="";return i+='\n    <div style="margin-left:6em">',t="mm_dntme_settings_ignore_no_web",ae=n.intl,a=ae||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===oe?a.call(e,t,{hash:{}}):a===de?le.call(e,"intl",t,{hash:{}}):a,i+=ce(t)+"</div>\n  "}n=n||e.helpers;var te,ne,ae,ie,re="",se=this,oe="function",le=n.helperMissing,de=void 0,ce=this.escapeExpression;return re+='<div id="ignore-container">\n  <div style="margin-left:2em">',te="mm_dntme_settings_ignore_list_for",ae=n.intl,ne=ae||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),te=typeof ne===oe?ne.call(t,te,{hash:{}}):ne===de?le.call(t,"intl",te,{hash:{}}):ne,re+=ce(te)+': <br/><select id="ignore-dropdown" style="width:90%">\n    <option style=\'text-align:left;\' value="account">',te="mm_dntme_settings_ignore_dd_account_auto",ae=n.intl,ne=ae||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),te=typeof ne===oe?ne.call(t,te,{hash:{}}):ne===de?le.call(t,"intl",te,{hash:{}}):ne,re+=ce(te)+"</option>\n    <option style='text-align:left;' value=\"submit_account\" selected>",te="mm_dntme_settings_ignore_dd_submit_account",ae=n.intl,ne=ae||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),te=typeof ne===oe?ne.call(t,te,{hash:{}}):ne===de?le.call(t,"intl",te,{hash:{}}):ne,re+=ce(te)+"</option>\n    <option style='text-align:left;' value=\"save_account\" selected>",te="mm_dntme_settings_ignore_dd_account_save",ae=n.intl,ne=ae||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),te=typeof ne===oe?ne.call(t,te,{hash:{}}):ne===de?le.call(t,"intl",te,{hash:{}}):ne,re+=ce(te)+"</option>\n    <option style='text-align:left;' value=\"save_card\">",te="mm_dntme_settings_ignore_dd_save_card",ae=n.intl,ne=ae||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),te=typeof ne===oe?ne.call(t,te,{hash:{}}):ne===de?le.call(t,"intl",te,{hash:{}}):ne,re+=ce(te)+"</option>\n    <option style='text-align:left;' value=\"address\">",te="mm_dntme_settings_ignore_dd_address_auto",ae=n.intl,ne=ae||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),te=typeof ne===oe?ne.call(t,te,{hash:{}}):ne===de?le.call(t,"intl",te,{hash:{}}):ne,re+=ce(te)+"</option>\n    <option style='text-align:left;' value=\"real_card\">",te="mm_dntme_settings_ignore_dd_cc_auto",ae=n.intl,ne=ae||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),te=typeof ne===oe?ne.call(t,te,{hash:{}}):ne===de?le.call(t,"intl",te,{hash:{}}):ne,re+=ce(te)+"</option>\n    <option style='text-align:left;' value=\"card\">",te="mm_dntme_settings_ignore_dd_cc_mask",ae=n.intl,ne=ae||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),te=typeof ne===oe?ne.call(t,te,{hash:{}}):ne===de?le.call(t,"intl",te,{hash:{}}):ne,re+=ce(te)+"</option>\n    <option style='text-align:left;' value=\"email\">",te="mm_dntme_settings_ignore_dd_email_mask",ae=n.intl,ne=ae||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),te=typeof ne===oe?ne.call(t,te,{hash:{}}):ne===de?le.call(t,"intl",te,{hash:{}}):ne,re+=ce(te)+"</option>\n    <option style='text-align:left;' value=\"phone\">",te="mm_dntme_settings_ignore_dd_phone_mask",ae=n.intl,ne=ae||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),te=typeof ne===oe?ne.call(t,te,{hash:{}}):ne===de?le.call(t,"intl",te,{hash:{}}):ne,re+=ce(te)+"</option>\n    <option style='text-align:left;' value=\"password\">",te="mm_dntme_settings_ignore_dd_pw",ae=n.intl,ne=ae||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),te=typeof ne===oe?ne.call(t,te,{hash:{}}):ne===de?le.call(t,"intl",te,{hash:{}}):ne,re+=ce(te)+"</option>\n    <option style='text-align:left;' value=\"identity\">",te="mm_dntme_settings_ignore_dd_identity",ae=n.intl,ne=ae||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),te=typeof ne===oe?ne.call(t,te,{hash:{}}):ne===de?le.call(t,"intl",te,{hash:{}}):ne,re+=ce(te)+"</option>\n    <option style='text-align:left;' value=\"tracker\">",te="mm_dntme_settings_ignore_dd_tracker",ae=n.intl,ne=ae||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),te=typeof ne===oe?ne.call(t,te,{hash:{}}):ne===de?le.call(t,"intl",te,{hash:{}}):ne,re+=ce(te)+"</option>\n  </select>\n  </div>\n  </br>\n  ",ae=n.blacklistCollection,te=ae||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklistCollection"),ne=n["if"],ie=se.program(1,r,i),ie.hash={},ie.fn=ie,ie.inverse=se.program(74,ee,i),te=ne.call(t,te,ie),(te||0===te)&&(re+=te),re+="\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_ignore_settings}),ABINE_DNTME.define("abine/views/ignoreSettings",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/views/pageTracker","abine/views/settingsChanged","abine/views/dntmePageBase","abine/timer"],function(e,t,n,a,i,r,s,o,l,d,c){var m=d.extend({templateName:"dntme_dashboard_ignore_settings",events:{"click .setting-row":"toggleSwitch","click .more-settings":"showSettings","click .go-back":"goBack","change #ignore-dropdown":"toggleSection","keyup #blacklist-search":"blacklistSearch","click .clear-blacklist-search":"clearBlacklistSearch"},afterInitialize:function(){if(this.toggleSection(),this.doc=this.el.document,this.options.highlight){var t=this.$("#"+this.options.highlight);t&&t[0]&&(t[0].scrollIntoView(),t.addClass("highlight"))}this.options.timeout&&c.setTimeout(e.bind(function(){this.trigger("close")},this),this.options.timeout)},goBack:function(){this.trigger("change-dashboard","dashboard")},createChildren:function(){return this.children={},this.children},toggleSection:function(){this.$(".ignore-region").hide(),this.$("#bl-"+this.$("#ignore-dropdown").val()+"-region").show();var e=this.$("#bl-"+this.$("#ignore-dropdown").val()+"-region div.blacklist-entry:visible");0==e.length?(this.$("#blacklist-no-entry").show(),this.$("#blacklist-search").hide()):(this.$("#blacklist-no-entry").hide(),this.$("#blacklist-search").show()),this.trigger("resize")},blacklistSearch:function(){var e=this.$("#blacklist-search").val().replace(".","\\.");e=e.replace(/[^a-z0-9\\.\s]/gi,"").replace(/[_\s]/g,""),this.$(".blacklist-entry").hide();var t=this.$(".blacklist-entry[class*="+e+"]");t.length>0||""==e?(t.show(),this.$(".blacklist-empty").hide()):this.$(".blacklist-empty").show(),this.trigger("resize")},clearBlacklistSearch:function(e){return this.$("#blacklist-search").val(""),this.blacklistSearch(),e.preventDefault(),!1}});return m}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_login=e.template(function(e,t,n,a,i){function r(){return"display:none;"}function s(){return"display:none;"}function o(e,t){var a,i,r="";return r+='\n  \n  <div id="form-div">\n\n    <div id="login-section">\n      <div style="clear:both;display:block;width:0px;max-width:0px;height:0px;max-height:0px;overflow:hidden;opacity:0;"\n           class="autofill-grabber"><input type="text" autocomplete="off" id="login_email" tabindex="-1"><input type="password" autocomplete="off" id="login_password" tabindex="-1">\n      </div>\n      <input id="protect-email" class="loginBit" type="text" value="',y=n.email,a=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),typeof a===E?a=a.call(e,{hash:{}}):a===N&&(a=A.call(e,"email",{hash:{}})),r+=T(a)+'" style="width:230px;margin:10px 10px 5px 10px;height:25;',y=n.unlockScreen,a=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"unlockScreen"),i=n["if"],v=w.program(6,l,t),v.hash={},v.fn=v,v.inverse=w.noop,a=i.call(e,a,v),(a||0===a)&&(r+=a),r+='" placeholder="',a="mm_dntme_enter_email_simple",y=n.intl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===E?i.call(e,a,{hash:{}}):i===N?A.call(e,"intl",a,{hash:{}}):i,r+=T(a)+'"/><br/>\n      <input id="password-field" type="password" style="width:230px;margin:5px 10px 10px 10px;height:25;" placeholder="',a="mm_dntme_enter_password_simple",y=n.intl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===E?i.call(e,a,{hash:{}}):i===N?A.call(e,"intl",a,{hash:{}}):i,r+=T(a)+'"/>\n    </div>\n\n    <div id="mfa-section" style="display:none;">\n      <input type="text" id="mfa-code-field" style="width:230px;height:25px;margin:5px 10px 10px 10px" name="mfa_code" placeholder="Authentication Code" />\n    </div>\n    <input type="',y=n.loginNotRegister,a=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"loginNotRegister"),i=n["if"],v=w.program(8,d,t),v.hash={},v.fn=v,v.inverse=w.program(10,c,t),a=i.call(e,a,v),(a||0===a)&&(r+=a),r+='" id="login" class="btn btn-success" value=\'',y=n.unlockScreen,a=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"unlockScreen"),i=n["if"],v=w.program(12,m,t),v.hash={},v.fn=v,v.inverse=w.program(14,h,t),a=i.call(e,a,v),(a||0===a)&&(r+=a),r+="'/>\n    <input type=\"",y=n.loginNotRegister,a=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"loginNotRegister"),i=n.unless,v=w.program(16,p,t),v.hash={},v.fn=v,v.inverse=w.program(18,u,t),a=i.call(e,a,v),(a||0===a)&&(r+=a),r+='" style="',y=n.unlockScreen,a=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"unlockScreen"),i=n["if"],v=w.program(20,_,t),v.hash={},v.fn=v,v.inverse=w.noop,a=i.call(e,a,v),(a||0===a)&&(r+=a),r+='" id="register" class="loginBit btn btn-primary" value=\'',a="mm_dntme_create_account",y=n.intl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===E?i.call(e,a,{hash:{}}):i===N?A.call(e,"intl",a,{hash:{}}):i,r+=T(a)+'\'/>\n    <input type="button" style="',y=n.unlockScreen,a=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"unlockScreen"),i=n.unless,v=w.program(22,g,t),v.hash={},v.fn=v,v.inverse=w.noop,a=i.call(e,a,v),(a||0===a)&&(r+=a),r+='" id="switchLogin" class="btn btn-primary lockBit" value=\'',a="mm_dntme_use_another_account",y=n.intl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===E?i.call(e,a,{hash:{}}):i===N?A.call(e,"intl",a,{hash:{}}):i,r+=T(a)+'\'/>\n    <br/>\n  </div>\n  <a href="" id="forgotPassword">',a="mm_dntme_forgot_my_password",y=n.intl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===E?i.call(e,a,{hash:{}}):i===N?A.call(e,"intl",a,{hash:{}}):i,r+=T(a)+"</a><br/>\n  "}function l(){return"display:none;"}function d(){return"submit"}function c(){return"button"}function m(e){var t,a;return t="mm_dntme_unlock",y=n.intl,a=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===E?a.call(e,t,{hash:{}}):a===N?A.call(e,"intl",t,{hash:{}}):a,T(t)}function h(e){var t,a;return t="mm_dntme_sign_in",y=n.intl,a=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===E?a.call(e,t,{hash:{}}):a===N?A.call(e,"intl",t,{hash:{}}):a,T(t)}function p(){return"submit"}function u(){return"button"}function _(){return"display:none;"}function g(){return"display:none;"}n=n||e.helpers;var f,b,y,v,k="",w=this,E="function",A=n.helperMissing,N=void 0,T=this.escapeExpression,D=n.blockHelperMissing;return k+='<div class="login_overlay"></div>\n\n<div class="login_form">\n\n  <div id="welcome-message">\n\n    <span class="lockBit" style="',y=n.unlockScreen,f=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"unlockScreen"),b=n.unless,v=w.program(1,r,i),v.hash={},v.fn=v,v.inverse=w.noop,f=b.call(t,f,v),(f||0===f)&&(k+=f),k+='">',f="mm_dntme_unlock_your",y=n.intl,b=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),f=typeof b===E?b.call(t,f,{hash:{}}):b===N?A.call(t,"intl",f,{hash:{}}):b,k+=T(f)+'</span>\n    <span class="loginBit" style="',y=n.unlockScreen,f=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"unlockScreen"),b=n["if"],v=w.program(3,s,i),v.hash={},v.fn=v,v.inverse=w.noop,f=b.call(t,f,v),(f||0===f)&&(k+=f),k+='">',f="mm_dntme_sign_in_to_your",y=n.intl,b=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),f=typeof b===E?b.call(t,f,{hash:{}}):b===N?A.call(t,"intl",f,{hash:{}}):b,k+=T(f)+'</span>\n    <img class="logo" height="16px" width="17px" src="',f="/pages/images/dnt-ui-header-logo.png",y=n.assetUrl,b=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),f=typeof b===E?b.call(t,f,{hash:{}}):b===N?A.call(t,"assetUrl",f,{hash:{}}):b,k+=T(f)+'"/>\n    <span class="boldFont">Blur</span>\n    ',f="mm_dntme_sign_in_to_your_account",y=n.intl,b=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),f=typeof b===E?b.call(t,f,{hash:{}}):b===N?A.call(t,"intl",f,{hash:{}}):b,k+=T(f)+'\n  </div>\n  \n  <div id="error" style="display:none;color:white;text-transform:none;"></div>\n  \n  <div id="progress-section" style="display:none;margin-top:10px;">\n    <div class="progress progress-striped active">\n      <div class="bar bar-info" style="width: 100%;"></div>\n    </div>\n    <div class="loading-message" style="text-transform:none;"></div>\n  </div>\n  \n  ',f="frm",y=n.form,b=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"form"),v=w.program(5,o,i),v.hash={},v.fn=v,v.inverse=w.noop,f=y&&typeof b===E?b.call(t,f,v):D.call(t,b,f,v),(f||0===f)&&(k+=f),k+="\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_login}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_login_help=e.template(function(e,t,n){n=n||e.helpers;var a,i,r,s="",o="function",l=n.helperMissing,d=void 0,c=this.escapeExpression;return s+='<div class="settings-header clearfix">\n  <div class="go-back"><img src="',a="/pages/images/back.png",r=n.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"assetUrl",a,{hash:{}}):i,s+=c(a)+'" width="18px;"/> ',a="mm_dntme_back",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+'</div>\n  <div class="title"><img class="logo" height="24px" width="24px" src="',a="/pages/images/Icon-48.png",r=n.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"assetUrl",a,{hash:{}}):i,s+=c(a)+'"/>\n    <span class="boldFont">Blur</span></div>\n</div>\n<div class="login_help">\n  <h3>',a="mm_dntme_dashboard_login_help_title1",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+"</h3>\n  <p>",a="mm_dntme_dashboard_login_help_body11",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+"</p>\n  <h3>",a="mm_dntme_dashboard_login_help_title2",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+"</h3>\n  <p>",a="mm_dntme_dashboard_login_help_body21",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+"</p>\n  <p>",a="mm_dntme_dashboard_login_help_body22",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+"</p>\n  <p>",a="mm_dntme_dashboard_login_help_body23",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+"</p>\n  <h3>",a="mm_dntme_dashboard_login_help_title3",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+"</h3>\n  <p>",a="mm_dntme_dashboard_login_help_body31",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+"</p>\n  <p>",a="mm_dntme_dashboard_login_help_body32",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+"</p>\n  <p>",a="mm_dntme_dashboard_login_help_body33",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+"</p>\n  <h3>",a="mm_dntme_dashboard_login_help_title4",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+"</h3>\n  <p>",a="mm_dntme_dashboard_login_help_body41",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+"</p>\n  <p>",a="mm_dntme_dashboard_login_help_body42",r=n.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"intl",a,{hash:{}}):i,s+=c(a)+"</p>\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_login_help}),ABINE_DNTME.define("abine/views/loginHelp",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/views/pageTracker","abine/views/settingsChanged","abine/views/dntmePageBase"],function(e,t,n,a,i,r,s,o,l,d){var c=d.extend({templateName:"dntme_dashboard_login_help",events:{"click .go-back":"goBack"},afterInitialize:function(){this.doc=this.el.document},goBack:function(){this.trigger("change-dashboard","dashboard")}});return c}),ABINE_DNTME.require(["wycats/handlebars"],function(e){
return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_main=e.template(function(e,t,n,a,i){function r(){return"disabled"}function s(e,t){var a,i,r="";return r+=" ",E=n.trackers,a=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),a=null===a||void 0===a||a===!1?a:ABINE_DNTME.Duckbone.Handlebars.getAttr(a,"length"),i=n.unless,A=T.program(4,o,t),A.hash={},A.fn=A,A.inverse=T.noop,a=i.call(e,a,A),(a||0===a)&&(r+=a),r}function o(){return"no-trackers"}function l(e){var t,a,i="";return i+='<a href="" class="show-details" data-dashboard="tracking">',t="mm_dntme_dashboard_show_details",E=n.intl,a=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===D?a.call(e,t,{hash:{}}):a===I?M.call(e,"intl",t,{hash:{}}):a,i+=C(t)+"</a>"}function d(){return'\n      <div id="inline-site-settings"></div>\n  '}function c(){return'\n      <div id="inline-site-settings" style="display: none;"></div>\n  '}function m(e,t){var a,i,r="";return r+='\n    <div class="mobileCell cell l b" data-dashboard="anywhere" style="font-size:10pt;text-align:center;',E=n.showSettings,a=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"showSettings"),i=n["if"],A=T.program(13,h,t),A.hash={},A.fn=A,A.inverse=T.noop,a=i.call(e,a,A),(a||0===a)&&(r+=a),r+='">\n      ',E=n.hasMobileApp,a=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"hasMobileApp"),i=n["if"],A=T.program(15,p,t),A.hash={},A.fn=A,A.inverse=T.program(17,u,t),a=i.call(e,a,A),(a||0===a)&&(r+=a),r+='\n    </div>\n    <div class="syncCell cell b" data-dashboard="dropbox" style="font-size:10pt;text-align:center;',E=n.showSettings,a=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"showSettings"),i=n["if"],A=T.program(19,_,t),A.hash={},A.fn=A,A.inverse=T.noop,a=i.call(e,a,A),(a||0===a)&&(r+=a),r+='">\n      ',E=n.entitledToSync,a=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"entitledToSync"),i=n["if"],A=T.program(21,g,t),A.hash={},A.fn=A,A.inverse=T.program(26,y,t),a=i.call(e,a,A),(a||0===a)&&(r+=a),r+="\n    </div>\n  "}function h(){return"display:none;"}function p(e){var t,a,i="";return i+="\n        ",t="mm_dntme_dashboard_has_mobile_app_1",E=n.intl,a=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===D?a.call(e,t,{hash:{}}):a===I?M.call(e,"intl",t,{hash:{}}):a,i+=C(t)+'<br/><span class="green">',t="mm_dntme_dashboard_has_mobile_app_2",E=n.intl,a=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===D?a.call(e,t,{hash:{}}):a===I?M.call(e,"intl",t,{hash:{}}):a,i+=C(t)+'</span>\n        <div class="btn disabled" style="height:9px;line-height:0.5;">',t="mm_dntme_dashboard_done",E=n.intl,a=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===D?a.call(e,t,{hash:{}}):a===I?M.call(e,"intl",t,{hash:{}}):a,i+=C(t)+"</div>\n      "}function u(e){var t,a,i="";return i+="\n        ",t="mm_dntme_dashboard_no_mobile_app_1",E=n.intl,a=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===D?a.call(e,t,{hash:{}}):a===I?M.call(e,"intl",t,{hash:{}}):a,i+=C(t)+'<br/><span class="red">',t="mm_dntme_dashboard_no_mobile_app_2",E=n.intl,a=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===D?a.call(e,t,{hash:{}}):a===I?M.call(e,"intl",t,{hash:{}}):a,i+=C(t)+"</span> ",t="mm_dntme_dashboard_no_mobile_app_3",E=n.intl,a=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===D?a.call(e,t,{hash:{}}):a===I?M.call(e,"intl",t,{hash:{}}):a,i+=C(t)+'<br/>\n        <div style="float:left;margin-left:15px;margin-right:-20px;color:red;font-size:18pt;"><strong>!</strong></div><div class="btn btn-danger" style="height:9px;line-height:0.5;">',t="mm_dntme_dashboard_get_app",E=n.intl,a=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===D?a.call(e,t,{hash:{}}):a===I?M.call(e,"intl",t,{hash:{}}):a,i+=C(t)+"</div>\n      "}function _(){return"display:none;"}function g(e,t){var a,i,r="";return r+="\n          ",E=n.dropboxEnabled,a=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"dropboxEnabled"),i=n["if"],A=T.program(22,f,t),A.hash={},A.fn=A,A.inverse=T.program(24,b,t),a=i.call(e,a,A),(a||0===a)&&(r+=a),r+="\n      "}function f(e){var t,a,i="";return i+="\n            ",t="mm_dntme_dashboard_has_dropbox_1",E=n.intl,a=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===D?a.call(e,t,{hash:{}}):a===I?M.call(e,"intl",t,{hash:{}}):a,i+=C(t)+'<br/><span class="green">',t="mm_dntme_dashboard_has_dropbox_2",E=n.intl,a=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===D?a.call(e,t,{hash:{}}):a===I?M.call(e,"intl",t,{hash:{}}):a,i+=C(t)+'</span>\n            <div class="btn disabled" style="height:9px;line-height:0.5;">',t="mm_dntme_dashboard_done",E=n.intl,a=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===D?a.call(e,t,{hash:{}}):a===I?M.call(e,"intl",t,{hash:{}}):a,i+=C(t)+"</div>\n          "}function b(e){var t,a,i="";return i+="\n            ",t="mm_dntme_dashboard_no_dropbox_1",E=n.intl,a=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===D?a.call(e,t,{hash:{}}):a===I?M.call(e,"intl",t,{hash:{}}):a,i+=C(t)+'<br/><span class="red">',t="mm_dntme_dashboard_no_dropbox_2",E=n.intl,a=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===D?a.call(e,t,{hash:{}}):a===I?M.call(e,"intl",t,{hash:{}}):a,i+=C(t)+"</span> ",t="mm_dntme_dashboard_no_dropbox_3",E=n.intl,a=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===D?a.call(e,t,{hash:{}}):a===I?M.call(e,"intl",t,{hash:{}}):a,i+=C(t)+'<br/>\n            <div style="float:left;margin-left:15px;margin-right:-20px;color:red;font-size:18pt;"><strong>!</strong></div><div class="btn btn-danger" style="height:9px;line-height:0.5;">',t="mm_dntme_dashboard_setup_sync",E=n.intl,a=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===D?a.call(e,t,{hash:{}}):a===I?M.call(e,"intl",t,{hash:{}}):a,i+=C(t)+"</div>\n          "}function y(e){var t,a,i="";return i+="\n        ",t="mm_dntme_dashboard_no_sync_1",E=n.intl,a=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===D?a.call(e,t,{hash:{}}):a===I?M.call(e,"intl",t,{hash:{}}):a,i+=C(t)+'<br/><span class="red">',t="mm_dntme_dashboard_no_sync_2",E=n.intl,a=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===D?a.call(e,t,{hash:{}}):a===I?M.call(e,"intl",t,{hash:{}}):a,i+=C(t)+'</span><br/>\n        <div style="float:left;margin-left:15px;margin-right:-20px;color:red;font-size:18pt;"><strong>!</strong></div><div class="btn btn-danger" style="height:9px;line-height:0.5;">',t="mm_dntme_dashboard_premium",E=n.intl,a=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===D?a.call(e,t,{hash:{}}):a===I?M.call(e,"intl",t,{hash:{}}):a,i+=C(t)+"</div>\n      "}function v(e){var t,a,i="";return i+="\n    ",t="loginSection",E=n.child,a=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),t=typeof a===D?a.call(e,t,{hash:{}}):a===I?M.call(e,"child",t,{hash:{}}):a,i+=C(t)+"\n  "}n=n||e.helpers;var k,w,E,A,N="",T=this,D="function",M=n.helperMissing,I=void 0,C=this.escapeExpression;return N+='<div class="dashboard_title">\n  <div class="section off others clearfix">\n    <div class="section-header clearfix ',E=n.disabled,k=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"disabled"),w=n["if"],A=T.program(1,r,i),A.hash={},A.fn=A,A.inverse=T.program(3,s,i),k=w.call(t,k,A),(k||0===k)&&(N+=k),N+='">\n      ',k="trackersTitle",E=n.child,w=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),k=typeof w===D?w.call(t,k,{hash:{}}):w===I?M.call(t,"child",k,{hash:{}}):w,N+=C(k)+"\n    </div>\n  </div>\n  ",E=n.loggedIn,k=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"loggedIn"),w=n.unless,A=T.program(6,l,i),A.hash={},A.fn=A,A.inverse=T.noop,k=w.call(t,k,A),(k||0===k)&&(N+=k),N+='\n</div>\n<div class="grid clearfix">\n  ',k="mainGrid",E=n.child,w=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),k=typeof w===D?w.call(t,k,{hash:{}}):w===I?M.call(t,"child",k,{hash:{}}):w,N+=C(k)+"\n  ",E=n.showSettings,k=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"showSettings"),w=n["if"],A=T.program(8,d,i),A.hash={},A.fn=A,A.inverse=T.program(10,c,i),k=w.call(t,k,A),(k||0===k)&&(N+=k),N+="\n  ",E=n.hasMobileAppAndDropboxEnabled,k=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasMobileAppAndDropboxEnabled"),w=n.unless,A=T.program(12,m,i),A.hash={},A.fn=A,A.inverse=T.noop,k=w.call(t,k,A),(k||0===k)&&(N+=k),N+="\n  ",E=n.loggedIn,k=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"loggedIn"),w=n.unless,A=T.program(28,v,i),A.hash={},A.fn=A,A.inverse=T.noop,k=w.call(t,k,A),(k||0===k)&&(N+=k),N+="\n</div>\n"}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_main}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_main_grid=e.template(function(e,t,n,a,i){function r(){return"off"}function s(){return"on"}function o(){return"off"}function l(){return"on"}function d(){return"b"}function c(){return"off"}function m(){return"on"}function h(){return"b"}function p(){return"off"}function u(){return"on"}n=n||e.helpers;var _,g,f,b,y,v,k="",w=this,E="function",A=n.helperMissing,N=void 0,T=this.escapeExpression,D=n.blockHelperMissing;return k+='<div class="cell l" data-dashboard="accounts">\n  <img style="margin-top:-10px" src="',_="pages/images/accounts.png",y=n.assetUrl,g=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),_=typeof g===E?g.call(t,_,{hash:{}}):g===N?A.call(t,"assetUrl",_,{hash:{}}):g,k+=T(_)+'" /><span class="title">',_="mm_dntme_dashboard_accounts",y=n.intl,g=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),_=typeof g===E?g.call(t,_,{hash:{}}):g===N?A.call(t,"intl",_,{hash:{}}):g,k+=T(_)+'</span>\n  <div style="position:absolute;top:18px;left:110px;" id="accountSwitch" data-group="acctGroup" class="word switch ',y=n.blacklist,_=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),_=null===_||void 0===_||_===!1?_:ABINE_DNTME.Duckbone.Handlebars.getAttr(_,"passwordOff"),y=n.blacklist,g=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),g=null===g||void 0===g||g===!1?g:ABINE_DNTME.Duckbone.Handlebars.getAttr(g,"loginOff"),y=n.blacklist,f=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),f=null===f||void 0===f||f===!1?f:ABINE_DNTME.Duckbone.Handlebars.getAttr(f,"accountOff"),y=n.if_all,b=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"if_all"),v=w.program(1,r,i),v.hash={},v.fn=v,v.inverse=w.program(3,s,i),_=y&&typeof b===E?b.call(t,f,g,_,v):D.call(t,b,f,g,_,v),(_||0===_)&&(k+=_),k+='">\n    <div class="knob"></div>\n  </div>\n</div>\n<div class="cell" data-dashboard="wallet">\n  <img style="margin-top:-10px" src="',_="pages/images/wallet.png",y=n.assetUrl,g=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),_=typeof g===E?g.call(t,_,{hash:{}}):g===N?A.call(t,"assetUrl",_,{hash:{}}):g,k+=T(_)+'" /><span class="title">',_="mm_dntme_dashboard_wallet",y=n.intl,g=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),_=typeof g===E?g.call(t,_,{hash:{}}):g===N?A.call(t,"intl",_,{hash:{}}):g,k+=T(_)+'</span>\n  <div style="position:absolute;top:18px;right:5px;" id="walletSwitch" data-group="walletGroup" class="word switch ',y=n.blacklist,_=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),_=null===_||void 0===_||_===!1?_:ABINE_DNTME.Duckbone.Handlebars.getAttr(_,"addressOff"),y=n.blacklist,g=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),g=null===g||void 0===g||g===!1?g:ABINE_DNTME.Duckbone.Handlebars.getAttr(g,"cardOff"),y=n.blacklist,f=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),f=null===f||void 0===f||f===!1?f:ABINE_DNTME.Duckbone.Handlebars.getAttr(f,"realCardOff"),y=n.if_all,b=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"if_all"),v=w.program(5,o,i),v.hash={},v.fn=v,v.inverse=w.program(7,l,i),_=y&&typeof b===E?b.call(t,f,g,_,v):D.call(t,b,f,g,_,v),(_||0===_)&&(k+=_),k+='">\n    <div class="knob"></div>\n  </div>\n</div>\n<div class="maskingCell cell l ',y=n.hasMobileAppAndDropboxEnabled,_=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasMobileAppAndDropboxEnabled"),g=n["if"],v=w.program(9,d,i),v.hash={},v.fn=v,v.inverse=w.noop,_=g.call(t,_,v),(_||0===_)&&(k+=_),k+='" data-dashboard="masking">\n  <img style="margin-top:-10px" src="',_="pages/images/masking.png",y=n.assetUrl,g=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),_=typeof g===E?g.call(t,_,{hash:{}}):g===N?A.call(t,"assetUrl",_,{hash:{}}):g,k+=T(_)+'" /><span class="title">',_="mm_dntme_dashboard_masking",y=n.intl,g=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),_=typeof g===E?g.call(t,_,{hash:{}}):g===N?A.call(t,"intl",_,{hash:{}}):g,k+=T(_)+'</span>\n  <div style="position:absolute;top:70px;left:110px;" id="maskingSwitch" data-group="maskingGroup" class="word switch ',y=n.blacklist,_=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),_=null===_||void 0===_||_===!1?_:ABINE_DNTME.Duckbone.Handlebars.getAttr(_,"cardOff"),y=n.blacklist,g=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),g=null===g||void 0===g||g===!1?g:ABINE_DNTME.Duckbone.Handlebars.getAttr(g,"phoneOff"),y=n.blacklist,f=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),f=null===f||void 0===f||f===!1?f:ABINE_DNTME.Duckbone.Handlebars.getAttr(f,"emailOff"),y=n.if_all,b=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"if_all"),v=w.program(11,c,i),v.hash={},v.fn=v,v.inverse=w.program(13,m,i),_=y&&typeof b===E?b.call(t,f,g,_,v):D.call(t,b,f,g,_,v),(_||0===_)&&(k+=_),k+='">\n    <div class="knob"></div>\n  </div>\n</div>\n<div class="trackingCell cell ',y=n.hasMobileAppAndDropboxEnabled,_=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasMobileAppAndDropboxEnabled"),g=n["if"],v=w.program(15,h,i),v.hash={},v.fn=v,v.inverse=w.noop,_=g.call(t,_,v),(_||0===_)&&(k+=_),k+='" data-dashboard="tracking">\n  <img style="margin-top:-10px" src="',_="pages/images/tracking.png",y=n.assetUrl,g=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),_=typeof g===E?g.call(t,_,{hash:{}}):g===N?A.call(t,"assetUrl",_,{hash:{}}):g,k+=T(_)+'" /><span class="title">',_="mm_dntme_dashboard_tracking",y=n.intl,g=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),_=typeof g===E?g.call(t,_,{hash:{}}):g===N?A.call(t,"intl",_,{hash:{}}):g,k+=T(_)+'</span>\n  <div style="position:absolute;top:70px;right:5px;" id="trackingSwitch" data-group="trackingGroup" class="word switch ',y=n.blacklist,_=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),_=null===_||void 0===_||_===!1?_:ABINE_DNTME.Duckbone.Handlebars.getAttr(_,"trackerOff"),y=n.if_all,g=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"if_all"),v=w.program(17,p,i),v.hash={},v.fn=v,v.inverse=w.program(19,u,i),_=y&&typeof g===E?g.call(t,_,v):D.call(t,g,_,v),(_||0===_)&&(k+=_),k+='">\n    <div class="knob"></div>\n  </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_main_grid}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_masking=e.template(function(e,t,n,a,i){function r(){return"off"}function s(e){var t,a,i="";return i+='"',t="mm_dntme_help_what_will_happen_on_card",E=n.intl,a=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===D?a.call(e,t,{hash:{}}):a===I?M.call(e,"intl",t,{hash:{}}):a,i+=C(t)+'"'}function o(e){var t,a,i="";return i+='"',t="mm_dntme_help_what_will_happen_off_card",E=n.intl,a=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===D?a.call(e,t,{hash:{}}):a===I?M.call(e,"intl",t,{hash:{}}):a,i+=C(t)+'"'}function l(){return"off"}function d(){return"on"}function c(){return"off"}function m(e){var t,a,i="";return i+='"',t="mm_dntme_help_what_will_happen_on_email",E=n.intl,a=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===D?a.call(e,t,{hash:{}}):a===I?M.call(e,"intl",t,{hash:{}}):a,i+=C(t)+'"'}function h(e){var t,a,i="";return i+='"',t="mm_dntme_help_what_will_happen_off_email",E=n.intl,a=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===D?a.call(e,t,{hash:{}}):a===I?M.call(e,"intl",t,{hash:{}}):a,i+=C(t)+'"'}function p(){return"off"}function u(){return"on"}function _(){return"off"}function g(){return"off"}function f(e){var t,a,i="";return i+='"',t="mm_dntme_help_what_will_happen_on_phone",E=n.intl,a=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===D?a.call(e,t,{hash:{}}):a===I?M.call(e,"intl",t,{hash:{}}):a,i+=C(t)+'"'}function b(e){var t,a,i="";return i+='"',t="mm_dntme_help_what_will_happen_off_phone",E=n.intl,a=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===D?a.call(e,t,{hash:{}}):a===I?M.call(e,"intl",t,{hash:{}}):a,i+=C(t)+'"'}function y(){return"off"}function v(){return"on"}n=n||e.helpers;var k,w,E,A,N="",T=this,D="function",M=n.helperMissing,I=void 0,C=this.escapeExpression;return N+='<div id="card" class="clearfix setting-row ',E=n.blacklist,k=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),k=null===k||void 0===k||k===!1?k:ABINE_DNTME.Duckbone.Handlebars.getAttr(k,"cardOff"),w=n["if"],A=T.program(1,r,i),A.hash={},A.fn=A,A.inverse=T.noop,k=w.call(t,k,A),(k||0===k)&&(N+=k),N+='" data-type="blacklist" data-name="card">\n  <div class="message" style="width:160px;" title=',E=n.blacklist,k=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),k=null===k||void 0===k||k===!1?k:ABINE_DNTME.Duckbone.Handlebars.getAttr(k,"cardOff"),w=n["if"],A=T.program(3,s,i),A.hash={},A.fn=A,A.inverse=T.program(5,o,i),k=w.call(t,k,A),(k||0===k)&&(N+=k),N+=">",k="mm_dntme_masking_card",E=n.intl,w=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),k=typeof w===D?w.call(t,k,{hash:{}}):w===I?M.call(t,"intl",k,{hash:{}}):w,N+=C(k)+'</div>\n  <div class="word switch ',E=n.blacklist,k=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),k=null===k||void 0===k||k===!1?k:ABINE_DNTME.Duckbone.Handlebars.getAttr(k,"cardOff"),w=n["if"],A=T.program(7,l,i),A.hash={},A.fn=A,A.inverse=T.program(9,d,i),k=w.call(t,k,A),(k||0===k)&&(N+=k),N+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',k="mm_dntme_for_this_site",E=n.intl,w=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),k=typeof w===D?w.call(t,k,{hash:{}}):w===I?M.call(t,"intl",k,{hash:{}}):w,N+=C(k)+'</div>\n</div>\n\n<div id="email" class="clearfix setting-row ',E=n.blacklist,k=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),k=null===k||void 0===k||k===!1?k:ABINE_DNTME.Duckbone.Handlebars.getAttr(k,"emailOff"),w=n["if"],A=T.program(11,c,i),A.hash={},A.fn=A,A.inverse=T.noop,k=w.call(t,k,A),(k||0===k)&&(N+=k),N+='" data-type="blacklist" data-name="email">\n  <div class="message" style="width:160px;" title=',E=n.blacklist,k=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),k=null===k||void 0===k||k===!1?k:ABINE_DNTME.Duckbone.Handlebars.getAttr(k,"emailOff"),w=n["if"],A=T.program(13,m,i),A.hash={},A.fn=A,A.inverse=T.program(15,h,i),k=w.call(t,k,A),(k||0===k)&&(N+=k),N+=">",k="mm_dntme_masking_email",E=n.intl,w=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),k=typeof w===D?w.call(t,k,{hash:{}}):w===I?M.call(t,"intl",k,{hash:{}}):w,N+=C(k)+'</div>\n  <div class="word switch ',E=n.blacklist,k=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),k=null===k||void 0===k||k===!1?k:ABINE_DNTME.Duckbone.Handlebars.getAttr(k,"emailOff"),w=n["if"],A=T.program(17,p,i),A.hash={},A.fn=A,A.inverse=T.program(19,u,i),k=w.call(t,k,A),(k||0===k)&&(N+=k),N+=" ",E=n.blacklist,k=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),k=null===k||void 0===k||k===!1?k:ABINE_DNTME.Duckbone.Handlebars.getAttr(k,"globalEmail"),w=n.unless,A=T.program(21,_,i),A.hash={},A.fn=A,A.inverse=T.noop,k=w.call(t,k,A),(k||0===k)&&(N+=k),N+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',k="mm_dntme_for_this_site",E=n.intl,w=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),k=typeof w===D?w.call(t,k,{hash:{}}):w===I?M.call(t,"intl",k,{hash:{}}):w,N+=C(k)+'</div>\n</div>\n\n<div id="phone" class="clearfix setting-row ',E=n.blacklist,k=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),k=null===k||void 0===k||k===!1?k:ABINE_DNTME.Duckbone.Handlebars.getAttr(k,"phoneOff"),w=n["if"],A=T.program(23,g,i),A.hash={},A.fn=A,A.inverse=T.noop,k=w.call(t,k,A),(k||0===k)&&(N+=k),N+='" data-type="blacklist" data-name="phone">\n  <div class="message" style="width:160px;" title=',E=n.blacklist,k=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),k=null===k||void 0===k||k===!1?k:ABINE_DNTME.Duckbone.Handlebars.getAttr(k,"phoneOff"),w=n["if"],A=T.program(25,f,i),A.hash={},A.fn=A,A.inverse=T.program(27,b,i),k=w.call(t,k,A),(k||0===k)&&(N+=k),N+=">",k="mm_dntme_masking_phone",E=n.intl,w=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),k=typeof w===D?w.call(t,k,{hash:{}}):w===I?M.call(t,"intl",k,{hash:{}}):w,N+=C(k)+'</div>\n  <div class="word switch ',E=n.blacklist,k=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),k=null===k||void 0===k||k===!1?k:ABINE_DNTME.Duckbone.Handlebars.getAttr(k,"phoneOff"),w=n["if"],A=T.program(29,y,i),A.hash={},A.fn=A,A.inverse=T.program(31,v,i),k=w.call(t,k,A),(k||0===k)&&(N+=k),N+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',k="mm_dntme_for_this_site",E=n.intl,w=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),k=typeof w===D?w.call(t,k,{hash:{}}):w===I?M.call(t,"intl",k,{hash:{}}):w,N+=C(k)+"</div>\n</div>\n\n"}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_masking}),ABINE_DNTME.define("abine/views/maskingDashboard",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/views/pageTracker","abine/views/settingsChanged","abine/views/dntmePageBase","abine/timer"],function(e,t,n,a,i,r,s,o,l,d,c){var m=d.extend({templateName:"dntme_dashboard_masking",events:{"click .setting-row":"toggleSwitch","click .more-settings":"showSettings","click .go-back":"goBack","click a.maskingDashboard":"maskingDashboard"},afterInitialize:function(){if(this.doc=this.el.document,this.options.highlight){var t=this.$("#"+this.options.highlight);t&&t[0]&&(t[0].scrollIntoView(),t.addClass("highlight"))}this.options.timeout&&c.setTimeout(e.bind(function(){this.trigger("close")},this),this.options.timeout)},goBack:function(){this.trigger("change-dashboard","dashboard")},maskingDashboard:function(e){e.preventDefault(),s.webapp.openMasking(),this.trigger("close")},createChildren:function(){return this.children={},this.children}});return m}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_settings=e.template(function(e,t,n,a,i){function r(e,t){var a,i,r="";return r+=" <!-- hacky way to prevent render until model is fetched... duckbone lifecycle... -->\n\n<!-- HEADER BARS -->\n",b=n.inline,a=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"inline"),i=n.unless,y=v.program(2,s,t),y.hash={},y.fn=y,y.inverse=v.noop,a=i.call(e,a,y),(a||0===a)&&(r+=a),r+='\n\n<!-- SITE SPECIFIC SETTINGS PAGE -->\n<div id="site-settings-page" class="site-specific">\n  ',a="trackingSettings",b=n.child,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),a=typeof i===k?i.call(e,a,{hash:{}}):i===E?w.call(e,"child",a,{hash:{}}):i,r+=A(a)+"\n  ",b=n.showSiteTrackers,a=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"showSiteTrackers"),i=n["if"],y=v.program(11,m,t),y.hash={},y.fn=y,y.inverse=v.noop,a=i.call(e,a,y),(a||0===a)&&(r+=a),r+="\n  ",a="accountSettings",b=n.child,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),a=typeof i===k?i.call(e,a,{hash:{}}):i===E?w.call(e,"child",a,{hash:{}}):i,r+=A(a)+"\n  ",a="walletSettings",b=n.child,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),a=typeof i===k?i.call(e,a,{hash:{}}):i===E?w.call(e,"child",a,{hash:{}}):i,r+=A(a)+"\n  ",a="maskingSettings",b=n.child,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),a=typeof i===k?i.call(e,a,{hash:{}}):i===E?w.call(e,"child",a,{hash:{}}):i,r+=A(a)+"\n",b=n.inline,a=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"inline"),i=n.unless,y=v.program(13,h,t),y.hash={},y.fn=y,y.inverse=v.noop,a=i.call(e,a,y),(a||0===a)&&(r+=a),r+="\n</div>\n\n",b=n.inline,a=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"inline"),i=n.unless,y=v.program(16,u,t),y.hash={},y.fn=y,y.inverse=v.noop,a=i.call(e,a,y),(a||0===a)&&(r+=a),r+="\n\n"}function s(e,t){var a,i,r="";return r+='\n<div class="settings-header clearfix site-specific">\n    <div id="go-back-to-dashboard-btn" style="position:absolute;top:1px;left:10px;" class="go-back"><img src="',a="/pages/images/back.png",b=n.assetUrl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),a=typeof i===k?i.call(e,a,{hash:{}}):i===E?w.call(e,"assetUrl",a,{hash:{}}):i,r+=A(a)+'" width="18px;"/> ',a="mm_dntme_back",b=n.intl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===k?i.call(e,a,{hash:{}}):i===E?w.call(e,"intl",a,{hash:{}}):i,r+=A(a)+'</div>\n    <div class="title" title="',b=n.host,a=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof a===k?a=a.call(e,{hash:{}}):a===E&&(a=w.call(e,"host",{hash:{}})),r+=A(a)+'" style="position:absolute;height:80px;top:5px;right:30px;width:180px;">\n      <span style="display:block;font-size:16px;font-weight:lighter;">',a="mm_dntme_settings_for",b=n.intl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===k?i.call(e,a,{hash:{}}):i===E?w.call(e,"intl",a,{hash:{}}):i,r+=A(a)+'</span>\n      <span class="boldFont" style="font-size:20px;">',b=n.host,a=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof a===k?a=a.call(e,{hash:{}}):a===E&&(a=w.call(e,"host",{hash:{}})),r+=A(a)+'</span>\n    </div>\n</div>\n<div class="settings-header clearfix global-settings" style="display: none;">\n  <div id="go-back-to-site-settings-btn" class="go-back"><img src="',a="/pages/images/back.png",b=n.assetUrl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),a=typeof i===k?i.call(e,a,{hash:{}}):i===E?w.call(e,"assetUrl",a,{hash:{}}):i,r+=A(a)+'" width="18px;"/> ',a="mm_dntme_back",b=n.intl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===k?i.call(e,a,{hash:{}}):i===E?w.call(e,"intl",a,{hash:{}}):i,r+=A(a)+'</div>\n  <div class="version">\n        ',b=n.new_version,a=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"new_version"),i=n["if"],y=v.program(3,o,t),y.hash={},y.fn=y,y.inverse=v.program(5,l,t),a=i.call(e,a,y),(a||0===a)&&(r+=a),r+='\n  </div>\n</div>\n<div class="ignore-settings settings-header clearfix" style="display:none">\n  <div id="ig-go-back-to-site-settings-btn" class="go-back"><img src="',a="/pages/images/back.png",b=n.assetUrl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),a=typeof i===k?i.call(e,a,{hash:{}}):i===E?w.call(e,"assetUrl",a,{hash:{}}):i,r+=A(a)+'" width="18px;"/> ',a="mm_dntme_back",b=n.intl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===k?i.call(e,a,{hash:{}}):i===E?w.call(e,"intl",a,{hash:{}}):i,r+=A(a)+'</div>\n  <div class="version">\n        ',b=n.new_version,a=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"new_version"),i=n["if"],y=v.program(7,d,t),y.hash={},y.fn=y,y.inverse=v.program(9,c,t),a=i.call(e,a,y),(a||0===a)&&(r+=a),r+="\n  </div>\n</div>\n\n",a="settingsChanged",b=n.child,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),a=typeof i===k?i.call(e,a,{hash:{}}):i===E?w.call(e,"child",a,{hash:{}}):i,r+=A(a)+"\n"}function o(e){var t,a,i,r="";return r+='\n          <a href=# id="newVersion" class="info-message"\n             title="',t="mm_dntme_your_version",b=n.intl,a=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===k?a.call(e,t,{hash:{}}):a===E?w.call(e,"intl",t,{hash:{}}):a,r+=A(t)+" ",t="version",b=n.configVar,a=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"configVar"),t=typeof a===k?a.call(e,t,{hash:{}}):a===E?w.call(e,"configVar",t,{hash:{}}):a,r+=A(t)+'">',b=n.new_version,t=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"new_version"),a="mm_dntme_new_version_available",b=n.intl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===k?i.call(e,a,t,{hash:{}}):i===E?w.call(e,"intl",a,t,{hash:{}}):i,r+=A(t)+"</a>\n        "}function l(e){var t,a,i="";return i+="\n          ",t="mm_dntme_version",b=n.intl,a=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===k?a.call(e,t,{hash:{}}):a===E?w.call(e,"intl",t,{hash:{}}):a,i+=A(t)+" ",t="version",b=n.configVar,a=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"configVar"),t=typeof a===k?a.call(e,t,{hash:{}}):a===E?w.call(e,"configVar",t,{hash:{}}):a,i+=A(t)+"\n        "}function d(e){var t,a,i,r="";return r+='\n          <a href=# class="newVersion" class="info-message"\n             title="',t="mm_dntme_your_version",b=n.intl,a=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===k?a.call(e,t,{hash:{}}):a===E?w.call(e,"intl",t,{hash:{}}):a,r+=A(t)+" ",t="version",b=n.configVar,a=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"configVar"),t=typeof a===k?a.call(e,t,{hash:{}}):a===E?w.call(e,"configVar",t,{hash:{}}):a,r+=A(t)+'">',b=n.new_version,t=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"new_version"),a="mm_dntme_new_version_available",b=n.intl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===k?i.call(e,a,t,{hash:{}}):i===E?w.call(e,"intl",a,t,{hash:{}}):i,r+=A(t)+"</a>\n        "}function c(e){var t,a,i="";return i+="\n          ",t="mm_dntme_version",b=n.intl,a=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===k?a.call(e,t,{hash:{}}):a===E?w.call(e,"intl",t,{hash:{}}):a,i+=A(t)+" ",t="version",b=n.configVar,a=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"configVar"),t=typeof a===k?a.call(e,t,{hash:{}}):a===E?w.call(e,"configVar",t,{hash:{}}):a,i+=A(t)+"\n        "}function m(e){var t,a;return t="siteTrackers",b=n.child,a=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),t=typeof a===k?a.call(e,t,{hash:{}}):a===E?w.call(e,"child",t,{hash:{}}):a,A(t)}function h(e,t){var a,i,r="";return r+='\n  <div class="clearfix" style="border-top:1px solid #cccccc">\n    <div style="float:left;margin:0px 0px 0px 10px;">\n      ',a="mm_dntme_version",b=n.intl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===k?i.call(e,a,{hash:{}}):i===E?w.call(e,"intl",a,{hash:{}}):i,r+=A(a)+" ",a="version",b=n.configVar,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"configVar"),a=typeof i===k?i.call(e,a,{hash:{}}):i===E?w.call(e,"configVar",a,{hash:{}}):i,r+=A(a)+"\n      ",a="Chrome",b=n.unlessBrowser,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"unlessBrowser"),y=v.program(14,p,t),y.hash={},y.fn=y,y.inverse=v.noop,a=b&&typeof i===k?i.call(e,a,y):N.call(e,i,a,y),(a||0===a)&&(r+=a),r+='\n    </div>\n    <div style="float:right;margin-right:10px;" class="otherSettings">\n        <div id="global-settings-btn" style="text-align:center;cursor:pointer;"><a>',a="mm_dntme_settings_for_all_sites",b=n.intl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===k?i.call(e,a,{hash:{}}):i===E?w.call(e,"intl",a,{hash:{}}):i,r+=A(a)+'</a></div>\n        <div class="ignore-settings-btn" style="text-align:center;cursor:pointer;"><a>',a="mm_dntme_settings_ignore",b=n.intl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===k?i.call(e,a,{hash:{}}):i===E?w.call(e,"intl",a,{hash:{}}):i,r+=A(a)+"</a></div>\n    </div>\n  </div>\n"}function p(e){var t,a,i="";return i+='\n        <br/>\n        <a href="#" class="checkForNewVersion">\n          <span>',t="mm_dntme_check_for_version",b=n.intl,a=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===k?a.call(e,t,{hash:{}}):a===E?w.call(e,"intl",t,{hash:{}}):a,i+=A(t)+'</span>\n          <img class="loading" style="display:none;" src="',t="/pages/images/ajax_loader.gif",b=n.assetUrl,a=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===k?a.call(e,t,{hash:{}}):a===E?w.call(e,"assetUrl",t,{hash:{}}):a,i+=A(t)+'"/>\n        </a>\n        <a href="#" style="display: none;" class="newVersionAvailable"></a>\n        <span style="display: none;" class="latestVersion">',t="mm_dntme_latest_version",b=n.intl,a=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===k?a.call(e,t,{hash:{}}):a===E?w.call(e,"intl",t,{hash:{}}):a,i+=A(t)+"</span>\n      "}function u(e,t){var a,i,r="";return r+='\n\n<!-- GLOBAL SETTINGS PAGE -->\n<div id="global-settings-page" class="settings global-settings" style="display: none;">\n\n  <!-- GLOBAL PANEL SETTINGS SECTION -->\n  <div id="global-panel-settings" class="global-panel-settings">\n    <div style="margin: 0px 0px 10px 30px;">\n      <div class="btn " disabled>',a="mm_dntme_panel_settings",b=n.intl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===k?i.call(e,a,{hash:{}}):i===E?w.call(e,"intl",a,{hash:{}}):i,r+=A(a)+'</div>\n      <div id="global-preferences-btn" class="btn btn-primary">',
a="mm_dntme_more_settings_capitalized",b=n.intl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===k?i.call(e,a,{hash:{}}):i===E?w.call(e,"intl",a,{hash:{}}):i,r+=A(a)+"</div>\n    </div>\n    ",a="features",b=n.child,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),a=typeof i===k?i.call(e,a,{hash:{}}):i===E?w.call(e,"child",a,{hash:{}}):i,r+=A(a)+'\n    <div class="global-language dntme_global_feature">\n      <div id="browsing" class="clearfix setting-row feature browsing">\n        <div class="message" title="" style="width:160px;" data-original-title="">Your language is: </div>\n        <select id="language" style="width:100px!important;">\n            <option value="en">English</option>\n            <option value="es">Spanish</option>\n            <option value="de">German</option>\n            <option value="pl">Polish</option>\n            <option value="pt">Portuguese</option>\n            <option value="zh">Chinese</option>\n            <option value="nl">Dutch</option>\n            <option value="it">Italian</option>\n            <option value="fr">French</option>\n        </select>\n      </div>\n    </div>\n    <div id="site-specific-settings-btn" style="text-align:center;cursor:pointer;"><a>',a="mm_dntme_settings_for_current_site",b=n.intl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===k?i.call(e,a,{hash:{}}):i===E?w.call(e,"intl",a,{hash:{}}):i,r+=A(a)+'</a></div>\n    <div class="ignore-settings-btn" style="text-align:center;cursor:pointer;"><a>',a="mm_dntme_settings_ignore",b=n.intl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===k?i.call(e,a,{hash:{}}):i===E?w.call(e,"intl",a,{hash:{}}):i,r+=A(a)+'</a></div>\n  </div>\n\n  <!-- GLOBAL PREFERENCES SECTION -->\n  <div id="global-preferences" class="global-preferences">\n    <div style="margin: 0px 0px 10px 30px;">\n        <div id="global-panel-settings-btn" class="btn btn-primary">',a="mm_dntme_panel_settings",b=n.intl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===k?i.call(e,a,{hash:{}}):i===E?w.call(e,"intl",a,{hash:{}}):i,r+=A(a)+'</div>\n        <div class="btn" disabled>',a="mm_dntme_more_settings_capitalized",b=n.intl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===k?i.call(e,a,{hash:{}}):i===E?w.call(e,"intl",a,{hash:{}}):i,r+=A(a)+'</div>\n    </div>\n\n    <div style="margin: 0px 0px 15px 10px;">\n      ',a="preferences",b=n.child,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),a=typeof i===k?i.call(e,a,{hash:{}}):i===E?w.call(e,"child",a,{hash:{}}):i,r+=A(a)+"\n    </div>\n\n    ",b=n.maskmeInstalled,a=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"maskmeInstalled"),i=n.unless,y=v.program(17,_,t),y.hash={},y.fn=y,y.inverse=v.noop,a=i.call(e,a,y),(a||0===a)&&(r+=a),r+='\n  </div>\n\n</div>\n\n<div class="ignore-settings" style="display: none;">\n',a="ignoreSettings",b=n.child,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),a=typeof i===k?i.call(e,a,{hash:{}}):i===E?w.call(e,"child",a,{hash:{}}):i,r+=A(a)+"\n<br/>\n</div>\n"}function _(e){var t,a,i="";return i+='\n    <div>\n      <a href=# class="more-options">\n        ',t="mm_dntme_more_options_in_dashboard",b=n.intl,a=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===k?a.call(e,t,{hash:{}}):a===E?w.call(e,"intl",t,{hash:{}}):a,i+=A(t)+"\n      </a>\n    </div>\n    "}n=n||e.helpers;var g,f,b,y,v=this,k="function",w=n.helperMissing,E=void 0,A=this.escapeExpression,N=n.blockHelperMissing;return b=n.blacklist,g=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),f=n["if"],y=v.program(1,r,i),y.hash={},y.fn=y,y.inverse=v.noop,g=f.call(t,g,y),g||0===g?g:""}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_settings}),ABINE_DNTME.define("abine/views/settingsDashboard",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/views/maskingDashboard","abine/views/walletDashboard","abine/views/ignoreSettings","abine/views/accountsDashboard","abine/views/settingsChanged","abine/views/trackerBlocking","abine/views/trackers","abine/views/features","abine/views/preferences","abine/views/trustedSites","abine/views/dntmePageBase","abine/timer","abine/intl"],function(e,t,n,a,i,r,s,o,l,d,c,m,h,p,u,_,g,f,b,y){var v=n.View.extend({className:"dntme_settings settings",templateName:"dntme_dashboard_settings",events:{"click .more-options":"moreOptions","click #viewAllTrackers":"viewAllTrackers","click #hideAllTrackers":"hideAllTrackers","click #reloadTrackers":"reload","click #newVersion":"downloadNewVersion","click .checkForNewVersion":"checkForNewVersion","click .latestVersion":"checkForNewVersion","click .newVersionAvailable":"downloadNewVersion","click #global-settings-btn":"showGlobalPanelSettings","click #global-panel-settings-btn":"showGlobalPanelSettings","click .ignore-settings-btn":"showIgnoreSettings","click #global-preferences-btn":"showGlobalPreferences","click #go-back-to-site-settings-btn":"showSiteSpecificSettings","click #ig-go-back-to-site-settings-btn":"showSiteSpecificSettings","click #go-back-to-dashboard-btn":"showDashboard","click #site-specific-settings-btn":"showSiteSpecificSettings","change #language":"changeLanguage"},changeLanguage:function(){var e=this.$("#language"),t=new a.PreferenceCollection({});t.setPref("dnt_language",e.val()),y.setupLocale(e.val(),function(){})},reload:function(){var e=this,t=0,n=[],a=function(){if(t++,2==t){if(e.options.switchTo)switch(e.options.settingsView="site-settings",e.options.highlight){case"acctGroup":n=["#account","#password"];break;case"maskingGroup":n=["#email","#phone","#card"];break;case"walletGroup":n=["#suggestRealCard","#suggestAddresses","#card","#suggestIdentities","#saveCard"];break;case"trackingGroup":n=["#trackers"];break;default:n=["#"+e.options.highlight]}e.renderView(e.options.settingsView||"site-settings",n,e.options.switchTo),delete e.options.settingsView,delete e.options.switchTo}};this.options.tabData.fetch({success:a}),this.options.globalData.fetch({success:a})},downloadNewVersion:function(e){e.preventDefault(),s.securityManager.openPage("https://link.abine.com/blur-"+ABINE_DNTME.config.browser.toLowerCase()+"-latest"),this.trigger("close")},checkForNewVersion:function(){this.$(".latestVersion, .newVersionAvailable").hide(),this.$(".checkForNewVersion, .checkForNewVersion .loading").show(),this.$(".checkForNewVersion span").text(y.getText("mm_dntme_checking_for_new_version"));var t=new a.ExtensionVersion;t.fetch({success:e.bind(function(){if(this.$(".checkForNewVersion .loading, .otherSettings, .checkForNewVersion").hide(),t.get("newVersionAvailable")){var e=this.$(".newVersionAvailable");e.text(y.getText("mm_dntme_new_version_available_click_here",[t.get("version")])).show(),e.attr("href","https://link.abine.com/blur-"+ABINE_DNTME.config.browser.toLowerCase()+"-latest")}else this.$(".latestVersion, .otherSettings").show()},this)})},showGlobalPanelSettings:function(){var e=y.getLang();this.$("#language").val(e),this.$(".site-specific, .global-preferences, .dntme_page_settings_changed").hide(),this.$(".global-settings, .global-panel-settings").show(),this.trigger("resize")},showGlobalPreferences:function(){this.$(".site-specific, .global-panel-settings, .dntme_page_settings_changed").hide(),this.$(".global-settings, .global-preferences").show(),this.trigger("resize")},showIgnoreSettings:function(){this.$(".site-specific, .global-settings, .global-panel-settings, .site-specific, .dntme_page_settings_changed").hide(),this.$(".ignore-settings").show(),this.trigger("resize")},showDashboard:function(){this.trigger("showPageView"),this.$(".settings-link").show()},showSiteSpecificSettings:function(t,n,a){this.$(".global-preferences, .global-settings, .global-panel-settings").hide(),this.$(".ignore-settings").hide(),this.$(".site-specific, .dntme_page_settings_changed").show(),n&&e(n).each(e.bind(function(e){var t=this.$("#site-settings-page "+e+" div.switch."+a)[0];if(t&&t.click(),"#account"==e){var t=this.$("#site-settings-page "+e+" div.switch."+a)[1];t&&t.click()}},this)),this.trigger("resize")},moreOptions:function(e){e.preventDefault(),s.webapp.openSettings()},viewAllTrackers:function(e){e.preventDefault(),this.showTrackers=!0,this.reload("global-panel-settings")},hideAllTrackers:function(e){e.preventDefault(),this.showTrackers=!1,this.reload("global-panel-settings")},afterInitialize:function(){this.doc=this.el.ownerDocument,this.model=this.options.tabData,this.model.inline=this.options.inline,this.model.on("reloaded",e.bind(function(){if(t(".message, .info-message",this.el.ownerDocument).tooltip({delay:0}),this.options.highlight){var n="#"+this.options.highlight;n.match(/card/)&&(n="#card, #suggestRealCard"),n.match(/identity/)&&(n="#suggestIdentities"),n.match(/address/)&&(n="#address, #suggestAddresses"),n.match(/password/)&&(n="#password, #suggestStrongPassword"),n.match(/account/)&&(n="#account, #rememberAccounts, #helpMeLogin, #submitAccount"),n.match(/acctGroup/)&&(n="#account, #password, #rememberAccounts, #helpMeLogin, #submitAccount, #suggestStrongPassword"),n.match(/walletGroup/)&&(n="#suggestRealCard, #suggestAddresses, #card, #suggestIdentities, #saveCard, #rememberCards"),n.match(/maskingGroup/)&&(n="#email, #phone, #card"),n.match(/trackingGroup/)&&(n="#browsing, #trackers");var a=this.$(n);a.length&&a.addClass("highlight")}this.options.timeout&&b.setTimeout(e.bind(function(){this.trigger("close")},this),this.options.timeout)},this)),this.model.on("open-global-setting",e.bind(function(e){this.options.highlight=e.highlight,this.renderView("global-panel-settings")},this)),this.model.on("settings-changed",e.bind(function(e){t(".message, .info-message",this.el.ownerDocument).tooltip({delay:0}),this.children.settingsChanged.update(e.feature)},this)),this.reload()},renderView:function(e,t,n){switch(this.render(),this.model.trigger("reloaded"),e){case"site-settings":this.showSiteSpecificSettings(null,t,n);break;case"global-panel-settings":this.showGlobalPanelSettings();break;case"global-preferences":this.showGlobalPreferences()}},createChildren:function(){var t=e.extend({},this.options,{model:this.options.tabData});return delete t.el,this.children={settingsChanged:new m(t),trackingSettings:new h(t),maskingSettings:new o(t),accountSettings:new c(t),ignoreSettings:new d(t),walletSettings:new l(t),features:new u({collection:this.options.globalData.globalFeatures,doc:this.el.ownerDocument,highlight:this.options.highlight}),preferences:new _({collection:this.options.globalData.preferences,doc:this.el.ownerDocument}),trustedSites:new g({collection:this.options.globalData.blacklist,doc:this.el.ownerDocument})},this.children.settingsChanged.transferEvents(["resize"],this),this.children.ignoreSettings.transferEvents(["resize"],this),this.children}});return v}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_tracker_blocking=e.template(function(e,t,n,a,i){function r(){return"off"}function s(e){var t,a,i,r="";return r+='"',t="this site",a="mm_dntme_help_what_will_happen_on_browsing",h=n.intl,i=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===g?i.call(e,a,t,{hash:{}}):i===b?f.call(e,"intl",a,t,{hash:{}}):i,r+=y(t)+'"'}function o(e){var t,a,i,r="";return r+='"',t="this site",a="mm_dntme_help_what_will_happen_off_browsing",h=n.intl,i=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===g?i.call(e,a,t,{hash:{}}):i===b?f.call(e,"intl",a,t,{hash:{}}):i,r+=y(t)+'"'}function l(){return"off"}function d(){return"on"}n=n||e.helpers;var c,m,h,p,u="",_=this,g="function",f=n.helperMissing,b=void 0,y=this.escapeExpression;return u+='<div id="trackers" class="clearfix setting-row ',h=n.blacklist,c=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),c=null===c||void 0===c||c===!1?c:ABINE_DNTME.Duckbone.Handlebars.getAttr(c,"trackerOff"),m=n["if"],p=_.program(1,r,i),p.hash={},p.fn=p,p.inverse=_.noop,c=m.call(t,c,p),(c||0===c)&&(u+=c),u+='" data-type="blacklist" data-name="tracker">\n  <div class="message" style="width:160px;" title=',h=n.blacklist,c=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),c=null===c||void 0===c||c===!1?c:ABINE_DNTME.Duckbone.Handlebars.getAttr(c,"trackerOff"),m=n["if"],p=_.program(3,s,i),p.hash={},p.fn=p,p.inverse=_.program(5,o,i),c=m.call(t,c,p),(c||0===c)&&(u+=c),u+=">",c="mm_dntme_tracking_blocker",h=n.intl,m=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),c=typeof m===g?m.call(t,c,{hash:{}}):m===b?f.call(t,"intl",c,{hash:{}}):m,u+=y(c)+'</div>\n  <div class="word switch ',h=n.blacklist,c=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),c=null===c||void 0===c||c===!1?c:ABINE_DNTME.Duckbone.Handlebars.getAttr(c,"trackerOff"),m=n["if"],p=_.program(7,l,i),p.hash={},p.fn=p,p.inverse=_.program(9,d,i),c=m.call(t,c,p),(c||0===c)&&(u+=c),u+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',c="mm_dntme_for_this_site",h=n.intl,m=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),c=typeof m===g?m.call(t,c,{hash:{}}):m===b?f.call(t,"intl",c,{hash:{}}):m,u+=y(c)+"</div>\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_tracker_blocking}),ABINE_DNTME.define("abine/views/trackerBlocking",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/views/pageTracker","abine/views/settingsChanged","abine/views/dntmePageBase","abine/timer"],function(e,t,n,a,i,r,s,o,l,d,c){var m=d.extend({templateName:"dntme_dashboard_tracker_blocking",events:{"click .setting-row":"toggleSwitch","click .more-settings":"showSettings","click .go-back":"goBack"},afterInitialize:function(){if(this.doc=this.el.document,this.options.highlight){var t=this.$("#"+this.options.highlight);t&&t[0]&&(t[0].scrollIntoView(),t.addClass("highlight"))}this.options.timeout&&c.setTimeout(e.bind(function(){this.trigger("close")},this),this.options.timeout)},goBack:function(){this.trigger("change-dashboard","dashboard")},createChildren:function(){return this.children={},this.children}});return m}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_tracking=e.template(function(e,t,n){n=n||e.helpers;var a,i,r,s="function",o=n.helperMissing,l=void 0,d=this.escapeExpression;return a="trackerSection",r=n.child,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),a=typeof i===s?i.call(t,a,{hash:{}}):i===l?o.call(t,"child",a,{hash:{}}):i,d(a)}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_tracking}),ABINE_DNTME.define("abine/views/trackingDashboard",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/views/pageTracker","abine/views/settingsChanged","abine/views/dntmePageBase"],function(e,t,n,a,i,r,s,o,l,d){var c=d.extend({templateName:"dntme_dashboard_tracking",events:{"click .setting-row":"toggleSwitch","click .suggested":"openSuggested","click a.who":"openWhoAreThey"},openSuggested:function(e){e.preventDefault(),s.securityManager.openLink({type:"recommended",host:this.model.get("host")})},openWhoAreThey:function(e){e.preventDefault(),s.webapp.openUnderstandingTracking(),this.trigger("close")},afterInitialize:function(){this.doc=this.el.document},createChildren:function(){return this.children={trackerSection:new o({model:this.model,doc:this.el.ownerDocument,withGoBack:!0})},this.children.trackerSection.on("trackerToggled",e.bind(this.trackerToggled,this)),this.children.trackerSection.transferEvents(["resize","close","change-dashboard"],this),this.children}});return c}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_wallet=e.template(function(e,t,n,a,i){function r(){return"off"}function s(e){var t,a,i="";return i+='"',t="mm_dntme_help_what_will_happen_on_suggestrealcard",D=n.intl,a=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===B?a.call(e,t,{hash:{}}):a===P?S.call(e,"intl",t,{hash:{}}):a,i+=x(t)+'"'}function o(e){var t,a,i="";return i+='"',t="mm_dntme_help_what_will_happen_off_suggestrealcard",D=n.intl,a=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===B?a.call(e,t,{hash:{}}):a===P?S.call(e,"intl",t,{hash:{}}):a,i+=x(t)+'"'}function l(){return"off"}function d(){return"on"}function c(){return"off"}function m(e){var t,a,i="";return i+='"',t="mm_dntme_help_what_will_happen_on_suggestidentities",D=n.intl,a=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===B?a.call(e,t,{hash:{}}):a===P?S.call(e,"intl",t,{hash:{}}):a,i+=x(t)+'"'}function h(e){var t,a,i="";return i+='"',t="mm_dntme_help_what_will_happen_off_suggestidentities",D=n.intl,a=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===B?a.call(e,t,{hash:{}}):a===P?S.call(e,"intl",t,{hash:{}}):a,i+=x(t)+'"'}function p(){return"off"}function u(){return"on"}function _(){return"off"}function g(e){var t,a,i="";return i+='"',t="mm_dntme_help_what_will_happen_on_suggestaddresses",D=n.intl,a=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===B?a.call(e,t,{hash:{}}):a===P?S.call(e,"intl",t,{hash:{}}):a,i+=x(t)+'"'}function f(e){var t,a,i="";return i+='"',t="mm_dntme_help_what_will_happen_off_suggestaddresses",D=n.intl,a=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===B?a.call(e,t,{hash:{}}):a===P?S.call(e,"intl",t,{hash:{}}):a,i+=x(t)+'"'}function b(){return"off"}function y(){return"on"}function v(){return"off"}function k(e){var t,a,i="";return i+='"',t="mm_dntme_help_what_will_happen_on_save_card",D=n.intl,a=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===B?a.call(e,t,{hash:{}}):a===P?S.call(e,"intl",t,{hash:{}}):a,i+=x(t)+'"'}function w(e){var t,a,i="";return i+='"',t="mm_dntme_help_what_will_happen_off_save_card",D=n.intl,a=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===B?a.call(e,t,{hash:{}}):a===P?S.call(e,"intl",t,{hash:{}}):a,i+=x(t)+'"'}function E(){return"off"}function A(){return"on"}n=n||e.helpers;var N,T,D,M,I="",C=this,B="function",S=n.helperMissing,P=void 0,x=this.escapeExpression;return I+='<div id="suggestRealCard" class="clearfix setting-row ',D=n.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"realCardOff"),T=n["if"],M=C.program(1,r,i),M.hash={},M.fn=M,M.inverse=C.noop,N=T.call(t,N,M),(N||0===N)&&(I+=N),I+='" data-type="blacklist" data-name="real_card">\n  <div class="message" style="width:160px;" title=',D=n.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"realCardOff"),T=n["if"],M=C.program(3,s,i),M.hash={},M.fn=M,M.inverse=C.program(5,o,i),N=T.call(t,N,M),(N||0===N)&&(I+=N),I+=">",N="mm_dntme_wallet_real_card",D=n.intl,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),N=typeof T===B?T.call(t,N,{hash:{}}):T===P?S.call(t,"intl",N,{hash:{}}):T,I+=x(N)+'</div>\n  <div class="word switch ',D=n.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"realCardOff"),T=n["if"],M=C.program(7,l,i),M.hash={},M.fn=M,M.inverse=C.program(9,d,i),N=T.call(t,N,M),(N||0===N)&&(I+=N),I+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',N="mm_dntme_for_this_site",D=n.intl,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),N=typeof T===B?T.call(t,N,{hash:{}}):T===P?S.call(t,"intl",N,{hash:{}}):T,I+=x(N)+'</div>\n</div>\n\n<div id="suggestIdentities" class="clearfix setting-row ',D=n.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"identityOff"),T=n["if"],M=C.program(11,c,i),M.hash={},M.fn=M,M.inverse=C.noop,N=T.call(t,N,M),(N||0===N)&&(I+=N),I+='" data-type="blacklist" data-name="identity">\n  <div class="message" style="width:160px;" title=',D=n.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"identityOff"),T=n["if"],M=C.program(13,m,i),M.hash={},M.fn=M,M.inverse=C.program(15,h,i),N=T.call(t,N,M),(N||0===N)&&(I+=N),I+=">",N="mm_dntme_wallet_identity",D=n.intl,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),N=typeof T===B?T.call(t,N,{hash:{}}):T===P?S.call(t,"intl",N,{hash:{}}):T,I+=x(N)+'</div>\n  <div class="word switch ',D=n.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"identityOff"),T=n["if"],M=C.program(17,p,i),M.hash={},M.fn=M,M.inverse=C.program(19,u,i),N=T.call(t,N,M),(N||0===N)&&(I+=N),I+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',N="mm_dntme_for_this_site",D=n.intl,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),N=typeof T===B?T.call(t,N,{hash:{}}):T===P?S.call(t,"intl",N,{hash:{}}):T,I+=x(N)+'</div>\n</div>\n\n<div id="suggestAddresses" class="clearfix setting-row ',D=n.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"addressOff"),T=n["if"],M=C.program(21,_,i),M.hash={},M.fn=M,M.inverse=C.noop,N=T.call(t,N,M),(N||0===N)&&(I+=N),I+='" data-type="blacklist" data-name="address">\n  <div class="message" style="width:160px;" title=',D=n.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"addressOff"),T=n["if"],M=C.program(23,g,i),M.hash={},M.fn=M,M.inverse=C.program(25,f,i),N=T.call(t,N,M),(N||0===N)&&(I+=N),I+=">",N="mm_dntme_wallet_address",D=n.intl,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),N=typeof T===B?T.call(t,N,{hash:{}}):T===P?S.call(t,"intl",N,{hash:{}}):T,I+=x(N)+'</div>\n  <div class="word switch ',D=n.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"addressOff"),T=n["if"],M=C.program(27,b,i),M.hash={},M.fn=M,M.inverse=C.program(29,y,i),N=T.call(t,N,M),(N||0===N)&&(I+=N),I+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',N="mm_dntme_for_this_site",D=n.intl,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),N=typeof T===B?T.call(t,N,{hash:{}}):T===P?S.call(t,"intl",N,{hash:{}}):T,I+=x(N)+'</div>\n</div>\n\n<div id="saveCard" class="clearfix setting-row ',D=n.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"saveCardOff"),T=n["if"],M=C.program(31,v,i),M.hash={},M.fn=M,M.inverse=C.noop,N=T.call(t,N,M),(N||0===N)&&(I+=N),I+='" data-type="blacklist" data-name="save_card">\n<div class="message" style="width:160px;" title=',D=n.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"saveCardOff"),T=n["if"],M=C.program(33,k,i),M.hash={},M.fn=M,M.inverse=C.program(35,w,i),N=T.call(t,N,M),(N||0===N)&&(I+=N),I+=">",N="mm_dntme_wallet_save_card",D=n.intl,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),N=typeof T===B?T.call(t,N,{hash:{}}):T===P?S.call(t,"intl",N,{hash:{}}):T,I+=x(N)+'</div>\n<div class="word switch ',D=n.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"saveCardOff"),T=n["if"],M=C.program(37,E,i),M.hash={},M.fn=M,M.inverse=C.program(39,A,i),N=T.call(t,N,M),(N||0===N)&&(I+=N),I+='">\n  <div class="knob"></div>\n</div>\n<div class="for">',N="mm_dntme_for_this_site",D=n.intl,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),N=typeof T===B?T.call(t,N,{hash:{}}):T===P?S.call(t,"intl",N,{hash:{}}):T,I+=x(N)+"</div>\n</div>\n"}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_wallet}),ABINE_DNTME.define("abine/views/walletDashboard",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/views/pageTracker","abine/views/settingsChanged","abine/views/dntmePageBase","abine/timer"],function(e,t,n,a,i,r,s,o,l,d,c){var m=d.extend({templateName:"dntme_dashboard_wallet",events:{"click .setting-row":"toggleSwitch","click .more-settings":"showSettings","click .go-back":"goBack","click a.walletDashboard":"walletDashboard"},afterInitialize:function(){if(this.doc=this.el.document,this.options.highlight){var t=this.$("#"+this.options.highlight);t&&t[0]&&(t[0].scrollIntoView(),t.addClass("highlight"))}this.options.timeout&&c.setTimeout(e.bind(function(){this.trigger("close")},this),this.options.timeout)},goBack:function(){this.trigger("change-dashboard","dashboard")},walletDashboard:function(e){e.preventDefault(),s.webapp.openWallet(),this.trigger("close")},createChildren:function(){return this.children={},this.children}});return m}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_empty=e.template(function(e,t,n){n=n||e.helpers;var a="";return a}),ABINE_DNTME.CompiledTemplates.dntme_empty}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_global_feature=e.template(function(e,t,n,a,i){function r(){return"off"}function s(){return"on"}function o(){return"off"}n=n||e.helpers;var l,d,c,m,h="",p=this,u="function",_=n.helperMissing,g=void 0,f=this.escapeExpression;return h+='<div class="clearfix setting-row feature ',c=n.value,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"value"),d=n.unless,m=p.program(1,r,i),m.hash={},m.fn=m,m.inverse=p.noop,l=d.call(t,l,m),(l||0===l)&&(h+=l),h+=" ",c=n.name,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"name"),typeof l===u?l=l.call(t,{hash:{}}):l===g&&(l=_.call(t,"name",{hash:{}})),h+=f(l)+'" id="',c=n.name,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"name"),typeof l===u?l=l.call(t,{hash:{}}):l===g&&(l=_.call(t,"name",{hash:{}})),h+=f(l)+'">\n  <div class="message" style="width:160px;" title="',c=n.getTooltip,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getTooltip"),typeof l===u?l=l.call(t,{hash:{}}):l===g&&(l=_.call(t,"getTooltip",{hash:{}})),h+=f(l)+'">',c=n.getLabel,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getLabel"),typeof l===u?l=l.call(t,{hash:{}}):l===g&&(l=_.call(t,"getLabel",{hash:{}})),h+=f(l)+'</div>\n  <div class="word switch ',c=n.value,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"value"),d=n["if"],m=p.program(3,s,i),m.hash={},m.fn=m,m.inverse=p.program(5,o,i),l=d.call(t,l,m),(l||0===l)&&(h+=l),h+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',l="mm_dntme_for_all_sites",c=n.intl,d=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof d===u?d.call(t,l,{hash:{}}):d===g?_.call(t,"intl",l,{hash:{}}):d,h+=f(l)+"</div>\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_global_feature}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_global_features=e.template(function(e,t,n,a,i){function r(e,t){var a,i,r="";return r+="\n  <legend>",a="mm_dntme_trusted_sites",c=n.intl,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===u?i.call(e,a,{hash:{}}):i===g?_.call(e,"intl",a,{hash:{}}):i,r+=f(a)+'<span class="info-message" title="',a="mm_dntme_help_trusted_sites",c=n.intl,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===u?i.call(e,a,{hash:{}}):i===g?_.call(e,"intl",a,{hash:{}}):i,r+=f(a)+'"> (',a="mm_dntme_info",c=n.intl,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===u?i.call(e,a,{hash:{}}):i===g?_.call(e,"intl",a,{hash:{}}):i,r+=f(a)+')</span></legend>\n  <div class="trusted-sites ',c=n.maskmeInstalled,a=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"maskmeInstalled"),i=n["if"],m=p.program(2,s,t),m.hash={},m.fn=m,m.inverse=p.noop,a=i.call(e,a,m),(a||0===a)&&(r+=a),r+='">\n    ',a="blacklist",c=n.child,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),a=typeof i===u?i.call(e,a,{hash:{}}):i===g?_.call(e,"child",a,{hash:{}}):i,r+=f(a)+"\n  </div>\n"}function s(){return"maskme"}function o(e){var t,a,i="";return i+='\n<div>\n  <a href=# class="more-options">\n    ',t="mm_dntme_more_options_in_dashboard",c=n.intl,a=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===u?a.call(e,t,{hash:{}}):a===g?_.call(e,"intl",t,{hash:{}}):a,i+=f(t)+"\n  </a>\n</div>\n"}n=n||e.helpers;var l,d,c,m,h="",p=this,u="function",_=n.helperMissing,g=void 0,f=this.escapeExpression;return h+="<legend>",l="mm_dntme_global_defaults",c=n.intl,d=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof d===u?d.call(t,l,{hash:{}}):d===g?_.call(t,"intl",l,{hash:{}}):d,h+=f(l)+'<span class="info-message" title="',l="mm_dntme_help_global_defaults",c=n.intl,d=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof d===u?d.call(t,l,{hash:{}}):d===g?_.call(t,"intl",l,{hash:{}}):d,h+=f(l)+'"> (',l="mm_dntme_info",c=n.intl,d=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof d===u?d.call(t,l,{hash:{}}):d===g?_.call(t,"intl",l,{hash:{}}):d,h+=f(l)+")</span></legend>\n",l="features",c=n.child,d=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),l=typeof d===u?d.call(t,l,{hash:{}}):d===g?_.call(t,"child",l,{hash:{}}):d,h+=f(l)+"\n\n",c=n.blacklist,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),l=null===l||void 0===l||l===!1?l:ABINE_DNTME.Duckbone.Handlebars.getAttr(l,"length"),d=n["if"],m=p.program(1,r,i),m.hash={},m.fn=m,m.inverse=p.noop,l=d.call(t,l,m),(l||0===l)&&(h+=l),h+="\n\n",c=n.maskmeInstalled,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"maskmeInstalled"),d=n.unless,m=p.program(4,o,i),m.hash={},m.fn=m,m.inverse=p.noop,l=d.call(t,l,m),(l||0===l)&&(h+=l),h}),ABINE_DNTME.CompiledTemplates.dntme_global_features}),ABINE_DNTME.define("abine/views/features",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/intl"],function(e,t,n){var a=n.View.extend({tagName:"div",className:"dntme_global_feature",templateName:"dntme_global_feature",events:{"click .feature":"toggleFeature"},renderFeature:function(){this.render(),"search"==this.model.get("name")&&this.model.collection.messenger.send("private:search:toggle",{search:this.model.get("value")}),t(".info-message",this.el.ownerDocument).tooltip({delay:0})},toggleFeature:function(n){if("A"!=n.target.nodeName){var a=t(n.target);a.hasClass("feature")||(a=t(n.target).parents(".feature"));var i=t(".switch",a);t(i).data("changing")||(t(i).data("changing",!0),t(".knob",i).animate({marginLeft:this.model.get("value")?0:20},e.bind(function(){t(i).removeData("changing"),"search"==this.model.get("name")&&this.model.get("value")&&this.model.collection.messenger.send("update:panelActivity:closed",{panelId:7000002}),this.model.save({value:!this.model.get("value")},{success:e.bind(this.renderFeature,this)}),"browsing"==this.model.get("name")&&t("#reloadTrackers",this.el.ownerDocument).click()},this)))}}}),i=n.ListView.extend({tagName:"div",className:"",viewClass:a});return i}),ABINE_DNTME.define("abine/views/dntmeSettings",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/intl"],function(e,t,n,a,i,r,s){var o=n.View.extend({tagName:"div",className:"dntme_global_features",templateName:"dntme_global_features",createChildren:function(){return{}}}),l=i.extend({className:"dntme_settings",templateName:"dntme_global_main",events:{"click #viewAllTrackers":"viewAllTrackers","click #hideAllTrackers":"hideAllTrackers","click #reloadTrackers":"reload","click .more-options":"moreOptions","click #newVersion":"downloadNewVersion"},afterInitialize:function(){this.doc=this.el.ownerDocument,this.model=new a.GlobalData({messenger:this.options.messenger}),this.on("render",e.bind(function(){if(this.trigger("resize"),this.model.get("premium")?t(".premium",this.el.ownerDocument).text(s.getText("mm_dntme_premium")):t(".premium",this.el.ownerDocument).text(s.getText("mm_dntme_upgrade_to_premium")),this.$("img.info-message").tooltip({delay:0,placement:"bottom"}),this.$(".info-message").tooltip({delay:0}),this.options.highlight){var e=this.$("#"+this.options.highlight);e[0].scrollIntoView(),e.addClass("highlight")}},this)),this.model.bind("sync:success",e.bind(this.render,this));
},createChildren:function(){return this.showTrackers?{}:{details:new o({model:this.model,doc:this.el.ownerDocument})}}});return l}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_global_main=e.template(function(e,t,n,a,i){function r(e){var t,a,i,r="";return r+='\n        <a href=# id="newVersion" class="info-message"\n           title="',t="mm_dntme_your_version",d=n.intl,a=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===p?a.call(e,t,{hash:{}}):a===_?u.call(e,"intl",t,{hash:{}}):a,r+=g(t)+" ",t="version",d=n.configVar,a=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"configVar"),t=typeof a===p?a.call(e,t,{hash:{}}):a===_?u.call(e,"configVar",t,{hash:{}}):a,r+=g(t)+'">',d=n.new_version,t=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"new_version"),a="mm_dntme_new_version_available",d=n.intl,i=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===p?i.call(e,a,t,{hash:{}}):i===_?u.call(e,"intl",a,t,{hash:{}}):i,r+=g(t)+"</a>\n      "}function s(e){var t,a,i="";return i+="\n        ",t="mm_dntme_version",d=n.intl,a=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===p?a.call(e,t,{hash:{}}):a===_?u.call(e,"intl",t,{hash:{}}):a,i+=g(t)+" ",t="version",d=n.configVar,a=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"configVar"),t=typeof a===p?a.call(e,t,{hash:{}}):a===_?u.call(e,"configVar",t,{hash:{}}):a,i+=g(t)+"\n      "}n=n||e.helpers;var o,l,d,c,m="",h=this,p="function",u=n.helperMissing,_=void 0,g=this.escapeExpression;return m+='<div class="settings">\n  <div class="settings-header clearfix">\n    <div class="go-back"><img src="',o="/pages/images/back.png",d=n.assetUrl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"assetUrl",o,{hash:{}}):l,m+=g(o)+'" width="18px;"/> ',o="mm_dntme_back",d=n.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"intl",o,{hash:{}}):l,m+=g(o)+'</div>\n    <div class="version">\n      ',d=n.new_version,o=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"new_version"),l=n["if"],c=h.program(1,r,i),c.hash={},c.fn=c,c.inverse=h.program(3,s,i),o=l.call(t,o,c),(o||0===o)&&(m+=o),m+="\n    </div>\n  </div>\n\n  ",o="details",d=n.child,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"child",o,{hash:{}}):l,m+=g(o)+"\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_global_main}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_global_preference=e.template(function(e,t,n,a,i){function r(){return"on"}function s(){return"off"}function o(e){var t,a;return t="/pages/images/selected.png",m=n.assetUrl,a=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===_?a.call(e,t,{hash:{}}):a===f?g.call(e,"assetUrl",t,{hash:{}}):a,b(t)}function l(e){var t,a;return t="/pages/images/unselected.png",m=n.assetUrl,a=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===_?a.call(e,t,{hash:{}}):a===f?g.call(e,"assetUrl",t,{hash:{}}):a,b(t)}n=n||e.helpers;var d,c,m,h,p="",u=this,_="function",g=n.helperMissing,f=void 0,b=this.escapeExpression;return p+='<div class="pref ',m=n.value,d=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"value"),c=n["if"],h=u.program(1,r,i),h.hash={},h.fn=h,h.inverse=u.program(3,s,i),d=c.call(t,d,h),(d||0===d)&&(p+=d),p+='" id="',m=n.getId,d=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getId"),typeof d===_?d=d.call(t,{hash:{}}):d===f&&(d=g.call(t,"getId",{hash:{}})),p+=b(d)+'">\n  <img width="16px" height="16px" src="',m=n.value,d=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"value"),c=n["if"],h=u.program(5,o,i),h.hash={},h.fn=h,h.inverse=u.program(7,l,i),d=c.call(t,d,h),(d||0===d)&&(p+=d),p+='"/>\n  <span>',m=n.getLabel,d=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getLabel"),typeof d===_?d=d.call(t,{hash:{}}):d===f&&(d=g.call(t,"getLabel",{hash:{}})),p+=b(d)+'</span><span class="info-message" title="',m=n.getTooltip,d=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getTooltip"),typeof d===_?d=d.call(t,{hash:{}}):d===f&&(d=g.call(t,"getTooltip",{hash:{}})),p+=b(d)+'"> (',d="mm_dntme_info",m=n.intl,c=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),d=typeof c===_?c.call(t,d,{hash:{}}):c===f?g.call(t,"intl",d,{hash:{}}):c,p+=b(d)+")</span>\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_global_preference}),ABINE_DNTME.define("abine/views/preferences",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/intl"],function(e,t,n){var a=n.View.extend({tagName:"div",templateName:"dntme_global_preference",className:"dntme_preference",events:{"click .pref":"togglePreference"},togglePreference:function(){this.model.save({value:!this.model.get("value")}),this.render(),t(".info-message",this.el.ownerDocument).tooltip({delay:0})}}),i=n.ListView.extend({tagName:"div",className:"preference-list",viewClass:a});return i}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_global_trackers=e.template(function(e,t,n){n=n||e.helpers;var a,i,r,s="",o="function",l=n.helperMissing,d=void 0,c=this.escapeExpression;return s+='<div class="trackers"><span id="reloadTrackers"></span>\n',a="globalTrackers",r=n.child,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"child",a,{hash:{}}):i,s+=c(a)+"\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_global_trackers}),ABINE_DNTME.define("abine/views/trackers",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/intl"],function(e,t,n){var a=n.View.extend({tagName:"div",templateName:"dntme_page_tracker",events:{"click .tracker":"toggleTracker"},toggleTracker:function(){this.model.save({blocked:!this.model.get("blocked")}),this.render()}}),i=n.ListView.extend({tagName:"div",className:"",viewClass:a});return i}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_global_trusted_site=e.template(function(e,t,n,a,i){function r(e,t){var a,i,r="";return r+='\n        <img src="',a="/pages/images/key-grey.png",b=n.assetUrl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),a=typeof i===w?i.call(e,a,{hash:{}}):i===A?E.call(e,"assetUrl",a,{hash:{}}):i,r+=N(a)+'" width="16px" height="16px"\n             class="icon-key ',b=n.account,a=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"account"),i=n["if"],y=k.program(2,s,t),y.hash={},y.fn=y,y.inverse=k.program(4,o,t),a=i.call(e,a,y),(a||0===a)&&(r+=a),r+='" title="',a="mm_dntme_help_dont_save_accounts",b=n.intl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===w?i.call(e,a,{hash:{}}):i===A?E.call(e,"intl",a,{hash:{}}):i,r+=N(a)+'" />\n    '}function s(){return"on"}function o(){return"off"}function l(){return"on"}function d(){return"off"}function c(){return"on"}function m(){return"off"}function h(){return"on"}function p(){return"off"}function u(){return"on"}function _(){return"off"}n=n||e.helpers;var g,f,b,y,v="",k=this,w="function",E=n.helperMissing,A=void 0,N=this.escapeExpression;return v+='<div class="clearfix site">\n  <span class="domain">',b=n.domain,g=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"domain"),typeof g===w?g=g.call(t,{hash:{}}):g===A&&(g=E.call(t,"domain",{hash:{}})),v+=N(g)+'</span>\n  <span class="icons">\n    ',b=n.globalAccounts,g=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"globalAccounts"),f=n["if"],y=k.program(1,r,i),y.hash={},y.fn=y,y.inverse=k.noop,g=f.call(t,g,y),(g||0===g)&&(v+=g),v+='\n      <img src="',g="/pages/images/maskcard-icon-grey.png",b=n.assetUrl,f=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),g=typeof f===w?f.call(t,g,{hash:{}}):f===A?E.call(t,"assetUrl",g,{hash:{}}):f,v+=N(g)+'" width="16px" height="11px"\n           class="icon-card ',b=n.card,g=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"card"),f=n["if"],y=k.program(6,l,i),y.hash={},y.fn=y,y.inverse=k.program(8,d,i),g=f.call(t,g,y),(g||0===g)&&(v+=g),v+='" title="',g="mm_dntme_help_trusted_card",b=n.intl,f=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),g=typeof f===w?f.call(t,g,{hash:{}}):f===A?E.call(t,"intl",g,{hash:{}}):f,v+=N(g)+'"/>\n      <img src="',g="/pages/images/maskphone-icon-grey.png",b=n.assetUrl,f=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),g=typeof f===w?f.call(t,g,{hash:{}}):f===A?E.call(t,"assetUrl",g,{hash:{}}):f,v+=N(g)+'" width="18px" height="18px"\n                 class="icon-phone ',b=n.phone,g=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"phone"),f=n["if"],y=k.program(10,c,i),y.hash={},y.fn=y,y.inverse=k.program(12,m,i),g=f.call(t,g,y),(g||0===g)&&(v+=g),v+='" title="',g="mm_dntme_help_trusted_phone",b=n.intl,f=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),g=typeof f===w?f.call(t,g,{hash:{}}):f===A?E.call(t,"intl",g,{hash:{}}):f,v+=N(g)+'"/>\n      <img src="',g="/pages/images/maskmail-icon-grey.png",b=n.assetUrl,f=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),g=typeof f===w?f.call(t,g,{hash:{}}):f===A?E.call(t,"assetUrl",g,{hash:{}}):f,v+=N(g)+'" width="18px" height="13px"\n                 class="icon-email ',b=n.email,g=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"email"),f=n["if"],y=k.program(14,h,i),y.hash={},y.fn=y,y.inverse=k.program(16,p,i),g=f.call(t,g,y),(g||0===g)&&(v+=g),v+='" title="',g="mm_dntme_help_trusted_email",b=n.intl,f=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),g=typeof f===w?f.call(t,g,{hash:{}}):f===A?E.call(t,"intl",g,{hash:{}}):f,v+=N(g)+'"/>\n      <img src="',g="/pages/images/globe-grey.png",b=n.assetUrl,f=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),g=typeof f===w?f.call(t,g,{hash:{}}):f===A?E.call(t,"assetUrl",g,{hash:{}}):f,v+=N(g)+'" width="16px" height="16px"\n           class="icon-tracker ',b=n.tracker,g=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"tracker"),f=n["if"],y=k.program(18,u,i),y.hash={},y.fn=y,y.inverse=k.program(20,_,i),g=f.call(t,g,y),(g||0===g)&&(v+=g),v+='" title="',g="mm_dntme_help_trusted_browsing",b=n.intl,f=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),g=typeof f===w?f.call(t,g,{hash:{}}):f===A?E.call(t,"intl",g,{hash:{}}):f,v+=N(g)+'" />\n  </span>\n</div>'}),ABINE_DNTME.CompiledTemplates.dntme_global_trusted_site}),ABINE_DNTME.define("abine/views/trustedSites",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/intl"],function(e,t,n){var a=n.View.extend({tagName:"div",className:"dntme_trusted_site",templateName:"dntme_global_trusted_site",events:{"click .icon-tracker":"toggleBrowsing","click .icon-email":"toggleEmail","click .icon-phone":"togglePhone","click .icon-card":"toggleCard","click .icon-key":"toggleAccount"},toggleBrowsing:function(){this.model.save({changed:"tracker",trusted:!0,tracker:!this.model.get("tracker")},{success:e.bind(this.render,this)})},toggleEmail:function(){this.model.save({changed:"email",trusted:!0,email:!this.model.get("email")},{success:e.bind(this.render,this)})},togglePhone:function(){this.model.save({changed:"phone",trusted:!0,phone:!this.model.get("phone")},{success:e.bind(this.render,this)})},toggleCard:function(){this.model.save({changed:"card",trusted:!0,card:!this.model.get("card")},{success:e.bind(this.render,this)})},toggleAccount:function(){this.model.save({changed:"account",trusted:!0,account:!this.model.get("account")},{success:e.bind(this.render,this)})}}),i=n.ListView.extend({tagName:"div",className:"",viewClass:a});return i}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_blacklist=e.template(function(e,t,n,a,i){function r(){return"off"}function s(){return"off"}function o(){return"on"}function l(){return"data-blacklisted=1"}function d(e,t){var a,i,r="";return r+="\n    ",J=n.tracker,a=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"tracker"),i=n["if"],Z=X.program(10,c,t),Z.hash={},Z.fn=Z,Z.inverse=X.program(12,m,t),a=i.call(e,a,Z),(a||0===a)&&(r+=a),r+="\n      </a>\n  "}function c(e){var t,a,i="";return i+='\n        <div class="skip suggested">',t="mm_dntme_suggested",J=n.intl,a=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===Q?a.call(e,t,{hash:{}}):a===te?ee.call(e,"intl",t,{hash:{}}):a,i+=ne(t)+"</div>\n    "}function m(e){var t,a,i="";return i+='\n        <div class="skip not suggested">',t="mm_dntme_not_suggested",J=n.intl,a=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===Q?a.call(e,t,{hash:{}}):a===te?ee.call(e,"intl",t,{hash:{}}):a,i+=ne(t)+"</div>\n    "}function h(e,t){var a,i,r="";return r+='\n<div class="clearfix feature ',J=n.globalEmail,a=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalEmail"),i=n["if"],Z=X.program(15,p,t),Z.hash={},Z.fn=Z,Z.inverse=X.noop,a=i.call(e,a,Z),(a||0===a)&&(r+=a),r+=" ",J=n.globalEmail,a=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalEmail"),i=n.unless,Z=X.program(18,_,t),Z.hash={},Z.fn=Z,Z.inverse=X.noop,a=i.call(e,a,Z),(a||0===a)&&(r+=a),r+='">\n  <div class="message">',a="mm_dntme_dont_track_email_here",J=n.intl,i=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===Q?i.call(e,a,{hash:{}}):i===te?ee.call(e,"intl",a,{hash:{}}):i,r+=ne(a)+'</div>\n  <div class="message messageHover">',a="mm_dntme_disabled_in_settings",J=n.intl,i=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===Q?i.call(e,a,{hash:{}}):i===te?ee.call(e,"intl",a,{hash:{}}):i,r+=ne(a)+'</div>\n  <div class="switch ',J=n.emailEnabled,a=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"emailEnabled"),i=n["if"],Z=X.program(20,g,t),Z.hash={},Z.fn=Z,Z.inverse=X.program(22,f,t),a=i.call(e,a,Z),(a||0===a)&&(r+=a),r+='" data-feature="email" ',J=n.emailEnabled,a=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"emailEnabled"),i=n.unless,Z=X.program(24,b,t),Z.hash={},Z.fn=Z,Z.inverse=X.noop,a=i.call(e,a,Z),(a||0===a)&&(r+=a),r+='>\n    <div class="knob"></div>\n  </div>\n  ',J=n.has_masked_emails,a=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"has_masked_emails"),i=n["if"],Z=X.program(26,y,t),Z.hash={},Z.fn=Z,Z.inverse=X.noop,a=i.call(e,a,Z),(a||0===a)&&(r+=a),r+='\n</div>\n<div class="clearfix feature ',J=n.globalCard,a=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalCard"),i=n["if"],Z=X.program(28,v,t),Z.hash={},Z.fn=Z,Z.inverse=X.noop,a=i.call(e,a,Z),(a||0===a)&&(r+=a),r+=" ",J=n.globalCard,a=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalCard"),i=n.unless,Z=X.program(31,w,t),Z.hash={},Z.fn=Z,Z.inverse=X.noop,a=i.call(e,a,Z),(a||0===a)&&(r+=a),r+='">\n    <div class="message">',a="mm_dntme_dont_track_card_here",J=n.intl,i=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===Q?i.call(e,a,{hash:{}}):i===te?ee.call(e,"intl",a,{hash:{}}):i,r+=ne(a)+'</div>\n    <div class="message messageHover">',a="mm_dntme_disabled_in_settings",J=n.intl,i=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===Q?i.call(e,a,{hash:{}}):i===te?ee.call(e,"intl",a,{hash:{}}):i,r+=ne(a)+'</div>\n    <div class="switch ',J=n.cardEnabled,a=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"cardEnabled"),i=n["if"],Z=X.program(33,E,t),Z.hash={},Z.fn=Z,Z.inverse=X.program(35,A,t),a=i.call(e,a,Z),(a||0===a)&&(r+=a),r+='" data-feature="card"  ',J=n.cardEnabled,a=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"cardEnabled"),i=n.unless,Z=X.program(37,N,t),Z.hash={},Z.fn=Z,Z.inverse=X.noop,a=i.call(e,a,Z),(a||0===a)&&(r+=a),r+='>\n        <div class="knob"></div>\n    </div>\n  ',J=n.hasEnabledCard,a=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"hasEnabledCard"),i=n["if"],Z=X.program(39,T,t),Z.hash={},Z.fn=Z,Z.inverse=X.noop,a=i.call(e,a,Z),(a||0===a)&&(r+=a),r+='\n</div>\n<div class="clearfix feature ',J=n.globalPhone,a=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalPhone"),i=n["if"],Z=X.program(41,D,t),Z.hash={},Z.fn=Z,Z.inverse=X.noop,a=i.call(e,a,Z),(a||0===a)&&(r+=a),r+=" ",J=n.globalPhone,a=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalPhone"),i=n.unless,Z=X.program(44,I,t),Z.hash={},Z.fn=Z,Z.inverse=X.noop,a=i.call(e,a,Z),(a||0===a)&&(r+=a),r+='">\n  <div class="message">',a="mm_dntme_dont_track_phone_here",J=n.intl,i=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===Q?i.call(e,a,{hash:{}}):i===te?ee.call(e,"intl",a,{hash:{}}):i,r+=ne(a)+'</div>\n  <div class="message messageHover">',a="mm_dntme_disabled_in_settings",J=n.intl,i=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===Q?i.call(e,a,{hash:{}}):i===te?ee.call(e,"intl",a,{hash:{}}):i,r+=ne(a)+'</div>\n  <div class="switch ',J=n.phoneEnabled,a=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"phoneEnabled"),i=n["if"],Z=X.program(46,C,t),Z.hash={},Z.fn=Z,Z.inverse=X.program(48,B,t),a=i.call(e,a,Z),(a||0===a)&&(r+=a),r+='" data-feature="phone" ',J=n.phoneEnabled,a=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"phoneEnabled"),i=n.unless,Z=X.program(50,S,t),Z.hash={},Z.fn=Z,Z.inverse=X.noop,a=i.call(e,a,Z),(a||0===a)&&(r+=a),r+='>\n    <div class="knob"></div>\n  </div>\n  ',J=n.has_masked_phones,a=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"has_masked_phones"),i=n["if"],Z=X.program(52,P,t),Z.hash={},Z.fn=Z,Z.inverse=X.noop,a=i.call(e,a,Z),(a||0===a)&&(r+=a),r+="\n</div>\n",J=n.accountsEnabled,a=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"accountsEnabled"),i=n["if"],Z=X.program(54,x,t),Z.hash={},Z.fn=Z,Z.inverse=X.noop,a=i.call(e,a,Z),(a||0===a)&&(r+=a),r+="\n"}function p(e,t){var a,i;return J=n.email,a=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),i=n["if"],Z=X.program(16,u,t),Z.hash={},Z.fn=Z,Z.inverse=X.noop,a=i.call(e,a,Z),a||0===a?a:""}function u(){return"off"}function _(){return"disabled"}function g(){return"on"}function f(){return"off"}function b(){return"data-blacklisted=1"}function y(e){var t,a,i="";return i+='\n    <div class="skip link viewMaskedEmails">',t="mm_dntme_view_maskmed_email",J=n.intl,a=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===Q?a.call(e,t,{hash:{}}):a===te?ee.call(e,"intl",t,{hash:{}}):a,i+=ne(t)+"</div>\n  "}function v(e,t){var a,i;return J=n.cardEnabled,a=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"cardEnabled"),i=n.unless,Z=X.program(29,k,t),Z.hash={},Z.fn=Z,Z.inverse=X.noop,a=i.call(e,a,Z),a||0===a?a:""}function k(){return"off"}function w(){return"disabled"}function E(){return"on"}function A(){return"off"}function N(){return"data-blacklisted=1"}function T(e){var t,a,i="";return i+='\n      <div class="skip link viewMaskedCards">',t="mm_dntme_view_maskmed_card",J=n.intl,a=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===Q?a.call(e,t,{hash:{}}):a===te?ee.call(e,"intl",t,{hash:{}}):a,i+=ne(t)+"</div>\n  "}function D(e,t){var a,i;return J=n.phoneEnabled,a=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"phoneEnabled"),i=n.unless,Z=X.program(42,M,t),Z.hash={},Z.fn=Z,Z.inverse=X.noop,a=i.call(e,a,Z),a||0===a?a:""}function M(){return"off"}function I(){return"disabled"}function C(){return"on"}function B(){return"off"}function S(){return"data-blacklisted=1"}function P(e){var t,a,i="";return i+='\n    <div class="skip link viewMaskedPhones">',t="mm_dntme_view_maskmed_phone",J=n.intl,a=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===Q?a.call(e,t,{hash:{}}):a===te?ee.call(e,"intl",t,{hash:{}}):a,i+=ne(t)+"</div>\n  "}function x(e,t){var a,i,r="";return r+='\n<div class="clearfix feature ',J=n.globalPassword,a=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalPassword"),i=n["if"],Z=X.program(55,z,t),Z.hash={},Z.fn=Z,Z.inverse=X.noop,a=i.call(e,a,Z),(a||0===a)&&(r+=a),r+=" ",J=n.globalPassword,a=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalPassword"),i=n.unless,Z=X.program(58,O,t),Z.hash={},Z.fn=Z,Z.inverse=X.noop,a=i.call(e,a,Z),(a||0===a)&&(r+=a),r+='">\n  <div class="message">',a="mm_dntme_dont_track_passwords_here",J=n.intl,i=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===Q?i.call(e,a,{hash:{}}):i===te?ee.call(e,"intl",a,{hash:{}}):i,r+=ne(a)+'</div>\n  <div class="message messageHover">',a="mm_dntme_disabled_in_settings",J=n.intl,i=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===Q?i.call(e,a,{hash:{}}):i===te?ee.call(e,"intl",a,{hash:{}}):i,r+=ne(a)+'</div>\n  <div class="switch ',J=n.passwordsEnabled,a=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"passwordsEnabled"),i=n["if"],Z=X.program(60,q,t),Z.hash={},Z.fn=Z,Z.inverse=X.program(62,j,t),a=i.call(e,a,Z),(a||0===a)&&(r+=a),r+='" data-feature="password" ',J=n.passwordsEnabled,a=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"passwordsEnabled"),i=n.unless,Z=X.program(64,R,t),Z.hash={},Z.fn=Z,Z.inverse=X.noop,a=i.call(e,a,Z),(a||0===a)&&(r+=a),r+='>\n    <div class="knob"></div>\n  </div>\n    <div class="skip link viewAccounts">',a="mm_dntme_view_maskmed_passwords",J=n.intl,i=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===Q?i.call(e,a,{hash:{}}):i===te?ee.call(e,"intl",a,{hash:{}}):i,r+=ne(a)+'</div>\n</div>\n<div class="clearfix feature ',J=n.globalLogin,a=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalLogin"),i=n["if"],Z=X.program(66,U,t),Z.hash={},Z.fn=Z,Z.inverse=X.noop,a=i.call(e,a,Z),(a||0===a)&&(r+=a),r+=" ",J=n.globalLogin,a=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalLogin"),i=n.unless,Z=X.program(69,L,t),Z.hash={},Z.fn=Z,Z.inverse=X.noop,a=i.call(e,a,Z),(a||0===a)&&(r+=a),r+='">\n  <div class="message">',a="mm_dntme_dont_track_logins_here",J=n.intl,i=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===Q?i.call(e,a,{hash:{}}):i===te?ee.call(e,"intl",a,{hash:{}}):i,r+=ne(a)+'</div>\n  <div class="message messageHover">',a="mm_dntme_disabled_in_settings",J=n.intl,i=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===Q?i.call(e,a,{hash:{}}):i===te?ee.call(e,"intl",a,{hash:{}}):i,r+=ne(a)+'</div>\n  <div class="switch ',J=n.loginsEnabled,a=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"loginsEnabled"),i=n["if"],Z=X.program(71,V,t),Z.hash={},Z.fn=Z,Z.inverse=X.program(73,W,t),a=i.call(e,a,Z),(a||0===a)&&(r+=a),r+='" data-feature="login" ',J=n.loginsEnabled,a=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"loginsEnabled"),i=n.unless,Z=X.program(75,$,t),Z.hash={},Z.fn=Z,Z.inverse=X.noop,a=i.call(e,a,Z),(a||0===a)&&(r+=a),r+='>\n    <div class="knob"></div>\n  </div>\n    <div class="skip link viewAccounts">',a="mm_dntme_view_maskmed_logins",J=n.intl,i=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===Q?i.call(e,a,{hash:{}}):i===te?ee.call(e,"intl",a,{hash:{}}):i,r+=ne(a)+"</div>\n</div>\n"}function z(e,t){var a,i;return J=n.passwordsEnabled,a=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"passwordsEnabled"),i=n.unless,Z=X.program(56,H,t),Z.hash={},Z.fn=Z,Z.inverse=X.noop,a=i.call(e,a,Z),a||0===a?a:""}function H(){return"off"}function O(){return"disabled"}function q(){return"on"}function j(){return"off"}function R(){return"data-blacklisted=1"}function U(e,t){var a,i;return J=n.loginsEnabled,a=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"loginsEnabled"),i=n.unless,Z=X.program(67,F,t),Z.hash={},Z.fn=Z,Z.inverse=X.noop,a=i.call(e,a,Z),a||0===a?a:""}function F(){return"off"}function L(){return"disabled"}function V(){return"on"}function W(){return"off"}function $(){return"data-blacklisted=1"}n=n||e.helpers;var G,K,J,Z,Y="",X=this,Q="function",ee=n.helperMissing,te=void 0,ne=this.escapeExpression;return Y+='<div class="clearfix feature ',J=n.tracker,G=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"tracker"),K=n["if"],Z=X.program(1,r,i),Z.hash={},Z.fn=Z,Z.inverse=X.noop,G=K.call(t,G,Z),(G||0===G)&&(Y+=G),Y+='">\n  <div class="message">',G="mm_dntme_dont_track_browsing_here",J=n.intl,K=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),G=typeof K===Q?K.call(t,G,{hash:{}}):K===te?ee.call(t,"intl",G,{hash:{}}):K,Y+=ne(G)+'</div>\n  <div class="switch ',J=n.tracker,G=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"tracker"),K=n["if"],Z=X.program(3,s,i),Z.hash={},Z.fn=Z,Z.inverse=X.program(5,o,i),G=K.call(t,G,Z),(G||0===G)&&(Y+=G),Y+='" data-feature="tracker" ',J=n.tracker,G=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"tracker"),K=n["if"],Z=X.program(7,l,i),Z.hash={},Z.fn=Z,Z.inverse=X.noop,G=K.call(t,G,Z),(G||0===G)&&(Y+=G),Y+='>\n    <div class="knob"></div>\n  </div>\n  ',J=n.suggestedAllow,G=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"suggestedAllow"),K=n["if"],Z=X.program(9,d,i),Z.hash={},Z.fn=Z,Z.inverse=X.noop,G=K.call(t,G,Z),(G||0===G)&&(Y+=G),Y+="\n</div>\n",J=n.maskmeInstalled,G=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"maskmeInstalled"),K=n.unless,Z=X.program(14,h,i),Z.hash={},Z.fn=Z,Z.inverse=X.noop,G=K.call(t,G,Z),(G||0===G)&&(Y+=G),Y}),ABINE_DNTME.CompiledTemplates.dntme_page_blacklist}),ABINE_DNTME.define("abine/views/pageBlacklist",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies"],function(e,t,n,a,i,r,s){var o=n.View.extend({tagName:"div",templateName:"dntme_page_blacklist",events:{"click .viewMaskedEmails":"viewMaskedEmails","click .viewMaskedPhones":"viewMaskedPhones","click .viewMaskedCards":"viewMaskedCards","click .viewAccounts":"viewAccounts","click .feature":"toggleSwitch","click .suggested":"openSuggested"},viewAccounts:function(e){s.webapp.openAccounts(),e.preventDefault(),this.trigger("close")},viewMaskedEmails:function(e){s.webapp.openEmails(),e.preventDefault(),this.trigger("close")},viewMaskedPhones:function(e){s.webapp.openPhones(),e.preventDefault(),this.trigger("close")},viewMaskedCards:function(e){s.webapp.openCards(),e.preventDefault(),this.trigger("close")},openSuggested:function(e){e.preventDefault(),s.securityManager.openLink({type:"recommended",host:this.model.get("host")})},toggleSwitch:function(n){var a=t(n.target);if(!a.hasClass("skip")&&(a.hasClass("feature")||(a=t(n.target).parents(".feature")),!a.hasClass("disabled"))){var i=t(".switch",a),r={},s=i.data("feature");r.changed=s,r[s]=!i.data("blacklisted"),t(i).data("changing")||(t(i).data("changing",!0),t(".knob",i).animate({marginLeft:r[s]?0:20},e.bind(function(){t(i).removeData("changing"),this.model.save(r),this.trigger("featureToggled",s)},this)))}},afterInitialize:function(){this.doc=this.el.ownerDocument}});return o}),ABINE_DNTME.define("abine/views/cardAlert",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer"],function(e,t,n){var a=n.View.extend({events:{"click #card-alert-got-it":"cardAlertClose","click .section-header":"toggleSection"},tagName:"div",templateName:"dntme_page_card_alert_panel",cardAlertClose:function(){this.trigger("got-it")},afterInitialize:function(){this.doc=this.el.ownerDocument,this.panelId=this.model.get("showFreeCard")?4000006:4000005,this.model.trackers.on("changed",e.bind(function(){this.children.trackersTitle.render(),this.trigger("trackerToggled")},this))},beforeRemove:function(){this.model.trackers.off("changed")},autoResize:function(){this.trigger("resize")},toggleSection:function(n,a){if(n&&n.preventDefault(),this.$("#got-it-div").hide(),this.options.compact)return void this.trigger("show-trackers");if(!this.model.get("disabled")&&this.model.trackers.length>0){var i=this.$(".section-header").parent(".section");i.toggleClass("off").toggleClass("on"),this.trigger("max-height");var r=t(".section-content",i),s=e.bind(this.autoResize,this);a?(r.show(),s()):i.hasClass("on")?r.slideDown("fast",s):r.slideUp("fast",s)}},isOpen:function(){return!this.$(".section-header").parent(".section").hasClass("off")},createChildren:function(){return{trackersTitle:new i({model:this.model,doc:this.el.ownerDocument})}}}),i=n.View.extend({tagName:"span",templateName:"dntme_page_card_alert_panel_title",afterInitialize:function(){this.doc=this.el.ownerDocument}});return a}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_card_alert_panel=e.template(function(e,t,n,a,i){function r(e,t){var a,i,r="";return r+='\n<!-- start card money card alert panel -->\n  <div class="section off others clearfix">\n    <div class="section-header clearfix ',_=n.disabled,a=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"disabled"),i=n["if"],g=f.program(2,s,t),g.hash={},g.fn=g,g.inverse=f.program(4,o,t),a=i.call(e,a,g),(a||0===a)&&(r+=a),r+='">\n      ',a="trackersTitle",_=n.child,i=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),a=typeof i===b?i.call(e,a,{hash:{}}):i===v?y.call(e,"child",a,{hash:{}}):i,r+=k(a)+'\n    </div>\n    <div style="margin: 5px 15px;">\n      <div style="font-weight:bold;vertical-align:middle;display:inline-block;width:100px;">',a="mm_dntme_card_alert_panelEarned",_=n.intl,i=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===b?i.call(e,a,{hash:{}}):i===v?y.call(e,"intl",a,{hash:{}}):i,r+=k(a)+'</div>\n      <div style="display:inline-block;vertical-align:middle;width:50px;"><img src="',a="pages/images/card-lock.png",_=n.assetUrl,i=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),a=typeof i===b?i.call(e,a,{hash:{}}):i===v?y.call(e,"assetUrl",a,{hash:{}}):i,r+=k(a)+'"/></div>\n      <div style="margin-top:10px;">',a="mm_dntme_card_alert_panelProtectWith",_=n.intl,i=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===b?i.call(e,a,{hash:{}}):i===v?y.call(e,"intl",a,{hash:{}}):i,r+=k(a)+'</div>\n      <div style="margin-top:10px;">',a="mm_dntme_card_alert_panelRedeemYourCard",_=n.intl,i=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===b?i.call(e,a,{hash:{}}):i===v?y.call(e,"intl",a,{hash:{}}):i,r+=k(a)+'</div>\n    </div>\n    <div id="got-it-div" style="text-align:center;margin-bottom:10px;"><input type="button" id="card-alert-got-it" class="btn btn-primary" value=\'',a="mm_dntme_card_alert_panelGotIt",_=n.intl,i=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===b?i.call(e,a,{hash:{}}):i===v?y.call(e,"intl",a,{hash:{}}):i,r+=k(a)+"'/></div>\n  </div>\n"}function s(){return"disabled"}function o(e,t){var a,i,r="";return r+=" ",_=n.trackers,a=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),a=null===a||void 0===a||a===!1?a:ABINE_DNTME.Duckbone.Handlebars.getAttr(a,"length"),i=n.unless,g=f.program(5,l,t),g.hash={},g.fn=g,g.inverse=f.noop,a=i.call(e,a,g),(a||0===a)&&(r+=a),r}function l(){return"no-trackers"}function d(e,t){var a,i,r="";return r+='\n<!-- start premium card alert panel -->\n <div class="section off others clearfix">\n    <div class="section-header clearfix ',_=n.disabled,a=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"disabled"),i=n["if"],g=f.program(8,c,t),g.hash={},g.fn=g,g.inverse=f.program(10,m,t),a=i.call(e,a,g),(a||0===a)&&(r+=a),r+='">\n      ',a="trackersTitle",_=n.child,i=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),a=typeof i===b?i.call(e,a,{hash:{}}):i===v?y.call(e,"child",a,{hash:{}}):i,r+=k(a)+'\n    </div>\n    <div style="margin: 5px 15px;">\n      <div style="font-size:12pt;">',a="mm_dntme_card_alert_panelAtRisk",_=n.intl,i=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===b?i.call(e,a,{hash:{}}):i===v?y.call(e,"intl",a,{hash:{}}):i,r+=k(a)+'</div>\n      <div style="margin-top:10px;">',a="mm_dntme_card_alert_panelUseMask",_=n.intl,i=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===b?i.call(e,a,{hash:{}}):i===v?y.call(e,"intl",a,{hash:{}}):i,r+=k(a)+'</div>\n    </div>\n    <div id="got-it-div" style="text-align:center;margin-bottom:10px;"><input type="button" id="card-alert-got-it" class="btn btn-primary" value=\'',a="mm_dntme_card_alert_panelGotIt",_=n.intl,i=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===b?i.call(e,a,{hash:{}}):i===v?y.call(e,"intl",a,{hash:{}}):i,r+=k(a)+"'/></div>\n  </div>\n<!-- end premium card alert panel -->\n"}function c(){return"disabled"}function m(e,t){var a,i,r="";return r+=" ",_=n.trackers,a=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),a=null===a||void 0===a||a===!1?a:ABINE_DNTME.Duckbone.Handlebars.getAttr(a,"length"),i=n.unless,g=f.program(11,h,t),g.hash={},g.fn=g,g.inverse=f.noop,a=i.call(e,a,g),(a||0===a)&&(r+=a),r}function h(){return"no-trackers"}n=n||e.helpers;var p,u,_,g,f=this,b="function",y=n.helperMissing,v=void 0,k=this.escapeExpression;return _=n.showFreeCard,p=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"showFreeCard"),u=n["if"],g=f.program(1,r,i),g.hash={},g.fn=g,g.inverse=f.program(7,d,i),p=u.call(t,p,g),p||0===p?p:""}),ABINE_DNTME.CompiledTemplates.dntme_page_card_alert_panel;
}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_card_alert_panel_title=e.template(function(e,t,n,a,i){function r(e,t){var a,i,r="";return r+="\n  ",c=n.disabled,a=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"disabled"),i=n.unless,m=p.program(2,s,t),m.hash={},m.fn=m,m.inverse=p.noop,a=i.call(e,a,m),(a||0===a)&&(r+=a),r+="\n"}function s(e,t){var a,i,r="";return r+="\n    ",c=n.trackers,a=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),a=null===a||void 0===a||a===!1?a:ABINE_DNTME.Duckbone.Handlebars.getAttr(a,"length"),i=n["if"],m=p.program(3,o,t),m.hash={},m.fn=m,m.inverse=p.noop,a=i.call(e,a,m),(a||0===a)&&(r+=a),r+="\n  "}function o(e){var t,a,i="";return i+='\n      <div class="right-section">\n        <img class="arrow-open" src="',t="pages/images/dnt-ui-drawer-arrow-closed.png",c=n.assetUrl,a=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===u?a.call(e,t,{hash:{}}):a===g?_.call(e,"assetUrl",t,{hash:{}}):a,i+=f(t)+'" />\n        <img class="arrow-close" src="',t="pages/images/dnt-ui-drawer-arrow-open.png",c=n.assetUrl,a=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===u?a.call(e,t,{hash:{}}):a===g?_.call(e,"assetUrl",t,{hash:{}}):a,i+=f(t)+'" />\n      </div>\n    '}n=n||e.helpers;var l,d,c,m,h="",p=this,u="function",_=n.helperMissing,g=void 0,f=this.escapeExpression;return h+='<div class="left-section">\n  <div class="count">!!</div>\n  <div class="message">\n    <div class="blocked">',l="mm_dntme_card_alert_panel_MaskedCard",c=n.intl,d=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof d===u?d.call(t,l,{hash:{}}):d===g?_.call(t,"intl",l,{hash:{}}):d,h+=f(l)+'</div>\n    <div class="host" title="',c=n.host,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"host"),typeof l===u?l=l.call(t,{hash:{}}):l===g&&(l=_.call(t,"host",{hash:{}})),h+=f(l)+'">',l="mm_dntme_at",c=n.intl,d=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof d===u?d.call(t,l,{hash:{}}):d===g?_.call(t,"intl",l,{hash:{}}):d,h+=f(l)+" ",c=n.host,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"host"),typeof l===u?l=l.call(t,{hash:{}}):l===g&&(l=_.call(t,"host",{hash:{}})),h+=f(l)+"</div>\n  </div>\n</div>\n\n",c=n.compact,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"compact"),d=n.unless,m=p.program(1,r,i),m.hash={},m.fn=m,m.inverse=p.noop,l=d.call(t,l,m),(l||0===l)&&(h+=l),h+="\n"}),ABINE_DNTME.CompiledTemplates.dntme_page_card_alert_panel_title}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_compact=e.template(function(e,t,n){n=n||e.helpers;var a,i,r,s="",o="function",l=n.helperMissing,d=void 0,c=this.escapeExpression;return s+='<div class="page clearfix">\n  ',a="contentSection",r=n.child,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"child",a,{hash:{}}):i,s+=c(a)+"\n  ",a="dntStats",r=n.child,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),a=typeof i===o?i.call(t,a,{hash:{}}):i===d?l.call(t,"child",a,{hash:{}}):i,s+=c(a)+"\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_page_compact}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_dnt_stats=e.template(function(e,t,n,a,i){function r(e,t){var a,i,r="";return r+='\n        <div class="total-trackers ',I=n.totalGreaterThan10000,a=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"totalGreaterThan10000"),i=n["if"],C=S.program(2,s,t),C.hash={},C.fn=C,C.inverse=S.noop,a=i.call(e,a,C),(a||0===a)&&(r+=a),r+='">\n\t\t\t\t\t',I=n.formattedTotal,a=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"formattedTotal"),typeof a===P?a=a.call(e,{hash:{}}):a===z&&(a=x.call(e,"formattedTotal",{hash:{}})),r+=H(a)+'\n\t\t\t\t</div>\n\t\t\t\t<div class="trackers-blocked">\n\t\t\t\t\t<span>\n            <a href=# class="understandingTrackers">',a="mm_dntme_dnt_stats_trackers",I=n.intl,i=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===P?i.call(e,a,{hash:{}}):i===z?x.call(e,"intl",a,{hash:{}}):i,r+=H(a)+"</a>\n                        ",a="mm_dntme_dnt_stats_blocked",I=n.intl,i=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===P?i.call(e,a,{hash:{}}):i===z?x.call(e,"intl",a,{hash:{}}):i,r+=H(a)+"\n          </span><br />",a="mm_dntme_since",I=n.intl,i=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===P?i.call(e,a,{hash:{}}):i===z?x.call(e,"intl",a,{hash:{}}):i,r+=H(a)+" <span class='date'>Feb' 12</span>\n\t\t\t\t</div>\n\t\t\t"}function s(e,t){var a,i;return I=n.totalGreaterThan1000000,a=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"totalGreaterThan1000000"),i=n["if"],C=S.program(3,o,t),C.hash={},C.fn=C,C.inverse=S.program(5,l,t),a=i.call(e,a,C),a||0===a?a:""}function o(){return"tiny"}function l(){return"small"}function d(e,t){var a,i,r="";return r+="\n\t\t\t\t",I=n.totalGreaterThan10000,a=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"totalGreaterThan10000"),i=n["if"],C=S.program(8,c,t),C.hash={},C.fn=C,C.inverse=S.program(10,m,t),a=i.call(e,a,C),(a||0===a)&&(r+=a),r+="\n\t\t\t"}function c(e){var t,a,i="";return i+="\n\t\t\t\t\t",t="mm_dntme_alltime_blocked_small_1",I=n.intl,a=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===P?a.call(e,t,{hash:{}}):a===z?x.call(e,"intl",t,{hash:{}}):a,i+=H(t)+" <b>",I=n.formattedTotal,t=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"formattedTotal"),typeof t===P?t=t.call(e,{hash:{}}):t===z&&(t=x.call(e,"formattedTotal",{hash:{}})),i+=H(t)+"</b> ",t="mm_dntme_alltime_blocked_small_2",I=n.intl,a=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===P?a.call(e,t,{hash:{}}):a===z?x.call(e,"intl",t,{hash:{}}):a,i+=H(t)+"\n\t\t\t\t"}function m(e){var t,a,i="";return i+="\n\t\t\t\t\t",t="mm_dntme_alltime_blocked_1",I=n.intl,a=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===P?a.call(e,t,{hash:{}}):a===z?x.call(e,"intl",t,{hash:{}}):a,i+=H(t)+" <b>",I=n.formattedTotal,t=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"formattedTotal"),typeof t===P?t=t.call(e,{hash:{}}):t===z&&(t=x.call(e,"formattedTotal",{hash:{}})),i+=H(t)+"</b> ",t="mm_dntme_alltime_blocked_2",I=n.intl,a=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===P?a.call(e,t,{hash:{}}):a===z?x.call(e,"intl",t,{hash:{}}):a,i+=H(t)+"\n\t\t\t\t"}function h(e,t){var a,i,r="";return r+='\n  <div id="chartArea" class="clearfix medals-expanded-wrapper" style="display:none;">\n  ',I=n.showMedals,a=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"showMedals"),i=n["if"],C=S.program(13,p,t),C.hash={},C.fn=C,C.inverse=S.program(38,T,t),a=i.call(e,a,C),(a||0===a)&&(r+=a),r+="\n  </div>\n "}function p(e,t){var a,i,r="";return r+='\n\t\t<div class="medals-sanity-check">\n\t\t\t<div class="medals-display">\n\t\t\t\t<ul class="medals-list">\n\t\t\t\t\t<li class="bronze medal ',I=n.achievedBronze,a=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"achievedBronze"),i=n["if"],C=S.program(14,u,t),C.hash={},C.fn=C,C.inverse=S.noop,a=i.call(e,a,C),(a||0===a)&&(r+=a),r+='">\n\t\t\t\t\t\t<span class="medal-graphic"></span><br />\n\t\t\t\t\t\t<span class="medal-count">',I=n.achievedBronze,a=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"achievedBronze"),i=n["if"],C=S.program(16,_,t),C.hash={},C.fn=C,C.inverse=S.program(18,g,t),a=i.call(e,a,C),(a||0===a)&&(r+=a),r+='</span>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class="silver medal ',I=n.achievedSilver,a=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"achievedSilver"),i=n["if"],C=S.program(20,f,t),C.hash={},C.fn=C,C.inverse=S.noop,a=i.call(e,a,C),(a||0===a)&&(r+=a),r+='">\n\t\t\t\t\t\t<span class="medal-graphic"></span><br />\n\t\t\t\t\t\t<span class="medal-count">',I=n.achievedSilver,a=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"achievedSilver"),i=n["if"],C=S.program(22,b,t),C.hash={},C.fn=C,C.inverse=S.program(24,y,t),a=i.call(e,a,C),(a||0===a)&&(r+=a),r+='</span>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class="gold medal ',I=n.achievedGold,a=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"achievedGold"),i=n["if"],C=S.program(26,v,t),C.hash={},C.fn=C,C.inverse=S.noop,a=i.call(e,a,C),(a||0===a)&&(r+=a),r+='">\n\t\t\t\t\t\t<span class="medal-graphic"></span><br />\n\t\t\t\t\t\t<span class="medal-count">',I=n.achievedGold,a=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"achievedGold"),i=n["if"],C=S.program(28,k,t),C.hash={},C.fn=C,C.inverse=S.program(30,w,t),a=i.call(e,a,C),(a||0===a)&&(r+=a),r+='</span>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class="platinum medal ',I=n.achievedPlatinum,a=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"achievedPlatinum"),i=n["if"],C=S.program(32,E,t),C.hash={},C.fn=C,C.inverse=S.noop,a=i.call(e,a,C),(a||0===a)&&(r+=a),r+='">\n\t\t\t\t\t\t<span class="medal-graphic"></span><br />\n\t\t\t\t\t\t<span class="medal-count">',I=n.achievedPlatinum,a=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"achievedPlatinum"),i=n["if"],C=S.program(34,A,t),C.hash={},C.fn=C,C.inverse=S.program(36,N,t),a=i.call(e,a,C),(a||0===a)&&(r+=a),r+='</span>\n\t\t\t\t\t</li>\n\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div class="more-stats">\n\t\t\t\t<p>',a="mm_dntme_dnt_stats_only",I=n.intl,i=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===P?i.call(e,a,{hash:{}}):i===z?x.call(e,"intl",a,{hash:{}}):i,r+=H(a)+'<span id="nextMedalAt">',I=n.nextMedalAtFormatted,a=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"nextMedalAtFormatted"),typeof a===P?a=a.call(e,{hash:{}}):a===z&&(a=x.call(e,"nextMedalAtFormatted",{hash:{}})),r+=H(a)+"</span> ",a="mm_dntme_dnt_stats_moreUntil",I=n.intl,i=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===P?i.call(e,a,{hash:{}}):i===z?x.call(e,"intl",a,{hash:{}}):i,r+=H(a)+'</p>\n\t\t\t\t<a class="see-stats-btn" href="#">',a="mm_dntme_dnt_stats_seeAll",I=n.intl,i=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===P?i.call(e,a,{hash:{}}):i===z?x.call(e,"intl",a,{hash:{}}):i,r+=H(a)+"</a>\n\t\t\t</div>\n\t\t</div>\n  "}function u(){return"achieved"}function _(){return"&#10003;"}function g(){return"X"}function f(){return"achieved"}function b(){return"&#10003;"}function y(){return"X"}function v(){return"achieved"}function k(){return"&#10003;"}function w(){return"X"}function E(){return"achieved"}function A(e){var t;return I=n.getPlatinumCount,t=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getPlatinumCount"),typeof t===P?t=t.call(e,{hash:{}}):t===z&&(t=x.call(e,"getPlatinumCount",{hash:{}})),H(t)}function N(){return"X"}function T(e){var t,a,i="";return i+='\n      <a class="see-stats-btn" href="#" style="width:120px;margin:5px auto;">',t="mm_dntme_dnt_stats_seeAll",I=n.intl,a=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===P?a.call(e,t,{hash:{}}):a===z?x.call(e,"intl",t,{hash:{}}):a,i+=H(t)+"</a>\n  "}n=n||e.helpers;var D,M,I,C,B="",S=this,P="function",x=n.helperMissing,z=void 0,H=this.escapeExpression;return B+='<div id="DNTPNewBadge" class="clearfix" style="display: none;">\n\t<div class="close-badge"></div>\n\t\t<span class="halfBadge">\n\t\t\t<div class="badgeText badgeIconSmall badge',I=n.getBadgeType,D=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getBadgeType"),typeof D===P?D=D.call(t,{hash:{}}):D===z&&(D=x.call(t,"getBadgeType",{hash:{}})),B+=H(D)+'Img"></div>\n\t\t\t<div class="badgeCongratsNormal">\n\t\t\t\t<div class="blueText congrats">',D="mm_dntme_congrats",I=n.intl,M=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),D=typeof M===P?M.call(t,D,{hash:{}}):M===z?x.call(t,"intl",D,{hash:{}}):M,B+=H(D)+'</div>\n\t\t\t\t<div>\n\t\t\t\t\t<span class="darkText blocked-over">',D="mm_dntme_youve_blocked_over",I=n.intl,M=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),D=typeof M===P?M.call(t,D,{hash:{}}):M===z?x.call(t,"intl",D,{hash:{}}):M,B+=H(D)+'</span>\n\t\t\t\t\t<div class="blueText number-trackers">',I=n.getBadgeCount,D=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getBadgeCount"),typeof D===P?D=D.call(t,{hash:{}}):D===z&&(D=x.call(t,"getBadgeCount",{hash:{}})),B+=H(D)+" ",D="mm_dntme_trackers",I=n.intl,M=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),D=typeof M===P?M.call(t,D,{hash:{}}):M===z?x.call(t,"intl",D,{hash:{}}):M,B+=H(D)+'</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</span>\n</div>\n<div id="viewDetailedStats" class="open clearfix">\n\t\t<div class="allTimeTotal clearfix">\n\t\t\t',I=n.compact,D=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"compact"),M=n.unless,C=S.program(1,r,i),C.hash={},C.fn=C,C.inverse=S.program(7,d,i),D=M.call(t,D,C),(D||0===D)&&(B+=D),B+="\n\t\t</div>\n</div>\n",I=n.compact,D=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"compact"),M=n.unless,C=S.program(12,h,i),C.hash={},C.fn=C,C.inverse=S.noop,D=M.call(t,D,C),(D||0===D)&&(B+=D),B}),ABINE_DNTME.CompiledTemplates.dntme_page_dnt_stats}),ABINE_DNTME.define("abine/views/dntmeStats",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies"],function(e,t,n,a,i,r,s){var o=n.View.extend({tagName:"div",templateName:"dntme_page_dnt_stats",className:"dntme_dntStats",events:{"click #viewDetailedStats":"viewDetailedStats","click .allTimeTotal .blue":"viewDetailedStats","click .cash-for-cards-webapp-signup":"openCashForCardsSignup","click .see-stats-btn":"openStatsPage","click .understandingTrackers":"openUnderstandingTrackers","click .medals-display":"reshowLastMedal"},afterInitialize:function(){this.model.sync("read",this,{eventName:"read:dntStats:getBadgeData",success:function(e){this.model.bronzeLimit=e.totalBlocked.levels[0].limit,this.model.silverLimit=e.totalBlocked.levels[1].limit,this.model.goldLimit=e.totalBlocked.levels[2].limit,this.model.platinumLimit=e.totalBlocked.levels[3].limit,this.render()},error:function(){ABINE_DNTME.log.error("[ERROR HANDLER]#[abine/models/dntStats]#[getBadgeData]# error event in model.sync event: read:dntStats:getBadgeData")}})},openUnderstandingTrackers:function(e){e.preventDefault(),this.trigger("open:understanding:tracker")},reshowLastMedal:function(e){e.preventDefault(),this.model.achievedBronze()&&(t("#DNTPNewBadge",this.el).slideDown(),this.hideChart())},openCashForCardsSignup:function(e){this.model.toggleViewedBadge(),s.webapp.openCashForCardsSignup(),e.preventDefault(),this.trigger("close")},hideChart:function(){var t=e.bind(function(){this.trigger("resize")},this);this.$("#chartArea").slideUp(t),this.$("#viewDetailedStats").removeClass("open")},showChart:function(){this.trigger("max-height");var t=e.bind(function(){this.trigger("resize")},this);this.$("#chartArea").slideDown(t),this.$("#viewDetailedStats").addClass("open")},viewDetailedStats:function(e){e.preventDefault(),this.$("#viewDetailedStats").hasClass("open")?this.hideChart():this.showChart()},openStatsPage:function(e){return e.preventDefault(),s.webapp.openStats(),this.trigger("close"),!1}});return o}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_main=e.template(function(e,t,n,a,i){function r(e,t){var a,i,r="";return r+='\n    <div class="dynamicPanels">\n      ',c=n.panelSections,a=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"panelSections"),i=n.each,m=p.program(2,s,t),m.hash={},m.fn=m,m.inverse=p.noop,a=i.call(e,a,m),(a||0===a)&&(r+=a),r+="\n    </div>\n  "}function s(e,t){var a,i,r="";return r+='\n        <div id="',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof a===u?a=a.call(e,{hash:{}}):a===g&&(a=_.call(e,"this.id",{hash:{}})),r+=f(a)+'" ',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"height"),i=n["if"],m=p.program(3,o,t),m.hash={},m.fn=m,m.inverse=p.noop,a=i.call(e,a,m),(a||0===a)&&(r+=a),r+=' class="panelSection ',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"class_name"),typeof a===u?a=a.call(e,{hash:{}}):a===g&&(a=_.call(e,"this.class_name",{hash:{}})),r+=f(a)+'">\n          ',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"body"),typeof a===u?a=a.call(e,{hash:{}}):a===g&&(a=_.call(e,"this.body",{hash:{}})),(a||0===a)&&(r+=a),r+="\n        </div>\n      "}function o(e){var t,n="";return n+='style="height:',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"height"),typeof t===u?t=t.call(e,{hash:{}}):t===g&&(t=_.call(e,"this.height",{hash:{}})),n+=f(t)+'"'}n=n||e.helpers;var l,d,c,m,h="",p=this,u="function",_=n.helperMissing,g=void 0,f=this.escapeExpression;return h+='<div class="page clearfix">\n  ',l="contentSection",c=n.child,d=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),l=typeof d===u?d.call(t,l,{hash:{}}):d===g?_.call(t,"child",l,{hash:{}}):d,h+=f(l)+"\n  ",l="dntStats",c=n.child,d=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),l=typeof d===u?d.call(t,l,{hash:{}}):d===g?_.call(t,"child",l,{hash:{}}):d,h+=f(l)+"\n  ",c=n.dynamicPanel,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"dynamicPanel"),d=n["if"],m=p.program(1,r,i),m.hash={},m.fn=m,m.inverse=p.noop,l=d.call(t,l,m),(l||0===l)&&(h+=l),h+="\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_page_main}),ABINE_DNTME.define("abine/views/dntmePage",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/intl","abine/views/dntmeStats","abine/views/cardAlert","abine/views/pageTracker","abine/views/dashboard","abine/views/trackingDashboard","abine/views/settingsDashboard","abine/views/loginHelp"],function(e,t,n,a,i,r,s,o,l,d,c,m,h,p,u){var _=n.View.extend({templateName:"dntme_empty"}),g=i.extend({events:{"click .panelSection":"performActions","click .close-badge":"toggleBadge"},templateName:"dntme_page_main",className:"dntme_page",toggleBadge:function(){return this.options.compact?(this.model.dntStats.toggleViewedBadge(),this.trigger("show-trackers"),void this.options.messenger.send("update:panelActivity:closed",{panelId:8000005})):(t("#chartArea",this.el).slideDown("fast"),t("#DNTPNewBadge",this.el).slideUp(),this.trigger("max-height"),void(this.model.get("premium")?this.options.messenger.send("update:panelActivity:closed",{panelId:8000004}):this.options.messenger.send("update:panelActivity:closed",{panelId:8000005})))},autoResize:function(){this.trigger("resize")},reload:function(){this.model.fetch({success:e.bind(this.render,this)})},refreshPanel:function(t){this.children&&this.children.contentSection&&!this.model.get("settingsChanged")&&this.model.trackers.length!=t.total&&this.model.fetch({success:e.bind(function(){var e=this.children.contentSection;if(this.children&&e&&e.trackerSection){var t=e.trackerSection.isOpen();e.trackerSection.render(),t&&e.trackerSection.toggleSection(null,!0),this.options.compact&&this.updateStats()}this.autoResize()},this)})},updateStats:function(){this.model.get("reloadRequired")||this.options.compact&&"medals"!=this.options.page&&!this.options.cardAlertPanel?"weekly-report"==this.options.page&&t(".dntme_dntStats",this.el).hide():(this.children.dntStats.render(),this.model.dntStats.showMedals()&&!this.model.dntStats.viewedBadge()?(t("#chartArea",this.el).hide(),t("#allTimeTotal",this.el).hide(),t("#DNTPNewBadge",this.el).show(),this.model.get("premium")?this.options.messenger.send("update:panelActivity:impression",{panelId:8000004}):this.options.messenger.send("update:panelActivity:impression",{panelId:8000005}),this.options.compact||this.model.dntStats.toggleViewedBadge()):(this.options.cardAlertPanel&&(this.model.get("showFreeCard")?this.options.messenger.send("update:panelActivity:impression",{panelId:4000006}):this.options.messenger.send("update:panelActivity:impression",{panelId:4000005})),t("#DNTPNewBadge",this.el).hide())),this.$("#chartArea").hide()},afterInitialize:function(){this.doc=this.el.ownerDocument,this.model=new a.TabData({messenger:this.options.messenger}),this.options.dynamicPanel&&(this.model.dynamicPanel=this.options.dynamicPanel,this.setupDynamicPanel(),this.model.panelSections=this.panelSections),this.options.compact&&(this.templateName="dntme_page_compact",this.model.compact=!0),this.weakBindTo(this.options.messenger,"background:dntme:tracker-count-changed",e.debounce(e.bind(this.refreshPanel,this),1e3)),this.on("render",e.bind(function(){this.model.trackers.messenger=this.options.messenger,this.model.blacklist.messenger=this.options.messenger,this.model.get("weeklyReport")&&t(".weeklyReport span",this.el.ownerDocument).text(this.model.get("weeklyReport")),this.model.get("maskmeInstalled")&&(this.options.compact||t(".footer",this.el.ownerDocument).hide()),this.options.compact&&t(".premium span.date",this.el.ownerDocument).text(this.model.get("installMonth")),this.updateStats(),this.trigger("resize"),t("div.allTimeTotal div.trackers-blocked span.date",this.el.ownerDocument).text(this.model.get("installMonth"))},this)),r.setTimeout(e.bind(function(){this.model.fetch({success:e.bind(function(){if(this.options.compact&&!this.options.page&&!this.options.cardAlertPanel){if(this.model.get("weeklyReport"))return void this.trigger("show-report");if(this.model.dntStats.canAutoShowBadge())return void this.trigger("show-medals")}this.render()},this)})},this),0)},showTrackers:function(){this.children.contentSection.toggleSection()},createChildren:function(){var t;this.options.highlight&&this.model.get("loggedIn")&&(this.model.showSettings=!0);var n={model:this.model,compact:this.options.compact,domain:this.options.domain,contentManager:this.options.contentManager,messenger:this.options.messenger,doc:this.el.ownerDocument,highlight:this.options.highlight,timeout:this.options.timeout,switchTo:this.options.switchTo};this.options.cardAlertPanel?(t=new d(n),t.on("close",e.bind(function(){this.options.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("close")},this)),t.on("got-it",e.bind(function(){this.options.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),this.trigger("close")},this))):t="dashboard"==this.options.page?new m(n):"login_help"==this.options.page?new u(n):this.options.compact?new c(n):new h(n),t.transferEvents(["resize","max-height","show-trackers","show-dashboard","mask-passwords","close","show-settings","refresh-preferences","open:understanding:tracker","ignore-blur"],this),t.on("change-dashboard",e.bind(function(e){this.options.page=e,this.reload()},this)),t.on("mask-passwords",e.bind(this.maskPasswords,this)),this.model.dntStats.compact=this.model.compact;var a=new l({model:this.model.dntStats,doc:this.el.ownerDocument});return a.transferEvents(["close","resize","max-height","open:understanding:tracker"],this),("login_help"==this.options.page||this.model.showSettings)&&(a=new _({model:{},doc:this.el.ownerDocument})),{contentSection:t,dntStats:a}}});return g}),ABINE_DNTME.define("abine/views/dntmePageBase",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/intl"],function(e,t,n,a,i,r,s,o){var l=n.View.extend({toggleSwitch:function(n){var i=t(n.target);if(!i.hasClass("skip")&&(i.hasClass("setting-row")||(i=t(n.target).parents(".setting-row")),!i.hasClass("disabled"))){var r=t(".switch",i);if(!t(r).data("changing")){var s={},l=i.data("type"),d=i.data("name");s.id=i.data("id")||this.model.blacklist.get("id"),s.domain=i.data("domain")||this.model.blacklist.get("domain"),s.type=l,s.name=d,s.value=!r.hasClass("blacklist"==l?"off":"on");var c,m=null;switch(d){case"identity":c=this.model.blacklist.get("globalIdentity"),m="suggestIdentities";break;case"real_card":c=this.model.blacklist.get("globalRealCard"),m="suggestRealCard";break;case"save_card":c=this.model.blacklist.get("globalSaveCard"),m="saveCard";break;case"password":c=this.model.blacklist.get("globalPassword"),m="suggestStrongPassword";break;case"account":c=this.model.blacklist.get("globalLogin"),m="helpMeLogin";break;case"submit_account":c=this.model.blacklist.get("globalSubmitAccount"),m="submitAccount";break;case"address":c=this.model.blacklist.get("globalAddress"),m="suggestAddresses";break;case"tracker":c=this.model.blacklist.get("globalTracker"),m="browsing";break;case"save_account":c=this.model.blacklist.get("globalAccounts"),m="rememberAccounts";break;default:c=this.model.blacklist.get("global"+d.charAt(0).toUpperCase()+d.slice(1)),m=d}if(0==s.value&&0==c&&!this.options.inline)return this.model.trigger("open-global-setting",{highlight:m}),void this.showSettingsSubPage("global-panel-settings",m);var h=s.value;"blacklist"==l&&(h=!h),t(r).data("changing",!0),t(".knob",r).animate({marginLeft:h?20:0},e.bind(function(){t(r).removeData("changing");var e=new a.BlacklistOrPreference;this.options.inline&&(s.suppressWebapp=!0),e.save(s),i.toggleClass("off"),r.toggleClass("off").toggleClass("on"),t(".message",i).removeAttr("data-original-title");var n=s.value?"on":"off";"browsing"==m?t(".message",i).attr("title",o.getText("mm_dntme_help_what_will_happen_"+n+"_"+m.toLowerCase()),"this site"):t(".message",i).attr("title",o.getText("mm_dntme_help_what_will_happen_"+n+"_"+m.toLowerCase())),t(".message",i).tooltip({delay:0}),"blacklist"==l&&this.featureToggled(d)},this))}}},trackerToggled:function(){this.featureToggled("individual-tracker")},featureToggled:function(t){this.model.fetch({success:e.bind(function(){var n=this.children.trackerSection;"tracker"==t&&n&&(this.model.get("disabled")?this.$(".section-content",n.el).slideUp("slow",e.bind(function(){n.render(),this.trigger("resize")},this)):(n.render(),this.trigger("resize"))),this.children.settingsChanged?this.children.settingsChanged.update(t):this.model.trigger("settings-changed",{feature:t}),r.setTimeout(e.bind(function(){this.model.get("toggledOff")&&!this.model.custom.isFeedbackShown()&&this.model.custom.setCustomTabData("feedbackShown",!0)},this),500)},this)})},showSettings:function(e){e&&e.preventDefault(),this.trigger("show-settings")},showSettingsSubPage:function(e,t){this.trigger("show-settings",null,{highlight:t,subPage:e})}});return l}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_settings_changed=e.template(function(e,t,n,a,i){function r(e,t){var a,i,r="";return r+='\n  <div class="alert">\n    <i class="icon-warning-sign"></i>\n    ',p=n.custom,a=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"custom"),a=null===a||void 0===a||a===!1?a:ABINE_DNTME.Duckbone.Handlebars.getAttr(a,"changedFeature"),i=n["if"],u=_.program(2,s,t),u.hash={},u.fn=u,u.inverse=_.program(4,o,t),a=i.call(e,a,u),(a||0===a)&&(r+=a),r+="\n  </div>\n  ",p=n.toggledOff,a=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"toggledOff"),i=n["if"],u=_.program(6,l,t),u.hash={},u.fn=u,u.inverse=_.noop,a=i.call(e,a,u),(a||0===a)&&(r+=a),r+="\n"}function s(e){var t,a,i="";return i+="\n      ",i+="\n      ",p=n.custom,t=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"custom"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"changedFeature"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=f.call(e,"custom.changedFeature",{hash:{}})),i+=y(t)+" ",t="mm_dntme_toggled_reload",p=n.intl,a=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===g?a.call(e,t,{hash:{}}):a===b?f.call(e,"intl",t,{hash:{}}):a,i+=y(t)+"\n    "}function o(e){var t,a,i="";return i+="\n      ",t="mm_dntme_toggled_reload",p=n.intl,a=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===g?a.call(e,t,{hash:{}}):a===b?f.call(e,"intl",t,{hash:{}}):a,i+=y(t)+"\n    "}function l(e,t){var a,i,r="";return r+="\n    ",p=n.suggestedAllow,a=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"suggestedAllow"),i=n.unless,u=_.program(7,d,t),u.hash={},u.fn=u,u.inverse=_.noop,a=i.call(e,a,u),(a||0===a)&&(r+=a),r+="\n  "}function d(e,t){var a,i,r="";return r+="\n      ",p=n.custom,a=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"custom"),a=null===a||void 0===a||a===!1?a:ABINE_DNTME.Duckbone.Handlebars.getAttr(a,"isFeedbackShown"),i=n.unless,u=_.program(8,c,t),u.hash={},u.fn=u,u.inverse=_.noop,a=i.call(e,a,u),(a||0===a)&&(r+=a),r+="\n    "}function c(e){var t,a,i="";return i+='\n        <div class="thanks alert alert-success" style="display:none"><i class="icon-ok-sign"></i> ',t="mm_dntme_thanks_for_feedback",p=n.intl,a=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===g?a.call(e,t,{hash:{}}):a===b?f.call(e,"intl",t,{hash:{}}):a,i+=y(t)+'</div>\n        <div class="feedback well">\n            ',t="mm_dntme_help_others",p=n.intl,a=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===g?a.call(e,t,{hash:{}}):a===b?f.call(e,"intl",t,{hash:{}}):a,i+=y(t)+"\n            <div id=reasons><ul>\n                <li id=reason1>",t="mm_dntme_reason_site_not_working",p=n.intl,a=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===g?a.call(e,t,{hash:{}}):a===b?f.call(e,"intl",t,{hash:{}}):a,i+=y(t)+"</li>\n                <li id=reason2>",t="mm_dntme_reason_other",p=n.intl,a=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===g?a.call(e,t,{hash:{}}):a===b?f.call(e,"intl",t,{hash:{}}):a,i+=y(t)+'</li>\n                <textarea id="desc" name="description"></textarea>\n                <button id="feedback-submit" class="btn btn-mini btn-success">',t="mm_dntme_feedback_submit",p=n.intl,a=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===g?a.call(e,t,{hash:{}}):a===b?f.call(e,"intl",t,{hash:{}}):a,i+=y(t)+'</button>\n                <span class="text-error" style="display:none;">',t="mm_dntme_please_fill_reason",p=n.intl,a=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===g?a.call(e,t,{hash:{}}):a===b?f.call(e,"intl",t,{hash:{}}):a,i+=y(t)+"</span>\n            </ul></div>\n        </div>\n      "}n=n||e.helpers;var m,h,p,u,_=this,g="function",f=n.helperMissing,b=void 0,y=this.escapeExpression;return p=n.settingsChanged,m=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"settingsChanged"),h=n["if"],u=_.program(1,r,i),u.hash={},u.fn=u,u.inverse=_.noop,m=h.call(t,m,u),m||0===m?m:""}),ABINE_DNTME.CompiledTemplates.dntme_page_settings_changed}),ABINE_DNTME.define("abine/views/settingsChanged",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer"],function(e,t,n,a,i,r){var s=n.View.extend({tagName:"div",templateName:"dntme_page_settings_changed",events:{"click #reason1":"siteNotWorking","click #feedback-submit":"otherReason"},siteNotWorking:function(e){e.preventDefault(),this.submitFeedback(intl.getText("mm_dntme_reason_site_not_working"))},otherReason:function(e){return e.preventDefault(),this.$(".text-error").hide(),""==this.$("#desc").val()?void this.$(".text-error").show():(this.submitFeedback(this.$("#desc").val()),!1)},submitFeedback:function(t){this.$(".feedback").slideUp("slow"),this.$(".thanks").slideDown("slow"),r.setTimeout(e.bind(function(){this.$(".thanks").fadeOut()},this),3e3),this.model.save({feedback:t}),this.doc.defaultView.focus()},update:function(n){if(this.model.get("settingsChanged")){"individual-tracker"!=n?(this.model.custom.setCustomTabData("changedFeature",n),this.model.custom.setCustomTabData("changedFeatureOffStatus",this.model.blacklist.get(n))):(this.model.custom.setCustomTabData("changedFeature",""),this.model.custom.setCustomTabData("changedFeatureOffStatus","")),this.trigger("max-height");var a=this.el.innerHTML;this.render(),a!=this.el.innerHTML&&(t(this.el).hide(),t(this.el).slideDown("slow",e.bind(function(){this.trigger("resize")},this)))}else t(this.el).slideUp("slow",e.bind(function(){this.render(),this.trigger("resize")},this))},afterInitialize:function(){this.doc=this.el.ownerDocument}});return s}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_tracker=e.template(function(e,t,n,a,i){function r(){return"blocked"}function s(){return"with-suggested"}function o(e){var t,a;return t="/pages/images/blocked.png",f=n.assetUrl,a=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===k?a.call(e,t,{hash:{}}):a===E?w.call(e,"assetUrl",t,{hash:{}}):a,A(t)}function l(e){var t,a;return t="/pages/images/unblocked.png",f=n.assetUrl,a=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof a===k?a.call(e,t,{hash:{}}):a===E?w.call(e,"assetUrl",t,{hash:{}}):a,A(t)}function d(e){var t,a;return t="mm_dntme_blocked",f=n.intl,a=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===k?a.call(e,t,{hash:{}}):a===E?w.call(e,"intl",t,{hash:{}}):a,A(t)}function c(e){var t,a;return t="mm_dntme_unblocked",f=n.intl,a=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===k?a.call(e,t,{hash:{}}):a===E?w.call(e,"intl",t,{hash:{}}):a,A(t)}function m(e,t){var a,i;return f=n.suggested,
a=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"suggested"),i=n["if"],b=v.program(14,h,t),b.hash={},b.fn=b,b.inverse=v.noop,a=i.call(e,a,b),a||0===a?a:""}function h(e,t){var a,i;return f=n.blocked,a=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blocked"),i=n["if"],b=v.program(15,p,t),b.hash={},b.fn=b,b.inverse=v.program(17,u,t),a=i.call(e,a,b),a||0===a?a:""}function p(e){var t,a,i="";return i+='<div class="not suggested">',t="mm_dntme_not_suggested",f=n.intl,a=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===k?a.call(e,t,{hash:{}}):a===E?w.call(e,"intl",t,{hash:{}}):a,i+=A(t)+"</div>"}function u(e){var t,a,i="";return i+='<div class="suggested">',t="mm_dntme_suggested",f=n.intl,a=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===k?a.call(e,t,{hash:{}}):a===E?w.call(e,"intl",t,{hash:{}}):a,i+=A(t)+"</div>"}n=n||e.helpers;var _,g,f,b,y="",v=this,k="function",w=n.helperMissing,E=void 0,A=this.escapeExpression;return y+='<div class="tracker ',f=n.blocked,_=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blocked"),g=n["if"],b=v.program(1,r,i),b.hash={},b.fn=b,b.inverse=v.noop,_=g.call(t,_,b),(_||0===_)&&(y+=_),y+=" ",f=n.suggested,_=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"suggested"),g=n["if"],b=v.program(3,s,i),b.hash={},b.fn=b,b.inverse=v.noop,_=g.call(t,_,b),(_||0===_)&&(y+=_),y+=' clearfix">\n  <span class="name">',f=n.name,_=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"name"),typeof _===k?_=_.call(t,{hash:{}}):_===E&&(_=w.call(t,"name",{hash:{}})),y+=A(_)+'</span>\n  <div class="state"><img class="tracker-image" src="',f=n.blocked,_=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blocked"),g=n["if"],b=v.program(5,o,i),b.hash={},b.fn=b,b.inverse=v.program(7,l,i),_=g.call(t,_,b),(_||0===_)&&(y+=_),y+='" /></div>\n  <div class="message">\n    ',f=n.blocked,_=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blocked"),g=n["if"],b=v.program(9,d,i),b.hash={},b.fn=b,b.inverse=v.program(11,c,i),_=g.call(t,_,b),(_||0===_)&&(y+=_),y+="\n  ",f=n.hasSuggested,_=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasSuggested"),g=n["if"],b=v.program(13,m,i),b.hash={},b.fn=b,b.inverse=v.noop,_=g.call(t,_,b),(_||0===_)&&(y+=_),y+="\n  </div>\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_page_tracker}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_tracker_list=e.template(function(e,t,n,a,i){function r(){return"disabled"}function s(e,t){var a,i,r="";return r+=" ",y=n.trackers,a=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),a=null===a||void 0===a||a===!1?a:ABINE_DNTME.Duckbone.Handlebars.getAttr(a,"length"),i=n.unless,v=w.program(4,o,t),v.hash={},v.fn=v,v.inverse=w.noop,a=i.call(e,a,v),(a||0===a)&&(r+=a),r}function o(){return"no-trackers"}function l(){return"off"}function d(){return"off"}function c(){return"on"}function m(e,t){var a,i,r="";return r+="\n        ",y=n.blacklist,a=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklist"),a=null===a||void 0===a||a===!1?a:ABINE_DNTME.Duckbone.Handlebars.getAttr(a,"trackerOff"),i=n["if"],v=w.program(13,h,t),v.hash={},v.fn=v,v.inverse=w.program(15,p,t),a=i.call(e,a,v),(a||0===a)&&(r+=a),r+="\n        </a>\n      "}function h(e){var t,a,i="";return i+='\n          <div class="skip suggested">',t="mm_dntme_suggested",y=n.intl,a=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===E?a.call(e,t,{hash:{}}):a===N?A.call(e,"intl",t,{hash:{}}):a,i+=T(t)+"</div>\n        "}function p(e){var t,a,i="";return i+='\n          <div class="skip not suggested">',t="mm_dntme_not_suggested",y=n.intl,a=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===E?a.call(e,t,{hash:{}}):a===N?A.call(e,"intl",t,{hash:{}}):a,i+=T(t)+"</div>\n        "}function u(e,t){var a,i,r="";return r+="\n      ",y=n.blacklist,a=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklist"),a=null===a||void 0===a||a===!1?a:ABINE_DNTME.Duckbone.Handlebars.getAttr(a,"trackerOff"),i=n.unless,v=w.program(18,_,t),v.hash={},v.fn=v,v.inverse=w.noop,a=i.call(e,a,v),(a||0===a)&&(r+=a),r+="\n    "}function _(e,t){var a,i,r="";return r+="\n        ",y=n.trackers,a=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),a=null===a||void 0===a||a===!1?a:ABINE_DNTME.Duckbone.Handlebars.getAttr(a,"length"),i=n["if"],v=w.program(19,g,t),v.hash={},v.fn=v,v.inverse=w.noop,a=i.call(e,a,v),(a||0===a)&&(r+=a),r+='\n        <div style="padding:5px;margin:0px 10px;">\n          <img src="',a="pages/images/tracking.png",y=n.assetUrl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),a=typeof i===E?i.call(e,a,{hash:{}}):i===N?A.call(e,"assetUrl",a,{hash:{}}):i,r+=T(a)+'" style="width:40px;margin-right:10px;float:left;"/>\n          <a href="#" class="trackerDashboard" style="text-decoration:underline;line-height:1.5;display:block;">',a="mm_dntme_tracking_goto_dashboard",y=n.intl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===E?i.call(e,a,{hash:{}}):i===N?A.call(e,"intl",a,{hash:{}}):i,r+=T(a)+"</a>\n        </div>\n      "}function g(e){var t,a,i="";return i+='\n          <div class="section-content" style="overflow: hidden;display: block;">\n            <div class="list"><div class="content">',t="trackerList",y=n.child,a=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),t=typeof a===E?a.call(e,t,{hash:{}}):a===N?A.call(e,"child",t,{hash:{}}):a,i+=T(t)+"</div></div>\n          </div>\n        "}n=n||e.helpers;var f,b,y,v,k="",w=this,E="function",A=n.helperMissing,N=void 0,T=this.escapeExpression;return k+='  <div class="section on others clearfix">\n    <div class="section-header clearfix ',y=n.blacklist,f=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),f=null===f||void 0===f||f===!1?f:ABINE_DNTME.Duckbone.Handlebars.getAttr(f,"trackerOff"),b=n["if"],v=w.program(1,r,i),v.hash={},v.fn=v,v.inverse=w.program(3,s,i),f=b.call(t,f,v),(f||0===f)&&(k+=f),k+='">\n      ',f="trackersTitle",y=n.child,b=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),f=typeof b===E?b.call(t,f,{hash:{}}):b===N?A.call(t,"child",f,{hash:{}}):b,k+=T(f)+'\n    </div>\n\n    <div class="clearfix setting-row ',y=n.blacklist,f=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),f=null===f||void 0===f||f===!1?f:ABINE_DNTME.Duckbone.Handlebars.getAttr(f,"trackerOff"),b=n["if"],v=w.program(6,l,i),v.hash={},v.fn=v,v.inverse=w.noop,f=b.call(t,f,v),(f||0===f)&&(k+=f),k+='" data-type="blacklist" data-name="tracker" style="margin:5px 0px;">\n      <div class="message">',f="mm_dntme_tracking_blocker",y=n.intl,b=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),f=typeof b===E?b.call(t,f,{hash:{}}):b===N?A.call(t,"intl",f,{hash:{}}):b,k+=T(f)+'</div>\n      <div class="word switch ',y=n.blacklist,f=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),f=null===f||void 0===f||f===!1?f:ABINE_DNTME.Duckbone.Handlebars.getAttr(f,"trackerOff"),b=n["if"],v=w.program(8,d,i),v.hash={},v.fn=v,v.inverse=w.program(10,c,i),f=b.call(t,f,v),(f||0===f)&&(k+=f),k+='">\n        <div class="knob"></div>\n      </div>\n      ',y=n.suggestedAllow,f=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"suggestedAllow"),b=n["if"],v=w.program(12,m,i),v.hash={},v.fn=v,v.inverse=w.noop,f=b.call(t,f,v),(f||0===f)&&(k+=f),k+='\n      <div class="for">',f="mm_dntme_for_this_website",y=n.intl,b=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),f=typeof b===E?b.call(t,f,{hash:{}}):b===N?A.call(t,"intl",f,{hash:{}}):b,k+=T(f)+"</div>\n    </div>\n\n    ",y=n.compact,f=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"compact"),b=n.unless,v=w.program(17,u,i),v.hash={},v.fn=v,v.inverse=w.noop,f=b.call(t,f,v),(f||0===f)&&(k+=f),k+="\n  </div>"}),ABINE_DNTME.CompiledTemplates.dntme_page_tracker_list}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_tracker_title=e.template(function(e,t,n,a,i){function r(e){var t,a,i="";return i+='\n  <div style="font-size:10pt;text-align: center;width: 100%;">',t="mm_dntme_reload_required",_=n.intl,a=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===y?a.call(e,t,{hash:{}}):a===k?v.call(e,"intl",t,{hash:{}}):a,i+=w(t)+"</div>\n"}function s(e,t){var a,i,r="";return r+='\n  <div class="left-section main-tracker-title" data-dashboard="tracking">\n  ',_=n.blacklist,a=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklist"),a=null===a||void 0===a||a===!1?a:ABINE_DNTME.Duckbone.Handlebars.getAttr(a,"trackerOff"),i=n["if"],g=b.program(4,o,t),g.hash={},g.fn=g,g.inverse=b.program(6,l,t),a=i.call(e,a,g),(a||0===a)&&(r+=a),r+="\n  </div>\n"}function o(e){var t,a,i="";return i+='\n    <div class="message-disabled">\n      <div class="disabled-text">',t="mm_dntme_tracking_disabled",_=n.intl,a=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===y?a.call(e,t,{hash:{}}):a===k?v.call(e,"intl",t,{hash:{}}):a,i+=w(t)+'</div>\n      <div class="disabled-subtext" title="',_=n.host,t=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof t===y?t=t.call(e,{hash:{}}):t===k&&(t=v.call(e,"host",{hash:{}})),i+=w(t)+'">',_=n.host,t=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof t===y?t=t.call(e,{hash:{}}):t===k&&(t=v.call(e,"host",{hash:{}})),i+=w(t)+"</div>\n    </div>\n  "}function l(e,t){var a,i,r="";return r+="\n    ",_=n.trackers,a=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),a=null===a||void 0===a||a===!1?a:ABINE_DNTME.Duckbone.Handlebars.getAttr(a,"length"),i=n["if"],g=b.program(7,d,t),g.hash={},g.fn=g,g.inverse=b.program(12,h,t),a=i.call(e,a,g),(a||0===a)&&(r+=a),r+="\n  "}function d(e,t){var a,i,r="";return r+='\n      <div class="count">',_=n.trackers,a=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),a=null===a||void 0===a||a===!1?a:ABINE_DNTME.Duckbone.Handlebars.getAttr(a,"getBlocked"),typeof a===y?a=a.call(e,{hash:{}}):a===k&&(a=v.call(e,"trackers.getBlocked",{hash:{}})),r+=w(a)+'</div>\n      <div class="message">\n        <div class="blocked">\n          ',_=n.understanding_tracker_clicked,a=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"understanding_tracker_clicked"),i=n["if"],g=b.program(8,c,t),g.hash={},g.fn=g,g.inverse=b.program(10,m,t),a=i.call(e,a,g),(a||0===a)&&(r+=a),r+="\n          ",a="mm_dntme_blocked_at",_=n.intl,i=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===y?i.call(e,a,{hash:{}}):i===k?v.call(e,"intl",a,{hash:{}}):i,r+=w(a)+'\n        </div>\n        <div class="host" title="',_=n.host,a=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof a===y?a=a.call(e,{hash:{}}):a===k&&(a=v.call(e,"host",{hash:{}})),r+=w(a)+'">at&nbsp;',_=n.host,a=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof a===y?a=a.call(e,{hash:{}}):a===k&&(a=v.call(e,"host",{hash:{}})),r+=w(a)+"</div>\n      </div>\n    "}function c(e){var t,a,i,r="";return r+="\n            ",_=n.trackers,t=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getBlocked"),a="mm_dntme_tracker",_=n.plural,i=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"plural"),t=typeof i===y?i.call(e,a,t,{hash:{}}):i===k?v.call(e,"plural",a,t,{hash:{}}):i,r+=w(t)+"\n          "}function m(e){var t,a,i,r="";return r+='\n            <a href=# class="understandingTrackers">',_=n.trackers,t=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getBlocked"),a="mm_dntme_tracker",_=n.plural,i=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"plural"),t=typeof i===y?i.call(e,a,t,{hash:{}}):i===k?v.call(e,"plural",a,t,{hash:{}}):i,r+=w(t)+"</a>\n          "}function h(e){var t,a,i="";return i+='\n      <div class="message-clear">\n        <div class="count"></div>\n        <div class="all-clear">',t="mm_dntme_clear_skies",_=n.intl,a=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===y?a.call(e,t,{hash:{}}):a===k?v.call(e,"intl",t,{hash:{}}):a,i+=w(t)+'</div>\n        <div class="all-clear-subtext" title="',_=n.host,t=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof t===y?t=t.call(e,{hash:{}}):t===k&&(t=v.call(e,"host",{hash:{}})),i+=w(t)+'">',t="mm_dntme_at",_=n.intl,a=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===y?a.call(e,t,{hash:{}}):a===k?v.call(e,"intl",t,{hash:{}}):a,i+=w(t)+" ",_=n.host,t=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof t===y?t=t.call(e,{hash:{}}):t===k&&(t=v.call(e,"host",{hash:{}})),i+=w(t)+"</div>\n      </div>\n    "}n=n||e.helpers;var p,u,_,g,f="",b=this,y="function",v=n.helperMissing,k=void 0,w=this.escapeExpression;return f+="\n",_=n.reloadRequired,p=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"reloadRequired"),u=n["if"],g=b.program(1,r,i),g.hash={},g.fn=g,g.inverse=b.program(3,s,i),p=u.call(t,p,g),(p||0===p)&&(f+=p),f}),ABINE_DNTME.CompiledTemplates.dntme_page_tracker_title}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_tracker_title_goback=e.template(function(e,t,n,a,i){function r(e){var t,a,i="";return i+='\n  <div style="font-size:10pt;text-align: center;width: 100%;">',t="mm_dntme_reload_required",f=n.intl,a=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===k?a.call(e,t,{hash:{}}):a===E?w.call(e,"intl",t,{hash:{}}):a,i+=A(t)+"</div>\n"}function s(e,t){var a,i,r="";return r+="\n<div>\n  ",f=n.trackers,a=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),a=null===a||void 0===a||a===!1?a:ABINE_DNTME.Duckbone.Handlebars.getAttr(a,"length"),i=n["if"],b=v.program(4,o,t),b.hash={},b.fn=b,b.inverse=v.program(9,c,t),a=i.call(e,a,b),(a||0===a)&&(r+=a),r+="\n</div>\n"}function o(e,t){var a,i,r="";return r+='\n    <div class="message">\n      <div class="blocked">\n        <div class="host" title="',f=n.host,a=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof a===k?a=a.call(e,{hash:{}}):a===E&&(a=w.call(e,"host",{hash:{}})),r+=A(a)+'">',f=n.host,a=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof a===k?a=a.call(e,{hash:{}}):a===E&&(a=w.call(e,"host",{hash:{}})),r+=A(a)+'</div>\n        <div class="count">\n          ',f=n.trackers,a=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),a=null===a||void 0===a||a===!1?a:ABINE_DNTME.Duckbone.Handlebars.getAttr(a,"getBlocked"),typeof a===k?a=a.call(e,{hash:{}}):a===E&&(a=w.call(e,"trackers.getBlocked",{hash:{}})),r+=A(a)+"\n          ",f=n.understanding_tracker_clicked,a=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"understanding_tracker_clicked"),i=n["if"],b=v.program(5,l,t),b.hash={},b.fn=b,b.inverse=v.program(7,d,t),a=i.call(e,a,b),(a||0===a)&&(r+=a),r+="\n          ",a="mm_dntme_blocked",f=n.intl,i=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===k?i.call(e,a,{hash:{}}):i===E?w.call(e,"intl",a,{hash:{}}):i,r+=A(a)+"\n        </div>\n      </div>\n    </div>\n  "}function l(e){var t,a,i,r="";return r+="\n            ",f=n.trackers,t=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getBlocked"),a="mm_dntme_tracker",f=n.plural,i=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"plural"),t=typeof i===k?i.call(e,a,t,{hash:{}}):i===E?w.call(e,"plural",a,t,{hash:{}}):i,r+=A(t)+"\n          "}function d(e){var t,a,i,r="";return r+='\n            <a href=# class="understandingTrackers">',f=n.trackers,t=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getBlocked"),a="mm_dntme_tracker",f=n.plural,i=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"plural"),t=typeof i===k?i.call(e,a,t,{hash:{}}):i===E?w.call(e,"plural",a,t,{hash:{}}):i,r+=A(t)+"</a>\n          "}function c(e,t){var a,i,r="";return r+='\n    <div class="message">\n        <div class="blocked">\n          <div class="host" title="',f=n.host,a=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof a===k?a=a.call(e,{hash:{}}):a===E&&(a=w.call(e,"host",{hash:{}})),r+=A(a)+'">',f=n.host,a=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof a===k?a=a.call(e,{hash:{}}):a===E&&(a=w.call(e,"host",{hash:{}})),r+=A(a)+'</div>\n            <div class="count">\n              ',f=n.blacklist,a=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklist"),a=null===a||void 0===a||a===!1?a:ABINE_DNTME.Duckbone.Handlebars.getAttr(a,"trackerOff"),i=n["if"],b=v.program(10,m,t),b.hash={},b.fn=b,b.inverse=v.program(12,h,t),a=i.call(e,a,b),(a||0===a)&&(r+=a),r+="\n            </div>\n        </div>\n      </div>\n  "}function m(e){var t,a,i="";return i+="\n                ",t="mm_dntme_trackers_allowed",f=n.intl,a=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===k?a.call(e,t,{hash:{}}):a===E?w.call(e,"intl",t,{hash:{}}):a,i+=A(t)+"\n              "}function h(e,t){var a,i,r="";return r+="\n                <span>0</span>\n                ",f=n.understanding_tracker_clicked,a=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"understanding_tracker_clicked"),i=n["if"],b=v.program(13,p,t),b.hash={},b.fn=b,b.inverse=v.program(15,u,t),a=i.call(e,a,b),(a||0===a)&&(r+=a),r+="\n                ",a="mm_dntme_blocked",f=n.intl,i=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),a=typeof i===k?i.call(e,a,{hash:{}}):i===E?w.call(e,"intl",a,{hash:{}}):i,r+=A(a)+"\n              "}function p(e){var t,a,i,r="";return r+="\n                  ",f=n.trackers,t=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getBlocked"),a="mm_dntme_tracker",f=n.plural,i=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"plural"),t=typeof i===k?i.call(e,a,t,{hash:{}}):i===E?w.call(e,"plural",a,t,{hash:{}}):i,r+=A(t)+"\n                "}function u(e){var t,a,i,r="";return r+='\n                  <a href=# class="understandingTrackers">',f=n.trackers,t=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getBlocked"),a="mm_dntme_tracker",f=n.plural,i=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"plural"),t=typeof i===k?i.call(e,a,t,{hash:{}}):i===E?w.call(e,"plural",a,t,{hash:{}}):i,r+=A(t)+"</a>\n                "}n=n||e.helpers;var _,g,f,b,y="",v=this,k="function",w=n.helperMissing,E=void 0,A=this.escapeExpression;return y+='<div class="go-back-tracker"><img src="',_="/pages/images/back.png",f=n.assetUrl,g=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),_=typeof g===k?g.call(t,_,{hash:{}}):g===E?w.call(t,"assetUrl",_,{hash:{}}):g,y+=A(_)+'" width="18px;" style="padding-top:12px;"/></div>\n',f=n.reloadRequired,_=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"reloadRequired"),g=n["if"],b=v.program(1,r,i),b.hash={},b.fn=b,b.inverse=v.program(3,s,i),_=g.call(t,_,b),(_||0===_)&&(y+=_),y}),ABINE_DNTME.CompiledTemplates.dntme_page_tracker_title_goback}),ABINE_DNTME.define("abine/views/pageTracker",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies"],function(e,t,n,a,i,r,s){var o=n.View.extend({tagName:"div",templateName:"dntme_page_tracker",className:"dntme_tracker",events:{"click .suggested":"openSuggested","click .tracker":"toggleTracker"},openSuggested:function(e){e.preventDefault(),s.securityManager.openLink({type:"recommended",tracker:this.model.get("name")})},toggleTracker:function(e){e.target.className&&e.target.className.indexOf("suggested")!=-1||(this.model.save({blocked:!this.model.get("blocked")}),this.model.collection.trigger("changed"))},afterInitialize:function(){this.doc=this.el.ownerDocument}}),l=n.ListView.extend({tagName:"div",className:"",viewClass:o}),d=n.View.extend({tagName:"span",templateName:"dntme_page_tracker_title",className:"dntme_tracker_title",events:{"click .understandingTrackers":"openUnderstandingTrackers"},afterInitialize:function(){this.doc=this.el.ownerDocument},openUnderstandingTrackers:function(e){e.preventDefault(),this.trigger("open:understanding:tracker")}}),c=n.View.extend({tagName:"span",templateName:"dntme_page_tracker_title_goback",className:"dntme_tracker_title",events:{"click .go-back-tracker":"goBack","click .understandingTrackers":"openUnderstandingTrackers"},afterInitialize:function(){this.doc=this.el.ownerDocument},goBack:function(){this.trigger("change-dashboard","dashboard")},openUnderstandingTrackers:function(e){e.preventDefault(),this.trigger("open:understanding:tracker")}}),m=n.View.extend({events:{"click .section-header":"toggleSection","click a.trackerDashboard":"trackerDashboard"},tagName:"div",templateName:"dntme_page_tracker_list",className:"dntme_trackers",trackerDashboard:function(e){e.preventDefault(),s.webapp.openStats(),this.trigger("close")},afterInitialize:function(){this.doc=this.el.ownerDocument,this.model.trackers.on("changed",e.bind(function(){this.children.trackersTitle.render(),this.trigger("trackerToggled")},this))},beforeRemove:function(){this.model.trackers.off("changed")},autoResize:function(){this.trigger("resize")},toggleSection:function(e){if(e&&e.preventDefault(),this.options.compact)return void this.trigger("show-dashboard")},isOpen:function(){return!this.$(".section-header").parent(".section").hasClass("off")},createChildren:function(){var e=this.options.withGoBack?c:d;return this.children={trackersTitle:new e({model:this.model,doc:this.el.ownerDocument}),trackerList:new l({collection:this.model.trackers,doc:this.el.ownerDocument})},this.children.trackersTitle.transferEvents(["change-dashboard","open:understanding:tracker"],this),this.children}});return m.TitleView=d,m}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_panel=e.template(function(e,t,n,a,i){function r(e){var t,a,i="";return i+='\n          <span class="dashboard">',t="mm_dntme_premium_user",d=n.intl,a=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===p?a.call(e,t,{hash:{}}):a===_?u.call(e,"intl",t,{hash:{}}):a,i+=g(t)+"</span>\n        "}function s(e){var t,a,i="";return i+='\n          <span class="premium-link">',t="mm_dntme_go_premium",d=n.intl,a=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===p?a.call(e,t,{hash:{}}):a===_?u.call(e,"intl",t,{hash:{}}):a,i+=g(t)+"</span>\n        "}n=n||e.helpers;var o,l,d,c,m="",h=this,p="function",u=n.helperMissing,_=void 0,g=this.escapeExpression;return m+='<div class="panel">\n  <div class="content-wrap">\n    <div class="page-content clearfix">\n      <img src="',o="pages/images/blur_xclose_ext.png",d=n.assetUrl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"assetUrl",o,{hash:{}}):l,m+=g(o)+'" class="close-link" style="cursor:pointer;position:absolute;left:280px;top:10px;z-index:1;"/>\n      <div class="one">',o="pageContent",d=n.child,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"child",o,{hash:{}}):l,m+=g(o)+'</div>\n      <div class="two" style="display:none;border-bottom: 1px solid #cccccc;">',o="settingsContent",d=n.child,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"child",o,{hash:{}}):l,m+=g(o)+'</div>\n    </div>\n  </div>\n  <div id="mapForm" style="display:none;text-align: center;padding: 5px;font-weight: bold;border-bottom:1px solid #3498db;"><a href="#">',o="mm_correct_blur",d=n.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"intl",o,{hash:{}}):l,m+=g(o)+'</a></div>\n  <div class="header dntme clearfix" style="height:auto;">\n    <div class="logo-link">\n      <img class="logo" id="blur-logo-action" style="margin-left:-4px;height:20px;width:auto;" src="',d=n.panelLogoBig,o=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"panelLogoBig"),typeof o===p?o=o.call(t,{hash:{}}):o===_&&(o=u.call(t,"panelLogoBig",{hash:{}})),m+=g(o)+'"/>\n    </div>\n    <div class="links-wrapper">\n      <div class="links">\n        <strong style="color:green;">\n        ',d=n.premium,o=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"premium"),l=n["if"],c=h.program(1,r,i),c.hash={},c.fn=c,c.inverse=h.program(3,s,i),o=l.call(t,o,c),(o||0===o)&&(m+=o),m+='\n        </strong>\n      </div>\n      <div class="links help-link">\n         ',o="mm_dntme_help",d=n.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"intl",o,{hash:{}}):l,m+=g(o)+'\n      </div>\n      <div class="links settings-link">\n        ',o="mm_dntme_settings",d=n.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===_?u.call(t,"intl",o,{hash:{}}):l,m+=g(o)+"\n      </div>\n    </div>\n  </div>\n</div>\n"}),ABINE_DNTME.CompiledTemplates.dntme_panel}),ABINE_DNTME.define("abine/views/dntmePanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/contentMessenger","documentcloud/backbone","abine/proxies","abine/views/dntmePage","abine/views/settingsDashboard","abine/intl","abine/timer","abine/responseCodes"],function(e,t,n,a,i,r,s,o,l,d,c,m,h,p){function u(e,t){t=t||"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!-$#%^@";for(var n="",a=0;a<e;a++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}var _=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i,g=n.View.extend({tagName:"div",templateName:"dntme_empty",afterInitialize:function(){this.doc=this.el.ownerDocument},load:function(){var e=this.options.realView();e.load=e.reload,t(this.el).replaceWith(e.el),e.delegateEvents(),this.options.postLoad&&this.options.postLoad(e)}}),f=i.extend({templateName:"dntme_panel",events:{"click .close-link":"logClose","click .settings-link":"showSettingsView","click .premium-link":"showPremium","click .help-link":"showHelp","click .logo-link":"logoClick","click .home-link":"logoClick","click #pageView":"showPageView","click #mapForm":"mapForm","click .dashboard":"openDashboard","click .premium-a-link":"openPremiumA","click .premium-b-link":"openPremiumB","click .premium":"openPremiumC","click .cash-for-cards-webapp-signup":"openCashForCardsSignup","click .weeklyReport":"openWeeklyReport","click .medal-notification":"clickedNormalMedalNotification","click .medal-with-card-notification":"clickedMedalWithCardNotification","click #complete-setup":"openPostInstall","click #not-now":"clickedNotNow","click #submit-email":"autoregFromIntrusive","click #seeBlur":"openBlurPage","click .more-options":"closePanel"},logoClick:function(e){e.preventDefault(),this.children.pageContent.model.get("maskmeInstalled")?l.securityManager.openLink({type:"dntme"}):l.webapp.openDashboard(),this.closePanel()},openPostInstall:function(){l.licenseModule.logSplitData({bucket_id:this.options.intrusiveSplit,test_data:{int1:1}}),l.securityManager.openPostInstall()},clickedNotNow:function(){l.licenseModule.logSplitData({bucket_id:this.options.intrusiveSplit,test_data:{int2:1}}),this.$("#complete-setup-div").hide();var e=new a.Preference;e.save({key:"notNowClicked",value:"true"}),this.panelId&&this.contentManager.messenger.send("update:panelActivity:closed",{panelId:this.panelId})},autoregFromIntrusive:function(){l.licenseModule.logSplitData({bucket_id:this.options.intrusiveSplit,test_data:{int3:1}}),this.setupUser()},mapForm:function(e){e.preventDefault(),this.options.contentManager.showMapForm({formId:this.forms[0],forms:this.forms}),this.closePanel(e,!0),this.trigger("remove")},setupUser:function(n,a){function i(e,n){try{g.get(0).ownerDocument&&(a?t(".loading-message",g).text(m.getText("mm_loading_display_register_use"+Math.floor(e/5))):t(".loading-message",g).text(m.getText("mm_loading_display_register"+Math.floor(e/5))),e<n&&(f=h.setTimeout(function(){i(e+1,n)},500)))}catch(e){}}n&&n.preventDefault(),a=a||!1;var r=this.$("#protect-email").val(),s=this.$("#password-field").val(),o=this.$("#password-field").length>0,d=this.$("#error");if(d.hide(),!r.match(_))return this.$("#welcome-message").hide(),d.text(m.getText("mm_dntme_invalid_email")).show(),void this.autoResize();if(o&&0==s.length)return this.$("#welcome-message").hide(),d.text(m.getText("mm_dntme_invalid_password")).show(),void this.autoResize();var c=u(6),p={email:r,password:o?s:c,password_hint:m.getText("mm_pwhint_default"),generated_password:!o,register_type:"dnt_intrusive_panel",send_password_email:!o},g=this.$("#progress-section"),f=null;i(0,20),g.show(),this.$("#welcome-message, #form-div").hide(),l.licenseModule.register(p,e.bind(function(t,n){this.processRegistration(t,n,p,e.bind(function(e){e?(this.panelId&&this.contentManager.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId}),h.clearTimeout(f),g.hide()):(this.panelId&&this.contentManager.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),l.licenseModule.logSplitData({bucket_id:this.options.intrusiveSplit,test_data:{int4:1}}),this.$("#complete-setup-div").hide(),this.openTour())},this))},this)),this.autoResize()},processRegistration:function(t,n,a,i){if(t){var r=m.getText("mm_dntme_register_error"),s=t.responseJSON&&t.responseJSON.data?t.responseJSON.data.errors:null;"invalid email address"==t.responseJSON.error_code?r=m.getText("mm_dntme_invalid_email_server_error"):t.responseJSON.error_code==p.SCHEDULED_DOWNTIME?r=m.getText("mm_dntme_server_maintenance"):s&&s.email&&("has already been taken"==s.email[0]?r=m.getText("mm_dntme_duplicate_email",[a.email]):"was used for MaskMe Heavy"==s.email[0]&&(r=m.getText("mm_dntme_version_not_allowed"))),this.$("#welcome-message").hide(),this.$("#error").html(r).show(),t.responseJSON&&t.responseJSON.data&&1==t.responseJSON.data.generated_password?this.$("#error #loginButton").click(e.bind(function(e){return l.licenseModule.logSplitData({bucket_id:this.options.intrusiveSplit,test_data:{int5:1}}),this.openPasswordSetupPage(a.email),e.preventDefault(),!1},this)):this.$("#error #loginButton").click(e.bind(function(e){return l.licenseModule.logSplitData({bucket_id:this.options.intrusiveSplit,test_data:{int5:1}}),this.openLoginPage(),e.preventDefault(),!1},this)),this.$("#error #retryEmail").click(e.bind(this.retryEmail,this)),this.$("#error #dnt2upgrade").click(e.bind(this.openDnt2UpgradePage,this)),this.autoResize(),i(r)}else this.contentManager.preferences.fetchAll(),i()},retryEmail:function(e){e&&e.preventDefault(),this.$("#error, #progress-section").hide(),this.$("#complete-setup-div, #form-div, #welcome-message").show(),this.triggerRender()},openDashboard:function(e){l.webapp.openDashboard(),e.preventDefault(),this.closePanel()},openWeeklyReport:function(e){var t=new a.Preference;t.save({key:"weeklyReportClickedOn",value:Date.now()}),l.webapp.openWeeklyReport(),e.preventDefault(),this.closePanel()},openCashForCardsSignup:function(e){l.webapp.openCashForCardsSignup(),e.preventDefault(),this.closePanel()},clickedNormalMedalNotification:function(){this.messenger.send("update:panelActivity:click",{panelId:8000004})},clickedMedalWithCardNotification:function(){this.messenger.send("update:panelActivity:click",{panelId:8000005})},openPremiumC:function(e){this.options.compact&&!this.options.premium?l.webapp.openPiwikCampaign("extIntFooterC","premium"):l.webapp.openPremium(),e.preventDefault(),this.closePanel()},openPremiumA:function(e){l.webapp.openPiwikCampaign("extIntFooterA","premium"),e.preventDefault(),this.closePanel()},openPremiumB:function(e){l.webapp.openPiwikCampaign("extIntFooterB","premium"),e.preventDefault(),this.closePanel()},showHelp:function(e){e.preventDefault(),l.webapp.openHelp("/faq/faq-configureSettings"),this.closePanel()},showPremium:function(e){e.preventDefault(),l.webapp.openPremium(),this.closePanel()},showPageView:function(t){t&&t.preventDefault(),this.children.pageContent.load(),this.changingView||(this.changingView=!0,this.$(".settings-link").removeClass("highlight"),this.$(".settings-link").show(),this.disableAnimation?(this.$(".one").show(),this.changingView=!1,this.$(".two").hide()):this.$(".one").animate({marginLeft:0},e.bind(function(){this.$(".one").show(),this.changingView=!1,this.$(".two").hide(),this.trigger("resize")},this)),this.$(".settings-link").show(),this.fetchFormIds())},showSettingsView:function(n,a){if(n&&n.preventDefault&&n.preventDefault(),this.options.domain&&"about:home"==this.options.domain)return t(".settings-link",this.el).attr("title",m.getText("mm_dntme_reload_required_short")),void t(".settings-link",this.el).tooltip("show");
if(a)return void this.trigger("show-settings",{switchTo:a.switchTo,highlight:a.highlight,subPage:a.subPage});if(this.children.settingsContent.load(),this.$(".settings-link").hasClass("highlight")){this.options.page="dashboard";try{this.children.pageContent.options.page="dashboard"}catch(e){}return void this.showPageView(n)}return this.options.compact?void("medals"==this.options.page?this.trigger("show-settings",{highlight:"showmedals"}):"weekly-report"==this.options.page?this.trigger("show-settings",{highlight:"showweeklyreports"}):this.trigger("show-settings",{highlight:"showtrackersonload"})):void(this.changingView||(this.changingView=!0,this.children.pageContent&&this.children.pageContent.model&&(this.children.pageContent.model.compact=!1),this.$(".settings-link").addClass("highlight"),this.disableAnimation?(this.$(".two").show(),this.changingView=!1,this.$(".one").hide()):this.$(".one").animate({marginLeft:-310},e.bind(function(){this.$(".two").show(),this.changingView=!1,this.$(".one").hide(),this.trigger("resize")},this)),this.$(".settings-link").hide()))},goBack:function(e){e.preventDefault(),this.showPageView(e)},openBlurPage:function(e){e.preventDefault(),l.webapp.openPage("#blur"),this.logClose()},logClose:function(){this.options.cardAlertPanel&&(this.contentManager.preferences.getPref("entitledToPayments")?this.options.messenger.send("update:panelActivity:closed",{panelId:4000005}):this.options.messenger.send("update:panelActivity:closed",{panelId:4000006})),this.options.showBlurGrowl&&(this.contentManager.preferences.setPref("showBlurGrowl","false"),this.contentManager.preferences.setPref("blurGrowlTab","false")),this.closePanel()},bindAutoFade:function(){function n(){r.clearTimeout(i.autoCloseTimer)}function a(){n(),i.autoCloseTimer=r.setTimeout(e.bind(i.closePanel,i),7e3)}if(this.options.compact)if(this.options.cardAlertPanel||this.options.showBlurGrowl);else{var i=this;t(this.el).hover(n,a),a()}else this.doc.defaultView.focus(),this.doc.defaultView.addEventListener("blur",e.bind(function(){this._ignoreBlur||this.closePanel()},this),!1)},fetchFormIds:function(){this.forms=[],this.formIdFetchHooked||(this.formIdFetchHooked=!0,this.messenger.on("form:ids:response",e.bind(function(e){0==this.forms.length&&e.length>0&&this.$("#mapForm").show(),this.forms=this.forms.concat(e)},this))),this.messenger.sendToCS("CS","get:form:ids",this.options.contentManager.frameId)},afterInitialize:function(){this.doc=this.el.ownerDocument,this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.applyFadingStyle(),this.fadeIn(),this.options.compact&&(this.opacity="0.8",this.templateName="dntme_compact_panel_c",this.options.showBlurGrowl?(this.templateName="dntme_blur_panel",this.opacity="1.0"):this.options.cardAlertPanel||("weekly-report"==this.options.page?(this.templateName="dntme_compact_panel_weekly_report",this.opacity="1.0"):"medals"==this.options.page?this.templateName="dntme_compact_panel_medal":this.options.premium||(this.options.intrusiveSplit==p.SPLIT_INTRUSIVE_CONTROL?this.templateName="dntme_compact_panel_c":this.options.intrusiveSplit==p.SPLIT_INTRUSIVE_COMPLETE_SETUP_BUTTON?this.templateName="dntme_compact_panel_d":this.options.intrusiveSplit==p.SPLIT_INTRUSIVE_GOT_IT_REG?(this.panelId=4000011,this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.templateName="dntme_compact_panel_e"):this.options.intrusiveSplit==p.SPLIT_INTRUSIVE_ALWAYS_REG&&(this.panelId=5000011,this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.templateName="dntme_compact_panel_f"))),this.el.className=this.className=this.templateName),this.bindAutoFade(),this.model={compact:this.options.compact,notNow:this.options.notNow,premium:this.options.premium,registered:this.options.registered},this.render();var t=this.children;"settings"==this.options.page?(this.disableAnimation=!0,this.options.settingsView="global-panel-settings",this.showSettingsView()):this.options.page in{accounts:1,masking:1,wallet:1}?(this.disableAnimation=!0,this.showSettingsView()):"trackers"==this.options.page?(t.pageContent.load(),r.setTimeout(e.bind(function(){this.children.pageContent.showTrackers()},this),100)):t.pageContent.load(),"Firefox"==ABINE_DNTME.config.browser&&this.$("#blur-logo-action").css("margin-top","3px"),this.fetchFormIds()},getPageView:function(){var t=new d({doc:this.el.ownerDocument,contentManager:this.options.contentManager,messenger:this.messenger,dynamicPanel:this.options.dynamicPanel,domain:this.options.domain,compact:this.options.compact,cardAlertPanel:this.options.cardAlertPanel,showBlurGrowl:this.options.showBlurGrowl,highlight:this.options.highlight,switchTo:this.options.switchTo,page:this.options.page,premium:this.options.premium,timeout:this.options.timeout});return t.transferEvents(["resize","max-height","show-trackers","show-dashboard","show-medals","show-report","ignore-blur"],this),t.on("close",e.bind(function(){this.closePanel()},this)),t.on("show-settings",e.bind(this.showSettingsView,this)),t.on("ignore-blur",e.bind(function(e){this._ignoreBlur=e},this)),t.on("open:understanding:tracker",e.bind(function(){l.webapp.openPage("/#/understandingTracking");var e=new a.Preference;e.save({key:"understanding_tracker_clicked",value:"true"}),this.contentManager.preferences.fetchAll(),this.closePanel()},this)),t.on("refresh-preferences",e.bind(function(){this.contentManager.preferences.fetchAll()},this)),t},getSettingsView:function(){var t=new a.TabData({messenger:this.options.messenger}),n=new a.GlobalData({messenger:this.options.messenger}),i=new c({tabData:t,globalData:n,doc:this.el.ownerDocument,messenger:this.messenger,highlight:this.options.highlight,contentManager:this.contentManager,settingsView:this.options.settingsView,switchTo:this.options.switchTo});return delete this.options.highlight,i.transferEvents(["resize","max-height"],this),i.on("close",e.bind(function(){this.closePanel()},this)),i.on("showPageView",e.bind(function(){this.options.page="dashboard";try{this.children.pageContent.options.page="dashboard"}catch(e){}this.showPageView()},this)),i},setDelayedView:function(t,n){var a=this;this.children[t]=new g({doc:this.el.ownerDocument,realView:e.bind(n,this),postLoad:function(e){a.children[t]=e}})},createChildren:function(){return this.children={},this.setDelayedView("pageContent",this.getPageView),this.setDelayedView("settingsContent",this.getSettingsView),this.children}});return f}),ABINE_DNTME.require(["abine/contentMessenger","abine/assets","abine/views/commonhelpers","abine/eventLogger"],function(e){function t(){ABINE_DNTME.startTime=Date.now(),n(function(){ABINE_DNTME.contentMessenger.on("init-"+ABINE_DNTME.context,function(e){e.message_id in i||(i[e.message_id]=!0,a(e))}),ABINE_DNTME.contentMessenger.sendToCS("CS","panel-ready-"+ABINE_DNTME.context)})}function n(e){ABINE_DNTME.requireDuckbone(function(){ABINE_DNTME.requireModels(e)})}function a(e){ABINE_DNTME.require(["abine/proxyContentManager"],function(t){var n=window.contentManager;if(!n){window.contentManager=n=new t.ContentManager(e);var a=function(){n.destroy()};window.addEventListener("unload",a,!1)}n.show(e.view)})}ABINE_DNTME.context=window.location.href.substr(window.location.href.indexOf("?")+1),ABINE_DNTME.contentMessenger=ABINE_DNTME.contentMessenger||new e.ContentMessenger({document:document});var i={};setInterval(function(){i={}},6e4),t()});