var __wpo = {"assets":{"main":[],"additional":[],"optional":[]},"externals":[],"hashesMap":{},"strategy":"changed","responseStrategy":"cache-first","version":"1/9/2018, 7:41:28 AM","name":"webpack-offline:mastodon","pluginVersion":"4.8.4","relativePaths":false};

!function(t){function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}var e={};n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="/packs/",n(n.s=0)}([function(t,n,e){"use strict";function i(t,n){return caches.match(t,{cacheName:n}).then(function(e){return a()?e:c(e).then(function(e){return caches.open(n).then(function(n){return n.put(t,e)}).then(function(){return e})})}).catch(function(){})}function r(t,n){return t+(-1!==t.indexOf("?")?"&":"?")+"__uncache="+encodeURIComponent(n)}function o(t){return"navigate"===t.mode||t.headers.get("Upgrade-Insecure-Requests")||-1!==(t.headers.get("Accept")||"").indexOf("text/html")}function a(t){return!t||!t.redirected||!t.ok||"opaqueredirect"===t.type}function c(t){return a(t)?Promise.resolve(t):("body"in t?Promise.resolve(t.body):t.blob()).then(function(n){return new Response(n,{headers:t.headers,status:t.status})})}function u(t){return Object.keys(t).reduce(function(n,e){return n[e]=t[e],n},{})}function s(t,n){n.forEach(function(t){})}if(function(){var t=ExtendableEvent.prototype.waitUntil,n=FetchEvent.prototype.respondWith,e=new WeakMap;ExtendableEvent.prototype.waitUntil=function(n){var i=this,r=e.get(i);return r?void r.push(Promise.resolve(n)):(r=[Promise.resolve(n)],e.set(i,r),t.call(i,Promise.resolve().then(function t(){var n=r.length;return Promise.all(r.map(function(t){return t.catch(function(){})})).then(function(){return r.length!=n?t():(e.delete(i),Promise.all(r))})})))},FetchEvent.prototype.respondWith=function(t){return this.waitUntil(t),n.call(this,t)}}(),void 0===f)var f=!1;!function(t,n){function e(){if(!U.additional.length)return Promise.resolve();var t=void 0;return t="changed"===O?f("additional"):a("additional"),t.catch(function(t){})}function a(n){var e=U[n];return caches.open(j).then(function(n){return g(n,e,{bust:t.version,request:t.prefetchRequest})}).then(function(){s("Cached assets: "+n,e)}).catch(function(t){throw t})}function f(n){return d().then(function(e){if(!e)return a(n);var i=e[0],r=e[1],o=e[2],c=o.hashmap,u=o.version;if(!o.hashmap||u===t.version)return a(n);var f=Object.keys(c).map(function(t){return c[t]}),l=r.map(function(t){var n=new URL(t.url);return n.search="",n.hash="",n.toString()}),d=U[n],h=[],v=d.filter(function(t){return-1===l.indexOf(t)||-1===f.indexOf(t)});Object.keys(E).forEach(function(t){var n=E[t];if(-1!==d.indexOf(n)&&-1===v.indexOf(n)&&-1===h.indexOf(n)){var e=c[t];e&&-1!==l.indexOf(e)?h.push([e,n]):v.push(n)}}),s("Changed assets: "+n,v),s("Moved assets: "+n,h);var p=Promise.all(h.map(function(t){return i.match(t[0]).then(function(n){return[t[1],n]})}));return caches.open(j).then(function(n){var e=p.then(function(t){return Promise.all(t.map(function(t){return n.put(t[0],t[1])}))});return Promise.all([e,g(n,v,{bust:t.version,request:t.prefetchRequest})])})})}function l(){return caches.keys().then(function(t){var n=t.map(function(t){if(0===t.indexOf(q)&&0!==t.indexOf(j))return caches.delete(t)});return Promise.all(n)})}function d(){return caches.keys().then(function(t){for(var n=t.length,e=void 0;n--&&(e=t[n],0!==e.indexOf(q)););if(e){var i=void 0;return caches.open(e).then(function(t){return i=t,t.match(new URL(_,location).toString())}).then(function(t){if(t)return Promise.all([i,i.keys(),t.json()])})}})}function h(){return caches.open(j).then(function(n){var e=new Response(JSON.stringify({version:t.version,hashmap:E}));return n.put(new URL(_,location).toString(),e)})}function v(t,n,e){return i(e,j).then(function(i){return i||fetch(t.request).then(function(i){return i.ok?(e===n&&function(){var e=i.clone(),r=caches.open(j).then(function(t){return t.put(n,e)}).then(function(){});t.waitUntil(r)}(),i):i})})}function p(t,n,e){return fetch(t.request).then(function(t){if(t.ok)return t;throw new Error("Response is not ok")}).catch(function(){return i(e,j)})}function m(t){return t.catch(function(){}).then(function(t){var n=t&&t.ok,e=t&&"opaqueredirect"===t.type;return n||e&&!M?t:i(S,j)})}function g(t,n,e){var i=!1!==e.allowLoaders,o=e&&e.bust,a=e.request||{credentials:"omit",mode:"cors"};return Promise.all(n.map(function(t){return o&&(t=r(t,o)),fetch(t,a).then(c)})).then(function(r){if(r.some(function(t){return!t.ok}))return Promise.reject(new Error("Wrong response status"));var o=[],a=r.map(function(e,r){return i&&o.push(w(n[r],e)),t.put(n[r],e)});return o.length?function(){var i=u(e);i.allowLoaders=!1;var r=a;a=Promise.all(o).then(function(e){var o=[].concat.apply([],e);return n.length&&(r=r.concat(g(t,o,i))),Promise.all(r)})}():a=Promise.all(a),a})}function w(t,n){var e=Object.keys(P).map(function(e){if(-1!==P[e].indexOf(t)&&b[e])return b[e](n.clone())}).filter(function(t){return!!t});return Promise.all(e).then(function(t){return[].concat.apply([],t)})}function y(t){var n=t.url,e=new URL(n),i=void 0;i="navigate"===t.mode?"navigate":e.origin===location.origin?"same-origin":"cross-origin";for(var r=0;r<x.length;r++){var o=x[r];if(o&&(!o.requestTypes||-1!==o.requestTypes.indexOf(i))){var a=void 0;if((a="function"==typeof o.match?o.match(e,t):n.replace(o.match,o.to))&&a!==n)return a}}}var b=n.loaders,x=n.cacheMaps,O=t.strategy,k=t.responseStrategy,U=t.assets,P=t.loaders||{},E=t.hashesMap,L=t.externals,q=t.name,R=t.version,j=q+":"+R,_="__offline_webpack__data";!function(){Object.keys(U).forEach(function(t){U[t]=U[t].map(function(t){var n=new URL(t,location);return n.hash="",-1===L.indexOf(t)&&(n.search=""),n.toString()})}),Object.keys(P).forEach(function(t){P[t]=P[t].map(function(t){var n=new URL(t,location);return n.hash="",-1===L.indexOf(t)&&(n.search=""),n.toString()})}),E=Object.keys(E).reduce(function(t,n){var e=new URL(E[n],location);return e.search="",e.hash="",t[n]=e.toString(),t},{}),L=L.map(function(t){var n=new URL(t,location);return n.hash="",n.toString()})}();var W=[].concat(U.main,U.additional,U.optional),S=t.navigateFallbackURL,M=t.navigateFallbackForRedirects;self.addEventListener("install",function(t){var n=void 0;n="changed"===O?f("main"):a("main"),t.waitUntil(n)}),self.addEventListener("activate",function(t){var n=e();n=n.then(h),n=n.then(l),n=n.then(function(){if(self.clients&&self.clients.claim)return self.clients.claim()}),t.waitUntil(n)}),self.addEventListener("fetch",function(t){var n=new URL(t.request.url);n.hash="";var e=n.toString();-1===L.indexOf(e)&&(n.search="",e=n.toString());var i="GET"===t.request.method,r=-1!==W.indexOf(e),a=e;if(!r){var c=y(t.request);c&&(a=c,r=!0)}if(!r&&i&&S&&o(t.request))return void t.respondWith(m(fetch(t.request)));if(!r||!i)return void(n.origin!==location.origin&&-1!==navigator.userAgent.indexOf("Firefox/44.")&&t.respondWith(fetch(t.request)));var u=void 0;u="network-first"===k?p(t,e,a):v(t,e,a),S&&o(t.request)&&(u=m(u)),t.respondWith(u)}),self.addEventListener("message",function(t){var n=t.data;if(n)switch(n.action){case"skipWaiting":self.skipWaiting&&self.skipWaiting()}})}(__wpo,{loaders:{},cacheMaps:[]}),t.exports=e(1)},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e(2);e.n(i);self.addEventListener("install",function(t){t.waitUntil(self.skipWaiting())}),self.addEventListener("activate",function(t){t.waitUntil(self.clients.claim())})},function(t,n){var e=function(t,n){return t.replace("%{count}",n)},i=function(t){return self.registration.getNotifications().then(function(n){if(5===n.length){var i={title:e(t.data.message,n.length+1),body:n.sort(function(t,n){return t.timestamp<n.timestamp}).map(function(t){return t.title}).join("\n"),badge:"/badge.png",icon:"/android-chrome-192x192.png",tag:"tag",data:{url:new URL("/web/notifications",self.location).href,count:n.length+1,message:t.data.message}};return n.forEach(function(t){return t.close()}),self.registration.showNotification(i.title,i)}if(1===n.length&&"tag"===n[0].tag){var r=o(n[0]);return r.title=e(r.data.message,r.data.count+1),r.body=t.title+"\n"+r.body,r.data=Object.assign({},r.data,{count:r.data.count+1}),self.registration.showNotification(r.title,r)}return self.registration.showNotification(t.title,t)})},r=function(t){var n=t.data.json();n.body=n.data.nsfw||n.data.content,n.dir=n.data.dir,n.image=n.image||void 0,n.timestamp=n.timestamp&&new Date(n.timestamp);var e=n.data.actions.find(function(t){return"expand"===t.todo});e?(n.actions=[e],n.hiddenActions=n.data.actions.filter(function(t){return t!==e}),n.data.hiddenImage=n.image,n.image=void 0):n.actions=n.data.actions,t.waitUntil(i(n))},o=function(t){var n={};for(var e in t)n[e]=t[e];return n},a=function(t){var n=o(t);return n.body=t.data.content,n.image=t.data.hiddenImage,n.actions=t.data.actions.filter(function(t){return"expand"!==t.todo}),self.registration.showNotification(n.title,n)},c=function(t,n){return fetch(n.action,{headers:{Authorization:"Bearer "+t.data.access_token,"Content-Type":"application/json"},method:n.method,credentials:"include"})},u=function(t){var n=t.find(function(t){return t.focused}),e=t.find(function(t){return"visible"===t.visibilityState});return n||e||t[0]},s=function(t){return self.clients.matchAll({type:"window"}).then(function(n){if(0!==n.length){var e=n.filter(function(t){return/\/web\//.test(t.url)});if(0!==e.length){var i=u(e),r=new URL(t),o=r.pathname;if(o.startsWith("/web/"))return i.focus().then(function(t){return t.postMessage({type:"navigate",path:o.slice("/web/".length-1)})})}else if("navigate"in n[0]){var a=u(n);return a.navigate(t).then(function(t){return t.focus()})}}return self.clients.openWindow(t)})},f=function(t,n){var e=t.actions.filter(function(t){return t.action!==n.action}),i=o(t);return i.actions=e,self.registration.showNotification(i.title,i)},l=function(t){var n=new Promise(function(n,e){if(t.action){var i=t.notification.data.actions.find(function(n){return n.action===t.action});"expand"===i.todo?n(a(t.notification)):"request"===i.todo?n(c(t.notification,i).then(function(){return f(t.notification,i)})):e("Unknown action: "+i.todo)}else t.notification.close(),n(s(t.notification.data.url))});t.waitUntil(n)};self.addEventListener("push",r),self.addEventListener("notificationclick",l)}]);